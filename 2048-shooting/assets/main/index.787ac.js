window.__require=function t(e,n,i){function o(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){return o(e[r][1][t]||t)},u,u.exports,t,e,n,i)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<i.length;r++)o(i[r]);return o}({ADCell2:[function(t,e,n){"use strict";cc._RF.push(e,"de8bccYOMZByYSCDHNhpvCk","ADCell2");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var l,u=i("ADMgr"),d=i("SDKAnalytics"),p=i("AudioMgr");function h(){var t=l.call(this)||this;return t.imgIcon=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(h,l=cc.Component),h.prototype.init=function(t,e){this.data=e,this.location=t,d.default.addExposures(this.location,e),this.node.getChildByName("name").getComponent(cc.Label).string=e.banner_name,u.ADMgr.renderAnimAd(this.imgIcon,e)},h.prototype.onGame=function(){var t=this.data;t&&(p.AudioMgr.button(),d.default.reqBannerClick(this.location,s({},t)))},c([o(cc.Sprite)],h.prototype,"imgIcon",void 0),i=c([i],h),a.default=i,cc._RF.pop()},{}],ADCell:[function(t,e,n){"use strict";cc._RF.push(e,"8339bQjtnJCULthCeH/xjWD","ADCell");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var l,u=i("ADMgr"),d=i("SDKAnalytics"),p=i("AudioMgr");function h(){var t=l.call(this)||this;return t.imgIcon=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(h,l=cc.Component),h.prototype.init=function(t,e){this.data=e,this.location=t,d.default.addExposures(this.location,e),u.ADMgr.renderAnimAd(this.imgIcon,e)},h.prototype.onGame=function(){var t=this.data;t&&(p.AudioMgr.button(),d.default.reqBannerClick(this.location,s({},t)))},c([o(cc.Sprite)],h.prototype,"imgIcon",void 0),i=c([i],h),a.default=i,cc._RF.pop()},{}],ADCrossItem:[function(t,e,n){"use strict";cc._RF.push(e,"51852AncCJN2pFD8PT4jBoJ","ADCrossItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p=i("ADMgr"),h=i("Action"),f=i("AudioMgr"),m=i("SDKAnalytics"),g=i("SDKEnums"),_=i("PlatformUtils"),y=i("SDKTools"),v=i("UserBaseModel");function b(){var t=d.call(this)||this;return t.imgIcon=null,t.ratio=1,t.count=0,t}i=(o=cc._decorator).ccclass,o=o.property,r(b,d=cc.Component),b.prototype.animOut=function(){h.default.playAddAnim(this.node,"anim_game_ADcross_out")},b.prototype.init=function(t,e){return this.location=t,this.ratio=e,this},b.prototype.play=function(t){this.isOpen?(t&&(this.count=0),this.node.active=!0,this.doRunAction()):this.node.active=!1},b.prototype.stop=function(){this.isOpen&&this.node.stopAllActions()},b.prototype.refresh=function(){var t,e=this;this.isOpen?(t=this.dataList)&&t.length?(t=t.pop(),this.data=t,this.setData(t)):this.retList().then(function(t){return t&&e.refresh()}):this.node.active=!1},Object.defineProperty(b.prototype,"isOpen",{get:function(){var t=0!=(t=y.default.getParamsInt(g.OnlineKeys.cross_promotion_abtest,0))&&(1!=t||v.default.I.ID%2!=1);return _.default.isTecent&&y.default.IsCross&&t},enumerable:!0,configurable:!0}),b.prototype.doRunAction=function(){this.node.stopAllActions(),this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.6*this.ratio).easing(cc.easeBackIn()),cc.scaleTo(.5,+this.ratio).easing(cc.easeElasticOut(3)),cc.rotateTo(1/60,5.2),cc.rotateTo(.25,30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,-30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.delayTime(28),cc.callFunc(this.doRefresh,this))))},b.prototype.doRefresh=function(){0!==this.count&&this.refresh(),this.count++},b.prototype.retList=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return[2,new Promise(function(e){p.ADMgr.getList(g.SDKBannerType.TYPE_CROSS).then(function(n){t.dataList=n||[],n&&0!==n.length?e(1):(t.node.active=!1,e(0))})})]})})},b.prototype.setData=function(t){m.default.addExposures(this.location,t),p.ADMgr.renderAnimAd(this.imgIcon,t)},b.prototype.onGame=function(){f.AudioMgr.button(),this.node.stopAllActions(),this.node.rotation=0,this.node.scale=.6*this.ratio,this.node.runAction(cc.sequence(cc.scaleTo(.5,+this.ratio).easing(cc.easeElasticOut(3)),cc.rotateTo(.25,30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,-30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.delayTime(28),cc.callFunc(this.doRunAction,this))),m.default.reqBannerClick(this.location,s({},this.data)),this.refresh()},c([o(cc.Sprite)],b.prototype,"imgIcon",void 0),i=c([i],b),a.default=i,cc._RF.pop()},{}],ADData:[function(t,e,n){"use strict";cc._RF.push(e,"ef8774p/dFAh4/66FdroliC","ADData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){},cc._RF.pop()},{}],ADGrid:[function(t,e,n){"use strict";cc._RF.push(e,"1720dVZGUVNXrh3+zG/+jaS","ADGrid");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p=i("ADMgr"),h=i("SDKTools"),f=i("AudioMgr"),m=i("SDKAnalytics"),g=i("PlatformUtils"),_=i("SDKEnums"),y=i("OnlineMgr");function v(){var t=d.call(this)||this;return t.imgIcons=[],t.imgIcon=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(v,d=cc.Component),v.prototype.init=function(t,e){return void 0===e&&(e=1),this.location=t,this.style=e,this},v.prototype.show=function(){this.isOpen&&(2===this.style?(this.refreshAdBanner(),this.imgIcons.forEach(function(t){return t.node.active=!1})):(this.refreshAdLike(),this.imgIcons.forEach(function(t){return t.node.active=!0})),this.addEvent())},v.prototype.hide=function(){this.isOpen&&(this.removeEvent(),this.node.active=!1)},v.prototype.addEvent=function(){2===this.style&&this.schedule(this.onAdBanerLoop,y.OnlineMgr.GameBanerRefresh)},v.prototype.removeEvent=function(){2===this.style&&this.unschedule(this.onAdBanerLoop)},v.prototype.refreshAdLike=function(){var t,e=this;this.isOpen&&((t=this.dataList)&&t.length?this.renderAdLikeList():this.retList().then(function(t){return t&&e.renderAdLikeList()}))},v.prototype.renderAdLikeList=function(){var t=this;this.node.active=!0,this.dataList.forEach(function(e,n){return t.setData(e,t.imgIcons[n])})},v.prototype.refreshAdBanner=function(){var t,e=this;this.isOpen&&((t=this.dataList)&&t.length?(t=t.pop(),this.data=t,this.setData(t,this.imgIcon)):this.retList().then(function(t){return t&&e.refreshAdBanner()}))},Object.defineProperty(v.prototype,"isOpen",{get:function(){return g.default.isWx&&h.default.IsGuessLike},enumerable:!0,configurable:!0}),v.prototype.retList=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return[2,new Promise(function(e){p.ADMgr.reqList(_.SDKBannerType.TYPE_GRID).then(function(n){n=n.banner_list||[],(t.dataList=n)&&0!==n.length?e(1):(t.node.active=!1,e(0))})})]})})},v.prototype.setData=function(t,e){this.isLoaded=!0,this.node.active=!0,m.default.addExposures(this.location,t),p.ADMgr.renderAnimAd(e,t)},v.prototype.onGame=function(t,e){(e=this.dataList[+e])&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},e)))},v.prototype.onBannerGame=function(){var t=this.data;t&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},t)),this.refreshAdBanner())},v.prototype.onAdBanerLoop=function(){this.isLoaded&&this.refreshAdBanner()},c([o(cc.Sprite)],v.prototype,"imgIcons",void 0),c([o(cc.Sprite)],v.prototype,"imgIcon",void 0),i=c([i],v),a.default=i,cc._RF.pop()},{}],ADLike2:[function(t,e,n){"use strict";cc._RF.push(e,"182782uZ8BJRZh2MWCNbIkH","ADLike2");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p=i("ADMgr"),h=i("SDKTools"),f=i("AudioMgr"),m=i("SDKAnalytics"),g=i("PlatformUtils"),_=i("SDKEnums"),y=i("OnlineMgr"),v=i("ADCell"),b=i("UserBaseModel");function w(){var t=d.call(this)||this;return t.imgIcon=null,t.scrollview=null,t.scrollitem=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(w,d=cc.Component),w.prototype.init=function(t,e){return void 0===e&&(e=1),this.location=t,this.style=e,this},w.prototype.show=function(){this.isOpen&&(2===this.style?(this.refreshAdBanner(),this.scrollview.node.active=!1):(this.refreshAdLike(),this.scrollview.node.active=!0),this.addEvent())},w.prototype.hide=function(){this.isOpen&&(this.removeEvent(),this.node.active=!1)},w.prototype.addEvent=function(){2===this.style&&this.schedule(this.onAdBanerLoop,y.OnlineMgr.GameBanerRefresh)},w.prototype.removeEvent=function(){2===this.style&&this.unschedule(this.onAdBanerLoop)},w.prototype.refreshAdLike=function(){var t,e=this;this.isOpen&&((t=this.dataList)&&t.length?this.renderAdLikeList():this.retList().then(function(t){return t&&e.renderAdLikeList()}))},w.prototype.renderAdLikeList=function(){var t=this;this.node.active=!0,this.scrollview.content.removeAllChildren(),this.dataList.forEach(function(e){var n=cc.instantiate(t.scrollitem);n.getComponent(v.default).init(t.location,e),n.parent=t.scrollview.content})},w.prototype.refreshAdBanner=function(){var t,e=this;this.isOpen&&((t=this.dataList)&&t.length?(t=t.pop(),this.data=t,this.setData(t,this.imgIcon)):this.retList().then(function(t){return t&&e.refreshAdBanner()}))},Object.defineProperty(w.prototype,"isOpen",{get:function(){var t=0!=(t=h.default.getParamsInt(_.OnlineKeys.guess_promotion_abtest,0))&&(1!=t||b.default.I.ID%2!=1);return g.default.isWx&&h.default.IsGuessLike&&t},enumerable:!0,configurable:!0}),w.prototype.retList=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return[2,new Promise(function(e){p.ADMgr.reqList(_.SDKBannerType.TYPE_LIKE).then(function(n){n=n.banner_list||[],(t.dataList=n)&&0!==n.length?e(1):(t.node.active=!1,e(0))})})]})})},w.prototype.setData=function(t,e){this.isLoaded=!0,this.node.active=!0,m.default.addExposures(this.location,t),p.ADMgr.renderAnimAd(e,t)},w.prototype.onGame=function(t,e){(e=this.dataList[+e])&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},e)))},w.prototype.onBannerGame=function(){var t=this.data;t&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},t)),this.refreshAdBanner())},w.prototype.onAdBanerLoop=function(){this.isLoaded&&this.refreshAdBanner()},c([o(cc.Sprite)],w.prototype,"imgIcon",void 0),c([o(cc.ScrollView)],w.prototype,"scrollview",void 0),c([o(cc.Prefab)],w.prototype,"scrollitem",void 0),i=c([i],w),a.default=i,cc._RF.pop()},{}],ADLikeGrid:[function(t,e,n){"use strict";cc._RF.push(e,"255aeQ4GapK9bpLPrUnoFXG","ADLikeGrid");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p=i("ADMgr"),h=i("SDKTools"),f=i("AudioMgr"),m=i("SDKAnalytics"),g=i("PlatformUtils"),_=i("SDKEnums"),y=i("OnlineMgr"),v=i("ADCell2");function b(){var t=d.call(this)||this;return t.imgIcon=null,t.scrollview=null,t.scrollitem=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(b,d=cc.Component),b.prototype.init=function(t,e){return void 0===e&&(e=1),this.location=t,this.style=e,this},b.prototype.show=function(){this.isOpen&&(2===this.style?(this.refreshAdBanner(),this.scrollview.node.active=!1):(this.refreshAdLike(),this.scrollview.node.active=!0),this.addEvent())},b.prototype.hide=function(){this.isOpen&&(this.removeEvent(),this.node.active=!1)},b.prototype.addEvent=function(){2===this.style&&this.schedule(this.onAdBanerLoop,y.OnlineMgr.GameBanerRefresh)},b.prototype.removeEvent=function(){2===this.style&&this.unschedule(this.onAdBanerLoop)},b.prototype.refreshAdLike=function(){var t,e=this;this.isOpen&&((t=this.dataList)&&t.length?this.renderAdLikeList():this.retList().then(function(t){return t&&e.renderAdLikeList()}))},b.prototype.renderAdLikeList=function(){var t=this;this.node.active=!0,this.scrollview.content.removeAllChildren(),this.dataList.forEach(function(e){var n=cc.instantiate(t.scrollitem);n.getComponent(v.default).init(t.location,e),n.parent=t.scrollview.content})},b.prototype.refreshAdBanner=function(){var t,e=this;this.isOpen&&((t=this.dataList)&&t.length?(t=t.pop(),this.data=t,this.setData(t,this.imgIcon)):this.retList().then(function(t){return t&&e.refreshAdBanner()}))},Object.defineProperty(b.prototype,"isOpen",{get:function(){return g.default.isWx&&h.default.IsGuessLike},enumerable:!0,configurable:!0}),b.prototype.retList=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return[2,new Promise(function(e){p.ADMgr.reqList(_.SDKBannerType.TYPE_LIST).then(function(n){n=n.banner_list||[],(t.dataList=n)&&0!==n.length?e(1):(t.node.active=!1,e(0))})})]})})},b.prototype.setData=function(t,e){this.isLoaded=!0,this.node.active=!0,m.default.addExposures(this.location,t),p.ADMgr.renderAnimAd(e,t)},b.prototype.onGame=function(t,e){(e=this.dataList[+e])&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},e)))},b.prototype.onBannerGame=function(){var t=this.data;t&&(f.AudioMgr.button(),m.default.reqBannerClick(this.location,s({},t)),this.refreshAdBanner())},b.prototype.onAdBanerLoop=function(){this.isLoaded&&this.refreshAdBanner()},c([o(cc.Sprite)],b.prototype,"imgIcon",void 0),c([o(cc.ScrollView)],b.prototype,"scrollview",void 0),c([o(cc.Prefab)],b.prototype,"scrollitem",void 0),i=c([i],b),a.default=i,cc._RF.pop()},{}],ADLikeScroll:[function(t,e,n){"use strict";cc._RF.push(e,"048d94bzndPXI3+y8lRPRL1","ADLikeScroll");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p=i("ADCell"),h=i("ADMgr"),f=i("SDKTools"),m=i("AudioMgr"),g=i("SDKAnalytics"),_=i("PlatformUtils"),y=i("SDKEnums");function v(){var t=d.call(this)||this;return t.imgIcon=null,t.scrollview=null,t.scrollitem=null,t.nodeBg=null,t.nodeBtns=null,t.offsetBtnY=0,t}i=(o=cc._decorator).ccclass,o=o.property,r(v,d=cc.Component),v.prototype.onLoad=function(){this.nodeBtns&&(this.nodeBtns.active=!1)},v.prototype.init=function(t){return this.location=t,this.initBtns(),this},v.prototype.show=function(){this.isOpen&&(this.toggleBg(!0),this.refreshAdLike(),this.scrollview.node.active=!0)},v.prototype.hide=function(){this.isOpen&&(this.toggleBg(!1),this.scrollview.node.active=!1)},v.prototype.initBtns=function(){var t;this.nodeBtns&&(t=Math.max(0,cc.winSize.height/2-667),this.nodeBtns.y=this.offsetBtnY+Math.min(100,t),this.nodeBtns.active=!0)},v.prototype.refreshAdLike=function(){var t,e=this;this.isOpen&&((t=this.dataList)&&t.length?this.renderAdLikeList():this.retList().then(function(t){return t&&e.renderAdLikeList()}))},v.prototype.renderAdLikeList=function(){var t=this;this.toggleBg(!0),this.scrollview.content.removeAllChildren(),this.dataList.forEach(function(e){var n=cc.instantiate(t.scrollitem);n.getComponent(p.default).init(t.location,e),n.parent=t.scrollview.content})},Object.defineProperty(v.prototype,"isOpen",{get:function(){return _.default.isWx&&f.default.IsGuessLike},enumerable:!0,configurable:!0}),v.prototype.retList=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return[2,new Promise(function(e){h.ADMgr.reqList(y.SDKBannerType.TYPE_LIKE).then(function(n){n=n.banner_list||[],(t.dataList=n)&&0!==n.length?e(1):(t.toggleBg(!1),e(0))})})]})})},v.prototype.toggleBg=function(t){this.nodeBg.active=t},v.prototype.onGame=function(t,e){(e=this.dataList[+e])&&(m.AudioMgr.button(),g.default.reqBannerClick(this.location,s({},e)))},c([o(cc.Sprite)],v.prototype,"imgIcon",void 0),c([o(cc.ScrollView)],v.prototype,"scrollview",void 0),c([o(cc.Prefab)],v.prototype,"scrollitem",void 0),c([o(cc.Node)],v.prototype,"nodeBg",void 0),c([o(cc.Node)],v.prototype,"nodeBtns",void 0),c([o],v.prototype,"offsetBtnY",void 0),i=c([i],v),a.default=i,cc._RF.pop()},{}],ADLike:[function(t,e,n){"use strict";cc._RF.push(e,"91648LEJ39O547NKdnugYZh","ADLike");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p=i("ADCell"),h=i("ADMgr"),f=i("SDKTools"),m=i("Enum"),g=i("AudioMgr"),_=i("SDKAnalytics"),y=i("OnlineMgr"),v=i("PlatformUtils"),b=i("SDKEnums"),w=i("UserBaseModel");function S(){var t=d.call(this)||this;return t.imgIcon=null,t.scrollview=null,t.scrollitem=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(S,d=cc.Component),S.prototype.init=function(t,e){return void 0===e&&(e=1),this.location=t,this.style=e,this},S.prototype.show=function(){this.isOpen?(2===this.style?(this.refreshAdBanner(),this.scrollview.node.active=!1):(this.refreshAdLike(),this.scrollview.node.active=!0),this.addEvent()):this.node.active=!1},S.prototype.hide=function(){this.isOpen&&this.removeEvent(),this.node.active=!1},S.prototype.setOffset=function(t){this.node.y=t,this.offsetY=t},S.prototype.animWith=function(t){var e,n,i=this;switch(t){case m.ComAction.Init:return e=this.offsetY-250,this.node.y=e,Promise.resolve();case m.ComAction.Enter:return new Promise(function(t){e=i.offsetY-250,n=i.offsetY,i.node.y=e,cc.tween(i.node).stop(),cc.tween(i.node).to(20/60,{y:n}).call(function(){return t()}).start()});case m.ComAction.Out:return new Promise(function(t){e=i.offsetY,n=i.offsetY-250,i.node.y=e,cc.tween(i.node).stop(),cc.tween(i.node).to(20/60,{y:n}).call(function(){return t()}).start()})}},S.prototype.addEvent=function(){2===this.style&&this.schedule(this.onAdBanerLoop,y.OnlineMgr.GameBanerRefresh)},S.prototype.removeEvent=function(){2===this.style&&this.unschedule(this.onAdBanerLoop)},S.prototype.refreshAdLike=function(){var t,e=this;this.isOpen?(t=this.dataList)&&t.length?this.renderAdLikeList():this.retList().then(function(t){return t&&e.renderAdLikeList()}):this.node.active=!1},S.prototype.renderAdLikeList=function(){var t=this;this.node.active=!0,this.scrollview.content.removeAllChildren(),this.dataList.forEach(function(e){var n=cc.instantiate(t.scrollitem);n.getComponent(p.default).init(t.location,e),n.parent=t.scrollview.content})},S.prototype.refreshAdBanner=function(){var t,e=this;this.isOpen?(t=this.dataList)&&t.length?(t=t.pop(),this.data=t,this.setData(t,this.imgIcon)):this.retList().then(function(t){return t&&e.refreshAdBanner()}):this.node.active=!1},Object.defineProperty(S.prototype,"isOpen",{get:function(){var t=0!=(t=f.default.getParamsInt(b.OnlineKeys.guess_promotion_abtest,0))&&(1!=t||w.default.I.ID%2!=1);return v.default.isWx&&f.default.IsGuessLike&&t},enumerable:!0,configurable:!0}),S.prototype.retList=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return[2,new Promise(function(e){h.ADMgr.reqList(b.SDKBannerType.TYPE_HEADER).then(function(n){n=n.banner_list||[],(t.dataList=n)&&0!==n.length?e(1):(t.node.active=!1,e(0))})})]})})},S.prototype.setData=function(t,e){this.isLoaded=!0,this.node.active=!0,_.default.addExposures(this.location,t),h.ADMgr.renderAnimAd(e,t)},S.prototype.onGame=function(t,e){(e=this.dataList[+e])&&(g.AudioMgr.button(),_.default.reqBannerClick(this.location,s({},e)))},S.prototype.onBannerGame=function(){var t=this.data;t&&(g.AudioMgr.button(),_.default.reqBannerClick(this.location,s({},t)),this.refreshAdBanner())},S.prototype.onAdBanerLoop=function(){this.isLoaded&&this.refreshAdBanner()},c([o(cc.Sprite)],S.prototype,"imgIcon",void 0),c([o(cc.ScrollView)],S.prototype,"scrollview",void 0),c([o(cc.Prefab)],S.prototype,"scrollitem",void 0),i=c([i],S),a.default=i,cc._RF.pop()},{}],ADMgr:[function(t,e,n){"use strict";cc._RF.push(e,"efc74R2/tBFmbHWEKUUJsT2","ADMgr");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("LoadPlist"),r=i("ArrayUtils"),s=i("EventMgr"),c=i("SDKAnalytics"),l=i("EventEnum"),u=i("SDKEnums"),d=i("Action");function p(){this.adShowList=[],this.adLessList=[],this.animFrames={}}p.prototype.getList=function(t){var e=this;return void 0===t&&(t=u.SDKBannerType.TYPE_LIKE),new Promise(function(n){e.adShowList.length?n(e.adShowList.slice()):e.reqList(t).then(function(t){t=t.banner_list||[],t=r.default.shuffle(t),e.adShowList=t.slice(0),e.adLessList=t.slice(4),n(e.adShowList.slice())})})},p.prototype.update=function(t){var e;"number"!=typeof t||(e=this.adLessList.shift())&&(this.adShowList[t]=e,s.EventMgr.emit(l.EventEnum.SDKADUpdate,{index:t,data:this.adShowList.slice()}))},p.prototype.renderAnimAd=function(t,e){var n=this,i=e.banner_icon,o=e.banner_bone,r=e.banner_bone_info;return new Promise(function(e){var s,c,l,u,d,p;o+""=="1"&&r?(s=r.banner_bone_img,c=r.banner_bone_sk,(l=n.animFrames[c])&&l.length?n.playAnimFrames(t,l,e):(u=c.substring(0,c.lastIndexOf("/")),d=c.substring(c.lastIndexOf("/")+1),p=s.substring(s.lastIndexOf("/")+1),a.default.I.load(u,d,p,function(i,o){!i&&o&&(l=o.getSpriteFrames(),n.animFrames[c]=l,n.playAnimFrames(t,l,e))}))):(p=void 0,p=0<=i.indexOf(".jpg")||0<=i.indexOf(".jpeg")?"jpg":"png",cc.loader.load({url:i,type:p},function(e,n){!e&&cc.isValid(t)&&(t.spriteFrame=new cc.SpriteFrame(n))}),e(null))})},p.prototype.playAnimFrames=function(t,e,n){if(!cc.isValid(t))return n(null);var i=(i=t.getComponent(cc.Animation))||t.addComponent(cc.Animation);d.default.stopAnim(t.node,"anim_001"),t=e[e.length-1],e=e.concat([t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]),(e=cc.AnimationClip.createWithSpriteFrames(e,e.length)).name="anim_001",e.speed=.3,e.sample=30,e.wrapMode=cc.WrapMode.Loop,i.addClip(e),i.play("anim_001"),n(i)},p.prototype.reqList=function(t){return c.default.reqBannerList(t)},Object.defineProperty(p,"I",{get:function(){return this._instance||(this._instance=new p)},enumerable:!0,configurable:!0}),p._instance=null,i=p,o.default=i,o.ADMgr=i.I,cc._RF.pop()},{}],ActBtnAni:[function(t,e,n){"use strict";cc._RF.push(e,"369c4fvvtxOm6P81YbU1BTy","ActBtnAni");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c=cc._decorator;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.max=30,t.time=0,t}i=c.ccclass,c.property,a(l,s=cc.Component),l.prototype.start=function(){},l.prototype.update=function(t){this.time>=this.max&&(this.node.getComponent(dragonBones.ArmatureDisplay).playAnimation("run",1),this.time=0),this.time+=t},i=r([i],l),o.default=i,cc._RF.pop()},{}],Action:[function(t,e,n){"use strict";cc._RF.push(e,"1e7f7mRoHBLWK/umEgxmUr9","Action");var i=t,o=n,a=__AWAITER__,r=__GENERATOR__;Object.defineProperty(o,"__esModule",{value:!0});var s=i("Water"),c=i("StringUtils");function l(){}l.stopAnim=function(t,e){return new Promise(function(n){if(!cc.isValid(t))return n(null);var i=t.getComponent(cc.Animation);if(!i)return n(null);var o=i.play(e,0);return i.sample(e),i.stop(),n(o)})},l.playAnim=function(t,e,n,i){return this.playWithNode(t,e,!1,n=void 0===n?0:n,i=void 0===i?0:i)},l.playAddAnim=function(t,e,n,i){return this.playWithNode(t,e,!0,n=void 0===n?0:n,i=void 0===i?0:i)},l.playWithNode=function(t,e,n,i,o){return void 0===i&&(i=0),void 0===o&&(o=0),new Promise(function(a){if(!cc.isValid(t))return a(null);var r=t.getComponent(cc.Animation);if(!r)return a(null);var s=n?r.playAdditive(e,o):r.play(e,o);r.once(cc.Animation.EventType.FINISHED,function(){1==i?t.active=!1:2==i&&cc.isValid(t,!0)&&t.destroy(),a(s)})})},l.asyncAction=function(t,e){return new Promise(function(n){t.runAction(cc.sequence(e,cc.callFunc(n)))})},l.asyncRepeatAction=function(t,e,n){return void 0===n&&(n=3),new Promise(function(i){t.runAction(cc.repeat(cc.sequence(e,cc.callFunc(function(){return i()})),n))})},l.bezier=function(t,e,n,i,o,s){return void 0===e&&(e=1),void 0===s&&(s=.2),a(this,void 0,void 0,function(){var a;return r(this,function(r){switch(r.label){case 0:a=0,r.label=1;case 1:return a<e?[4,this.asyncAction(t,this.bezierTo(s,n,i,o))]:[3,4];case 2:r.sent(),r.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},l.bezierwitheasing=function(t,e,n,i,o,s){return void 0===e&&(e=1),void 0===s&&(s=.2),a(this,void 0,void 0,function(){var a;return r(this,function(r){switch(r.label){case 0:a=0,r.label=1;case 1:return a<e?[4,this.asyncAction(t,this.bezierTo(s,n,i,o))]:[3,4];case 2:r.sent(),r.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},l.blink=function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=.2),a(this,void 0,void 0,function(){var i;return r(this,function(o){switch(o.label){case 0:i=0,o.label=1;case 1:return i<e?[4,this.asyncAction(t,cc.sequence(cc.fadeTo(n,125),cc.fadeTo(n,255)))]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},l.swing=function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=.2),a(this,void 0,void 0,function(){var i;return r(this,function(o){switch(o.label){case 0:i=0,o.label=1;case 1:return i<e?[4,this.asyncAction(t,cc.sequence(cc.rotateTo(n,15),cc.rotateTo(n,-15)))]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},l.clash=function(t,e,n,i,o){return void 0===i&&(i=1),void 0===o&&(o=.2),a(this,void 0,void 0,function(){var a;return r(this,function(r){switch(r.label){case 0:a=0,r.label=1;case 1:return a<i?[4,this.asyncAction(t,cc.sequence(cc.moveTo(o,e),cc.moveTo(o,n)))]:[3,4];case 2:r.sent(),r.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},l.scale=function(t,e,n,i){return void 0===n&&(n=1),void 0===i&&(i=.2),a(this,void 0,void 0,function(){var o;return r(this,function(a){switch(a.label){case 0:o=0,a.label=1;case 1:return o<n?[4,this.asyncAction(t,cc.sequence(cc.scaleTo(i,e),cc.scaleTo(i,1)))]:[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},l.color=function(t,e,n,i){return void 0===e&&(e=1),void 0===i&&(i=.2),a(this,void 0,void 0,function(){var o,a;return r(this,function(r){switch(r.label){case 0:o=t.color,a=0,r.label=1;case 1:return a<e?[4,this.asyncAction(t,cc.sequence(cc.tintTo(i,n.getR(),n.getG(),n.getB()),cc.tintTo(i,o.getR(),o.getG(),o.getB())))]:[3,4];case 2:r.sent(),r.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},l.fade=function(t,e,n,i){return void 0===e&&(e=1),void 0===i&&(i=.2),a(this,void 0,void 0,function(){var o;return r(this,function(a){switch(a.label){case 0:o=0,a.label=1;case 1:return o<e?[4,this.asyncAction(t,cc.sequence(cc.fadeTo(i,255*n),cc.fadeTo(i,255)))]:[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},l.intercut=function(t,e,n){return void 0===n&&(n=.5),a(this,void 0,void 0,function(){return r(this,function(){return t.string=e,t.node.active=!0,t.node.x=-720,t.node.runAction(cc.sequence(cc.moveTo(n,0,t.node.position.y),cc.delayTime(2*n),cc.moveTo(n,720,t.node.position.y),cc.callFunc(function(){t.node.active=!1}))),[2]})})},l.labelNumber=function(t,e,n,i,o,l,u){return void 0===u&&(u=0),a(this,void 0,void 0,function(){var a,d,p;return r(this,function(r){switch(r.label){case 0:return a=n,t.string=c.default.stringFormat(e,n),p=i-n,d=Math.ceil(p/(o/l)),p=i<n?function(){return a<=i}:function(){return i<=a},0<u?[4,s.default.wait(u)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[4,s.default.wait(l)];case 3:return r.sent(),a+=d,t.isValid?p()?(a=i,t.string=c.default.stringFormat(e,n),[3,4]):(t.string=c.default.stringFormat(e,n),[3,2]):[3,4];case 4:return[2]}})})},l.moveTo=function(t,e,n){return void 0===e&&(e=1),t=cc.moveTo(e,t),null!=n&&t.easing(n),t},l.moveBy=function(t,e,n){return void 0===e&&(e=1),t=cc.moveBy(e,t),null!=n&&t.easing(n),t},l.scaleTo=function(t,e,n,i){return e=null!=n?cc.scaleTo(t,e,n):cc.scaleTo(t,e),null!=i&&e.easing(i),e},l.scaleBy=function(t,e,n,i){return e=null!=n?cc.scaleBy(t,e,n):cc.scaleBy(t,e),null!=i&&e.easing(i),e},l.rotateTo=function(t,e){return cc.rotateTo(t,e)},l.fadeIn=function(t){return void 0===t&&(t=1),cc.fadeIn(t)},l.fadeOut=function(t){return void 0===t&&(t=1),cc.fadeOut(t)},l.place=function(t){return cc.place(t)},l.bezierTo=function(t,e,n,i){return i=[e,n,i],cc.bezierTo(t,i)},l.sequence=function(t){return cc.sequence(t)},l.repeat=function(t,e){return cc.repeat(t,e)},l.repeatForever=function(t){return cc.repeatForever(t)},l.spawn=function(t){return cc.spawn(t)},l.creatCallFunc=function(t,e,n){return cc.callFunc(t,e,n)},l.shakeEffect=function(t,e){t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.02,cc.v2(5,7)),cc.moveTo(.02,cc.v2(-6,7)),cc.moveTo(.02,cc.v2(-13,3)),cc.moveTo(.02,cc.v2(3,-6)),cc.moveTo(.02,cc.v2(-5,5)),cc.moveTo(.02,cc.v2(2,-8)),cc.moveTo(.02,cc.v2(-8,-10)),cc.moveTo(.02,cc.v2(3,10)),cc.moveTo(.02,cc.v2(0,0))))),setTimeout(function(){t.stopAllActions(),t.setPosition(0,0)},1e3*e)},i=l,o.default=i,cc._RF.pop()},{}],ActivePopwin:[function(t,e,n){"use strict";cc._RF.push(e,"8ba44hjiqVKCbdg68oT0gD4","ActivePopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p,h=i("Action"),f=i("BasePopwin"),m=i("AudioMgr"),g=i("OnlineMgr"),_=i("BattleMgr"),y=i("DataMgr"),v=i("Display"),b=i("SDKTools"),w=i("ViewMgr"),S=i("FeedbackPopwin"),M=i("SDKEnums"),C=i("CheckTools"),P=i("SDKAnalytics");function A(){var t=null!==d&&d.apply(this,arguments)||this;return t.isclose=!1,t.btnFeedback=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(A,d=f.default),(p=A).prototype.onOpen=function(t){d.prototype.onOpen.call(this,t),0==_.default.I.m_Type?this.node.getChildByName("content").getChildByName("bg").getChildByName("active").getChildByName("btn_classic").getComponent(cc.Animation).play("anim_active_challenge"):this.node.getChildByName("content").getChildByName("bg").getChildByName("active").getChildByName("btn_classic").getComponent(cc.Animation).play("anim_active_classic"),this.node.getChildByName("content").getChildByName("bg").getChildByName("active").getChildByName("btn_invite").active=0<=y.DataMgr.User.ActInviteTime,this.node.getChildByName("content").getChildByName("bg").getChildByName("active").getChildByName("btn_water").active=C.default.IswatermelonOpen},A.prototype.onOpend=function(){d.prototype.onOpend.call(this),P.default.event(M.EventKeys.melon_activity_show,""),this.isclose=!1},A.prototype.onClose=function(){d.prototype.onClose.call(this),b.default.destoryUserBtn("act")},A.prototype.onTouchMask=function(){this.onBack()},Object.defineProperty(A.prototype,"BannerOpen",{get:function(){return g.OnlineMgr.getBanner(p.PREFAB_PATH)},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"BannerUid",{get:function(){return this.BannerOpen?g.OnlineMgr.getAdByType(g.AdType.BannerCommon):null},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"BannerType",{get:function(){return 3},enumerable:!0,configurable:!0}),A.prototype.addEvent=function(){d.prototype.addEvent.call(this)},A.prototype.removeEvent=function(){d.prototype.removeEvent.call(this)},A.prototype.openAnim=function(){return h.default.playAnim(this.node.getChildByName("content"),"anim_active_out")},A.prototype.closeAnim=function(){return h.default.playAnim(this.node.getChildByName("content"),"anim_active_in")},A.prototype.initUI=function(){},A.prototype.checkLoadBanner=function(){this.loadBanner()},A.prototype.doInitOpen=function(){},A.prototype.initFeedback=function(t){t=v.default.getRectSize(t),s({},t,{borderRadius:4})},A.prototype.onHide=function(){},A.prototype.onShow=function(){},A.prototype.onBack=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return this.isclose||(this.isclose=!0,m.AudioMgr.button(),this.hideBanner(),this.closeAnim().then(function(){return t.doClose(p)})),[2]})})},A.prototype.onNomal=function(){m.AudioMgr.button(),_.default.I.onModel(),this.doClose(p)},A.prototype.onActInvite=function(){_.default.I.onInviteAct(),this.doClose(p)},A.prototype.onwatermelon=function(){m.AudioMgr.button(),v.default.PersistNode.loadToGamewatermelon(),P.default.event(M.EventKeys.melon_activity_tap,""),this.doClose(p)},A.prototype.onFeedback=function(){m.AudioMgr.button(),w.ViewMgr.openPopwin(S.default),this.doClose(p)},A.prototype.onAnimationEnd=function(){this.doInitOpen()},A.prototype.handleClose=function(){this.doClose(p)},A.PREFAB_PATH="prefab/popwin/popwin_active",c([o(cc.Node)],A.prototype,"btnFeedback",void 0),i=p=c([i],A),a.default=i,cc._RF.pop()},{}],AldTools:[function(t,e,n){"use strict";cc._RF.push(e,"4b83fQKdNNHGYk2k/eO80Ia","AldTools");var i=e,o=n;function a(){}Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(a,"isSupported",{get:function(){return"object"==typeof wx&&"object"==typeof wx.aldStage},enumerable:!0,configurable:!0}),a.checkNormal=function(t,e){return this.isSupported?t():e},a.checkPromise=function(t,e){return void 0===e&&(e=Promise.resolve()),this.checkNormal(t,e)},a.onStart=function(t,e,n){this.checkNormal(function(){return wx.aldStage.onStart({stageId:t,stageName:e,userId:n})})},a.onRunning=function(t,e,n,i,o){this.checkNormal(function(){return wx.aldStage.onRunning({stageId:t,stageName:e,userId:n,event:i.toString(),params:o})})},a.onEnd=function(t,e,n,i){this.checkNormal(function(){return wx.aldStage.onEnd({stageId:t,stageName:e,userId:n,event:i.toString()})})},o.default=i=a,(i=o.AldRuningEvent||(o.AldRuningEvent={})).PayStart="payStart",i.PaySuccess="paySuccess",i.PayFail="payFail",i.Tools="tools",i.Revive="revive",i.Award="award",(o=o.AldEndEvent||(o.AldEndEvent={})).Complete="complete",o.Fail="fail",cc._RF.pop()},{}],Api:[function(t,e,n){"use strict";cc._RF.push(e,"90f85hSjjNCCYEQPDSweWFa","Api");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("Const"),c=i("HandleData"),l=i("SDKTools"),u=i("DataMgr"),d=i("Display");function p(){}p.reqGetWxADisShow=function(){return p.getWxAdisShow({})},p.reqAddWxADShowTimes=function(){return p.addWxAdShowTimes({}).then(function(t){d.default.s_isShowWxAd=t.wxyx_data.is_show}).catch(function(){d.default.s_isShowWxAd=0})},p.reqGetInviteNum=function(){return p.getinviteNum({})},p.reqgetMissionReward=function(t){return p.getMissionReward({id:t})},p.reqExchangeGold=function(t,e){return p.exchangeGold({id:t,is_double:e})},p.reqGetBubbleReward=function(t,e){return p.getBubbleReward({id:t,is_double:e})},p.reqSaveData=function(t,e){return p.saveData({field:t,value:e})},p.post=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return new Promise(function(i,o){var a;n=e.buildParams.apply(e,n),"object"==typeof PCSDK?(a=PCSDK.http).post.apply(a,[l.default.GameApi+"/"+t].concat(n)).then(function(t){c.default.doSuccess(t),i(t)}).catch(function(t){c.default.doFailure(t),o(t)}):i({})})},p.buildParams=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0];return n=a({},n,{token:l.default.Token,version:s.default.Version}),t[0]=n,t},p.saveData=function(t){return p.post(r.SaveData,t)},p.saveScore=function(t){return p.post(r.SaveScore,t)},p.signList=function(t){return p.post(r.SignList,t)},p.signReceived=function(t){return p.post(r.SginReceived,t)},p.worldRank=function(t){return p.post(r.WorldRank,t)},p.exchangeData=function(t){return p.post(r.ExchangeData,t)},p.getBubbleReward=function(t){return p.post(r.GetBubbleReward,t)},p.getMission=function(t){return p.post(r.GetMission,t)},p.exchangeGold=function(t){return p.post(r.ExchangeGold,t)},p.getMissionReward=function(t){return p.post(r.GetMissionReward,t)},p.getKfResources=function(t){return p.post(r.GetKFResouces,t)},p.getListByInvite=function(t){return p.post(r.GetListByInvite,t)},p.setInviteFriend=function(t){return p.post(r.SetInviteFriend,t)},p.receivedByInvite=function(t){return p.post(r.ReceivedByInvite,t)},p.getinviteNum=function(t){return p.post(r.GetInviteNum,t)},p.getWxAdisShow=function(t){return p.post(r.GetisShowWxAd,t)},p.getlighttipdata=function(t){return p.post(r.GetTipData,t)},p.addWxAdShowTimes=function(t){return p.post(r.AddWxAdShowTimes,t)},p.getCPSHashHmac=function(t){return p.post(r.CPSHashHmac,t)},p.testAllUser=function(){"object"==typeof wx&&PCSDK.http.get("https://pre-2048ball.quzzgames.com/v1.0/test/batchDel?sign=WFVQmhkFJvWG14dl8VKbFZ6lhJaktIUnZh")},p.testSelfUser=function(){"object"==typeof wx&&PCSDK.http.get("https://pre-2048ball.quzzgames.com/v1.0/test/db?sign=WFVQmhkFJvWG14dl8VKbFZ6lhJaktIUnZh&openid="+u.DataMgr.UserBase.UserOpenId)},i=p,o.default=i,(i=r=r||{}).Env="env/index",i.Test="test/delUser",i.GetData="data/getData",i.SaveData="data/saveData",i.SignList="userSign/index",i.SaveScore="data/saveScore",i.WorldRank="user/worldRank",i.SginReceived="userSign/received",i.ExchangeData="net/index",i.GetBubbleReward="net/receivedByBubble",i.GetMission="net/getTaskList",i.ExchangeGold="net/exchangeByScore",i.GetMissionReward="net/receivedByTask",i.GetListByInvite="invite/getListByInvite",i.SetInviteFriend="invite/setInviteFriend",i.ReceivedByInvite="invite/receivedByInvite",i.GetKFResouces="user/getKfResources",i.GetInviteNum="user/getRealtimeInfos",i.AddWxAdShowTimes="limit/addWxYouxIconShow",i.GetisShowWxAd="limit/checkWxYouxIconShow",i.CPSHashHmac="limit/cpsHashHmac",i.GetTipData="user/radio",cc._RF.pop()},{}],AppDataMgr:[function(t,e,n){"use strict";cc._RF.push(e,"ed433mei6xPwbywCWXzAHf8","AppDataMgr");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("ArrayUtils"),r=i("StringUtils");function s(){this.data={},this.lockArr=[]}s.prototype.lock=function(t){this.lockArr.push(t)},s.prototype.unlock=function(t){a.default.removeFromArr(this.lockArr,t)},s.prototype.set=function(t,e){0<=this.lockArr.indexOf(t)||(this.data[t]=e)},s.prototype.get=function(t,e){return r.default.isEmpty(this.data[t])?1<arguments.length?e:null:this.data[t]},Object.defineProperty(s,"I",{get:function(){return this._instance||(this._instance=new s)},enumerable:!0,configurable:!0}),s._instance=null,i=s,o.default=i,o.AppDataMgr=i.I,cc._RF.pop()},{}],ArrayUtils:[function(t,e,n){"use strict";cc._RF.push(e,"048833IzgVO74XY3l2fG2n9","ArrayUtils");var i=n,o=__AWAITER__,a=__GENERATOR__;function r(){}Object.defineProperty(i,"__esModule",{value:!0}),r.removeFromArr=function(t,e){e=t.indexOf(e),t.splice(e,1)},r.shuffle=function(t){return t.sort(function(){return Math.random()-.5})},r.indexOf=function(t,e,n){for(var i=0;i<t.length;i++)if(e.call(n,t[i],i))return i;return-1},r.each=function(t,e,n){if("function"!=typeof e)throw new TypeError;for(var i=0,o=t.length;i<o&&!e.call(n,t[i],i,t);i++);},r.queue=function(t){return o(this,void 0,void 0,function(){var e,n,i;return a(this,function(o){switch(o.label){case 0:e=null,n=0,i=t,o.label=1;case 1:return n<i.length?[4,(0,i[n])(e)]:[3,4];case 2:e=o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[4,e];case 5:return[2,o.sent()]}})})},r.getRandomArray=function(t,e){for(var n,i,o=t.slice(0),a=t.length,r=a-e;a-- >r;)n=o[i=Math.floor((a+1)*Math.random())],o[i]=o[a],o[a]=n;return o.slice(r)},r.isContained=function(t,e){if(!(t instanceof Array&&e instanceof Array))return!1;if(t.length<e.length)return!1;for(var n=0,i=e.length;n<i;n++)if(-1===t.indexOf(e[n]))return!1;return!0},i.default=r,cc._RF.pop()},{}],AudioEnum:[function(t,e,n){"use strict";cc._RF.push(e,"dd6f0iAvo5EIa7vZrb+yd4u","AudioEnum");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),(i=i.AudioEnum||(i.AudioEnum={}))[i.ku=0]="ku",i[i.bgm=1]="bgm",i[i.over=2]="over",i[i.down=3]="down",i[i.click=4]="click",i[i.timer=5]="timer",i[i.olink=6]="olink",i[i.henhao=7]="henhao",i[i.wanmei=8]="wanmei",i[i.select=9]="select",i[i.reward=10]="reward",i[i.popstar=11]="popstar",i[i.chaoshen=12]="chaoshen",i[i.taixiule=13]="taixiule",i[i.fireworks01=14]="fireworks01",i[i.fireworks02=15]="fireworks02",i[i.fireworks03=16]="fireworks03",i[i.passchapter=17]="passchapter",i[i.startchapter=18]="startchapter",i[i.level_up=19]="level_up",i[i.bgm1=20]="bgm1",i[i.bgm2=21]="bgm2",i[i.bgm3=22]="bgm3",i[i.AD_show=23]="AD_show",i[i.Pop_1=24]="Pop_1",i[i.Pop_2=25]="Pop_2",i[i.Pop_3=26]="Pop_3",i[i.Pop_4=27]="Pop_4",i[i.Pop_5=28]="Pop_5",i[i.Ball_Drop=29]="Ball_Drop",i[i.Ball_Bounce=30]="Ball_Bounce",i[i.music2=31]="music2",i[i.music3=32]="music3",i[i.lottery_swift=33]="lottery_swift",i[i.congrats=34]="congrats",i[i.coins_get=35]="coins_get",i[i.fly=36]="fly",i[i.prop_hammer=37]="prop_hammer",i[i.skill_use=38]="skill_use",i[i.function_unlock=39]="function_unlock",i[i.tar_ball_lock=40]="tar_ball_lock",i[i.tar_ball_get=41]="tar_ball_get",i[i.gift_notice=42]="gift_notice",i[i.star_fly_start=43]="star_fly_start",i[i.star_fly_end=44]="star_fly_end",i[i.sound_merge1=45]="sound_merge1",i[i.sound_merge2=46]="sound_merge2",i[i.sound_touch_floor=47]="sound_touch_floor",cc._RF.pop()},{}],AudioMgr:[function(t,e,n){"use strict";cc._RF.push(e,"f1937PqV19L87MVVyKLqwts","AudioMgr");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("WxAudio"),r=i("CCAudio"),s=i("AudioEnum"),c=i("DataMgr");function l(){"object"==typeof wx?this.audioCtrl=new a.default:this.audioCtrl=new r.default}l.prototype.playBgm=function(t){this.isMusicOpen()&&(this.IsPlayMusic?this.resumeMusic():this.playMusic(t,!0))},Object.defineProperty(l.prototype,"musicMuted",{set:function(t){this.audioCtrl.muted=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"soundMuted",{set:function(t){this.audioCtrl.muted=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"IsPlayMusic",{get:function(){return this.isPlayMusic},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"MusicVolum",{set:function(t){cc.audioEngine.setMusicVolume(t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"SoundVolum",{set:function(t){cc.audioEngine.setEffectsVolume(t)},enumerable:!0,configurable:!0}),l.prototype.playMusic=function(t,e){void 0===e&&(e=!0),this.isMusicOpen()&&(this.MusicVolum=.5,this.isPlayMusic=!0,this.audioCtrl.playMusic(s.AudioEnum[t],e))},l.prototype.stopMusic=function(){this.isPlayMusic=!1,this.audioCtrl.stopMusic()},l.prototype.pauseMusic=function(){this.audioCtrl.pauseMusic()},l.prototype.resumeMusic=function(){this.isPlayMusic=!0,this.audioCtrl.resumeMusic()},l.prototype.button=function(){this.playSound(s.AudioEnum.click)},l.prototype.playSound=function(t,e){void 0===e&&(e=!1),this.isSoundOpen()&&this.audioCtrl.playSound(s.AudioEnum[t],e)},l.prototype.playSoundbyStr=function(t,e){void 0===e&&(e=!1),this.isSoundOpen()&&this.audioCtrl.playSound(t,e)},l.prototype.isMusicOpen=function(){return!c.DataMgr.User.Data.mute},l.prototype.isSoundOpen=function(){return!c.DataMgr.User.Data.mute},Object.defineProperty(l,"I",{get:function(){return this._instance||(this._instance=new l)},enumerable:!0,configurable:!0}),i=l,o.default=i,o.AudioMgr=i.I,cc._RF.pop()},{}],AutoScroll:[function(t,e,n){"use strict";cc._RF.push(e,"c586bPz/0pMI7bjyODPVa/X","AutoScroll");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("Water");function p(){var t=null!==u&&u.apply(this,arguments)||this;return t.content=null,t.step=.5,t.scrollDir=0,t.isAuto=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(p,u=cc.Component),p.prototype.onLoad=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(e){switch(e.label){case 0:return this.scrollView=this.node.getComponent(cc.ScrollView),[4,d.default.wait(1e3)];case 1:return e.sent(),cc.isValid(this.scrollView)&&(this.maxScrollOffset=this.scrollView.getMaxScrollOffset(),this.content.on(cc.Node.EventType.TOUCH_START,this.stopAuto,this),this.content.children.forEach(function(e){e.on(cc.Node.EventType.TOUCH_START,t.stopAuto,t)}),this.isAuto=!0),[2]}})})},p.prototype.stopAuto=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return this.isAuto=!1,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.isAuto=!0},3),[2]})})},p.prototype.update=function(){if(this.isAuto)if(0==this.scrollDir){if(0==this.maxScrollOffset.x)return this.isAuto=!1,void this.node.removeComponent(this);this.content.x-=this.step,Math.abs(this.scrollView.getScrollOffset().x)>=this.maxScrollOffset.x&&this.scrollView.scrollToLeft(2)}else{if(0==this.maxScrollOffset.y)return this.isAuto=!1,void this.node.removeComponent(this);this.content.y+=this.step,Math.abs(this.scrollView.getScrollOffset().y)>=this.maxScrollOffset.y&&this.scrollView.scrollToTop(2)}},s([o({tooltip:"\u5185\u5bb9\u56fe\u5c42",type:cc.Node})],p.prototype,"content",void 0),s([o({tooltip:"\u6eda\u52a8\u901f\u5ea6"})],p.prototype,"step",void 0),s([o({tooltip:"\u81ea\u52a8\u6eda\u52a8\u65b9\u5411",type:cc.Enum({horizeontal:0,verticall:1})})],p.prototype,"scrollDir",void 0),i=s([i],p),a.default=i,cc._RF.pop()},{}],BallBuff:[function(t,e,n){"use strict";cc._RF.push(e,"24f1by3DcNISYSLPmQKiGg0","BallBuff");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Action"),u=i("LoaderMgr");function d(){var t=null!==c&&c.apply(this,arguments)||this;return t.animName="",t}i=(o=cc._decorator).ccclass,o=o.property,r(d,c=cc.Component),d.prototype.playAnim=function(){this.node.active=!0,this.animName&&this.loadAnim()},d.prototype.stopAnim=function(){this.node.getComponent(cc.Animation)&&l.default.stopAnim(this.node,this.animName)},d.prototype.loadAnim=function(){var t=this,e=this.animName,n=this.node.getComponent(cc.Animation);(n=n||this.node.addComponent(cc.Animation)).getAnimationState(e)?l.default.playAddAnim(this.node,e):u.LoaderMgr.loadResWithUrl("anims/buff/"+e,cc.AnimationClip,{success:function(i){cc.isValid(t.node)&&(n.addClip(i,e),n.play(e,0))},failure:function(){},context:this})},s([o(cc.String)],d.prototype,"animName",void 0),i=s([i],d),a.default=i,cc._RF.pop()},{}],BaseAnimPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"6261fsHKK5JzpAnAVVCaXJC","BaseAnimPopwin");var i=t,o=n,a=__EXTENDS__(),r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)},s=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var c,l=i("BasePopwin"),u=i("Action");function d(){return null!==c&&c.apply(this,arguments)||this}i=cc._decorator.ccclass,a(d,c=l.default),d.prototype.onOpen=function(t){c.prototype.onOpen.call(this,r({},t,{anim:!0}))},d.prototype.onPause=function(){c.prototype.onPause.call(this),this.hide()},d.prototype.onResume=function(){c.prototype.onResume.call(this),this.show(),this.openAnim()},d.prototype.getClips=function(){var t=this.node.getComponent(cc.Animation);return t?(this.clips||(this.clips=t.getClips()||[]),this.clips):[]},Object.defineProperty(d.prototype,"isOpenAnim",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isCloseAnim",{get:function(){return!0},enumerable:!0,configurable:!0}),d.prototype.openAnim=function(){var t=this.getClips();return 0===t.length?c.prototype.baseOpenAnim.call(this):t[0]?u.default.playAddAnim(this.node,t[0].name):Promise.resolve()},d.prototype.closeAnim=function(){var t=this.getClips();return 0===t.length?c.prototype.baseCloseAnim.call(this):t[1]?u.default.playAddAnim(this.node,t[1].name):Promise.resolve()},i=s([i],d),o.default=i,cc._RF.pop()},{}],BaseAudio:[function(t,e,n){"use strict";cc._RF.push(e,"5a4abHUjk9GkpviM8U26pcx","BaseAudio");var i=n;function o(){}Object.defineProperty(i,"__esModule",{value:!0}),o.prototype.getPath=function(t){return o.BasePath+t},o.BasePath="audio/",i.default=o,cc._RF.pop()},{}],BaseModel:[function(t,e,n){"use strict";cc._RF.push(e,"5197eEp1FRCibFCsCpQDAs3","BaseModel");var i,o=t,a=e,r=n;function s(){var t=i.call(this)||this;return t.loadDataFromLocalStorage(),t}a=__EXTENDS__(),Object.defineProperty(r,"__esModule",{value:!0}),a(s,i=o("EventMgr").default),s.prototype.loadDataFromLocalStorage=function(){},a=s,r.default=a,cc._RF.pop()},{}],BasePopwin:[function(t,e,n){"use strict";cc._RF.push(e,"f8510CQA7RPiYhtQbp5FIEf","BasePopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("BaseView"),d=i("ADLike"),p=i("LayerMgr"),h=i("ViewMgr"),f=i("SDKTools"),m=i("Display"),g=i("Enum"),_=i("EventMgr"),y=i("EventEnum"),v=i("OnlineMgr"),b=i("SDKEnums"),w=i("SDKAnalytics"),S=i("Sharetoggle"),M=i("CheckTools");function C(){var t=null!==c&&c.apply(this,arguments)||this;return t.comAdLike=null,t.nodeAdAnchor=null,t.comAdScroll=null,t.comShareToggle=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(C,c=u.default),(l=C).getBannerOffset=function(){return 135},C.prototype.onOpen=function(){this.preload(),this.showTopBar(),this.initAd(),this.initAdLike(),this.initAdScroll(),m.default.hideGride(),this.comShareToggle&&(this.comShareToggle.node.active=!1),this.isOpenedBannner&&this.loadBanner()},C.prototype.initsharetoggle=function(){var t=this;this.comShareToggle&&(!M.default.isShareOpen(this.path)||0<=M.default.s_showedshareNames.indexOf(this.path)?this.comShareToggle.node.active=!1:(this.comShareToggle.node.active=!0,this.comShareToggle.init(function(){t.onupdatesharestate()}),M.default.s_showedshareNames.push(this.path)))},C.prototype.onupdatesharestate=function(){},C.prototype.onOpend=function(t){c.prototype.onOpend.call(this,t)},C.prototype.onClose=function(){this.hideBanner(),this.hideAdLike(),this.hideAdScroll(),c.prototype.onClose.call(this)},C.prototype.onPause=function(){c.prototype.onPause.call(this),this.hideBanner()},C.prototype.onResume=function(){c.prototype.onResume.call(this),this.showBanner(),this.showTopBar()},C.prototype.getLayer=function(){return p.Layer.Popwin},Object.defineProperty(C.prototype,"BannerOpen",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"isOpenedBannner",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"BannerUid",{get:function(){return this.BannerOpen?v.OnlineMgr.getAdByType(v.AdType.BannerCommon):null},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"BannerParams",{get:function(){return{width:750*(cc.winSize.height,.8)}},enumerable:!0,configurable:!0}),C.prototype.preload=function(){},C.prototype.showTopBar=function(){m.default.topShow(g.TopBarType.None)},C.prototype.doClose=function(t,e){return h.ViewMgr.closePopwin(t,{anim:e=void 0===e||e})},C.prototype.addBannerEvent=function(){_.EventMgr.on(y.EventEnum.BannerSuccess,this.onBannerSuccess,this),_.EventMgr.on(y.EventEnum.BannerFailure,this.onBannerFailure,this)},C.prototype.removeBannerEvent=function(){_.EventMgr.off(y.EventEnum.BannerSuccess,this.onBannerSuccess,this),_.EventMgr.off(y.EventEnum.BannerFailure,this.onBannerFailure,this)},C.prototype.loadBanner=function(){var t=this.BannerUid;t&&(this.addBannerEvent(),f.default.show(t,this.BannerParams.width))},C.prototype.showBanner=function(){var t=this.BannerUid;t&&(this.addBannerEvent(),f.default.show(t,this.BannerParams.width),m.default.hideGride())},C.prototype.hideBanner=function(){var t=this.BannerUid;t&&(this.removeBannerEvent(),f.default.hide(t),m.default.hideGride())},C.prototype.onBannerSuccess=function(t){t&&t.detail&&t.detail.height&&(l.BannerHeight=t.detail.height),m.default.hideGride(),this.hideAdLike(),this.renderAdScroll()},C.prototype.onBannerFailure=function(){w.default.event(b.EventKeys.banner_ad_load_fail,""),m.default.ShowGride()},C.prototype.initAd=function(){this.offsetAdLike=-(cc.winSize.height-l.AdLikeHeight)/2,this.isOpenAdLike=!!this.comAdLike&&f.default.IsGuessLike,this.isOpenAdScroll=!!this.comAdScroll,this.isOpenAdLike&&this.comAdLike.init(b.SDKBannerLocation.LOCATION_PAGE_RESULT,1),this.isOpenAdScroll&&this.comAdScroll.init(b.SDKBannerLocation.LOCATION_PAGE_RESULT,1),this.comAdScroll&&(this.comAdScroll.node.active=!1)},C.prototype.initAdLike=function(){this.BannerOpen?this.hideAdLike():this.showAdLike(),this.renderAdLike()},C.prototype.showAdLike=function(){this.isOpenAdLike&&this.comAdLike.show()},C.prototype.hideAdLike=function(){this.isOpenAdLike&&this.comAdLike.hide()},C.prototype.renderAdLike=function(){this.isOpenAdLike&&(this.comAdLike.node.y=this.offsetAdLike)},C.prototype.initAdScroll=function(){this.showAdScroll()},C.prototype.showAdScroll=function(){this.comAdScroll&&(this.comAdScroll.node.active=!1)},C.prototype.hideAdScroll=function(){this.comAdScroll&&(this.comAdScroll.node.active=!1)},C.prototype.renderAdScroll=function(){this.comAdScroll&&(this.comAdScroll.node.active=!1)},C.AdLikeHeight=208,C.BannerHeight=0,s([o(d.default)],C.prototype,"comAdLike",void 0),s([o(cc.Node)],C.prototype,"nodeAdAnchor",void 0),s([o(d.default)],C.prototype,"comAdScroll",void 0),s([o(S.default)],C.prototype,"comShareToggle",void 0),i=l=s([i],C),a.default=i,(a=a.WxBannerType||(a.WxBannerType={}))[a.Banner=0]="Banner",a[a.GameBanner=1]="GameBanner",cc._RF.pop()},{}],BaseRank:[function(t,e,n){"use strict";cc._RF.push(e,"001eaT0mzhKvpPgyY/PIkfh","BaseRank");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("OpenContext"),u=i("DataMgr"),d=i("RankEnum");function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.sprite=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(p,c=cc.Component),p.prototype.onLoad=function(){this.texture=new cc.Texture2D,this.sprite.spriteFrame=new cc.SpriteFrame(this.texture)},p.prototype.dissmiss=function(){this.unscheduleAllCallbacks(),this.enabled=!1},p.prototype.showRank=function(){},p.prototype.showRank2=function(){},p.prototype.Potential=function(){var t=d.RankEvent.Potential,e=(u.DataMgr.UserBase.UserOpenId,n=this.sprite.node).width,n=n.height;l.default.I.setSize(e,n),l.default.I.post(t,{}),this.weakRender()},p.prototype.Inivte=function(t){var e=d.RankEvent.Invite,n=(u.DataMgr.UserBase.UserOpenId,this.sprite.node);n.width,n.height,l.default.I.post(e,{index:t})},p.prototype.dissmissRank=function(){},p.prototype.weakRender=function(){this.unscheduleAllCallbacks(),this.schedule(this.render,.1,20)},p.prototype.render=function(){this.texture.initWithElement(l.default.I.ShareCanvas),this.texture.packable=!1,this.sprite.spriteFrame=new cc.SpriteFrame(this.texture)},s([o(cc.Sprite)],p.prototype,"sprite",void 0),i=s([i],p),a.default=i,cc._RF.pop()},{}],BaseScene:[function(t,e,n){"use strict";cc._RF.push(e,"22afer8solLU4mQ+n/NkAha","BaseScene");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ADLike"),d=i("SDKTools"),p=i("EventMgr"),h=i("AudioMgr"),f=i("EventEnum"),m=i("AudioEnum"),g=i("PlatformUtils"),_=i("SDKEnums"),y=i("Display"),v=i("SDKAnalytics"),b=i("OnlineMgr");function w(){var t=c.call(this)||this;return t.comAdLike=null,l.I=t,l.ADLikeOffsetY=-(cc.winSize.height-208)/2,t}i=(o=cc._decorator).ccclass,o=o.property,r(w,c=cc.Component),(l=w).prototype.onSceneShow=function(){},w.prototype.onSceneHide=function(){},w.prototype.onScreenShow=function(){},w.prototype.onScreenHide=function(){},w.prototype.onBannerSuccess=function(){},w.prototype.onBannerFailure=function(){},Object.defineProperty(w.prototype,"BannerOpen",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"isOpenedBannner",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"BannerUid",{get:function(){return this.BannerOpen?b.OnlineMgr.getAdByType(b.AdType.BannerGame):null},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"BannerParams",{get:function(){return{width:750*(cc.winSize.height,.8)}},enumerable:!0,configurable:!0}),w.prototype.start=function(){this.addEvent(),this.initAdLike(),this.isOpenedBannner&&this.loadBanner(),this.onOpen()},w.prototype.onDestroy=function(){this.hideBanner(),this.removeEvent(),this.removeBannerEvent()},w.prototype.addEvent=function(){p.EventMgr.on(f.EventEnum.SceneToShow,this.handleSceneShow,this),p.EventMgr.on(f.EventEnum.SceneToHide,this.handleSceneHide,this)},w.prototype.removeEvent=function(){p.EventMgr.off(f.EventEnum.SceneToShow,this.handleSceneShow,this),p.EventMgr.off(f.EventEnum.SceneToHide,this.handleSceneHide,this)},w.prototype.addBannerEvent=function(){p.EventMgr.on(f.EventEnum.BannerSuccess,this.handleBannerSuccess,this),p.EventMgr.on(f.EventEnum.BannerFailure,this.handleBannerFailure,this),g.default.isTecent&&"object"==typeof wx?(wx.onShow(this.handleScreenShow),wx.onHide(this.handleScreenHide)):(cc.game.on(cc.game.EVENT_SHOW,this.handleScreenShow,this),cc.game.on(cc.game.EVENT_HIDE,this.handleScreenHide,this))},w.prototype.removeBannerEvent=function(){p.EventMgr.off(f.EventEnum.BannerSuccess,this.handleBannerSuccess,this),p.EventMgr.off(f.EventEnum.BannerFailure,this.handleBannerFailure,this),g.default.isTecent&&"object"==typeof wx?(wx.offShow(this.handleScreenShow),wx.offHide(this.handleScreenHide)):(cc.game.off(cc.game.EVENT_SHOW,this.handleScreenShow,this),cc.game.off(cc.game.EVENT_HIDE,this.handleScreenHide,this))},w.prototype.handleSceneShow=function(t){this.onSceneShow(t),this.isInitialBanner&&this.showBanner()},w.prototype.handleSceneHide=function(t){this.onSceneHide(t),this.isInitialBanner&&this.hideBanner()},w.prototype.handleScreenShow=function(){l.I.onScreenShow(),h.AudioMgr.playBgm(m.AudioEnum.bgm)},w.prototype.handleScreenHide=function(){l.I.onScreenHide(),h.AudioMgr.isMusicOpen()&&h.AudioMgr.pauseMusic()},w.prototype.handleBannerSuccess=function(t){this.onBannerSuccess(t),y.default.hideGride(),this.hideAdLike()},w.prototype.handleBannerFailure=function(t){v.default.event(_.EventKeys.banner_ad_load_fail,""),this.onBannerFailure(t),y.default.ShowGride(),this.showAdLike()},Object.defineProperty(w.prototype,"isOpenAdLike",{get:function(){return!!this.comAdLike&&d.default.IsGuessLike},enumerable:!0,configurable:!0}),w.prototype.loadBanner=function(){var t;this.isInitialBanner||(this.isInitialBanner=!0,(t=this.BannerUid)?(this.addBannerEvent(),d.default.show(t,this.BannerParams.width),y.default.hideGride()):this.showAdLike())},w.prototype.showBanner=function(){var t=this.BannerUid;t&&(this.addBannerEvent(),d.default.show(t,this.BannerParams.width),y.default.hideGride())},w.prototype.hideBanner=function(){var t=this.BannerUid;t&&(this.removeBannerEvent(),d.default.hide(t),y.default.hideGride()),y.default.hideGride()},w.prototype.initAdLike=function(){this.isOpenAdLike&&(this.comAdLike.getComponent(u.default).init(_.SDKBannerLocation.LOCATION_PAGE_GAME,1),this.comAdLike.getComponent(u.default).setOffset(l.ADLikeOffsetY))},w.prototype.showAdLike=function(){this.isOpenAdLike&&this.comAdLike.getComponent(u.default).show()},w.prototype.hideAdLike=function(){this.isOpenAdLike&&this.comAdLike.getComponent(u.default).hide()},w.ADLikeOffsetY=0,s([o(cc.Node)],w.prototype,"comAdLike",void 0),i=l=s([i],w),a.default=i,cc._RF.pop()},{}],BaseView:[function(t,e,n){"use strict";cc._RF.push(e,"7e09edPBBtG3IXizEv0XjB8","BaseView");var i=t,o=e,a=n,r=__EXTENDS__();o=__DECORATE__,Object.defineProperty(a,"__esModule",{value:!0});var s,c=i("LayerMgr"),l=i("PoolMgr");function u(){var t=null!==s&&s.apply(this,arguments)||this;return t._isHide=!1,t._isPaused=!1,t._isClosed=!1,t.path="",t}i=cc._decorator.ccclass,r(u,s=cc.Component),Object.defineProperty(u.prototype,"isFullScreen",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isMaskShow",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isMaskTransparent",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isMaskAnim",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isHide",{get:function(){return this._isHide},set:function(t){this._isHide=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isPaused",{get:function(){return this._isPaused},set:function(t){this._isPaused=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isClosed",{get:function(){return this._isClosed},set:function(t){this._isClosed=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isOpenAnim",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isCloseAnim",{get:function(){return!1},enumerable:!0,configurable:!0}),u.prototype.onOpend=function(){this.openCallback&&this.openCallback(this)},u.prototype.onRefresh=function(){},u.prototype.onClose=function(){this.removeEvent()},u.prototype.onClosed=function(){this.removeView(),this.closeCallback&&this.closeCallback(this)},u.prototype.onHide=function(){},u.prototype.onShow=function(){},u.prototype.onPause=function(){},u.prototype.onResume=function(){},u.prototype.onRelease=function(){},u.prototype.onMessage=function(){},u.prototype.addEvent=function(){},u.prototype.removeEvent=function(){},u.prototype.initsharetoggle=function(){},u.prototype.open=function(t,e){var n=this;return this.path=e,new Promise(function(e){n.addView(),n.addEvent(),n.isClosed=!1,n.openCallback=e,(t&&t.hasOwnProperty("anim")?t.anim:n.isOpenAnim)?(n.onOpen(t),n.initsharetoggle(),n.openAnim().then(function(){return!n.isClosed&&n.onOpend(t)})):(n.onOpen(t),n.initsharetoggle(),n.onOpend(t))})},u.prototype.close=function(t){var e=this;return this.onClose(),new Promise(function(n){e.isClosed=!0,e.closeCallback=n,t&&t.hasOwnProperty("anim")?t.anim:e.isCloseAnim,e.onClosed()})},u.prototype.hide=function(){cc.isValid(this.node)&&(this.node.active=!1),this.isHide=!0,this.onHide()},u.prototype.show=function(){cc.isValid(this.node)&&(this.node.active=!0),this.isHide=!1,this.onShow()},u.prototype.pause=function(){this.isPaused=!0,this.onPause()},u.prototype.resume=function(){this.isPaused=!1,this.onResume()},u.prototype.sendMessage=function(t){this.onMessage(t)},u.prototype.onTouchMask=function(){},u.prototype.addView=function(){this.node.active=!0,this.node.setPosition(cc.Vec2.ZERO),c.default.I.addTo(this.getLayer(),this.node)},u.prototype.removeView=function(){this.onRelease(),l.PoolMgr.putNode(this.node)},u.prototype.openAnim=function(){return this.baseOpenAnim()},u.prototype.baseOpenAnim=function(){var t=this;return new Promise(function(e){t.node.setScale(.01),t.node.runAction(cc.sequence(cc.scaleTo(.5,1,1).easing(cc.easeBackOut()),cc.callFunc(function(){return e(0)})))})},u.prototype.closeAnim=function(){return this.baseCloseAnim()},u.prototype.baseCloseAnim=function(){var t=this;return new Promise(function(e){t.node.runAction(cc.sequence(cc.scaleTo(.3,0,0).easing(cc.easeBackIn()),cc.callFunc(function(){return e(0)})))})},u.IGNORE_ANIM="ignore_anim",u.PREFAB_PATH="",i=o([i],u),a.default=i,cc._RF.pop()},{}],BattleMgr2:[function(t,e,n){"use strict";cc._RF.push(e,"4bd3b6qY9BMQYgpRt+23MqQ","BattleMgr2");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p,h=i("ballctr2"),f=i("Water"),m=i("AppDataMgr"),g=i("Enum"),_=i("HistoryData"),y=i("UserModel"),v=i("DataMgr"),b=i("SDKTools"),w=i("EventEnum"),S=i("Display"),M=i("OnlineMgr"),C=i("EventMgr"),P=i("ViewMgr"),A=i("LoaderMgr"),T=i("AudioMgr"),E=i("PlatformUtils"),B=i("Api"),D=i("SDKEnums"),I=i("Const"),k=i("ADLike"),O=i("PoolMgr"),R=i("Action"),N=i("ADCrossItem"),L=i("RankPopwin"),x=i("SDKAnalytics"),F=i("AudioEnum"),U=i("WXApi"),K=i("RandomUtils"),G=i("UserBaseModel"),j=i("CommonMgr"),W=i("CheckTools"),V=i("OpenContext"),H=i("ImageLabelNew"),q=i("GridADPopwin"),X=i("WinPopwin2"),z=i("FailPopwin2"),J=i("LocalMgr"),Y=i("UIRevive2"),Q=cc._decorator;function Z(){var t=null!==d&&d.apply(this,arguments)||this;return t.m_oldx=0,t.prefabTopbar=null,t.m_boomEffNew=null,t.m_balllist=[],t.m_ballobj2=null,t.m_labcurScore=null,t.m_curScore=0,t.m_bestScore=0,t.m_curlevel=1,t.m_exp=0,t.m_Guide=null,t.comAdLike=null,t.adCross=null,t.m_starobjs=[],t.m_Worning=null,t.isworning=!1,t.worningtiptime=0,t.m_Tip=null,t.m_LogoAni=null,t.m_Change=null,t.m_Skins=[],t.m_effcd=0,t.m_reviveTimes=0,t.m_fullpowertimes=0,t.m_isUsingDelItem=!1,t.m_isUsingJokerball=!1,t.m_props={0:0,1:0,2:0},t.m_bagprops={},t.m_Wall1=null,t.m_IsPassing=!1,t.m_gridadbtn=null,t.m_Singlead=null,t.m_gamecamera=null,t.m_anicamera=null,t.m_UIcamera=null,t.m_BgCamera=null,t.m_CurtainCamera=null,t.m_ComboNum=0,t.m_curBg=0,t.saveScoreBall=0,t.standTime=6,t.popwinlist=[],t.power=0,t.worningtime=0,t.failtime=0,t.checkgameovercd=0,t.newballs=[1,1,1,2,3,3,4],t.ballindex=0,t.m_buffcd=0,t.mindex=0,t.lastredball=null,t.isgameover=!1,t.soundcd=1,t.mergeindex=1,t.oldballlv=0,t}o=Q.ccclass,i=Q.property,(Q={})[Q.Nomal=3]="Nomal",r(Z,d=cc.Component),(p=Z).prototype.addPopwinList=function(t,e,n){void 0===n&&(n=!0);var i={pop:t,p:e};this.popwinlist.length<=0?this.m_IsPassing?this.popwinlist.push(i):(this.popwinlist.push(i),P.ViewMgr.openPopwin(t,{anim:n,data:s({},e)})):this.popwinlist.unshift(i)},Z.prototype.addPopwinListForceOpen=function(t,e,n){void 0===n&&(n=!0);var i={pop:t,p:e};this.popwinlist.length<=0&&this.m_IsPassing?this.popwinlist.push(i):(this.popwinlist.push(i),P.ViewMgr.openPopwin(t,{anim:n,data:s({},e)}))},Z.prototype.addTopPopwinList=function(t,e){var n={pop:t,p:e};this.popwinlist.length<=0&&!this.m_IsPassing?(this.popwinlist.push(n),P.ViewMgr.openPopwin(t,{data:s({},e)})):this.popwinlist.push(n)},Z.prototype.removePopwinList=function(t,e,n){var i;void 0===t&&(t=null),void 0===e&&(e={}),void 0===n&&(n=!0),0<this.popwinlist.length&&this.popwinlist.pop(),t&&this.popwinlist.push(i={pop:t,p:e}),0<this.popwinlist.length&&(i=this.popwinlist[this.popwinlist.length-1],P.ViewMgr.openPopwin(i.pop,{anim:n,data:s({},i.p)}))},Z.prototype.onLoad=function(){x.default.event(D.EventKeys.scene_melon_enter,""),cc.winSize.height,S.default.adjustIphoneX(this.node.getChildByName("topad")),p.I=this,J.LocalMgr.set(g.LocalDataKey.IsWaterMelon,!0);var t=b.default.getParamsInt(D.OnlineKeys.NewGuide,1);0==y.default.I.Exp&&1==y.default.I.CurLevel&&(0==t||1==t&&G.default.I.ID%2==1)?this.standTime=0:this.standTime=6,this.m_BalllistRoot=this.node.getChildByName("balllist"),this.m_ballobj=this.node.getChildByName("ball1"),this.m_ballobj.active=!1,this.m_boomEff2=this.node.getChildByName("boom3"),this.m_boomEff2.active=!1,this.m_EfflightRoot=this.node.getChildByName("efflight"),this.m_EfflistRoot=this.node.getChildByName("efflist"),this.m_Efflight1Root=this.node.getChildByName("efflist1"),this.m_Efflight2Root=this.node.getChildByName("efflist2"),this.m_Wall1=this.node.getChildByName("s1"),this.m_Wall1.active=!0,this.node.getChildByName("skill_1").active=!1,this.m_Wall1.y-=(cc.winSize.height-1334)/2,this.m_Tip.active=!1,this.m_boomEffNew.getChildByName("p_light").getComponent(cc.ParticleSystem).resetSystem(),this.m_boomEffNew.getChildByName("p_light2").getComponent(cc.ParticleSystem).resetSystem(),this.power=y.default.I.Power,this.m_gridadbtn.active=b.default.IsGuessLike,this.m_gridadbtn.children[0].children[0].active=0==y.default.I.getDayDataWithKey(g.DayKeys.ClickAd,0),this.initEvent(),this.InitData(),this.hideWorning(),T.AudioMgr.stopMusic(),0==y.default.I.Exp&&1==y.default.I.CurLevel||this.scheduleOnce(this.initPreload,4),this.loadBanner(),S.default.showGameStartInsterstitial(),this.initAdItem(),m.AppDataMgr.set(g.AppDataKey.OnHideHistory,!1),W.default.checkCollect(g.DayKeys.CollectState),W.default.checkFloating()},Z.prototype.setChangeUI=function(){y.default.I.WatermelonTeachBall<7||!W.default.IsRefreshOpen?this.m_Change.active=!1:0==this.m_Change.active&&(this.m_Change.active=!0,R.default.playAnim(this.m_Change,"anim_exchange_in"))},Z.prototype.preloadScene=function(){return new Promise(function(){cc.director.preloadScene("HomeScene")})},Z.prototype.start=function(){W.default.IsShopWmTip&&(W.default.IsShopWmTipEveryDay?0==y.default.I.getDayDataWithKey(g.DayKeys.ShowedMelon,0)&&y.default.I.reqDayDataWithKey(g.DayKeys.ShowedMelon,1):J.LocalMgr.get(g.LocalDataKey.ShowedWaterMelon)||J.LocalMgr.set(g.LocalDataKey.ShowedWaterMelon,!0)),this.setChangeTimesUI(!1,!0),this.setChangeUI(),U.default.I.showSinglegridad2(),this.setScore(),this.initQueuePop(),this.toNomalModel(!0),M.OnlineMgr.getBool(D.OnlineKeys.GmFlag,E.default.isH5?1:0)},Z.prototype.update=function(t){0<=this.m_effcd&&(this.m_effcd-=t),0<=this.soundcd&&(this.soundcd-=t),this.checkGameOver(t),1==this.m_Worning.active&&0<=this.worningtime&&(this.worningtime+=t)},Z.prototype.onDestroy=function(){j.default.I.clearLevelSelect(),this.hideBanner(),S.default.hideGride(),1!=S.default.s_isShowWxAd&&0!=b.default.getParamsInt(D.OnlineKeys.build_scene_module_ad,0)||U.default.I.hideSinglegridad2(),this.removeEvent(),E.default.isTecent&&"object"==typeof wx?(wx.offShow(this.handleShow),wx.offHide(this.handleHide)):cc.game.off(cc.game.EVENT_HIDE,this.handleHistoryRecord,this)},Z.prototype.initEvent=function(){C.EventMgr.on(w.EventEnum.SceneToShow,this.handlePopwinToTop,this),C.EventMgr.on(w.EventEnum.SceneToHide,this.handlePopwinFromFirst,this),C.EventMgr.on(w.EventEnum.UpdateFriendRank,this.handleUpdateFriendRank,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),E.default.isTecent&&"object"==typeof wx?(wx.onShow(this.handleShow),wx.onHide(this.handleHide)):cc.game.on(cc.game.EVENT_HIDE,this.handleHistoryRecord,this)},Z.prototype.removeEvent=function(){C.EventMgr.off(w.EventEnum.SceneToShow,this.handlePopwinToTop,this),C.EventMgr.off(w.EventEnum.SceneToHide,this.handlePopwinFromFirst,this),C.EventMgr.off(w.EventEnum.UpdateFriendRank,this.handleUpdateFriendRank,this)},Z.prototype.onGMTest=function(){},Z.prototype.initQueuePop=function(){},Z.prototype.InitData=function(){var t=((t=M.OnlineMgr.SkillBalls)[0],t[1],t[2]);this.m_buffcd=t,this.initAd()},Z.prototype.InitBattleData=function(){this.playbg(),this.m_curlevel=y.default.I.CurLevel,this.m_exp=y.default.I.Exp,this.m_curScore=y.default.I.WatermelonCurScore,this.m_bestScore=y.default.I.WatermelonBestScore,this.initRank(),this.m_curball&&(this.m_curball.active=!1),this.m_curball2&&(this.m_curball2.active=!1),this.m_curball&&(this.m_curball.destroy(),this.m_curball=null),this.m_curball2&&(this.m_curball2.destroy(),this.m_curball2=null),this.showGuid(),this.deletAllBalls()},Z.prototype.InitModelBttle=function(t){return void 0===t&&(t=!1),l(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return t?[3,2]:[4,f.default.wait(1400)];case 1:e.sent(),e.label=2;case 2:return this.InitBalls(),this.createBall(),this.setScore(),[4,f.default.wait(2e3)];case 3:return e.sent(),this.checkLine(),[2]}})})},Z.prototype.initAd=function(){this.comAdLike.getComponent(k.default).init(D.SDKBannerLocation.LOCATION_PAGE_GAME),this.adCross.getComponent(N.default).init(D.SDKBannerLocation.LOCATION_PAGE_GAME,1)},Z.prototype.initAdItem=function(){this.adCross.getComponent(N.default).refresh(),this.adCross.getComponent(N.default).play(!0)},Z.prototype.initPreload=function(){return l(this,void 0,void 0,function(){var t,e;return u(this,function(n){switch(n.label){case 0:return t=["prefab/panel/panel_revive2","prefab/popwin/popwin_fail2"],[4,f.default.wait(10)];case 1:n.sent(),e=0,n.label=2;case 2:return e<t.length?(A.LoaderMgr.loadPrefabWithUrl(t[e]),[4,f.default.wait(10)]):[3,5];case 3:n.sent(),n.label=4;case 4:return e++,[3,2];case 5:return[2]}})})},Z.prototype.initRank=function(){0<this.m_bestScore&&V.default.I.save(this.m_bestScore,this.getMaxBallLv(),!0),this.doShowRank(this.m_curScore)},Z.prototype.InitBalls=function(){var t;if(this.deletAllBalls(),(t=y.default.I.WatermelonHistory)&&t.balls&&!(t.balls.length<=0)){this.m_curScore=t.score,this.ballindex=10,t.timeProps&&t.timeProps[0]&&(this.m_props=t.timeProps),this.m_reviveTimes=t.reviveTimes,t.balls=t.balls||[];for(var e=0;e<t.balls.length;e++){var n,i=t.balls[e];i.lv<=0||700<i.y||i.y<-500||((n=cc.instantiate(this.m_ballobj)).active=!0,n.parent=this.m_BalllistRoot,n.position=cc.v2(i.x,i.y),(n=n.getComponent(h.default)).InitBall(i.lv,!0,!0),0<i.buffid&&n.setBuff(i.buffid),n.m_falltime=0)}y.default.I.Vibrate&&b.default.vibrateShort()}},Z.prototype.addScore=function(t){t=Math.max(t,0),this.m_curScore+=+t,this.m_curScore>this.m_bestScore&&(this.m_bestScore=this.m_curScore,V.default.I.save(this.m_bestScore,this.getMaxBallLv(),!0)),this.getNextLvScore(),this.doUpdateRank(this.m_curScore),this.setScore()},Z.prototype.setScore=function(){this.m_labcurScore.setValue(this.m_curScore)},Z.prototype.getwithoutNum=function(t){var e=[1,2,3,4,5];return 0<=e.indexOf(t)&&e.splice(e.indexOf(t),1),e[K.default.random(0,e.length)]},Z.prototype.createBall=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.m_curball&&(this.m_curball.destroy(),this.m_curball=null),e&&this.m_curball2&&(this.m_curball2.destroy(),this.m_curball2=null),this.m_curball=cc.instantiate(this.m_ballobj),t&&this.m_curball2&&this.m_curball2.destroy(),this.m_curball.active=!0,this.m_curball.parent=this.m_EfflightRoot,this.m_curball.position=this.m_ballobj.position;var n=this.m_curball.getComponent(h.default),i=K.default.random(1,6);e&&(i=this.getwithoutNum(this.oldballlv)),(n.m_isJoker=t)?n.InitBall(-1):(t=y.default.I.WatermelonTeachBall)<7?n.InitBall(this.getTeachBall(t)):n.InitBall(i),this.oldballlv=i,n.m_rigidbody.type=cc.RigidBodyType.Kinematic,n.setColliderEnable(!1),n.node.scale=n.getScale(),n.NewballAnim(),n.enableMotion(),0<this.m_buffcd&&this.m_buffcd--,this.ballindex++},Z.prototype.nextball=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,f.default.wait(1e3)];case 1:return t.sent(),this.createBall(),[2]}})})},Z.prototype.createJokerBall=function(){this.m_curball&&this.m_curball.destroy(),this.createBall(!0),this.m_curball.name="joker"},Z.prototype.GameOver=function(t){void 0===t&&(t=!1),-2!=this.worningtime&&(this.worningtime=-1),this.m_curball&&(this.m_curball.destroy(),this.m_curball=null),this.m_curball2&&(this.m_curball2.destroy(),this.m_curball2=null),this.doGameOverAni()},Z.prototype.doGameOverAni=function(){return l(this,void 0,void 0,function(){var t,e;return u(this,function(n){switch(n.label){case 0:return this.getTopBall().forEach(function(t){t.getComponent(h.default).m_ballobj.getComponent(cc.Animation).play("anim_fruit_danger")}),[4,f.default.wait(2e3)];case 1:n.sent(),t=this.m_BalllistRoot.children.length-1,n.label=2;case 2:return 0<=t?(e=(e=this.m_BalllistRoot.children[t]).getComponent(h.default),p.I.createBoomEff(e.m_lv,e.node.position,e.getScale()),e.playdelani(),this.addScore(e.m_lv),[4,f.default.wait(33)]):[3,5];case 3:n.sent(),n.label=4;case 4:return t--,[3,2];case 5:return this.m_IsPassing=!1,this.reqSaveScore(!0),this.sdkEventWithKey(D.EventKeys.melon_game_end),P.ViewMgr.openPopwin(z.default,{data:{score:this.m_curScore,isrestart:!1},anim:!1}),this.m_curScore=0,this.saveGame(!1),[2]}})})},Z.prototype.checkIsCanRevive=function(){return!(1<=this.m_reviveTimes)},Z.prototype.IsCanReviveTimesMax=function(){var t=2==(t=b.default.getParamsInt(D.OnlineKeys.revive_time_limit_abtest,0))||1==t&&G.default.I.ID%2==0?b.default.getParamsInt(D.OnlineKeys.revive_time_limit_b,2):b.default.getParamsInt(D.OnlineKeys.revive_time_limit_a,1e4);return this.m_reviveTimes>=t},Z.prototype.gethadReviveTimes=function(){var t=2==(t=b.default.getParamsInt(D.OnlineKeys.revive_time_limit_abtest,0))||1==t&&G.default.I.ID%2==0?b.default.getParamsInt(D.OnlineKeys.revive_time_limit_b,2):b.default.getParamsInt(D.OnlineKeys.revive_time_limit_a,1e4);return Math.max(0,t-this.m_reviveTimes)},Z.prototype.RefreshAllBalls=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.checkgameovercd=5,this.m_BalllistRoot.children.forEach(function(t){Math.random(),t.getComponent(h.default).addForce(0,K.default.range(800,1200))}),[4,f.default.wait(500)];case 1:return t.sent(),this.m_BalllistRoot.children.forEach(function(t){var e=Math.random();t.getComponent(h.default).m_collider.restitution=.8,t.getComponent(h.default).m_collider.apply(),.5<=e?t.getComponent(h.default).addForce(800,-400):t.getComponent(h.default).addForce(-800,-400)}),[4,f.default.wait(500)];case 2:return t.sent(),this.m_BalllistRoot.children.forEach(function(t){t.getComponent(h.default).m_collider.restitution=.3,t.getComponent(h.default).m_collider.apply()}),[2]}})})},Z.prototype.setline=function(){for(var t,e=this.m_curball.getChildByName("line"),n=[],i=0;i<this.m_BalllistRoot.children.length;i++){var o=this.m_BalllistRoot.children[i];Math.abs(this.m_curball.x-o.x)<35*o.scale&&n.push(o)}n.sort(function(t,e){return e.y-t.y}),0<n.length?(t=(S.default.getTargetPos(e,n[0].parent).y-(n[0].y+35*n[0].scale))/517,e.children[0].getComponent(cc.Sprite).fillRange=-t):e.children[0].getComponent(cc.Sprite).fillRange=-1},Z.prototype.onTouchStart=function(t){this.m_oldx=t.getLocationX(),null==this.m_curball||this.m_isUsingDelItem||this.m_IsPassing||0==this.m_curball.active||(this.hideChange(),this.tweencur=cc.tween(this.m_curball).to(.1,{x:t.getLocationX()-375}).start(),this.mindex=0)},Z.prototype.onTouchMove=function(t){var e,n=t;n.getLocationX(),null==this.m_curball||this.m_isUsingDelItem||this.m_IsPassing||0==this.m_curball.active?this.m_oldx=n.getLocationX():(this.tweencur&&2<=this.mindex&&this.tweencur.stop(),this.m_curball.getChildByName("line").active,e=n.getLocationX(),this.standTime=0,this.hideGuid(!0),(t=this.m_curball.getComponent(h.default)).m_rigidbody.type=cc.RigidBodyType.Kinematic,t.setColliderEnable(!1),this.hideChange(),this.m_curball.x+=cc.director.getDeltaTime()*(e-this.m_oldx)*100,375<=this.m_curball.x+this.m_curball.getComponent(h.default).m_ballobj.width/2?this.m_curball.x=375-this.m_curball.getComponent(h.default).m_ballobj.width/2:this.m_curball.x-this.m_curball.getComponent(h.default).m_ballobj.width/2<=-375&&(this.m_curball.x=this.m_curball.getComponent(h.default).m_ballobj.width/2-375),this.m_oldx=n.getLocationX(),this.mindex++)},Z.prototype.onTouchEnd=function(){var t,e=y.default.I.WatermelonTeachBall;null==this.m_curball||this.m_isUsingDelItem||this.m_IsPassing||0==this.m_curball.active||!this.isCanFall()||((t=this.m_curball.getComponent(h.default)).node.name="ball"+this.m_balllist.length.toString(),this.m_curball.parent=this.m_BalllistRoot,this.m_balllist.push(t),0==e?this.sdkEventWithKey(D.EventKeys.melon_drop_1):1==e?this.sdkEventWithKey(D.EventKeys.melon_drop_2):4==e&&this.sdkEventWithKey(D.EventKeys.melon_drop_5),e<7&&y.default.I.reqaddwTeachBall(),this.m_curball.getChildByName("line").active=!1,t.setColliderEnable(!0),t.m_rigidbody.type=cc.RigidBodyType.Dynamic,t.addForce(0,-300),this.lastredball&&this.lastredball.node&&(this.lastredball.isRedPacket=!1),(this.lastredball=t).m_isJoker&&(-2!=this.worningtime&&(this.worningtime=0),this.node.parent.getComponent(cc.Animation).play("anim_popup_out"),this.m_isUsingJokerball=!1),this.m_curball=null,this.m_oldx=375,this.saveScoreBall++,this.reqSaveScore(),this.nextball(),this.setChangeUI())},Z.prototype.getScaleLvByLv=function(t){return(t-1-12)%5+8},Z.prototype.getSmallBall=function(){var t=null,e=99999999;return this.m_BalllistRoot.children.forEach(function(n){var i=n.getComponent(h.default);i.m_lv<e&&(e=i.m_lv,t=n)}),t||null},Z.prototype.getcurBalls=function(){var t=[];return this.m_BalllistRoot.children.forEach(function(e){var n=e.getComponent(h.default),i=new _.BallData;i.lv=n.m_lv,i.x=Math.floor(100*e.x)/100,i.y=Math.floor(100*e.y)/100,i.buffid=n.m_buff,t.push(i)}),t},Z.prototype.getcurBallsWithoutLv=function(t){var e=[];return this.m_BalllistRoot.children.forEach(function(n){var i,o=n.getComponent(h.default);t!=o.m_lv&&((i=new _.BallData).lv=o.m_lv,i.x=n.x,i.y=n.y,i.buffid=o.m_buff,e.push(i))}),e},Z.prototype.getBallsByLv=function(t){var e=[];return this.m_BalllistRoot.children.forEach(function(n){n.getComponent(h.default).m_lv==t&&e.push(n)}),e},Z.prototype.getBallsBigThan8Lv=function(){return this.m_BalllistRoot.children.forEach(function(t){if(9<=t.getComponent(h.default).m_lv)return h.default}),null},Z.prototype.getMaxBallLv=function(){var t=0;return this.m_BalllistRoot.children.forEach(function(e){(e=e.getComponent(h.default)).m_lv>t&&(t=e.m_lv)}),t},Z.prototype.getMaxBall=function(){var t=0,e=null;return this.m_BalllistRoot.children.forEach(function(n){var i=n.getComponent(h.default);i.m_lv>t&&(t=i.m_lv,e=n)}),0<t?e:null},Z.prototype.getBallsWithoutSmall=function(){var t=[];return this.m_BalllistRoot.children.forEach(function(e){var n,i=e.getComponent(h.default);4<i.m_lv&&((n=new _.BallData).lv=i.m_lv,n.x=e.x,n.y=e.y,n.buffid=i.m_buff,t.push(n))}),t},Z.prototype.getReviveballs=function(){var t=[];return this.m_BalllistRoot.children.forEach(function(e){e.getComponent(h.default).m_lv<=1&&t.push(e)}),t},Z.prototype.createBoomEff=function(t,e,n,i){return void 0===i&&(i=!0),l(this,void 0,void 0,function(){var i,o,a;return u(this,function(r){switch(r.label){case 0:return(i=cc.instantiate(this.m_boomEffNew)).active=!0,i.parent=this.m_EfflistRoot,i.position=e,i.scale=n,i.getChildByName("colocr_1").active=!1,i.getChildByName("colocr_2").active=!1,o=i.getChildByName("p_light").getComponent(cc.ParticleSystem),a=i.getChildByName("p_light2").getComponent(cc.ParticleSystem),o.node.active=!1,a.node.active=!1,i.getChildByName("colocr_1").active=!0,i.getChildByName("colocr_2").active=!0,i.getComponent(cc.Animation).play("anim_fruit1_boom"+(t-1)),o.node.active=!0,a.node.active=!0,o.resetSystem(),a.resetSystem(),0<this.soundcd?(this.mergeindex++,this.m_ComboNum++,5<=this.mergeindex&&(this.mergeindex=5)):(this.mergeindex=1,this.m_ComboNum=0),this.playcombineSound(),this.m_effcd=.5,this.soundcd=1,[4,f.default.wait(1e3)];case 1:return r.sent(),i&&i.destroy(),[2]}})})},Z.prototype.deletAllBalls=function(){this.m_BalllistRoot.children.forEach(function(t){t.destroy()})},Z.prototype.deletBallsByLv=function(t){var e=this;this.m_BalllistRoot.children.forEach(function(n){(n=n.getComponent(h.default)).m_lv!=t||e.doDisappearAni(n.node)})},Z.prototype.deletBallsByMinLv=function(t){var e=this;this.m_BalllistRoot.children.forEach(function(n){!(n=n.getComponent(h.default)).m_isJoker&&n.m_lv<t&&e.doDisappearAni(n.node)})},Z.prototype.doDisappearAni=function(t){t.destroy()},Z.prototype.handleHistoryRecord=function(){var t={score:this.m_curScore,level:this.m_curlevel,stars:null,timeProps:this.m_props,balls:this.getcurBalls(),reviveTimes:this.m_reviveTimes,tarballlv:y.default.I.Lv_CurTarBallLv};y.default.I.reqPlayerData2(this.m_bestScore,this.m_curScore,!1),y.default.I.reqHistory2(t,!0),m.AppDataMgr.set(g.AppDataKey.OnHideHistory,!0)},Z.prototype.isCanFall=function(){var t=35*this.m_curball.scale;if(this.m_curball.getComponent(h.default).m_isJoker)return!0;for(var e=0;e<this.m_BalllistRoot.children.length;e++){var n=this.m_BalllistRoot.children[e],i=35*n.scale;if(this.m_curball.position.sub(n.position).mag()<i+t&&this.m_curball.getComponent(h.default).m_lv!=n.getComponent(h.default).m_lv)return!1}return!0},Z.prototype.getNextLvScore=function(){var t=this.m_curlevel+1,e=M.OnlineMgr.getLvParam,n=e[0],i=e[1],o=e[2];return(e=this.m_curlevel<=1?0:n+Math.pow(this.m_curlevel-2,o)+i*(this.m_curlevel-2))<=0&&(e=0),n+Math.pow(t-2,o)+i*(t-2)-e},Z.prototype.checkWorning=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.getWorningTopBall().length<=0?this.hideWorning():this.showWorning(),[2]})})},Z.prototype.checkGameOver=function(t){if(0<this.checkgameovercd)return this.checkgameovercd-=t,!1;this.checkWorning(),0<this.getTopBall().length&&!this.m_IsPassing?this.failtime+=t:this.failtime=0,5<=this.failtime&&!this.isgameover&&(this.isgameover=!0,this.checkIsCanRevive()?(this.m_reviveTimes++,Y.default.OpenUIRevive()):this.GameOver())},Z.prototype.getTopBall=function(){var t=this,e=[];return this.m_BalllistRoot.children.forEach(function(n){1<n.getComponent(h.default).m_falltime&&n.y+n.getComponent(h.default).m_ballobj.width/2>t.m_Worning.y&&e.push(n)}),e},Z.prototype.getWorningTopBall=function(){var t=this,e=[];return this.m_BalllistRoot.children.forEach(function(n){1<n.getComponent(h.default).m_falltime&&n.y+n.getComponent(h.default).m_ballobj.width/2>t.m_Worning.y-100&&e.push(n)}),e},Z.prototype.restart=function(){this.sdkEventWithKey(D.EventKeys.melon_game_retry),m.AppDataMgr.set(g.AppDataKey.LvPassCount,0),this.deletAllBalls(),this.m_curScore=0,this.m_exp=0,this.m_reviveTimes=0,this.m_fullpowertimes=0,this.setScore(),this.initRank(),this.createBall(),this.worningtime=0,this.ballindex=0,this.isgameover=!1;var t=((t=M.OnlineMgr.SkillBalls)[0],t[1],t[2]);this.m_buffcd=t,v.DataMgr.User.getDayDataWithKey(g.DayKeys.RecordNum,0),0==(t=b.default.getParamsInt(D.OnlineKeys.record_continue_limit_abtest,0))||1==t&&G.default.I.ID%2==1?b.default.getParamsInt(D.OnlineKeys.record_continue_limit_a,100):b.default.getParamsInt(D.OnlineKeys.record_continue_limit_b,3)},Z.prototype.revive=function(){return l(this,void 0,void 0,function(){var t,e,n;return u(this,function(i){switch(i.label){case 0:t=I.default.MinTarBallLv,n=y.default.I.Lv_CurTarBallLv,e=n-t+1,x.default.logLevelRelive(e),-2!=this.worningtime&&(this.worningtime=0),n=this.getReviveballs(),t=0,i.label=1;case 1:return t<n.length?(e=n[t],n=e.getComponent(h.default),this.createBoomEff(n.m_lv,n.node.position,n.getScale()),e.destroy(),[4,f.default.wait(100)]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return this.RefreshAllBalls(),[4,f.default.wait(3e3)];case 5:return i.sent(),this.isgameover=!1,[2]}})})},Z.prototype.getSkinIndexBylv=function(t){return t<=12?t-1:11},Z.prototype.getSkin=function(){return null},Z.prototype.getcolorBylv=function(t){return 1==t?new cc.Color(133,35,118):2==t?new cc.Color(255,9,37):3==t?new cc.Color(255,127,27):4==t?new cc.Color(255,219,22):5==t?new cc.Color(93,223,32):6==t?new cc.Color(252,56,79):7==t?new cc.Color(255,159,82):8==t?new cc.Color(248,195,10):9==t?new cc.Color(152,128,106):10==t?new cc.Color(255,66,97):11==t?new cc.Color(252,74,188):12==t?new cc.Color(248,206,0):-1==t?new cc.Color(255,255,255,130):new cc.Color(255,237,11)},Z.prototype.getTeachBall=function(t){var e=M.OnlineMgr.wTeachBall;return t<e.length?e[t]:1},Z.prototype.handleShow=function(){},Z.prototype.handleHide=function(){var t=p.I;T.AudioMgr.isMusicOpen()&&T.AudioMgr.pauseMusic(),t.handleHistoryRecord()},Z.prototype.toNomalModel=function(t){(t=void 0!==t&&t)||this.handleHistoryRecord(),this.m_curBg=0,this.m_Worning.active=!1,this.m_IsPassing=!1,this.m_Wall1.active=!0,this.hideGuid(),this.InitBattleData(),this.InitModelBttle(t)},Z.prototype.reqSaveScore=function(t){!(t=void 0!==t&&t)&&this.saveScoreBall<30||(this.saveScoreBall=0,B.default.saveScore({add_score:this.m_curScore,item_num:0,balllv:this.getMaxBallLv(),type:30}))},Z.prototype.saveGame=function(){},Z.prototype.handlePopwinFromFirst=function(){this.isInitialBanner&&this.hideBanner(),-2!=this.worningtime&&(this.worningtime=-1),U.default.I.hideSinglegridad2(),S.default.hideGride()},Z.prototype.handlePopwinToTop=function(){this.isInitialBanner&&this.showBanner(),-2!=this.worningtime&&(this.worningtime=0),U.default.I.showSinglegridad2()},Object.defineProperty(Z.prototype,"BannerOpen",{get:function(){return M.OnlineMgr.getBanner("game2")},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"BannerUid",{get:function(){return this.BannerOpen?M.OnlineMgr.getAdByType(M.AdType.BannerMelon):null},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"BannerParams",{get:function(){return cc.view.getVisibleSize().height,{bannerWidth:600}},enumerable:!0,configurable:!0}),Z.prototype.loadBanner=function(){this.isInitialBanner=!0;var t=b.default.getParamsInt(D.OnlineKeys.banner_min_lv,0);y.default.I.CurLevel<t||((t=this.BannerUid)?(this.addBannerEvent(),b.default.show(t,this.BannerParams.bannerWidth)):this.showAd())},Z.prototype.showBanner=function(){var t=b.default.getParamsInt(D.OnlineKeys.banner_min_lv,0);y.default.I.CurLevel<t||((t=this.BannerUid)?(this.addBannerEvent(),b.default.show(t,this.BannerParams.bannerWidth),S.default.hideGride()):this.showAd())},Z.prototype.hideBanner=function(){var t=this.BannerUid;t?(this.removeBannerEvent(),b.default.hide(t),S.default.hideGride()):this.hideAd()},Z.prototype.addBannerEvent=function(){C.EventMgr.on(w.EventEnum.BannerSuccess.toString(),this.onBannerSuccess,this),C.EventMgr.on(w.EventEnum.BannerFailure.toString(),this.onBannerFailure,this)},Z.prototype.removeBannerEvent=function(){C.EventMgr.off(w.EventEnum.BannerSuccess.toString(),this.onBannerSuccess,this),C.EventMgr.off(w.EventEnum.BannerFailure.toString(),this.onBannerFailure,this)},Z.prototype.onBannerShow=function(){},Z.prototype.onBannerSuccess=function(){S.default.hideGride(),this.hideAd()},Z.prototype.onBannerFailure=function(){x.default.event(D.EventKeys.banner_ad_load_fail,""),1==b.default.getParamsInt(D.OnlineKeys.grid_replace_banner_show,0)?S.default.ShowGride():this.showAd()},Z.prototype.hideAd=function(){this.isExistAdLike&&this.comAdLike.getComponent(k.default).hide()},Z.prototype.showAd=function(){this.isExistAdLike&&this.comAdLike.getComponent(k.default).show()},Object.defineProperty(Z.prototype,"isExistAdLike",{get:function(){return!!b.default.IsGuessLike&&!!E.default.isWx&&!!this.comAdLike},enumerable:!0,configurable:!0}),Z.prototype.showGameClub=function(){},Z.prototype.hideGameClub=function(){},Z.prototype.destroyGameClub=function(){},Z.prototype.playbg=function(){},Z.prototype.playcombineSound=function(){T.AudioMgr.playSound(F.AudioEnum.sound_merge1),T.AudioMgr.playSound(F.AudioEnum.sound_merge2)},Z.prototype.showGuid=function(){this.m_IsPassing||(this.m_Guide.active||(this.m_Guide.active=!0,this.m_Guide.opacity=0,cc.tween(this.m_Guide).to(.3,{opacity:255}).start()),0!=y.default.I.IsTouch||this.m_Tip.active||(this.m_Tip.active=!0,this.m_Tip.opacity=0,cc.tween(this.m_Tip).to(.3,{opacity:255}).start()))},Z.prototype.hideGuid=function(t){return void 0===t&&(t=!1),l(this,void 0,void 0,function(){var e=this;return u(this,function(n){switch(n.label){case 0:return t?[4,f.default.wait(5e3)]:[3,2];case 1:return n.sent(),this.m_Guide?(this.m_Guide.active&&cc.tween(this.m_Guide).to(.3,{opacity:0}).call(function(){e.m_Guide.active=!1}).start(),0==y.default.I.IsTouch&&(y.default.I.reqTouch(),cc.tween(this.m_Tip).to(.3,{opacity:0}).call(function(){e.m_Tip.active=!1}).start(),x.default.event(D.EventKeys.TouchMove,D.EventFrom.game)),this.standTime=0,[3,3]):[2];case 2:this.m_Guide.active&&(this.m_Guide.active=!1),n.label=3;case 3:return[2]}})})},Z.prototype.doShowRank=function(){},Z.prototype.doUpdateRank=function(){},Z.prototype.handleUpdateFriendRank=function(){this.doShowRank(this.m_curScore)},Z.prototype.showWorning=function(){this.m_IsPassing||this.m_Worning.active||(this.isworning=!0,this.m_Worning.active=!0,0<=this.worningtiptime&&(this.worningtime=0))},Z.prototype.hideWorning=function(){this.m_Worning.active&&(this.isworning=!1,this.worningtiptime=0,this.m_Worning.active=!1)},Z.prototype.checkLine=function(){cc.isValid(this.m_Worning)&&(this.m_Worning.active=this.isworning,this.isworning)},Z.prototype.onopengridad=function(){x.default.event(D.EventKeys.drawer_click,"\u4e3b\u754c\u9762"),y.default.I.reqAddDayReward(g.DayKeys.ClickAd,1),this.m_gridadbtn.children[0].children[0].active=!1,q.default.isshow=!0,this.addPopwinListForceOpen(q.default,{isauto:!1})},Z.prototype.getBuff=function(){if(!W.default.IsSkillBallOpen)return 0;var t=(o=M.OnlineMgr.SkillBalls)[0],e=o[1],n=o[2],i=v.DataMgr.User.getDayDataWithKey(g.DayKeys.SkillBallGet,0),o=Math.random();return i<t&&o<e&&this.m_buffcd<=0?(this.m_buffcd=n,1):0},Z.prototype.onSkill=function(t,e,n){var i=this;T.AudioMgr.button(),this.m_IsPassing?n.destroy():(this.m_IsPassing=!0,PCSDK.platform.isVideoErrored()?0===m.AppDataMgr.get(g.AppDataKey.UseItemShareNum,0)?(m.AppDataMgr.set(g.AppDataKey.UseItemShareNum,1),b.default.dispatchType(D.ShareVideoType.Share,D.ShareKeys.use_item_share_melon,{success:function(){i.doCombineSkill(n),t&&t.call(e)},fail:function(){S.default.s_cancelSkilltimes++,n.destroy(),i.m_IsPassing=!1},context:this})):(this.m_IsPassing=!1,n.destroy(),S.default.showTip("\u6682\u65f6\u6ca1\u6709\u89c6\u9891\u53ef\u770b\uff0c\u8bf7\u7b49\u5f851\u5c0f\u65f6\u540e\u5c1d\u8bd5"),t&&t.call(e)):b.default.dispatch(D.ShareKeys.use_ball_item_melon,{success:function(){i.doCombineSkill(n),t&&t.call(e)},fail:function(){S.default.showTip("\u770b\u5b8c\u89c6\u9891\u624d\u53ef\u4ee5\u4f7f\u7528\u78c1\u94c1\u54e6\uff5e"),S.default.s_cancelSkilltimes++,n.destroy(),i.m_IsPassing=!1},context:this}))},Z.prototype.doCombineSkill=function(t){var e=this,n=[],i=[],o=[];if(this.m_BalllistRoot.children.forEach(function(t){500<=t.x||t.x<=-500||600<=t.y||t.y<=-1e3?o.push(t):n.push(t.getComponent(h.default))}),o.forEach(function(t){t.destroy()}),n=n.filter(function(t){return t.m_lv<=10}),this.findBalls(n,i),i.length<=0)return S.default.showTip("\u6ca1\u6709\u53ef\u5408\u6210\u7684\u7403~"),this.m_IsPassing=!1,void t.destroy();this.m_BalllistRoot.children.forEach(function(t){t.getComponent(h.default).iscombine=!0,t.getComponent(h.default).setColliderEnable(!1)}),T.AudioMgr.playSound(F.AudioEnum.skill_use),this.m_IsPassing=!0,t.active=!0;var a=this.node.getChildByName("skill_1").position.sub(t.position).mag();cc.tween(t).to(a/800,{position:this.node.getChildByName("skill_1").position,rotation:110}).call(function(){e.autoCombine(i),t.destroy()}).start()},Z.prototype.findBalls=function(t,e){return l(this,void 0,void 0,function(){var n,i,o;return u(this,function(){if(n=b.default.getParamsInt(D.OnlineKeys.skill_magnet_num,3),e.length>=n)return[2];if(t.length<2)return[2];for(i=t[0],t.splice(0,1),o=0;o<t.length;o++)if(t[o],t[o].m_lv==i.m_lv&&0==t[o].iscombine)return e.push([i,t[o]]),t.splice(o,1),this.findBalls(t,e),[2];return this.findBalls(t,e),[2]})})},Z.prototype.autoCombine=function(t){return l(this,void 0,void 0,function(){var e,n,i,o,a,r,s,c,l,d;return u(this,function(p){switch(p.label){case 0:return this.m_IsPassing=!0,this.node.getChildByName("skill_1").active=!0,this.node.getChildByName("skill_1").getChildByName("111").getComponent(cc.Animation).play("anim_bonus_skill_magnet"),[4,f.default.wait(1250)];case 1:p.sent(),e=[],n=[],d=0,p.label=2;case 2:if(!(d<t.length))return[3,9];i=[],o=0,p.label=3;case 3:return o<2?(a=t[d][o].getComponent(h.default))?(a.iscombine=!0,c=cc.v2(a.node.position.x*(cc.winSize.height/1634),a.node.position.y*(cc.winSize.height/1634)),cc.winSize.height<=1100&&(c=a.node.position),a.node.setSiblingIndex(10),[4,this.getobj("prefab/common/effect_color_out1")]):[3,6]:[3,7];case 4:return(r=p.sent()).active=!0,r.opacity=255,r.parent=this.node,r.position=S.default.getTargetPos(this.node.getChildByName("skill_1").getChildByName("111").getChildByName("1"),this.m_EfflistRoot),s=r.position,c=c.sub(s),s=180*Math.atan2(c.y,c.x)/Math.PI,c=c.mag(),r.angle=s-1,r.scaleX=0,r.scaleY=c/300*.5,e.push(r),cc.tween(r).to(40/60,{scaleX:c/610},{easing:"quintOut"}).call(function(){}).start(),i.push(a),[4,f.default.wait(100)];case 5:p.sent(),p.label=6;case 6:return o++,[3,3];case 7:n.push(i),p.label=8;case 8:return d++,[3,2];case 9:return[4,f.default.wait(2e3)];case 10:p.sent(),e.forEach(function(t){cc.tween(t).to(1/6,{opacity:0}).call(function(){O.PoolMgr.putNode(t)}).start()}),l=function(t){var e,i,o;return u(this,function(a){switch(a.label){case 0:return e=n[t],i=e[0],o=e[1],cc.tween(i.node).to(.3,{position:o.node.position}).call(function(){o.combine(o,i)}).start(),cc.tween(o.node).to(.3,{position:o.node.position},{easing:"quintOut"}).call(function(){}).start(),cc.tween(o.node).to(.15,{scale:1.5}).to(.15,{scale:1}).call(function(){}).start(),[4,f.default.wait(200)];case 1:return a.sent(),[2]}})},d=0,p.label=11;case 11:return d<n.length?[5,l(d)]:[3,14];case 12:p.sent(),p.label=13;case 13:return d++,[3,11];case 14:return[4,f.default.wait(300)];case 15:return p.sent(),this.m_IsPassing=!1,this.failtime=0,this.node.getChildByName("skill_1").active=!1,this.m_BalllistRoot.children.forEach(function(t){t.getComponent(h.default).iscombine=!1,t.getComponent(h.default).setColliderEnable(!0),t.getComponent(h.default).addForce(0,-10)}),[2]}})})},Z.prototype.getobj=function(t){var e=this;return new Promise(function(n){A.LoaderMgr.loadPrefabWithUrl(t).then(function(t){t=O.PoolMgr.getPrefab(t,e.node),n(t)})})},Z.prototype.DoWin=function(){y.default.I.reqAddwatermelonnum().then(function(){P.ViewMgr.openPopwin(X.default,{data:{num:y.default.I.WatermelonNum},anim:!1})})},Z.prototype.onRank=function(){this.m_IsPassing||(T.AudioMgr.button(),P.ViewMgr.openPopwin(L.default,{data:{type:g.ModuleType.Menu}}))},Z.prototype.onBuyChangeTimes=function(){var t=this;b.default.dispatch(D.ShareKeys.ChangeTimes,{success:function(){y.default.I.reqAddChange().then(function(){t.doaddChangeTimesAni()})},fail:function(){S.default.showTip("\u5b8c\u6574\u770b\u89c6\u9891\uff0c\u5c31\u53ef\u4ee5\u514d\u8d39\u8bd5\u7528~")},context:this})},Z.prototype.doaddChangeTimesAni=function(){return l(this,void 0,void 0,function(){var t,e;return u(this,function(n){switch(n.label){case 0:t=M.OnlineMgr.getInt(D.OnlineKeys.refresh_times,3),this.m_Change.getChildByName("video").getChildByName("video_bg").getChildByName("num").getComponent(H.default).setValue(0,"",!1),e=0,n.label=1;case 1:return e<t?(this.m_Change.getChildByName("video").getComponent(cc.Animation).play("anim_change_video_num_add1"),this.showaddani(e+1),[4,f.default.wait(300)]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},Z.prototype.showaddani=function(t){return l(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,f.default.wait(200)];case 1:return e.sent(),this.m_Change.getChildByName("video").getChildByName("video_bg").getChildByName("num").getComponent(H.default).setValue(t,"",!1),[2]}})})},Z.prototype.onUseChange=function(){var t=this;T.AudioMgr.button(),y.default.I.ChangeTimes<=0?this.onBuyChangeTimes():null!=this.m_curball&&y.default.I.reqUseChange().then(function(){t.m_Change.getChildByName("anim_e").getComponent(cc.Animation).play(),t.setChangeTimesUI(!0,!1),t.setChangeUI(),t.refreshBall()})},Z.prototype.refreshBall=function(){this.createBall(!1,!0)},Z.prototype.setChangeTimesUI=function(t,e){void 0===e&&(e=!1),e=(t=void 0!==t&&t)?y.default.I.ChangeTimes<=0?"anim_change_video_num0":"anim_change_video_reduce":e?y.default.I.ChangeTimes<=0?"anim_change_video_video":"anim_change_video_num":"anim_change_video_num_add1",this.m_Change.getChildByName("video").getChildByName("video_bg").getChildByName("num").getComponent(H.default).setValue(y.default.I.ChangeTimes),this.m_Change.getChildByName("video").getComponent(cc.Animation).play(e)},Z.prototype.hideChange=function(){this.m_Change.active=!1},Z.prototype.isHadBuffBall1=function(){for(var t=this.m_BalllistRoot.children,e=0;e<t.length;e++)if(1==t[e].getComponent(h.default).m_buff)return!0;return!1},Z.prototype.backLvGame=function(){T.AudioMgr.button(),this.handleHistoryRecord(),S.default.PersistNode.loadToGame()},Z.prototype.sdkEventWithKey=function(t){v.DataMgr.User.isHadEventKey(t.toString())||(t&&x.default.event(t,""),v.DataMgr.User.reqaddEventKey(t.toString()))},c([i(cc.Prefab)],Z.prototype,"prefabTopbar",void 0),c([i(cc.Node)],Z.prototype,"m_boomEffNew",void 0),c([i(cc.Node)],Z.prototype,"m_ballobj2",void 0),c([i(H.default)],Z.prototype,"m_labcurScore",void 0),c([i(cc.Node)],Z.prototype,"m_Guide",void 0),c([i(cc.Node)],Z.prototype,"comAdLike",void 0),c([i(cc.Node)],Z.prototype,"adCross",void 0),c([i(cc.Node)],Z.prototype,"m_starobjs",void 0),c([i(cc.Node)],Z.prototype,"m_Worning",void 0),c([i(cc.Node)],Z.prototype,"m_Tip",void 0),c([i(cc.Node)],Z.prototype,"m_LogoAni",void 0),c([i(cc.Node)],Z.prototype,"m_Change",void 0),c([i(cc.SpriteFrame)],Z.prototype,"m_Skins",void 0),c([i(cc.Node)],Z.prototype,"m_gridadbtn",void 0),c([i(cc.Node)],Z.prototype,"m_Singlead",void 0),c([i(cc.Node)],Z.prototype,"m_gamecamera",void 0),c([i(cc.Node)],Z.prototype,"m_anicamera",void 0),c([i(cc.Node)],Z.prototype,"m_UIcamera",void 0),c([i(cc.Node)],Z.prototype,"m_BgCamera",void 0),c([i(cc.Node)],Z.prototype,"m_CurtainCamera",void 0),o=p=c([o],Z),a.default=o,cc._RF.pop()},{}],BattleMgr:[function(t,e,n){"use strict";cc._RF.push(e,"9e5d3D18BxAvogRbKsrXUY0","BattleMgr");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p,h,f=i("ballctr"),m=i("Water"),g=i("AppDataMgr"),_=i("Enum"),y=i("HistoryData"),v=i("UserModel"),b=i("DataMgr"),w=i("SDKTools"),S=i("EventEnum"),M=i("Display"),C=i("UIRevive"),P=i("OnlineMgr"),A=i("EventMgr"),T=i("ViewMgr"),E=i("LoaderMgr"),B=i("AudioMgr"),D=i("PlatformUtils"),I=i("ShopPopwin"),k=i("FailPopwin"),O=i("Api"),R=i("SDKEnums"),N=i("Const"),L=i("ADLike"),x=i("PointMgr"),F=i("ComPointTip"),U=i("PoolMgr"),K=i("Action"),G=i("ADCrossItem"),j=i("SDKAnalytics"),W=i("AudioEnum"),V=i("WXApi"),H=i("RandomUtils"),q=i("ImageLabel"),X=i("SkinShopPopwin"),z=i("LevelupPopwin"),J=i("ItemTipPopwin"),Y=i("GiftPopwin"),Q=i("UserBaseModel"),Z=i("CommonMgr"),$=i("MissionModel"),tt=i("MissionPopwin"),et=i("RecordPopwin"),nt=i("CheckTools"),it=i("SignPopwin"),ot=i("InviteActPopwin"),at=i("OpenContext"),rt=i("LotteryPopwin"),st=i("ImageLabelNew"),ct=i("CollectPopwin"),lt=i("GridADPopwin"),ut=i("GameGM"),dt=i("InvitefirendPopwin"),pt=i("RulePopwin"),ht=i("BottomWrap"),ft=i("TopWrap"),mt=i("LocalMgr"),gt=i("WatermelonPopwin"),_t=i("CPSCouponPopwin"),yt=cc._decorator;function vt(){var t=null!==p&&p.apply(this,arguments)||this;return t.m_oldx=0,t.prefabTopbar=null,t.m_boomEffNew=null,t.m_bglight=null,t.m_balllist=[],t.m_ballobj2=null,t.m_Change=null,t.m_changeicon=null,t.m_labcurScore=null,t.m_labBestScore=null,t.m_curScore=0,t.m_bestScore=0,t.m_curlevel=1,t.m_exp=0,t.m_Skins=[],t.m_Hammer=null,t.m_Guide=null,t.comAdLike=null,t.pointTipArr=[],t.adCross=null,t.nodeRank=null,t.m_Worning=null,t.isworning=!1,t.worningtiptime=0,t.m_Tip=null,t.m_effcd=0,t.m_reviveTimes=0,t.m_fullpowertimes=0,t.m_isUsingDelItem=!1,t.m_isUsingJokerball=!1,t.m_props={0:0,1:0,2:0},t.m_bagprops={},t.m_buffcd=0,t.m_buffcd2=0,t.m_buffcd3=0,t.m_gameclub=null,t.m_Wall1=null,t.m_TarBallLab=null,t.m_TarBallIcon=null,t.m_IsPassing=!1,t.m_bg1=null,t.m_bg2=null,t.m_gridadbtn=null,t.m_Singlead=null,t.m_gamecamera=null,t.m_anicamera=null,t.m_UIcamera=null,t.m_BgCamera=null,t.m_CurtainCamera=null,t.m_SmallTarTip=null,t.m_ComboNum=0,t.m_curBg=0,t.saveScoreBall=0,t.standTime=6,t.popwinlist=[],t.power=0,t.comBottomWrap=null,t.comTopWrap=null,t.worningtime=0,t.m_StartTip=null,t.m_CollectGameTip=null,t.checkgameovercd=0,t.mindex=0,t.lastredball=null,t.soundcd=1,t.mergeindex=1,t}o=yt.ccclass,i=yt.property,(yt=d={})[yt.Nomal=0]="Nomal",yt[yt.Level=1]="Level",r(vt,p=cc.Component),(h=vt).prototype.addPopwinList=function(t,e,n){void 0===n&&(n=!0);var i={pop:t,p:e};this.popwinlist.length<=0?this.m_IsPassing?this.popwinlist.push(i):(this.popwinlist.push(i),T.ViewMgr.openPopwin(t,{anim:n,data:s({},e)})):this.popwinlist.unshift(i)},vt.prototype.addPopwinListForceOpen=function(t,e,n){void 0===n&&(n=!0);var i={pop:t,p:e};this.popwinlist.length<=0&&this.m_IsPassing?this.popwinlist.push(i):(this.popwinlist.push(i),T.ViewMgr.openPopwin(t,{anim:n,data:s({},e)}))},vt.prototype.addTopPopwinList=function(t,e){var n={pop:t,p:e};this.popwinlist.length<=0&&!this.m_IsPassing?(this.popwinlist.push(n),T.ViewMgr.openPopwin(t,{data:s({},e)})):this.popwinlist.push(n)},vt.prototype.removePopwinList=function(t,e,n){var i;void 0===t&&(t=null),void 0===e&&(e={}),void 0===n&&(n=!0),0<this.popwinlist.length&&this.popwinlist.pop(),t&&this.popwinlist.push(i={pop:t,p:e}),0<this.popwinlist.length&&(i=this.popwinlist[this.popwinlist.length-1],T.ViewMgr.openPopwin(i.pop,{anim:n,data:s({},i.p)}))},vt.prototype.setPassing=function(t){var e;void 0===t&&(t=!0),this.m_IsPassing=!1,t&&0<this.popwinlist.length&&(t=(e=this.popwinlist[this.popwinlist.length-1]).pop,e=e.p,T.ViewMgr.openPopwin(t,{data:s({},e)}))},vt.prototype.onLoad=function(){mt.LocalMgr.set(_.LocalDataKey.IsWaterMelon,!1),b.DataMgr.CPS.init(),this.sdkEventWithKey(R.EventKeys.FirstLogin_gameSceneEnter),this.m_gamecamera.getComponent(cc.Camera).zoomRatio=cc.winSize.height/1634,this.m_anicamera.getComponent(cc.Camera).zoomRatio=cc.winSize.height/1634,cc.winSize.height<=900?(this.m_UIcamera.getComponent(cc.Camera).zoomRatio=cc.winSize.height/1634,this.node.getChildByName("score").scale=cc.winSize.height/1634,this.node.getChildByName("bestscore").scale=cc.winSize.height/1634,this.m_CurtainCamera.getComponent(cc.Camera).zoomRatio=cc.winSize.height/1634,this.node.getChildByName("top").getComponent(cc.Widget).top-=1334*this.m_UIcamera.getComponent(cc.Camera).zoomRatio,this.node.getChildByName("bottom").getComponent(cc.Widget).bottom-=1334*this.m_UIcamera.getComponent(cc.Camera).zoomRatio):M.default.adjustIphoneX(this.node.getChildByName("top")),this.node.getChildByName("score").y=cc.winSize.height/1634*this.node.getChildByName("score").y,this.node.getChildByName("bestscore").y=cc.winSize.height/1634*this.node.getChildByName("bestscore").y,h.I=this;var t=w.default.getParamsInt(R.OnlineKeys.NewGuide,1);0==v.default.I.Exp&&1==v.default.I.CurLevel&&(0==t||1==t&&Q.default.I.ID%2==1)?this.standTime=0:this.standTime=6,this.m_Type=v.default.I.BattleType,this.m_BalllistRoot=this.node.getChildByName("balllist"),this.m_ballobj=this.node.getChildByName("ball1"),this.m_ballobj.active=!1,this.m_ballobj2.active=!1,this.m_CollectGameTip.active=!1,this.m_boomEff2=this.node.getChildByName("boom3"),this.m_boomEff2.active=!1,this.m_EfflightRoot=this.node.getChildByName("efflight"),this.m_EfflistRoot=this.node.getChildByName("efflist"),this.m_Efflight1Root=this.node.getChildByName("efflist1"),this.m_Efflight2Root=this.node.getChildByName("efflist2"),this.m_Hammer.active=!1,this.m_Wall1=this.node.getChildByName("s1"),this.m_Wall1.active=!0,this.m_Tip.active=!1,this.m_boomEffNew.getChildByName("p_light").getComponent(cc.ParticleSystem).resetSystem(),this.m_boomEffNew.getChildByName("p_light2").getComponent(cc.ParticleSystem).resetSystem(),this.power=v.default.I.Power,this.m_gridadbtn.children[0].children[0].active=0==v.default.I.getDayDataWithKey(_.DayKeys.ClickAd,0),this.comTopWrap.initMelonBtns(),b.DataMgr.User.IsOpenCpsQuan&&b.DataMgr.CPS.isOpen()&&this.comTopWrap.initCpsEntry(),this.initEvent(),this.InitData(),this.hideWorning(),B.AudioMgr.stopMusic(),B.AudioMgr.playBgm(W.AudioEnum.music2),v.default.I.IsFinishHomeGuid&&this.scheduleOnce(this.preloadScene,5),0==v.default.I.Exp&&1==v.default.I.CurLevel||this.scheduleOnce(this.initPreload,4),this.loadBanner(),this.initPoints(),M.default.topShow(_.TopBarType.None),this.checkInviteCount(),M.default.showGameStartInsterstitial(),this.initAdItem(),this.sdkEventWithKey(R.EventKeys.FirstLogin_gameSceneEnterend),g.AppDataMgr.set(_.AppDataKey.OnHideHistory,!1),nt.default.checkCollect(_.DayKeys.CollectState),nt.default.checkFloating()},vt.prototype.preloadScene=function(){return new Promise(function(){cc.director.preloadScene("HomeScene")})},vt.prototype.initPreload=function(){return l(this,void 0,void 0,function(){var t,e;return u(this,function(n){switch(n.label){case 0:return t=["prefab/panel/panel_revive","prefab/panel/panel_random","prefab/popwin/popwin_menu","prefab/popwin/popwin_getreward","prefab/popwin/popwin_lvup","prefab/popwin/popwin_skinshop","prefab/popwin/popwin_active","prefab/popwin/popwin_task","prefab/popwin/popwin_taskchest","prefab/popwin/popwin_skill","prefab/popwin/popwin_shop","prefab/popwin/popwin_record","prefab/popwin/popwin_itemtip","prefab/popwin/popwin_gift","prefab/popwin/popwin_fail","prefab/game/game_fit-task","prefab/common/star_fly","prefab/common/diamond_fly","animition/joker_ball/joker_ball_anim"],[4,m.default.wait(10)];case 1:n.sent(),e=0,n.label=2;case 2:return e<t.length?(E.LoaderMgr.loadPrefabWithUrl(t[e]),[4,m.default.wait(10)]):[3,5];case 3:n.sent(),n.label=4;case 4:return e++,[3,2];case 5:return[2]}})})},vt.prototype.start=function(){this.nodeRank.y=this.node.getChildByName("top").y-155,this.setScore(),this.InitDiamond(),this.initQueuePop(),this.m_Type==d.Nomal?this.toNomalModel(!0):this.toLevelModel(!0);var t=P.OnlineMgr.getBool(R.OnlineKeys.GmFlag,D.default.isH5?1:0);this.m_gridadbtn.parent.getChildByName("btn_gm_test").active=t,M.default.PersistNode.TopBar||M.default.PersistNode.install(cc.instantiate(this.prefabTopbar)),this.comBottomWrap.initHome()},vt.prototype.update=function(t){0<=this.m_effcd&&(this.m_effcd-=t),0<=this.soundcd&&(this.soundcd-=t),this.standTime<5?this.standTime+=t:this.showGuid(),1==this.m_Worning.active&&0<=this.worningtime&&(this.worningtime+=t),this.m_Worning.active&&(this.worningtiptime+=t),30<=this.worningtiptime&&(this.showfullpower(),this.worningtiptime=0),60<=this.worningtime&&!this.m_isUsingDelItem&&!this.m_IsPassing&&(this.openworningTip(),this.worningtime=0),0<this.checkgameovercd&&(this.checkgameovercd-=t)},vt.prototype.onDestroy=function(){Z.default.I.clearLevelSelect(),this.hideBanner(),M.default.hideGride(),1!=M.default.s_isShowWxAd&&0!=w.default.getParamsInt(R.OnlineKeys.build_scene_module_ad,0)||V.default.I.hideSinglegridad(),this.removeEvent(),D.default.isTecent&&"object"==typeof wx?(wx.offShow(this.handleShow),wx.offHide(this.handleHide)):cc.game.off(cc.game.EVENT_HIDE,this.handleHistoryRecord,this)},vt.prototype.initEvent=function(){A.EventMgr.on(S.EventEnum.SceneToShow,this.handlePopwinToTop,this),A.EventMgr.on(S.EventEnum.SceneToHide,this.handlePopwinFromFirst,this),A.EventMgr.on(S.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this),A.EventMgr.on(S.EventEnum.UpdateFriendRank,this.handleUpdateFriendRank,this),A.EventMgr.on(S.EventEnum.UpdateChest,this.handleUpdateChest,this),A.EventMgr.on(S.EventEnum.UpdateAvatar,this.handleHeadIcon,this),A.EventMgr.on(S.EventEnum.MissionComplete,this.handleShowTaskTip,this),w.default.bindEvent(S.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),D.default.isTecent&&"object"==typeof wx?(wx.onShow(this.handleShow),wx.onHide(this.handleHide)):cc.game.on(cc.game.EVENT_HIDE,this.handleHistoryRecord,this)},vt.prototype.removeEvent=function(){A.EventMgr.off(S.EventEnum.SceneToShow,this.handlePopwinToTop,this),A.EventMgr.off(S.EventEnum.SceneToHide,this.handlePopwinFromFirst,this),A.EventMgr.off(S.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this),A.EventMgr.off(S.EventEnum.UpdateFriendRank,this.handleUpdateFriendRank,this),A.EventMgr.off(S.EventEnum.UpdateChest,this.handleUpdateChest,this),A.EventMgr.off(S.EventEnum.UpdateAvatar,this.handleHeadIcon,this),A.EventMgr.off(S.EventEnum.MissionComplete,this.handleShowTaskTip,this),w.default.removeEvent(S.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},vt.prototype.onGMTest=function(){T.ViewMgr.openPopwin(ut.default,{data:{type:0}})},vt.prototype.initQueuePop=function(){it.default.canShow()&&!M.default.s_isShowedReward&&nt.default.IsSignLoginShow&&(this.addPopwinList(it.default,{}),b.DataMgr.User.reqDayDataWithKey(_.DayKeys.TodaySignShowed,1));var t=12-b.DataMgr.User.getDayDataWithKey(_.DayKeys.lotterytimes,0),e=w.default.getParamsInt(R.OnlineKeys.lottery_min_lv,N.default.baseMinLotterylv);M.default.isLottery&&v.default.I.CurLevel>=e&&!M.default.s_isShowedLottery&&0<t&&(0==(n=w.default.getParamsInt(R.OnlineKeys.lottery_old_user_pop_abtest,0))||1==n&&Q.default.I.ID%2==1)&&this.addPopwinList(rt.default,{});var n=w.default.getParamsInt(R.OnlineKeys.invite_p2p_abtest,2);0==n||1==n&&Q.default.I.ID%2==1||v.default.I.CurLevel>=w.default.getParamsInt(R.OnlineKeys.invite_pop_minlv,15)&&0===v.default.I.getDayDataWithKey(_.DayKeys.InviteFriendOpen,0)&&this.addPopwinList(dt.default,{}),this.isNewPlayer()&&nt.default.IsOpenRule&&this.addPopwinList(pt.default,{}),gt.default.CheckOpen(),this.comTopWrap.initRedpacket()},vt.prototype.InitData=function(){var t=((t=P.OnlineMgr.BlockRewards)[0],t[1],t[2]);this.m_buffcd=t,(t=P.OnlineMgr.SkillPower)[0],t[1],t=t[2],this.m_buffcd2=t,(t=P.OnlineMgr.RedPacket)[0],t[1],t=t[2],this.m_buffcd3=t,v.default.I.reqfixDiamond(),v.default.I.fixBallData(),this.initAd(),this.initItemData(),this.setSkin(!0)},vt.prototype.InitBattleData=function(){this.playbg(),this.m_curlevel=v.default.I.CurLevel,this.m_exp=v.default.I.Exp,this.m_curScore=this.m_Type==d.Nomal?v.default.I.CurScore:v.default.I.Lv_CurScore,this.m_bestScore=this.m_Type==d.Nomal?v.default.I.BestScore:v.default.I.Lv_BestScore,this.initRank(),this.m_curball&&(this.m_curball.active=!1),this.m_curball2&&(this.m_curball2.active=!1),this.m_curball&&(this.m_curball.destroy(),this.m_curball=null),this.m_curball2&&(this.m_curball2.destroy(),this.m_curball2=null);var t=((t=P.OnlineMgr.BlockRewards)[0],t[1],t[2]);this.m_buffcd=t,(t=P.OnlineMgr.SkillPower)[0],t[1],t=t[2],this.m_buffcd2=t,(t=P.OnlineMgr.RedPacket)[0],t[1],t=t[2],this.m_buffcd3=t,this.setScore(),100<=this.power&&(this.power=100),this.comBottomWrap.initPower(),this.comBottomWrap.initItems(),this.deletAllBalls()},vt.prototype.InitModelBttle=function(t){return void 0===t&&(t=!1),l(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return t?[3,2]:[4,m.default.wait(1400)];case 1:e.sent(),e.label=2;case 2:return this.InitBalls(),this.createBall(),this.setScore(),[4,m.default.wait(2e3)];case 3:return e.sent(),this.checkLine(),[2]}})})},vt.prototype.initAd=function(){this.comAdLike.getComponent(L.default).init(R.SDKBannerLocation.LOCATION_PAGE_GAME),this.adCross.getComponent(G.default).init(R.SDKBannerLocation.LOCATION_PAGE_GAME,1)},vt.prototype.initAdItem=function(){this.adCross.getComponent(G.default).refresh(),this.adCross.getComponent(G.default).play(!0)},vt.prototype.initPoints=function(){x.PointMgr.register([{type:_.ModuleType.Menu,comps:[this.pointTipArr[0]]},{type:_.ModuleType.Shop,comps:[this.pointTipArr[1]]}])},vt.prototype.initRankBtn=function(){M.default.createAuthBtn("gameRank","",this.nodeRank,{callback:function(t){0===t&&M.default.showTip("\u67e5\u770b\u6392\u884c\u699c\u9700\u6388\u6743\u54e6~")},context:this})},vt.prototype.InitDiamond=function(){this.comTopWrap.initTopDiamond()},vt.prototype.handleUpdateDimamond=function(t){t.detail?this.playDiamondAnim():this.InitDiamond()},vt.prototype.playDani=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,m.default.wait(1e3)];case 1:return t.sent(),this.comTopWrap.actionAddDiamond(),this.InitDiamond(),[2]}})})},vt.prototype.playDiamondAnim=function(){var t=this;return this.CoinUILayer2Top(),new Promise(function(e){E.LoaderMgr.loadPrefabWithUrl("prefab/common/diamond_fly").then(function(n){var i=U.PoolMgr.getPrefab(n,t.node);t.playDani(),K.default.playAnim(i).then(function(){t.CoinUILayer2UI(),U.PoolMgr.putNode(i),e(null)})})})},vt.prototype.playUseJokerAnim=function(){return l(this,void 0,void 0,function(){var t,e=this;return u(this,function(n){switch(n.label){case 0:return this.m_curball.active=!1,[4,this.comBottomWrap.getItemNodes()];case 1:return t=n.sent(),[2,new Promise(function(n){E.LoaderMgr.loadPrefabWithUrl("animition/joker_ball/joker_ball_anim").then(function(i){var o=U.PoolMgr.getPrefab(i,e.node);o.position=M.default.getTargetPos(t[0],e.node);var a=o.position,r=M.default.getTargetPos(e.m_curball,o.parent);r=cc.v2(r.x*(cc.winSize.height/1634),r.y*(cc.winSize.height/1634)),i=M.default.getEndPointByTrigonometric(20,a,r),r.sub(a).mag(),B.AudioMgr.playSound(W.AudioEnum.fly),K.default.bezier(o,1,a,i,r,40/60).then(function(){cc.tween(o).to(10/60,{}).call(function(){e.createJokerBall(),cc.isValid(e.m_curball)&&(e.m_curball.active=!0)}).start()}),K.default.playAnim(o).then(function(){U.PoolMgr.putNode(o),n(null)})})})]}})})},vt.prototype.playCancelUseJokerAnim=function(){var t=this;return new Promise(function(e){return l(t,void 0,void 0,function(){var t,n=this;return u(this,function(i){switch(i.label){case 0:return[4,this.comBottomWrap.getItemNodes()];case 1:return t=i.sent(),E.LoaderMgr.loadPrefabWithUrl("animition/joker_ball/joker_ball_anim").then(function(i){var o=U.PoolMgr.getPrefab(i,n.node);o.position=M.default.getTargetPos(n.m_curball,n.node),o.position=cc.v2(o.position.x*(cc.winSize.height/1634),o.position.y*(cc.winSize.height/1634)),cc.tween(o).to(.5,{position:M.default.getTargetPos(t[0],o.parent)}).start(),K.default.playAnim(o,"anim_ball_jokerball_in").then(function(){U.PoolMgr.putNode(o),e(null)})}),[2]}})})})},vt.prototype.playUseHammerAnim=function(t){var e=this;return new Promise(function(n){return l(e,void 0,void 0,function(){var e,i=this;return u(this,function(o){switch(o.label){case 0:return[4,this.comBottomWrap.getItemNodes()];case 1:return e=o.sent(),E.LoaderMgr.loadPrefabWithUrl("animition/joker_ball/joker_ball_anim").then(function(o){var a=U.PoolMgr.getPrefab(o,i.node);a.position=M.default.getTargetPos(e[2],i.node);var r=a.position,s=M.default.getTargetPos(t,a.parent);s=cc.v2(s.x*cc.winSize.height/1624,s.y*cc.winSize.height/1624),o=M.default.getEndPointByTrigonometric(20,r,s),s.sub(r).mag(),B.AudioMgr.playSound(W.AudioEnum.fly),K.default.bezier(a,1,r,o,s,40/60).then(function(){U.PoolMgr.putNode(a),n(null)}),K.default.playAnim(a,"anim_ball_hammer")}),[2]}})})})},vt.prototype.playCancelUseHammerAnim=function(t){var e=this;return new Promise(function(n){return l(e,void 0,void 0,function(){var e,i=this;return u(this,function(o){switch(o.label){case 0:return[4,this.comBottomWrap.getItemNodes()];case 1:return e=o.sent(),E.LoaderMgr.loadPrefabWithUrl("animition/joker_ball/joker_ball_anim").then(function(o){var a=U.PoolMgr.getPrefab(o,i.node);a.position=M.default.getTargetPos(t,i.node),cc.tween(a).to(.5,{position:M.default.getTargetPos(e[2],a.parent)}).start(),K.default.playAnim(a,"anim_ball_hammer_in").then(function(){U.PoolMgr.putNode(a),n(null)})}),[2]}})})})},vt.prototype.initItemData=function(){this.m_bagprops=v.default.I.Data.props},vt.prototype.initRank=function(){0<this.m_bestScore&&at.default.I.save(this.m_bestScore,this.getMaxBallLv(),!0),this.doShowRank(this.m_curScore)},vt.prototype.InitBalls=function(){var t;if(this.deletAllBalls(),!(t=this.m_Type==d.Nomal?v.default.I.HistoryData:v.default.I.Lv_HistoryData)||!t.balls||t.balls.length<=0)this.createNewPlayerBall();else{this.m_curScore=t.score,this.m_Type==d.Level&&v.default.I.reqLvCurTarBall(t.tarballlv),t.timeProps&&t.timeProps[0]&&(this.m_props=t.timeProps),this.m_reviveTimes=t.reviveTimes,t.balls=t.balls||[];for(var e=0;e<t.balls.length;e++){var n,i=t.balls[e];i.lv<=0||700<i.y||i.y<-500||((n=cc.instantiate(this.m_ballobj)).active=!0,n.parent=this.m_BalllistRoot,n.position=cc.v2(i.x,i.y),(n=n.getComponent(f.default)).m_buff=i.buffid,n.InitBall(i.lv,!0,!0),n.m_falltime=0)}this.comBottomWrap.refreshItemsInfo(),this.m_Type==d.Level&&this.setTarBallInfo(),v.default.I.Vibrate&&w.default.vibrateShort()}},vt.prototype.toOldGame=function(t){var e=this;this.deletAllBalls(),this.m_curScore=t.score,t.timeProps&&t.timeProps[0]&&(this.m_props=t.timeProps),this.m_reviveTimes=0,this.m_fullpowertimes=0,v.default.I.reqLvCurTarBall(t.tarballlv).then(function(){e.createBall(!1,!0)});for(var n=0;n<t.balls.length;n++){var i,o=t.balls[n];o.lv<=0||((i=cc.instantiate(this.m_ballobj)).active=!0,i.parent=this.m_BalllistRoot,i.position=cc.v2(o.x,o.y),(i=i.getComponent(f.default)).m_buff=o.buffid,i.InitBall(o.lv,!0,!0),i.m_falltime=0)}this.setScore(),this.initRank(),this.initItemData(),this.comBottomWrap.refreshItemsInfo(),this.m_Type==d.Level&&this.setTarBallInfo(),v.default.I.Vibrate&&w.default.vibrateShort()},vt.prototype.addScore=function(t){var e,n=t;(t=this.m_Type==d.Level?t+10-(e=(e=v.default.I.Lv_CurTarBallLv)<=10?10:e):t)<0&&j.default.event(R.EventKeys.negative_score,"add score",{ext_val:"tarballlv="+v.default.I.Lv_CurTarBallLv+"oldnum="+n}),t=Math.max(t,0),this.m_curScore+=+t,this.m_curScore>this.m_bestScore&&(this.m_bestScore=this.m_curScore,at.default.I.save(this.m_bestScore,this.getMaxBallLv(),!0)),this.m_exp+=+t,t=this.getNextLvScore(),this.doUpdateRank(this.m_curScore),this.setScore(),this.m_exp>=t&&(this.m_exp=0,this.m_curlevel++,b.DataMgr.Missions.addMissionProgress($.MissionCheckType.Lvup,1),j.default.event(R.EventKeys.Lvup,R.EventFrom.game,{ext_val:this.m_curlevel}),2==this.m_curlevel?this.sdkEventWithKey(R.EventKeys.Exp2_exp2Got):3==this.m_curlevel?this.sdkEventWithKey(R.EventKeys.Exp3_exp3Got):4==this.m_curlevel?this.sdkEventWithKey(R.EventKeys.Exp4_exp4Got):5==this.m_curlevel?this.sdkEventWithKey(R.EventKeys.Exp5_exp5Got):6==this.m_curlevel?this.sdkEventWithKey(R.EventKeys.Exp6_exp6Got):7==this.m_curlevel?this.sdkEventWithKey(R.EventKeys.exp_7_got):8==this.m_curlevel?this.sdkEventWithKey(R.EventKeys.exp_8_got):9==this.m_curlevel?this.sdkEventWithKey(R.EventKeys.exp_9_got):10==this.m_curlevel&&this.sdkEventWithKey(R.EventKeys.exp_10_got),0==(t=w.default.getParamsInt(R.OnlineKeys.double_star_unshow_abtest,0))||1==t&&Q.default.I.ID%2==1||!M.default.s_iscloselvup?this.addPopwinList(z.default,{anim:!1},!1):this.onlyLvup())},vt.prototype.LogLevel=function(){var t=N.default.MinTarBallLv;t=v.default.I.Lv_CurTarBallLv-t+1,j.default.addLogLevel({id:t,ptype:0})},vt.prototype.LogLevelWin=function(){var t=N.default.MinTarBallLv;t=v.default.I.Lv_CurTarBallLv-t+1,j.default.logLevelWin(t,{first:0,ctime:0})},vt.prototype.LogLevelFail=function(){var t=N.default.MinTarBallLv;t=v.default.I.Lv_CurTarBallLv-t+1,j.default.logLevelFail(t,{ctime:0,first:0})},vt.prototype.setScore=function(){this.m_labcurScore.setValue(this.m_curScore),this.m_labBestScore.setValue(this.m_bestScore),this.comTopWrap.initTopLvBar()},vt.prototype.levelup=function(){var t=w.default.getParamsInt(R.OnlineKeys.invite_event_minlv,N.default.baseMinInviteLv),e=w.default.getParamsInt(R.OnlineKeys.lottery_min_lv,N.default.baseMinLotterylv),n=w.default.getParamsInt(R.OnlineKeys.online_gift_show_lv,N.default.baseMinOnlineGiftlv),i=w.default.getParamsInt(R.OnlineKeys.game_collect_min_lv,15);5==this.m_curlevel?(B.AudioMgr.playSound(W.AudioEnum.function_unlock),this.unLockChallenge()):this.m_curlevel==t?(B.AudioMgr.playSound(W.AudioEnum.function_unlock),K.default.playAnim(this.node.getChildByName("top").getChildByName("right").getChildByName("active"),"anim_btn_active_in"),0<=v.default.I.ActInviteTime&&this.addPopwinList(ot.default,{type:_.InviteType.Star})):this.m_curlevel==e&&M.default.isLottery?B.AudioMgr.playSound(W.AudioEnum.function_unlock):this.m_curlevel==n&&M.default.isOnlineGift?this.comTopWrap.unlockOnlineGift():this.m_curlevel!=i||v.default.I.IsCollectShowed||(2==(o=w.default.getParamsInt(R.OnlineKeys.game_collect_force_show_abtest,0))||1==o&&Q.default.I.ID%2==0)&&this.addPopwinList(ct.default,{});var o=0;(i=v.default.I.getRuningTasks())&&0<i.length&&(1==(i=i[0].id)&&(i=2),o=b.DataMgr.Milestone.getTaskCostStar(i)),!v.default.I.IsFinishHomeGuid&&v.default.I.Star>=o-2&&this.scheduleOnce(this.preloadScene,5)},vt.prototype.overChestAni=function(){this.setScore()},vt.prototype.createBall=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.m_curball&&(this.m_curball.destroy(),this.m_curball=null),e&&this.m_curball2&&(this.m_curball2.destroy(),this.m_curball2=null);var n=!1,i=-1;this.m_Type==d.Level&&(this.m_Change.active=!0,this.m_changeicon.active=!0),this.m_Type==d.Level&&this.m_curball2&&!t?(this.m_curball=this.m_curball2,i=this.m_curball.getComponent(f.default).m_lv,this.m_curball.destroy(),this.m_curball=cc.instantiate(this.m_ballobj),n=!0):(this.m_curball=cc.instantiate(this.m_ballobj),t&&this.m_curball2&&this.m_curball2.destroy()),0<this.m_buffcd&&this.m_buffcd--,0<this.m_buffcd2&&this.m_buffcd2--,0<this.m_buffcd3&&this.m_buffcd3--,this.m_curball.active=!0,this.m_curball.parent=this.m_EfflightRoot,this.m_curball.position=this.m_ballobj.position,e=this.m_curball.getComponent(f.default);var o,a=this.m_Type==d.Nomal?Math.round(Math.max(4*Math.random(),1)):((a=v.default.I.Lv_CurTarBallLv)<=12?a<=10&&(a=10):this.getScaleLvByLv(a),H.default.random(a-9,a-6));(e.m_isJoker=t)?e.InitBall(-1):0==n&&((o=v.default.I.TeachBall)<10?(e.InitBall(this.getTeachBall(o)),9==o&&this.scheduleOnce(this.initPreload,4)):e.InitBall(a)),0<i&&e.InitBall(i),e.m_rigidbody.type=cc.RigidBodyType.Kinematic,e.setColliderEnable(!1),e.node.scale=e.getScale(),e.NewballAnim(),e.enableMotion(),this.m_curlevel<=w.default.getParamsInt(R.OnlineKeys.guide_line_max_lv,5)&&(e.node.getChildByName("line").active=!0,this.setline()),this.m_Type!=d.Nomal&&(this.m_curball2=cc.instantiate(this.m_ballobj2),this.m_curball2.active=!0,this.m_curball2.parent=this.m_ballobj2.parent,this.m_curball2.position=this.m_ballobj2.position,o=this.m_curball2.getComponent(f.default),(i=v.default.I.Lv_CurTarBallLv)<=12?i<=10&&(i=10):this.getScaleLvByLv(i),H.default.random(i-9,i-6),o.m_isJoker=!1,i=v.default.I.TeachBall+1,o.m_buff=0,i<10?o.InitBall(this.getTeachBall(i)):o.InitBall(a),o.m_buffimg.active=!1,o.m_buffimg3.active=!1,o.m_light.active=!1,o.m_lighteff.active=!1,o.m_labnum.node.active=!0,this.m_curball2.scale=.8,o.m_rigidbody.type=cc.RigidBodyType.Kinematic,o.setColliderEnable(!1)),this.checkGameOver(e)&&this.checkIsCanRevive()&&(this.m_reviveTimes++,C.default.OpenUIRevive(),-2!=this.worningtime&&(this.worningtime=-1))},vt.prototype.nextball=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,m.default.wait(400)];case 1:return t.sent(),this.createBall(),[2]}})})},vt.prototype.createJokerBall=function(){this.m_curball&&this.m_curball.destroy(),this.createBall(!0),this.m_curball.name="joker"},vt.prototype.GameOver=function(t){void 0===t&&(t=!1),-2!=this.worningtime&&(this.worningtime=-1),this.LogLevelFail(),this.deletAllBalls(),this.setTarBallInfo(),this.m_curball&&(this.m_curball.destroy(),this.m_curball=null),this.m_curball2&&(this.m_curball2.destroy(),this.m_curball2=null),this.comTopWrap.hideAllGifts(),this.m_IsPassing=!1,T.ViewMgr.openPopwin(k.default,{data:{score:this.m_curScore,isrestart:t},anim:!1})},vt.prototype.checkIsCanRevive=function(){return!0},vt.prototype.IsCanReviveTimesMax=function(){var t=2==(t=w.default.getParamsInt(R.OnlineKeys.revive_time_limit_abtest,0))||1==t&&Q.default.I.ID%2==0?w.default.getParamsInt(R.OnlineKeys.revive_time_limit_b,2):w.default.getParamsInt(R.OnlineKeys.revive_time_limit_a,1e4);return this.m_reviveTimes>=t},vt.prototype.gethadReviveTimes=function(){var t=2==(t=w.default.getParamsInt(R.OnlineKeys.revive_time_limit_abtest,0))||1==t&&Q.default.I.ID%2==0?w.default.getParamsInt(R.OnlineKeys.revive_time_limit_b,2):w.default.getParamsInt(R.OnlineKeys.revive_time_limit_a,1e4);return Math.max(0,t-this.m_reviveTimes)},vt.prototype.RefreshAllBalls=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.checkgameovercd=5,this.m_BalllistRoot.children.forEach(function(t){Math.random(),t.getComponent(f.default).addForce(0,H.default.range(800,1200))}),[4,m.default.wait(500)];case 1:return t.sent(),this.m_BalllistRoot.children.forEach(function(t){var e=Math.random();t.getComponent(f.default).m_collider.restitution=.8,t.getComponent(f.default).m_collider.apply(),.5<=e?t.getComponent(f.default).addForce(800,-400):t.getComponent(f.default).addForce(-800,-400)}),[4,m.default.wait(500)];case 2:return t.sent(),this.m_BalllistRoot.children.forEach(function(t){t.getComponent(f.default).m_collider.restitution=.3,t.getComponent(f.default).m_collider.apply()}),[2]}})})},vt.prototype.setline=function(){for(var t,e=this.m_curball.getChildByName("line"),n=[],i=0;i<this.m_BalllistRoot.children.length;i++){var o=this.m_BalllistRoot.children[i];Math.abs(this.m_curball.x-o.x)<35*o.scale&&n.push(o)}n.sort(function(t,e){return e.y-t.y}),0<n.length?(t=(M.default.getTargetPos(e,n[0].parent).y-(n[0].y+35*n[0].scale))/517,e.children[0].getComponent(cc.Sprite).fillRange=-t):e.children[0].getComponent(cc.Sprite).fillRange=-1},vt.prototype.onTouchStart=function(t){var e=t;this.m_oldx=e.getLocationX(),this.sdkEventWithKey(R.EventKeys.Level1_touchScreenFirstTime),null==this.m_curball||this.m_isUsingDelItem||this.m_IsPassing||0==this.m_curball.active||(this.m_curball.getChildByName("line").active=!0,this.setline(),(t=e.getLocationX()-375)>=(e=this.m_Type==d.Nomal?270:340)-35*this.m_curball.scale?t=e-35*this.m_curball.scale:t<=-e+35*this.m_curball.scale&&(t=-e+35*this.m_curball.scale),this.tweencur=cc.tween(this.m_curball).to(.1,{x:t}).start(),this.mindex=0,this.checkGameOver(this.m_curball.getComponent(f.default))&&this.checkIsCanRevive()&&(this.m_reviveTimes++,C.default.OpenUIRevive(),-2!=this.worningtime&&(this.worningtime=-1)))},vt.prototype.onTouchMove=function(t){var e,n=t;n.getLocationX(),this.sdkEventWithKey(R.EventKeys.Level1_touchmoveScreenFirstTime),null==this.m_curball||this.m_isUsingDelItem||this.m_IsPassing||0==this.m_curball.active?this.m_oldx=n.getLocationX():(this.tweencur&&2<=this.mindex&&this.tweencur.stop(),this.setline(),this.m_curball.getChildByName("line").active,e=n.getLocationX(),this.sdkEventWithKey(R.EventKeys.Level1_touchScreenFirstTime),this.standTime=0,this.hideGuid(!0),(t=this.m_curball.getComponent(f.default)).m_rigidbody.type=cc.RigidBodyType.Kinematic,t.setColliderEnable(!1),t=this.m_Type==d.Nomal?270:340,this.m_curball.x+=cc.director.getDeltaTime()*(e-this.m_oldx)*100,this.m_curball.x+35*this.m_curball.scale>=t?this.m_curball.x=t-35*this.m_curball.scale:this.m_curball.x-35*this.m_curball.scale<=-t&&(this.m_curball.x=-t+35*this.m_curball.scale),this.m_oldx=n.getLocationX(),this.mindex++)},vt.prototype.onTouchEnd=function(){var t,e=v.default.I.TeachBall;0==e?this.sdkEventWithKey(R.EventKeys.Level1_ball1Drop):1==e?this.sdkEventWithKey(R.EventKeys.Level1_ball2Drop):4==e&&this.sdkEventWithKey(R.EventKeys.Level1_ball5Drop),null==this.m_curball||this.m_isUsingDelItem||this.m_IsPassing||0==this.m_curball.active||!this.isCanFall()||((t=this.m_curball.getComponent(f.default)).node.name="ball"+this.m_balllist.length.toString(),this.m_curball.parent=this.m_BalllistRoot,this.m_balllist.push(t),e<10&&v.default.I.reqaddTeachBall(),this.m_curball.getChildByName("line").active=!1,t.setColliderEnable(!0),t.m_rigidbody.type=cc.RigidBodyType.Dynamic,t.addForce(0,-600),t.isRedPacket=!0,this.lastredball&&this.lastredball.node&&(this.lastredball.isRedPacket=!1),(this.lastredball=t).m_isJoker&&(-2!=this.worningtime&&(this.worningtime=0),this.comTopWrap.hidePropTip(),this.node.parent.getComponent(cc.Animation).play("anim_popup_out"),this.m_isUsingJokerball=!1),this.m_curball=null,this.m_oldx=375,this.saveScoreBall++,this.reqSaveScore(),this.nextball())},vt.prototype.getScaleLvByLv=function(t){return(t-1-12)%5+8},vt.prototype.getSmallBall=function(){var t=null,e=99999999;return this.m_BalllistRoot.children.forEach(function(n){var i=n.getComponent(f.default);i.m_lv<e&&(e=i.m_lv,t=n)}),t||null},vt.prototype.getcurBalls=function(){var t=[];return this.m_BalllistRoot.children.forEach(function(e){var n=e.getComponent(f.default),i=new y.BallData;i.lv=n.m_lv,i.x=Math.floor(100*e.x)/100,i.y=Math.floor(100*e.y)/100,i.buffid=n.m_buff,t.push(i)}),t},vt.prototype.getcurBallsWithoutLv=function(t){var e=[];return this.m_BalllistRoot.children.forEach(function(n){var i,o=n.getComponent(f.default);t!=o.m_lv&&((i=new y.BallData).lv=o.m_lv,i.x=n.x,i.y=n.y,i.buffid=o.m_buff,e.push(i))}),e},vt.prototype.getBallsByLv=function(t){var e=[];return this.m_BalllistRoot.children.forEach(function(n){n.getComponent(f.default).m_lv==t&&e.push(n)}),e},vt.prototype.getHistoryMaxBallLv=function(){var t,e=0,n=b.DataMgr.User.getMaxRecordDatas(h.I.m_Type)||[];if(n&&0<n.length)for(var i=n[0].balls,o=0;o<i.length;o++)(t=i[o]).lv>e&&(e=t.lv);if(v.default.I.HistoryData)for(i=v.default.I.HistoryData.balls||[],o=0;o<i.length;o++)(t=i[o]).lv>e&&(e=t.lv);return e<=0?1:e},vt.prototype.getMaxBallLv=function(){var t=0;return this.m_BalllistRoot.children.forEach(function(e){(e=e.getComponent(f.default)).m_lv>t&&(t=e.m_lv)}),t},vt.prototype.getMaxBall=function(){var t=0,e=null;return this.m_BalllistRoot.children.forEach(function(n){var i=n.getComponent(f.default);i.m_lv>t&&(t=i.m_lv,e=n)}),0<t?e:null},vt.prototype.getBallsWithoutSmall=function(){var t=[];return this.m_BalllistRoot.children.forEach(function(e){var n,i=e.getComponent(f.default);4<i.m_lv&&((n=new y.BallData).lv=i.m_lv,n.x=e.x,n.y=e.y,n.buffid=i.m_buff,t.push(n))}),t},vt.prototype.getReviveballs=function(){var t=[];return this.m_BalllistRoot.children.forEach(function(e){var n=e.getComponent(f.default),i=v.default.I.Lv_CurTarBallLv;n.m_lv<=i-8&&n.m_buff<=0&&t.push(e)}),t},vt.prototype.createLvPassEff=function(t,e){return l(this,void 0,void 0,function(){var n,i;return u(this,function(o){switch(o.label){case 0:return(n=cc.instantiate(this.m_boomEff2)).parent=t,n.active=!0,n.position=cc.v2(0,0),(i=n.getComponent(cc.ParticleSystem)).startColor=this.getcolorBylv(e),i.endColor=this.getcolorBylv(e),[4,m.default.wait(1e3)];case 1:return o.sent(),n.destroy(),[2]}})})},vt.prototype.createBoomEff=function(t,e,n,i){return void 0===i&&(i=!0),l(this,void 0,void 0,function(){var o,a,r;return u(this,function(s){switch(s.label){case 0:return(o=cc.instantiate(this.m_boomEffNew)).active=!0,o.parent=this.m_EfflistRoot,o.position=e,o.scale=n,o.getChildByName("colocr_1").active=!1,o.getChildByName("colocr_2").active=!1,o.getChildByName("colocr_1").color=this.getcolorBylv(t),o.getChildByName("colocr_2").color=this.getcolorBylv(t),a=o.getChildByName("p_light").getComponent(cc.ParticleSystem),r=o.getChildByName("p_light2").getComponent(cc.ParticleSystem),a.node.active=!1,r.node.active=!1,0<this.m_effcd&&i&&(o.getChildByName("colocr_1").active=!0,o.getChildByName("colocr_2").active=!0,o.getComponent(cc.Animation).play("anim_game_cube_p"),a.startColor=this.getcolorBylv(t),a.endColor=this.getcolorBylv(t),r.startColor=this.getcolorBylv(t),r.endColor=this.getcolorBylv(t),this.m_bglight.color=this.getcolorBylv(t),this.m_bglight.getComponent(cc.Animation).play(),a.node.active=!0,r.node.active=!0,a.resetSystem(),r.resetSystem()),0<this.soundcd?(this.mergeindex++,this.m_ComboNum++,5<=this.mergeindex&&(this.mergeindex=5)):(this.mergeindex=1,this.m_ComboNum=0),3<=this.m_ComboNum&&this.comTopWrap.acionAnimCombon(),r=w.default.getParamsObj(R.OnlineKeys.blast_force_ratio,[3,.2]),this.m_ComboNum>=r[0]&&this.boom(e,r[1]),this.playcombineSound(),this.m_effcd=.5,this.soundcd=1,[4,m.default.wait(1e3)];case 1:return s.sent(),o&&o.destroy(),[2]}})})},vt.prototype.boom=function(t,e){var n;this.m_IsPassing||0==(n=w.default.getParamsInt(R.OnlineKeys.blast_force_abtest,2))||1==n&&Q.default.I.ID%2==1||Math.random()>e||(this.m_BalllistRoot.children.forEach(function(e){var n=e.position.sub(t).mag();10<=n&&n<=150&&(e.getComponent(f.default).m_rigidbody.linearVelocity=cc.v2(0,0),e.getComponent(f.default).addForce(H.default.range(-800,800),H.default.range(400,900)))}),K.default.shakeEffect(this.m_gamecamera,.2))},vt.prototype.deletAllBalls=function(){this.m_BalllistRoot.children.forEach(function(t){t.destroy()})},vt.prototype.deletBallsByLv=function(t){var e=this;this.m_BalllistRoot.children.forEach(function(n){(n=n.getComponent(f.default)).m_lv!=t||e.doDisappearAni(n.node)})},vt.prototype.deletBallsByMinLv=function(t){var e=this;this.m_BalllistRoot.children.forEach(function(n){!(n=n.getComponent(f.default)).m_isJoker&&n.m_lv<t&&e.doDisappearAni(n.node)})},vt.prototype.handleHistoryRecord=function(){var t={score:this.m_curScore,level:this.m_curlevel,stars:null,timeProps:this.m_props,balls:this.getcurBalls(),reviveTimes:this.m_reviveTimes,tarballlv:this.m_Type==d.Nomal?0:v.default.I.Lv_CurTarBallLv};v.default.I.reqBattleType(this.m_Type,!1),v.default.I.reqPlayerData(this.m_Type,this.m_curlevel,this.m_exp,this.m_bestScore,this.m_curScore,this.power,!1),v.default.I.reqHistory(t,this.m_Type,!0),g.AppDataMgr.set(_.AppDataKey.OnHideHistory,!0)},vt.prototype.isCanFall=function(){var t=35*this.m_curball.scale;if(this.m_curball.getComponent(f.default).m_isJoker)return!0;for(var e=0;e<this.m_BalllistRoot.children.length;e++){var n=this.m_BalllistRoot.children[e],i=35*n.scale;if(this.m_curball.position.sub(n.position).mag()<i+t&&this.m_curball.getComponent(f.default).m_lv!=n.getComponent(f.default).m_lv)return!1}return!0},vt.prototype.getNextLvScore=function(){var t=this.m_curlevel+1,e=P.OnlineMgr.getLvParam,n=e[0],i=e[1],o=e[2];return(e=this.m_curlevel<=1?0:n+Math.pow(this.m_curlevel-2,o)+i*(this.m_curlevel-2))<=0&&(e=0),n+Math.pow(t-2,o)+i*(t-2)-e},vt.prototype.checkWorning=function(){return l(this,void 0,void 0,function(){return u(this,function(){return this.getTopBall().length<=0?this.hideWorning():this.showWorning(),[2]})})},vt.prototype.checkGameOver=function(){if(0<this.checkgameovercd)return!1;this.checkWorning();for(var t=this.getTopBall(),e=35*this.m_curball.scale,n=2*(270-e)/100,i=e-270,o=0;o<100;o++){for(var a=!1,r=0;r<t.length;r++){var s=t[r];if(s.position.sub(cc.v2(i,this.m_curball.y)).mag()<e+35*s.scale){a=!0;break}}if(!a)return!1;i+=n}return!0},vt.prototype.getTopBall=function(){var t=[];return this.m_BalllistRoot.children.forEach(function(e){1<e.getComponent(f.default).m_falltime&&254<e.y+35*e.scale&&t.push(e)}),t},vt.prototype.restart=function(){g.AppDataMgr.set(_.AppDataKey.LvPassCount,0),this.deletAllBalls(),this.m_curScore=0,this.m_exp=0,this.m_reviveTimes=0,this.m_fullpowertimes=0,this.power=0,this.comBottomWrap.initPower();var t=P.OnlineMgr.BlockRewards,e=(t[0],t[1],t[2]);this.m_buffcd=e,(t=P.OnlineMgr.SkillPower)[0],t[1],e=t[2],this.m_buffcd2=e,(t=P.OnlineMgr.RedPacket)[0],t[1],e=t[2],this.m_buffcd3=e,this.setScore(),this.initRank(),this.createBall(),this.worningtime=0,b.DataMgr.User.getDayDataWithKey(_.DayKeys.RecordNum,0)<(0==(e=w.default.getParamsInt(R.OnlineKeys.record_continue_limit_abtest,0))||1==e&&Q.default.I.ID%2==1?w.default.getParamsInt(R.OnlineKeys.record_continue_limit_a,100):w.default.getParamsInt(R.OnlineKeys.record_continue_limit_b,3))&&T.ViewMgr.openPopwin(et.default,{data:{type:_.EnterGameState.FailMaxRecord}})},vt.prototype.backGamelv=function(){g.AppDataMgr.set(_.AppDataKey.LvPassCount,0),this.deletAllBalls(),this.m_curScore=Math.max(0,this.m_curScore-1e3),this.m_exp=0,this.m_reviveTimes=0,this.m_fullpowertimes=0,this.power=0,this.comBottomWrap.initPower();var t=P.OnlineMgr.BlockRewards,e=(t[0],t[1],t[2]);this.m_buffcd=e,(t=P.OnlineMgr.SkillPower)[0],t[1],e=t[2],this.m_buffcd2=e,(t=P.OnlineMgr.RedPacket)[0],t[1],e=t[2],this.m_buffcd3=e,this.setScore(),this.initRank(),this.createBall(),this.worningtime=0,b.DataMgr.User.getDayDataWithKey(_.DayKeys.RecordNum,0)<(0==(e=w.default.getParamsInt(R.OnlineKeys.record_continue_limit_abtest,0))||1==e&&Q.default.I.ID%2==1?w.default.getParamsInt(R.OnlineKeys.record_continue_limit_a,100):w.default.getParamsInt(R.OnlineKeys.record_continue_limit_b,3))&&T.ViewMgr.openPopwin(et.default,{data:{type:_.EnterGameState.FailMaxRecord}})},vt.prototype.revive=function(){return l(this,void 0,void 0,function(){var t,e,n;return u(this,function(i){switch(i.label){case 0:t=N.default.MinTarBallLv,n=v.default.I.Lv_CurTarBallLv,e=n-t+1,j.default.logLevelRelive(e),-2!=this.worningtime&&(this.worningtime=0),n=this.getReviveballs(),t=0,i.label=1;case 1:return t<n.length?(e=n[t],n=e.getComponent(f.default),this.doDisappearAni(e),h.I.createBoomEff(n.m_lv,n.node.position,n.getScale()),[4,m.default.wait(100)]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return this.RefreshAllBalls(),[2]}})})},vt.prototype.doAddOneItem=function(t){return l(this,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return[4,this.comBottomWrap.getItemNodes()];case 1:return e=n.sent(),(e=cc.instantiate(e[t[0]].getChildByName("icon"))).parent=this.node,e.scale=2,e.position=cc.v2(0,0),e.active=!0,b.DataMgr.User.reqProps(t[0],t[1]),this.doItemAnim(t[0],e,1,!0),e.destroy(),[2]}})})},vt.prototype.doAddTwoItem=function(t,e){return l(this,void 0,void 0,function(){var n,i;return u(this,function(o){switch(o.label){case 0:return[4,this.comBottomWrap.getItemNodes()];case 1:return i=o.sent(),(n=cc.instantiate(i[t[0]].getChildByName("icon"))).parent=this.node,n.scale=2,n.position=cc.v2(-60,0),n.active=!0,b.DataMgr.User.reqProps(t[0],t[1]),this.doItemAnim(t[0],n,1,!0),n.destroy(),(i=cc.instantiate(i[e[0]].getChildByName("icon"))).parent=this.node,i.scale=2,i.position=cc.v2(60,0),i.active=!0,b.DataMgr.User.reqProps(e[0],e[1]),this.doItemAnim(e[0],i,1,!0),i.destroy(),[2]}})})},vt.prototype.doAddThreeItem=function(t,e,n){return l(this,void 0,void 0,function(){var i,o;return u(this,function(a){switch(a.label){case 0:return[4,this.comBottomWrap.getItemNodes()];case 1:return o=a.sent(),(i=cc.instantiate(o[t[0]].getChildByName("icon"))).parent=this.node,i.scale=2,i.position=cc.v2(-100,0),i.active=!0,b.DataMgr.User.reqProps(t[0],t[1]),this.doItemAnim(t[0],i,1,!0),i.destroy(),(i=cc.instantiate(o[e[0]].getChildByName("icon"))).parent=this.node,i.scale=2,i.position=cc.v2(0,0),i.active=!0,b.DataMgr.User.reqProps(e[0],e[1]),this.doItemAnim(e[0],i,1,!0),i.destroy(),(o=cc.instantiate(o[n[0]].getChildByName("icon"))).parent=this.node,o.scale=2,o.position=cc.v2(100,0),o.active=!0,b.DataMgr.User.reqProps(n[0],n[1]),this.doItemAnim(n[0],o,1,!0),o.destroy(),[2]}})})},vt.prototype.doAddHelpItem=function(t){1==t?this.doAddOneItem([1,1]):2==t?this.doAddTwoItem([1,1],[2,1]):this.doAddThreeItem([0,1],[1,1],[2,1])},vt.prototype.openworningTip=function(){J.default.isopen||J.default.openTip(0)},vt.prototype.doDisappearAni=function(t){return l(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return cc.tween(t.getChildByName("ball")).to(.1,{scale:.5}).to(.2,{scale:1}).start(),[4,m.default.wait(120)];case 1:return e.sent(),cc.tween(t.getChildByName("ball")).to(.2,{opacity:0}).start(),[4,m.default.wait(200)];case 2:return e.sent(),t.destroy(),[2]}})})},vt.prototype.getSkinIndexBylv=function(t){return this.m_Type==d.Nomal?t<=12?t-1:11:t<=12?t-1:(t-1-12)%10+2},vt.prototype.getSkin=function(t){return this.m_Skins[this.getSkinIndexBylv(t)]},vt.prototype.getcolorBylv=function(t){return 1==(t=this.getSkinIndexBylv(t)+1)?new cc.Color(245,25,1):2==t?new cc.Color(248,206,0):3==t?new cc.Color(196,248,28):4==t?new cc.Color(44,222,249):5==t?new cc.Color(73,96,252):6==t?new cc.Color(252,74,188):7==t?new cc.Color(148,31,242):8==t?new cc.Color(253,129,0):9==t?new cc.Color(37,145,148):10==t?new cc.Color(251,175,114):11==t?new cc.Color(252,74,188):12==t?new cc.Color(248,206,0):-1==t?new cc.Color(255,255,255,130):new cc.Color(255,237,11)},vt.prototype.doAddStar=function(t){b.DataMgr.User.reqStar(t),this.comBottomWrap.addHomeStar(t)},vt.prototype.onlyLvup=function(){var t=this;this.comTopWrap.actionAnimLvup().then(function(){var e=w.default.getParamsInt(R.OnlineKeys.double_star_unshow_insert_ad,0);(2==e||1==e&&Q.default.I.ID%2==0)&&M.default.showLvupInterstitial(),t.doLevelUpAni(1),t.checkOpenCps()})},vt.prototype.checkOpenCps=function(){var t,e;b.DataMgr.CPS.isOpen()&&(e=b.DataMgr.CPS.getNeedLv(),this.m_curlevel<e||b.DataMgr.CPS.isProtect()&&1===g.AppDataMgr.get(_.AppDataKey.CpsClickClose,0)||(t=b.DataMgr.CPS.getNeedLvup(),e=g.AppDataMgr.get(_.AppDataKey.CpsOpenLvUp,0)+1,g.AppDataMgr.set(_.AppDataKey.CpsOpenLvUp,e),e===t&&(g.AppDataMgr.set(_.AppDataKey.CpsOpenLvUp,0),this.openCpsPopwin(!0))))},vt.prototype.openCpsPopwin=function(t){var e=this;"object"==typeof wx&&wx.showLoading({title:"\u8f7d\u5165\u4e2d\uff0c\u8bf7\u7a0d\u540e",mask:!0}),g.AppDataMgr.set(_.AppDataKey.CpsOpenType,t?1:0),b.DataMgr.CPS.loadRecommends().then(function(n){"object"==typeof wx&&wx.hideLoading(),(n=n.product_list||[]).length&&(b.DataMgr.Local.saveCpsQuanDatas(n.slice()),e.addPopwinList(_t.default,{product_list:n,isAuto:t}))}).catch(function(){"object"==typeof wx&&wx.hideLoading()})},vt.prototype.doLevelUpAni=function(t){return l(this,void 0,void 0,function(){var e=this;return u(this,function(){return 2===this.m_curlevel&&(this.comTopWrap.initLeftBtns(),this.comTopWrap.initRightBtns()),b.DataMgr.User.reqStar(t),this.reqSaveScore(!0),v.default.I.reqPlayerData(this.m_Type,this.m_curlevel,this.m_exp,this.m_bestScore,this.m_curScore,this.power,!1),2==this.m_curlevel?(K.default.playAnim(this.node,"anim_game_lvup2"),this.comBottomWrap.animWith(ht.BottomAnim.Init),this.comBottomWrap.addHomeStar(t),this.sdkEventWithKey(R.EventKeys.Exp2_allUIShow)):this.comBottomWrap.addHomeStar(t).then(function(){return e.actionOpenSign()}).catch(function(){return e.actionOpenSign()}),this.comTopWrap.initTopLvBar(),[2]})})},vt.prototype.actionOpenSign=function(){this.m_curlevel==w.default.getParamsInt(R.OnlineKeys.sign_min_lv,6)&&it.default.canShow()&&this.addPopwinList(it.default,{})},vt.prototype.getBuff=function(){this.m_Type==d.Level&&this.isworning;var t=this.isHadBuffBall1(),e=(h=P.OnlineMgr.BlockRewards)[0],n=h[1],i=h[2],o=P.OnlineMgr.SkillPower,a=(o[0],o[1]),r=o[2],s=P.OnlineMgr.RedPacket,c=s[0],l=s[1],u=s[2],p=b.DataMgr.User.getDayDataWithKey(_.DayKeys.BlockRewardNum,0),h=Math.random();return this.isworning&&(n*=2,a*=2),o=0==(s=w.default.getParamsInt(R.OnlineKeys.itemgift_minlv_abtest,0))||1==s&&Q.default.I.ID%2==1?w.default.getParamsInt(R.OnlineKeys.itemgiftminlv,3):w.default.getParamsInt(R.OnlineKeys.itemgift_minlv_b,12),this.m_curlevel>=o&&p<e&&h<n&&this.m_buffcd<=0&&!t?(this.m_buffcd=i,1):this.m_curlevel>=w.default.getParamsInt(R.OnlineKeys.lightminlv,3)&&this.m_Type==d.Level&&h<a&&this.m_buffcd2<=0?(this.m_buffcd2=r,2):(r=b.DataMgr.User.getDayDataWithKey(_.DayKeys.RedPacketNum,0),nt.default.IsRedPacketOpen&&r<c&&h<l&&this.m_buffcd3<=0&&v.default.I.RedPocketData.integral<=498e3?(this.m_buffcd3=u,3):0)},vt.prototype.isHadBuffBall1=function(){for(var t=0;t<this.m_BalllistRoot.children.length;t++)if(1==this.m_BalllistRoot.children[t].getComponent(f.default).m_buff)return!0;return!1},vt.prototype.isHadBuffBall=function(){for(var t=0;t<this.m_BalllistRoot.children.length;t++)if(0<this.m_BalllistRoot.children[t].getComponent(f.default).m_buff)return!0;return!1},vt.prototype.handleUpdateChest=function(){},vt.prototype.onChest=function(){},vt.prototype.getTeachBall=function(t){var e=w.default.getParamsInt(R.OnlineKeys.teach_balls_abtest,0),n=P.OnlineMgr.TeachBall2,i=P.OnlineMgr.TeachBall;if(0==e||1==e&&Q.default.I.ID%2==1){if(t<i.length)return i[t]}else if(t<n.length)return n[t];return 1},vt.prototype.handleShow=function(){B.AudioMgr.playBgm(W.AudioEnum.music2)},vt.prototype.handleHide=function(){var t=h.I;!b.DataMgr.User.isHadEventKey(R.EventKeys.Level1_touchScreenFirstTime.toString())&&t.m_curlevel<=1&&t.sdkEventWithKey(R.EventKeys.FirstLogin_OnHide),B.AudioMgr.isMusicOpen()&&B.AudioMgr.pauseMusic(),t.handleHistoryRecord()},vt.prototype.onModel=function(){this.m_IsPassing||(B.AudioMgr.button(),this.hideWorning(),5<=v.default.I.CurLevel?this.m_Type==d.Nomal?(this.toLevelModel(),j.default.event(R.EventKeys.lvBtn,R.EventFrom.game)):(this.toNomalModel(),j.default.event(R.EventKeys.ChallengeBtn,R.EventFrom.game)):M.default.showTip("5\u7ea7\u4ee5\u4e0a\u624d\u5f00\u653e\u54df!"))},vt.prototype.toNomalModel=function(t){(t=void 0!==t&&t)||this.handleHistoryRecord(),this.m_Type=d.Nomal,this.m_curBg=0,this.m_bg2.position=cc.v2(0,-1824),this.m_bg1.position=cc.v2(0,0),this.m_Worning.active=!1,this.stopItemEff(),this.m_bg1.active=!0,this.m_bg2.active=!1,this.m_IsPassing=!1,this.m_Wall1.active=!0,this.hideGuid(),this.m_bg1.getChildByName("s2").active=!1,this.m_bg2.getChildByName("s2").active=!1;var e=t?2.3:0;this.getComponent(cc.Animation).play("anim_game_transfor02",e),this.comTopWrap.initLeftBtns(),this.comTopWrap.initRightBtns(),this.comBottomWrap.animWith(ht.BottomAnim.SwitchMode,e),this.InitBattleData(),this.InitModelBttle(t),this.m_Change.active=!1,this.m_changeicon.active=!1},vt.prototype.toLevelModel=function(t){(t=void 0!==t&&t)||this.handleHistoryRecord(),this.m_Type=d.Level,this.m_IsPassing=!1,this.m_Wall1.active=!1,this.m_Worning.active=!1,this.stopItemEff(),this.hideGuid(),this.hideWorning(),this.m_curBg=0,this.m_bg2.position=cc.v2(0,-1824),this.m_bg1.position=cc.v2(0,0),this.m_bg1.active=!0,this.m_bg2.active=!1,this.m_bg1.getChildByName("s2").active=!0,this.m_bg2.getChildByName("s2").active=!0;var e=this.getComponent(cc.Animation);v.default.I.CurLevel<=1?(e.play("anim_game_lvup2",0),e.sample("anim_game_lvup2"),e.stop()):(e.play("anim_game_transfor01",e=t?2.3:0),this.comTopWrap.initLeftBtns(),this.comTopWrap.initRightBtns(),this.comBottomWrap.animWith(ht.BottomAnim.SwitchMode,e));var n=this.node.getChildByName("bgx2").getChildByName("bg02").getChildByName("target_tip");v.default.I.Lv_CurTarBallLv==N.default.MinTarBallLv?(n.active=!0,n.getChildByName("num_best").getComponent(st.default).setValue(Math.pow(2,N.default.MinTarBallLv),"",!1),K.default.playAnim(n,"anim_targetball_out").then(function(){K.default.playAnim(n,"anim_targetball_idle")})):n.active=!1,this.InitBattleData(),this.InitModelBttle(t),this.LogLevel(),this.setTarBallInfo()},vt.prototype.CheckLevelWin=function(t){v.default.I.Lv_CurTarBallLv==N.default.MinTarBallLv?4==t.m_lv?this.sdkEventWithKey(R.EventKeys.Level1_num16Merged):5==t.m_lv?this.sdkEventWithKey(R.EventKeys.Level1_num32Merged):6==t.m_lv&&this.sdkEventWithKey(R.EventKeys.Level1_num64Merged):v.default.I.Lv_CurTarBallLv==N.default.MinTarBallLv+1?7==t.m_lv?this.sdkEventWithKey(R.EventKeys.Level2_num128Merged):6==t.m_lv&&this.sdkEventWithKey(R.EventKeys.Level2_num64Merged):v.default.I.Lv_CurTarBallLv==N.default.MinTarBallLv+2?7==t.m_lv?this.sdkEventWithKey(R.EventKeys.Level3_num128Merged):8==t.m_lv&&this.sdkEventWithKey(R.EventKeys.Level3_num256Merged):v.default.I.Lv_CurTarBallLv==N.default.MinTarBallLv+3?9==t.m_lv?this.sdkEventWithKey(R.EventKeys.Level4_num512Merged):8==t.m_lv&&this.sdkEventWithKey(R.EventKeys.Level4_num1st256Merged):v.default.I.Lv_CurTarBallLv==N.default.MinTarBallLv+4?9==t.m_lv?this.sdkEventWithKey(R.EventKeys.Level5_num1st512Merged):10==t.m_lv&&this.sdkEventWithKey(R.EventKeys.Level5_num1024Merged):v.default.I.Lv_CurTarBallLv==N.default.MinTarBallLv+5?11==t.m_lv?this.sdkEventWithKey(R.EventKeys.Level6_num2048Merged):10==t.m_lv&&this.sdkEventWithKey(R.EventKeys.Level6_num1st1024Merged):v.default.I.Lv_CurTarBallLv==N.default.MinTarBallLv+6&&(11==t.m_lv?this.sdkEventWithKey(R.EventKeys.Level7_num1st2048Merged):12==t.m_lv&&this.sdkEventWithKey(R.EventKeys.Level7_num4096Merged));var e=v.default.I.Lv_CurTarBallLv;t.m_lv>=e&&(e={score:this.m_curScore,level:this.m_curlevel,stars:null,timeProps:this.m_props,balls:this.getcurBallsWithoutLv(t.m_lv),reviveTimes:this.m_reviveTimes,tarballlv:this.m_Type==d.Nomal?0:v.default.I.Lv_CurTarBallLv},v.default.I.reqPlayerData(this.m_Type,this.m_curlevel,this.m_exp,this.m_bestScore,this.m_curScore,this.power,!1),v.default.I.reqHistory(e,this.m_Type,!1),g.AppDataMgr.set(_.AppDataKey.OnHideHistory,!0),this.LogLevelWin(),this.updateNextLvData(),t.m_rigidbody.destroy(),this.doNextLvAni(t.node),this.deletBallsByMinLv(v.default.I.Lv_CurTarBallLv-9))},vt.prototype.getCurBg=function(){return 0==this.m_curBg?this.m_bg1:this.m_bg2},vt.prototype.getNextBg=function(){return 0==this.m_curBg?this.m_bg2:this.m_bg1},vt.prototype.doNextLvAni=function(t){return l(this,void 0,void 0,function(){var e,n,i,o,a=this;return u(this,function(r){switch(r.label){case 0:return this.m_SmallTarTip.active=!1,this.comTopWrap.hideTaskTip(),this.m_StartTip.node.parent.active&&this.pauseStarttip(),V.default.I.hideSinglegridad(),V.default.I.loadgridad2(),this.m_IsPassing=!0,this.hideWorning(),this.hideGuid(),2<=this.m_curlevel?(this.getComponent(cc.Animation).play("anim_game_lvup_in"),this.comBottomWrap.animWith(ht.BottomAnim.NomralOut)):(K.default.playAnim(this.node,"anim_game_lvup2_in"),this.comBottomWrap.animWith(ht.BottomAnim.LvToTwoOut)),this.m_Change.active=!1,this.m_changeicon.active=!1,this.getNextBg().active=!0,this.getNextBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("bg_challenge_narrowtop").opacity=255,this.getNextBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("bg_challenge_narrowtop").active=!0,this.m_curball&&(this.m_curball.active=!1,this.m_curball.destroy(),this.m_curball=null),this.m_curball2&&(this.m_curball2.active=!1,this.m_curball2.destroy(),this.m_curball2=null),t.parent=this.node,cc.tween(t).to(.3,{scale:2*t.scale}).to(.3,{scale:.8*t.scale}).start(),[4,m.default.wait(1e3)];case 1:return r.sent(),B.AudioMgr.playSound(W.AudioEnum.fly),cc.tween(t).to(.5,{x:0,y:0,scale:3.43}).call(function(){t.destroy()}).start(),[4,m.default.wait(500)];case 2:return r.sent(),e=this.m_gamecamera.getComponent(cc.Camera).zoomRatio,cc.tween(this.m_gamecamera.getComponent(cc.Camera)).to(.6,{zoomRatio:.8*e}).call(function(){}).start(),cc.tween(this.m_anicamera.getComponent(cc.Camera)).to(.6,{zoomRatio:.8*e}).call(function(){}).start(),this.m_BalllistRoot.children.forEach(function(t){(t=t.getComponent(f.default)).node.scale=t.getScale(),t.enableMotion()}),this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getComponent(cc.Animation).play(),[4,m.default.wait(1600)];case 3:return r.sent(),B.AudioMgr.playSound(W.AudioEnum.tar_ball_lock),this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("p_boom").active=!0,this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("p_boom").getComponent(cc.ParticleSystem).resetSystem(),this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("p_boom02").active=!0,this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("p_boom02").getComponent(cc.ParticleSystem).resetSystem(),K.default.shakeEffect(this.m_gamecamera,.4),[4,m.default.wait(500)];case 4:return r.sent(),this.getCurBg().getChildByName("s2").getChildByName("wall1").active=!1,this.getCurBg().active=!1,this.getCurBg().active=!0,cc.tween(this.m_gamecamera).to(1.8,{position:cc.v2(0,-1824)},{easing:cc.easing.quadIn}).call(function(){cc.tween(a.m_gamecamera.getComponent(cc.Camera)).to(.6,{zoomRatio:e}).call(function(){}).start(),cc.tween(a.m_anicamera.getComponent(cc.Camera)).to(.6,{zoomRatio:e}).call(function(){}).start(),a.m_gamecamera.position=cc.v2(0,0),a.m_bg1.getChildByName("s2").getChildByName("wall1").active=!0,a.m_bg1.getChildByName("s2").getChildByName("fall").active=!0,a.m_bg2.getChildByName("s2").getChildByName("wall1").active=!0,a.m_bg2.getChildByName("s2").getChildByName("fall").active=!0,cc.tween(a.getNextBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("bg_challenge_narrowtop")).to(.3,{opacity:0}).call(function(){a.m_bg1.getChildByName("bg02").getChildByName("bg_di2").getChildByName("bg_challenge_narrowtop").active=!1,a.m_bg2.getChildByName("bg02").getChildByName("bg_di2").getChildByName("bg_challenge_narrowtop").active=!1}).start(),0==a.m_curBg?(a.m_bg2.position=cc.v2(0,0),a.m_bg1.position=cc.v2(0,-1824)):(a.m_bg1.position=cc.v2(0,0),a.m_bg2.position=cc.v2(0,-1824)),a.m_bg2.active=!1,a.m_bg1.active=!1,a.m_bg2.active=!0,a.m_bg1.active=!0;for(var t=0;t<n.length;t++){var i=n[t];i.getComponent(f.default).hidemotion(),i.y+=1824}0==a.m_curBg?a.m_curBg=1:a.m_curBg=0,a.getNextBg().active=!1}).start(),(n=this.m_BalllistRoot.children).forEach(function(t){(t=t.getComponent(f.default)).m_rigidbody.enabledContactListener=!1,t.addForce(0,-800)}),[4,m.default.wait(1e3)];case 5:for(r.sent(),this.setTarBallInfo(),i=0;i<n.length;i++)n[i].getComponent(f.default).m_rigidbody.enabledContactListener=!0;return this.m_curlevel<=1&&(this.comTopWrap.initLeftBtns(),this.comTopWrap.initRightBtns()),[4,m.default.wait(1370)];case 6:return r.sent(),this.setPassing(!0),b.DataMgr.Missions.addMissionProgress($.MissionCheckType.LevelPass,1),this.createBall(),2<=this.m_curlevel?(this.comBottomWrap.animWith(ht.BottomAnim.Eneter),K.default.playAnim(this.node,"anim_game_lvup_out").then(function(){var t,e;0<a.popwinlist.length&&(e=a.popwinlist[a.popwinlist.length-1],T.ViewMgr.openPopwin(e.pop,{data:s({},e.p)})),20<=a.m_curlevel&&!M.default.s_isclosestartgift||v.default.I.Lv_CurTarBallLv>N.default.MinTarBallLv+1&&!M.default.s_isclosestartgift?a.addPopwinList(Y.default,{}):M.default.s_isclosestartgift&&(t=12-b.DataMgr.User.getDayDataWithKey(_.DayKeys.lotterytimes,0),e=w.default.getParamsInt(R.OnlineKeys.lottery_min_lv,N.default.baseMinLotterylv),M.default.isLottery&&!M.default.s_isShowedLottery2&&v.default.I.CurLevel>=e&&0<t&&(0==(n=w.default.getParamsInt(R.OnlineKeys.lottery_type_abtest,0))||1==n&&Q.default.I.ID%2==1?a.addPopwinList(z.default,{anim:!1},!1):a.addPopwinList(rt.default,{}),M.default.s_isShowedLottery2=!0));var n=b.DataMgr.Missions.isHadRewardMission();0<n&&nt.default.IsTaskAutoOpen&&nt.default.isCanTaskAutoShow&&(v.default.I.reqAddDayReward(_.DayKeys.MissionOpen,1),v.default.I.reqShowMission(),n=b.DataMgr.Missions.getMissionDBById(n).time_type,a.addPopwinList(tt.default,{tab:n-1})),!it.default.canShow()||M.default.s_isShowedReward||nt.default.IsSignLoginShow||(a.addPopwinList(it.default,{}),b.DataMgr.User.reqDayDataWithKey(_.DayKeys.TodaySignShowed,1))})):(this.comBottomWrap.animWith(ht.BottomAnim.Eneter),K.default.playAnim(this.node,"anim_game_lvup1_out").then(function(){var t;0<a.popwinlist.length&&(t=a.popwinlist[a.popwinlist.length-1],T.ViewMgr.openPopwin(t.pop,{data:s({},t.p)})),20<=a.m_curlevel&&!M.default.s_isclosestartgift||v.default.I.Lv_CurTarBallLv>N.default.MinTarBallLv+1&&!M.default.s_isclosestartgift?a.addPopwinList(Y.default,{}):M.default.s_isclosestartgift&&(e=12-b.DataMgr.User.getDayDataWithKey(_.DayKeys.lotterytimes,0),t=w.default.getParamsInt(R.OnlineKeys.lottery_min_lv,N.default.baseMinLotterylv),M.default.isLottery&&!M.default.s_isShowedLottery2&&v.default.I.CurLevel>=t&&0<e&&(a.addPopwinList(rt.default,{}),M.default.s_isShowedLottery2=!0));var e=b.DataMgr.Missions.isHadRewardMission();0<e&&nt.default.IsTaskAutoOpen&&nt.default.isCanTaskAutoShow&&(v.default.I.reqAddDayReward(_.DayKeys.MissionOpen,1),v.default.I.reqShowMission(),e=b.DataMgr.Missions.getMissionDBById(e).time_type,a.addPopwinList(tt.default,{tab:e-1})),!it.default.canShow()||M.default.s_isShowedReward||nt.default.IsSignLoginShow||(a.addPopwinList(it.default,{}),b.DataMgr.User.reqDayDataWithKey(_.DayKeys.TodaySignShowed,1))})),(2==(o=w.default.getParamsInt(R.OnlineKeys.game_center_auto_show_abtest,0))||1==o&&Q.default.I.ID%2==0)&&(o=w.default.getParamsInt(R.OnlineKeys.game_center_auto_show_minlv,5),!M.default.s_isShowedAD&&v.default.I.CurLevel>=o&&1<=V.default.I.gridadnum&&(lt.default.isshow=!0,M.default.s_isShowedAD=!0,this.addPopwinList(lt.default,{isauto:!0}))),this.m_StartTip.node.parent.active&&this.continueStarTip(),[2]}})})},vt.prototype.updateNextLvData=function(){var t=v.default.I.Lv_CurTarBallLv;v.default.I.Data.lvModel_tarBalllv=t+1,v.default.I.reqLvCurTarBall(t+1,!0),t+1==N.default.MinTarBallLv+1?this.sdkEventWithKey(R.EventKeys.Level2_levelEnter):t+1==N.default.MinTarBallLv+2&&this.sdkEventWithKey(R.EventKeys.Level3_levelEnter),this.checkInviteCount(),this.LogLevel()},vt.prototype.setTarBallInfo=function(){var t=v.default.I.Lv_CurTarBallLv,e=this.getTarBallNum(t);this.m_bg1.getChildByName("bg02").getChildByName("bg_di2").getChildByName("target").getChildByName("img_ball_target").getChildByName("num").getComponent(q.default).setText(e),this.m_bg1.getChildByName("bg02").getChildByName("bg_di2").getChildByName("target").getChildByName("img_ball_target").getComponent(cc.Sprite).spriteFrame=this.getSkin(t),this.m_bg1.getChildByName("bg02").getChildByName("bg_di2").getChildByName("img_ball_target").getChildByName("num").getComponent(q.default).setText(e),this.m_bg1.getChildByName("bg02").getChildByName("bg_di2").getChildByName("img_ball_target").getChildByName("img_ball_128").getComponent(cc.Sprite).spriteFrame=this.getSkin(t),this.m_bg1.getChildByName("bg02").getChildByName("bg_di2").getChildByName("img_light").color=this.getcolorBylv(t),this.m_bg1.getChildByName("bg02").getChildByName("bg_di2").getChildByName("p_ball_light").color=this.getcolorBylv(t),this.m_bg1.getChildByName("bg02").getChildByName("bg_di2").getChildByName("ball-light").color=this.getcolorBylv(t),this.m_bg2.getChildByName("bg02").getChildByName("bg_di2").getChildByName("target").getChildByName("img_ball_target").getChildByName("num").getComponent(q.default).setText(e),this.m_bg2.getChildByName("bg02").getChildByName("bg_di2").getChildByName("target").getChildByName("img_ball_target").getComponent(cc.Sprite).spriteFrame=this.getSkin(t),this.m_bg2.getChildByName("bg02").getChildByName("bg_di2").getChildByName("img_ball_target").getChildByName("num").getComponent(q.default).setText(e),this.m_bg2.getChildByName("bg02").getChildByName("bg_di2").getChildByName("img_ball_target").getChildByName("img_ball_128").getComponent(cc.Sprite).spriteFrame=this.getSkin(t),this.m_bg2.getChildByName("bg02").getChildByName("bg_di2").getChildByName("img_light").color=this.getcolorBylv(t),this.m_bg2.getChildByName("bg02").getChildByName("bg_di2").getChildByName("p_ball_light").color=this.getcolorBylv(t),this.m_bg2.getChildByName("bg02").getChildByName("bg_di2").getChildByName("ball-light").color=this.getcolorBylv(t)},vt.prototype.doAllBallGray=function(){return l(this,void 0,void 0,function(){var t,e,n;return u(this,function(i){switch(i.label){case 0:t=0,i.label=1;case 1:return t<this.m_BalllistRoot.children.length?(e=this.m_BalllistRoot.children[t],(n=e.getComponent(f.default)).dogray(),[4,m.default.wait(10)]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[4,m.default.wait(600)];case 5:i.sent(),t=this.m_BalllistRoot.children.length-1,i.label=6;case 6:return 0<=t?(e=this.m_BalllistRoot.children[t],n=e.getComponent(f.default),this.doDisappearAni(e),h.I.createBoomEff(n.m_lv,n.node.position,n.getScale(),!1),[4,m.default.wait(30)]):[3,9];case 7:i.sent(),i.label=8;case 8:return t--,[3,6];case 9:return[4,m.default.wait(300)];case 10:return i.sent(),[2]}})})},vt.prototype.doFailAni=function(){return l(this,void 0,void 0,function(){var t,e,n=this;return u(this,function(i){switch(i.label){case 0:return this.m_Type==d.Nomal?(this.GameOver(!0),this.saveGame(!1),[2]):(this.m_IsPassing=!0,this.hideWorning(),this.m_curball.active=!1,this.m_curball2&&(this.m_curball2.active=!1),this.m_Change.active=!1,this.m_changeicon.active=!1,0==(e=w.default.getParamsInt(R.OnlineKeys.fail_back_1_level_abtest,2))||1==e&&Q.default.I.ID%2==1?this.saveGame(!0):this.saveGame(!1),[4,this.doAllBallGray()]);case 1:return i.sent(),0==e||1==e&&Q.default.I.ID%2==1?(this.GameOver(!0),this.m_curball.active=!0,this.m_curball2.active=!0,this.m_Change.active=!0,this.m_changeicon.active=!0,[2]):(t=Math.max(N.default.MinTarBallLv,v.default.I.Lv_CurTarBallLv-1),v.default.I.Data.lvModel_tarBalllv=t,v.default.I.reqLvCurTarBall(t,!0),K.default.playAnim(this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("target"),"anim_fail_ball").then(function(){n.GameOver(),n.m_curball.active=!0,n.m_curball2.active=!0,n.m_Change.active=!0,n.m_changeicon.active=!0}),[4,m.default.wait(100/60*1e3)]);case 2:return i.sent(),e=this.getTarBallNum(t),this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("target").getChildByName("img_ball_target").getChildByName("num").getComponent(q.default).setText(e),this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("target").getChildByName("img_ball_target").getComponent(cc.Sprite).spriteFrame=this.getSkin(t),this.getCurBg().getChildByName("bg02").getChildByName("bg_di2").getChildByName("target").getChildByName("img_hand_light").color=this.getcolorBylv(t),[2]}})})},vt.prototype.getTarBallNum=function(t){var e=this.getSkinIndexBylv(t)+1;return 0<=(t=Math.floor((t-13)/10))?[Math.pow(2,e).toString(),t.toString()]:[Math.pow(2,e).toString()]},vt.prototype.getTitle=function(t){return 420<=t?12:370<=t?11:320<=t?10:270<=t?9:230<=t?8:190<=t?7:150<=t?6:120<=t?5:90<=t?4:60<=t?3:30<=t?2:10<=t?1:0},vt.prototype.reqSaveScore=function(t){!(t=void 0!==t&&t)&&this.saveScoreBall<30||(this.saveScoreBall=0,O.default.saveScore({add_score:this.m_curScore,item_num:0,balllv:this.getMaxBallLv(),type:0==this.m_Type?10:20}))},vt.prototype.saveGame=function(t){this.m_Type==d.Nomal?b.DataMgr.User.reqMaxRecord({score:this.m_curScore,balls:this.getBallsWithoutSmall(),reviveTimes:this.m_reviveTimes,props:this.m_props},!1):(b.DataMgr.User.reqLvMaxRecord({score:this.m_curScore,balls:this.getBallsWithoutSmall(),reviveTimes:this.m_reviveTimes,tarball:v.default.I.Lv_CurTarBallLv,props:this.m_props},!1),t&&v.default.I.reqLvCurTarBall(N.default.MinTarBallLv,!1),this.setTarBallInfo())},vt.prototype.handlePopwinFromFirst=function(){this.isInitialBanner&&this.hideBanner(),-2!=this.worningtime&&(this.worningtime=-1),V.default.I.hideSinglegridad(),M.default.hideGride()},vt.prototype.handlePopwinToTop=function(){this.isInitialBanner&&this.showBanner(),-2!=this.worningtime&&(this.worningtime=0),this.popwinlist.length<=1&&this.showCollectGameTip(),V.default.I.showSinglegridad(),b.DataMgr.Point.updatePoint(_.ModuleType.TaskList)},Object.defineProperty(vt.prototype,"BannerOpen",{get:function(){return P.OnlineMgr.getBanner("game")},enumerable:!0,configurable:!0}),Object.defineProperty(vt.prototype,"BannerUid",{get:function(){return this.BannerOpen?P.OnlineMgr.getAdByType(P.AdType.BannerGame):null},enumerable:!0,configurable:!0}),Object.defineProperty(vt.prototype,"BannerParams",{get:function(){return cc.view.getVisibleSize().height,{bannerWidth:600}},enumerable:!0,configurable:!0}),vt.prototype.loadBanner=function(){this.isInitialBanner=!0;var t=w.default.getParamsInt(R.OnlineKeys.banner_min_lv,0);v.default.I.CurLevel<t||((t=this.BannerUid)?(this.addBannerEvent(),w.default.show(t,this.BannerParams.bannerWidth)):this.showAd())},vt.prototype.showBanner=function(){var t=w.default.getParamsInt(R.OnlineKeys.banner_min_lv,0);v.default.I.CurLevel<t||((t=this.BannerUid)?(this.addBannerEvent(),w.default.show(t,this.BannerParams.bannerWidth),M.default.hideGride()):this.showAd())},vt.prototype.hideBanner=function(){var t=this.BannerUid;t?(this.removeBannerEvent(),w.default.hide(t),M.default.hideGride()):this.hideAd()},vt.prototype.addBannerEvent=function(){A.EventMgr.on(S.EventEnum.BannerSuccess.toString(),this.onBannerSuccess,this),A.EventMgr.on(S.EventEnum.BannerFailure.toString(),this.onBannerFailure,this)},vt.prototype.removeBannerEvent=function(){A.EventMgr.off(S.EventEnum.BannerSuccess.toString(),this.onBannerSuccess,this),A.EventMgr.off(S.EventEnum.BannerFailure.toString(),this.onBannerFailure,this)},vt.prototype.onBannerShow=function(){},vt.prototype.onBannerSuccess=function(){M.default.hideGride(),this.hideAd()},vt.prototype.onBannerFailure=function(){j.default.event(R.EventKeys.banner_ad_load_fail,""),1==w.default.getParamsInt(R.OnlineKeys.grid_replace_banner_show,0)?M.default.ShowGride():this.showAd()},vt.prototype.hideAd=function(){this.isExistAdLike&&this.comAdLike.getComponent(L.default).hide()},vt.prototype.showAd=function(){this.isExistAdLike&&this.comAdLike.getComponent(L.default).show()},Object.defineProperty(vt.prototype,"isExistAdLike",{get:function(){return!!w.default.IsGuessLike&&!!D.default.isWx&&!!this.comAdLike},enumerable:!0,configurable:!0}),vt.prototype.showGameClub=function(){},vt.prototype.hideGameClub=function(){},vt.prototype.destroyGameClub=function(){},vt.prototype.playbg=function(){B.AudioMgr.playMusic(W.AudioEnum.music2,!0)},vt.prototype.playcombineSound=function(){B.AudioMgr.playSoundbyStr("merge"+this.mergeindex)},vt.prototype.showItemEff=function(){this.comBottomWrap.showItemLight()},vt.prototype.stopItemEff=function(){this.comBottomWrap.stopItemLight()},vt.prototype.showItemTip=function(t){this.comBottomWrap.showItemTip(t=void 0!==t&&t)},vt.prototype.hideItemTip=function(){this.comBottomWrap.hideItemTip()},vt.prototype.setUseHammer=function(t){var e=this;void 0===t&&(t=!1);var n,i=this.getSmallBall();if(this.getcurBalls().length<=0)return M.default.showTip("\u5f53\u524d\u6ca1\u6709\u7403!"),void(this.m_isUsingDelItem&&this.useHammer());this.m_isUsingDelItem=!this.m_isUsingDelItem,this.m_isUsingDelItem?(-2!=this.worningtime&&(this.worningtime=-1),this.comTopWrap.showPropTip(_.PropsType.Hammer).then(function(){e.node.parent.getComponent(cc.Animation).play("anim_popup_in"),e.playUseHammerAnim(i).then(function(){e.m_isUsingDelItem&&(e.m_Hammer.active=!0,e.m_Hammer.position=cc.v2(i.position.x*cc.winSize.height/1624,i.position.y*cc.winSize.height/1624),e.m_Hammer.getComponent(cc.Animation).play("item_hammer_loop"))})}),(n=this.isHadSkillBuffBall())&&n.getComponent(f.default).HideSkillBuff()):(-2!=this.worningtime&&(this.worningtime=0),this.comTopWrap.hidePropTip(),this.node.parent.getComponent(cc.Animation).play("anim_popup_out"),t&&this.playCancelUseHammerAnim(i),this.m_Hammer.active=!1,(n=this.isHadSkillBuffBall())&&n.getComponent(f.default).ShowSkillBuff())},vt.prototype.reqaddGetItemTimes=function(){b.DataMgr.User.reqAddDayReward(_.DayKeys.BlockRewardNum,1)},vt.prototype.useJoker=function(){var t=this;this.m_isUsingJokerball=!this.m_isUsingJokerball,this.m_isUsingJokerball?this.comTopWrap.showPropTip(_.PropsType.Joker).then(function(){t.node.parent.getComponent(cc.Animation).play("anim_popup_in"),t.worningtime=-1,t.createJokerBall(),t.playUseJokerAnim(),j.default.event(R.EventKeys.Joker,R.EventFrom.game)}):(0<=this.worningtiptime&&(this.worningtime=0),this.playCancelUseJokerAnim(),this.comTopWrap.hidePropTip(),this.node.parent.getComponent(cc.Animation).play("anim_popup_out"),this.createBall())},vt.prototype.oncancelItem=function(){this.m_isUsingDelItem?this.setUseHammer(!0):this.m_isUsingJokerball&&this.useJoker()},vt.prototype.useJokerBall=function(){var t=_.PropsType.Joker;return this.usePropWithType(t)},vt.prototype.useHammer=function(){this.m_IsPassing||(_.PropsType.Hammer,this.UseDelItemFinish(),j.default.event(R.EventKeys.Hammer,R.EventFrom.game))},vt.prototype.UseDelItemFinish=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,m.default.wait(1)];case 1:return t.sent(),this.setUseHammer(),[2]}})})},vt.prototype.doHammerAni=function(t,e){return l(this,void 0,void 0,function(){var n,i;return u(this,function(o){switch(o.label){case 0:return(n=cc.instantiate(this.m_Hammer)).parent=this.node,B.AudioMgr.playSound(W.AudioEnum.prop_hammer),i=M.default.getTargetPos(e,this.node),n.position=cc.v2(i.x*cc.winSize.height/1624,i.y*cc.winSize.height/1624),n.active=!0,n.getComponent(cc.Animation).play("item_hammer"),[4,m.default.wait(1200)];case 1:return o.sent(),this.createBoomEff(t.m_lv,t.node.position,t.getScale(),!1),v.default.I.Vibrate&&w.default.vibrateShort(),K.default.shakeEffect(this.m_UIcamera,.4),K.default.shakeEffect(this.m_gamecamera,.4),t.node.destroy(),n.destroy(),[2]}})})},vt.prototype.useReset=function(){var t=_.PropsType.Refresh;this.usePropWithType(t)&&(this.RefreshAllBalls(),j.default.event(R.EventKeys.Refresh,R.EventFrom.game))},vt.prototype.getTimePropNum=function(t){return this.m_props[t]},vt.prototype.setTimeProps=function(t,e){this.m_props[t]+=e,this.comBottomWrap.refreshItemsInfo()},vt.prototype.usePropWithType=function(t){var e=b.DataMgr.Missions;return 0<this.getTimePropNum(t)?(this.setTimeProps(t,-1),e.addMissionProgress($.MissionCheckType.UseItem,1),t==_.PropsType.Joker?e.addMissionProgress($.MissionCheckType.UseJokerBall,1):t==_.PropsType.Refresh?e.addMissionProgress($.MissionCheckType.UseRefresh,1):e.addMissionProgress($.MissionCheckType.UseHammer,1),A.EventMgr.emit(S.EventEnum.UpdateProps,{type:t,from:0,val:-1}),!0):0<b.DataMgr.User.getPropNum(t)?(b.DataMgr.User.reqProps(t,-1),e.addMissionProgress($.MissionCheckType.UseItem,1),t==_.PropsType.Joker?e.addMissionProgress($.MissionCheckType.UseJokerBall,1):t==_.PropsType.Refresh?e.addMissionProgress($.MissionCheckType.UseRefresh,1):e.addMissionProgress($.MissionCheckType.UseHammer,1),this.comBottomWrap.refreshItemsInfo(),!0):150<=v.default.I.Diamond?(b.DataMgr.User.reqDiamond(-150,110,{isUpdate:!0}),e.addMissionProgress($.MissionCheckType.UseItem,1),t==_.PropsType.Joker?e.addMissionProgress($.MissionCheckType.UseJokerBall,1):t==_.PropsType.Refresh?e.addMissionProgress($.MissionCheckType.UseRefresh,1):e.addMissionProgress($.MissionCheckType.UseHammer,1),this.comBottomWrap.refreshItemsInfo(),!0):(T.ViewMgr.openPopwin(I.default),M.default.showTip("\u91d1\u5e01\u4e0d\u8db3!"),!1)},vt.prototype.initItemVideoicon=function(){switch(w.default.getType(R.ShareKeys.UseItem)){case R.ShareVideoType.Share:case R.ShareVideoType.ShareAysnc:case R.ShareVideoType.ShareIntegral:break;case R.ShareVideoType.Video:case R.ShareVideoType.VideoToShare:}},vt.prototype.handleTacticUpdate=function(){this.comBottomWrap.refreshItemsInfo()},vt.prototype.doItemAnim=function(t,e,n,i){return void 0===i&&(i=!1),l(this,void 0,void 0,function(){var o,a,r=this;return u(this,function(s){switch(s.label){case 0:return[4,this.comBottomWrap.getItemNodes()];case 1:return o=s.sent(),this.ItemUILayer2Top(),a=M.default.getTargetPos(e,this.node),t<=2&&this.playItemAni(t,e.getComponent(cc.Sprite).spriteFrame,n,a).then(function(){i||r.setTimeProps(t,1),cc.tween(o[t]).to(.05,{scale:1.2}).to(.05,{scale:1}).start(),r.ItemUILayer2UI(),A.EventMgr.emit(S.EventEnum.UpdateProps)}),[2]}})})},vt.prototype.playItemAni=function(t,e,n,i){return l(this,void 0,void 0,function(){var o,a=this;return u(this,function(r){switch(r.label){case 0:return[4,this.comBottomWrap.getItemNodes()];case 1:return o=r.sent(),this.ItemUILayer2Top(),[2,new Promise(function(r){E.LoaderMgr.loadPrefabWithUrl("prefab/common/prop_fly").then(function(s){var c=U.PoolMgr.getPrefab(s,a.node);c.group="curtain",c.position=i,c.getChildByName("item").getComponent(cc.Sprite).spriteFrame=e,c.getChildByName("item").getChildByName("num").getComponent(cc.Label).string="+"+n,cc.tween(c).to(4/6,{position:M.default.getTargetPos(o[t],a.node)},{easing:cc.easing.quadIn}).start(),K.default.playAnim(c).then(function(){a.ItemUILayer2UI(),U.PoolMgr.putNode(c),r(null)})})})]}})})},vt.prototype.isNewPlayer=function(){return v.default.I.CurLevel<=1},vt.prototype.showGuid=function(){this.m_IsPassing||(this.isNewPlayer()?(this.m_Guide.active||(this.m_Guide.active=!0,this.m_Guide.opacity=0,cc.tween(this.m_Guide).to(.3,{opacity:255}).start()),0!=v.default.I.IsTouch||this.m_Tip.active||(this.m_Tip.active=!0,this.m_Tip.opacity=0,cc.tween(this.m_Tip).to(.3,{opacity:255}).start())):this.m_Guide.active=!1)},vt.prototype.hideGuid=function(t){return void 0===t&&(t=!1),l(this,void 0,void 0,function(){var e=this;return u(this,function(n){switch(n.label){case 0:return t?[4,m.default.wait(5e3)]:[3,2];case 1:return n.sent(),this.m_Guide?(this.m_Guide.active&&cc.tween(this.m_Guide).to(.3,{opacity:0}).call(function(){e.m_Guide.active=!1}).start(),0==v.default.I.IsTouch&&(v.default.I.reqTouch(),cc.tween(this.m_Tip).to(.3,{opacity:0}).call(function(){e.m_Tip.active=!1}).start(),j.default.event(R.EventKeys.TouchMove,R.EventFrom.game)),this.standTime=0,[3,3]):[2];case 2:this.m_Guide.active&&(this.m_Guide.active=!1),n.label=3;case 3:return[2]}})})},vt.prototype.doShowRank=function(){},vt.prototype.doUpdateRank=function(){},vt.prototype.handleUpdateFriendRank=function(){this.doShowRank(this.m_curScore)},vt.prototype.showWorning=function(){this.m_IsPassing||this.m_Worning.active||(this.isworning=!0,this.m_Worning.active=!0,this.m_Worning.getComponent(cc.Animation).play("anim_danger_light01"),0<=this.worningtiptime&&(this.worningtime=0),this.showItemEff())},vt.prototype.hideWorning=function(){this.m_Worning.active&&(this.isworning=!1,this.worningtiptime=0,this.m_Worning.active=!1,this.m_Worning.getComponent(cc.Animation).stop(),this.stopItemEff())},vt.prototype.checkLine=function(){cc.isValid(this.m_Worning)&&(this.m_Worning.active=this.isworning,this.isworning&&(this.m_Type==d.Nomal?this.m_Worning.getComponent(cc.Animation).play("anim_danger_light01"):this.m_Worning.getComponent(cc.Animation).play("anim_danger_light02")))},vt.prototype.unLockChallenge=function(){return l(this,void 0,void 0,function(){return u(this,function(){return v.default.I.reqUnlockLvModel(),this.comTopWrap.unlockChanllenge(),[2]})})},vt.prototype.onChangeBall=function(){D.default.isWx&&PCSDK.platform.isVideoPlaying()||0!=this.m_Change.active&&this.m_curball&&this.m_curball.isValid&&(this.m_curball.getComponent(f.default).m_isJoker||w.default.dispatch(R.ShareKeys.Changeball,{success:this.changeball,context:this}))},vt.prototype.setSkin=function(t){var e=this,n=v.default.I.CurSkin;t&&0===n||E.LoaderMgr.loadResWithUrl("anims/skin/anim_skin0"+(n+1),cc.AnimationClip,{success:function(t){var i=e.node.parent.getComponent(cc.Animation),o="anim_skin0"+(n+1);i.getAnimationState(o)||i.addClip(t,o),i.play(o,0)},failure:function(){return e.setSkin(t)},context:this})},vt.prototype.onSkinShop=function(){B.AudioMgr.button(),T.ViewMgr.openPopwin(X.default),j.default.event(R.EventKeys.avatarShop_click,"\u4e3b\u754c\u9762")},vt.prototype.onopengridad=function(){j.default.event(R.EventKeys.drawer_click,"\u4e3b\u754c\u9762"),v.default.I.reqAddDayReward(_.DayKeys.ClickAd,1),this.m_gridadbtn.children[0].children[0].active=!1,lt.default.isshow=!0,this.addPopwinListForceOpen(lt.default,{isauto:!1})},vt.prototype.changeball=function(){b.DataMgr.Missions.addMissionProgress($.MissionCheckType.ChangeBall,1);var t=this.m_curball;this.m_curball=this.m_curball2,this.m_curball2=t,this.m_curball2.parent=this.m_Change,this.m_curball.parent=this.m_EfflightRoot,this.m_curball.position=this.m_ballobj.position,this.m_curball2.position=this.m_ballobj2.position,this.m_curball.scale=0,this.m_curball.getChildByName("line").active=!1,this.m_curball2.getChildByName("line").active=!1,cc.tween(this.m_curball2).to(.2,{scale:.8}).start(),cc.tween(this.m_curball).to(.2,{scale:this.m_curball.getComponent(f.default).getScale()}).start(),this.m_curlevel<=w.default.getParamsInt(R.OnlineKeys.guide_line_max_lv,5)&&(this.m_curball.getChildByName("line").active=!0,this.setline())},vt.prototype.sdkEventWithStr=function(t){b.DataMgr.User.isHadEventKey(t)||((t=R.EventKeys[t])&&j.default.event(t,""),b.DataMgr.User.reqaddEventKey(t))},vt.prototype.sdkEventWithKey=function(t){b.DataMgr.User.isHadEventKey(t.toString())||(t&&j.default.event(t,""),b.DataMgr.User.reqaddEventKey(t.toString()))},vt.prototype.handleHeadIcon=function(){this.comTopWrap.refreshMenuHead()},vt.prototype.handleShowTaskTip=function(t){this.comTopWrap.showTaskTip(t)},vt.prototype.checkInvite=function(){O.default.getinviteNum({}).then(function(t){var e=t.realtime_data.daily_invite_num;(t=b.DataMgr.User.getDayDataWithKey(_.DayKeys.InviteCount))<e&&(b.DataMgr.User.reqDayDataWithKey(_.DayKeys.InviteCount,e),b.DataMgr.Missions.addMissionProgress($.MissionCheckType.Invite,e-t))}).catch(function(){})},vt.prototype.playNewGuide=function(){},vt.prototype.ItemUILayer2Top=function(){this.node.getChildByName("bottom").children[0].getChildByName("BottomItems").group="curtain"},vt.prototype.ItemUILayer2UI=function(){this.node.getChildByName("bottom").children[0].getChildByName("BottomItems").group="UI"},vt.prototype.CoinUILayer2Top=function(){this.node.getChildByName("top").getChildByName("game_diamond2").group="curtain"},vt.prototype.CoinUILayer2UI=function(){this.node.getChildByName("top").getChildByName("game_diamond2").group="UI"},vt.prototype.checkInviteCount=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return t=0,"object"!=typeof PCSDK?[2]:[4,O.default.getListByInvite({invite_type:_.InviteType.Star}).then(function(e){var n=[];e.invite_list.forEach(function(t){0!=t.is_receive&&1==t.is_new&&n.push(t)}),t=n.length})];case 1:return e.sent(),b.DataMgr.Missions.setMissionProgress($.MissionCheckType.Invite,t),1==t?j.default.event(R.EventKeys.invite_event_1st_active,""):2==t?j.default.event(R.EventKeys.invite_event_2nd_active,""):3==t&&j.default.event(R.EventKeys.invite_event_3rd_active,""),[2]}})})},vt.prototype.onInviteAct=function(){B.AudioMgr.button();var t=w.default.getParamsInt(R.OnlineKeys.invite_event_minlv,N.default.baseMinInviteLv);this.m_curlevel<t?M.default.showTip(t+"\u7ea7\u89e3\u9501\u9080\u8bf7\u6d3b\u52a8\uff01\u5feb\u53bb\u5347\u7ea7\u5427~"):0<=v.default.I.ActInviteTime&&this.addPopwinListForceOpen(ot.default,{type:_.InviteType.Star})},vt.prototype.createNewPlayerBall=function(){var t=w.default.getParamsInt(R.OnlineKeys.former_balls_abtest,2);if(0!=t&&(1!=t||Q.default.I.ID%2!=1)&&this.isNewPlayer&&!(v.default.I.Lv_CurTarBallLv>N.default.MinTarBallLv))for(var e=[{x:-55,y:-300},{x:0,y:-300},{x:55,y:-300},{x:0,y:-200}],n=[3,2,3,1],i=0;i<4;i++){var o=cc.instantiate(this.m_ballobj);o.active=!0,o.parent=this.m_BalllistRoot,o.position=cc.v2(e[i].x,e[i].y),(o=o.getComponent(f.default)).m_buff=0,this.m_balllist.push(o),o.InitBall(n[i],!0,!0),o.hidemotion()}},vt.prototype.pauseStarttip=function(){this.m_StartTip.node.parent.active=!0,this.m_StartTip.pause()},vt.prototype.continueStarTip=function(){this.m_StartTip.node.parent.active=!0,this.m_StartTip.resume()},vt.prototype.showfullpower=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=!1),l(this,void 0,void 0,function(){var n,i=this;return u(this,function(o){switch(o.label){case 0:return 0==(n=w.default.getParamsInt(R.OnlineKeys.energy_popup_abtest,1))||1==n&&Q.default.I.ID%2==1||this.m_StartTip.node.parent.active&&!e||100<=this.power?[2]:(n=0==(n=w.default.getParamsInt(R.OnlineKeys.skill_charge_time_limit_abtest,1))||1==n&&Q.default.I.ID%2==1?w.default.getParamsInt(R.OnlineKeys.skill_charge_time_limit_a,1e4):w.default.getParamsInt(R.OnlineKeys.skill_charge_time_limit_b,2),this.m_fullpowertimes>=n?[2]:[4,m.default.wait(1e3*t)]);case 1:return o.sent(),this.m_StartTip.node.parent.active=!0,K.default.playAnim(this.m_StartTip.node,"anim_tipleft_fullenergy").then(function(){i.m_StartTip.node.parent.active=!1}),[2]}})})},vt.prototype.onStartReward=function(){var t=this;B.AudioMgr.button(),this.pauseStarttip();var e=R.ShareKeys.full_power_in_game;return w.default.dispatch(e,{success:function(){t.m_fullpowertimes++,t.m_StartTip.node.parent.active=!1,t.comBottomWrap.addComboPower(100)},fail:function(){t.continueStarTip()},context:this}),!0},vt.prototype.showCollectGameTip=function(){var t=this,e=w.default.getParamsInt(R.OnlineKeys.game_collect_min_lv,5);v.default.I.CurLevel<e||(e=w.default.getParamsInt(R.OnlineKeys.game_collect_pop_times,5),v.default.I.ShowCollectTimes>=e||M.default.s_isShowedCollectTip||(this.m_CollectGameTip.active=!0,K.default.playAnim(this.m_CollectGameTip.children[0],"anim_guideadd").then(function(){t.m_CollectGameTip.active=!1}),v.default.I.reqAddShowCollectTip(),M.default.s_isShowedCollectTip=!0))},vt.prototype.oncloseCollectGameTip=function(){this.m_CollectGameTip.active=!1},vt.prototype.magic=function(){},vt.prototype.onSkill=function(t,e,n){var i=this;B.AudioMgr.button(),this.m_IsPassing?n.destroy():(h.I.m_IsPassing=!0,D.default.isWx&&PCSDK.platform.isVideoErrored()?0===g.AppDataMgr.get(_.AppDataKey.UseItemShareNum,0)?(g.AppDataMgr.set(_.AppDataKey.UseItemShareNum,1),w.default.dispatchType(R.ShareVideoType.Share,R.ShareKeys.UseItemShare,{success:function(){i.doCombineSkill(n),t&&t.call(e)},fail:function(){M.default.s_cancelSkilltimes++,n.destroy(),i.setPassing()},context:this})):(this.setPassing(),n.destroy(),M.default.showTip("\u6682\u65f6\u6ca1\u6709\u89c6\u9891\u53ef\u770b\uff0c\u8bf7\u7b49\u5f851\u5c0f\u65f6\u540e\u5c1d\u8bd5"),t&&t.call(e)):w.default.dispatch(R.ShareKeys.use_ball_item,{success:function(){i.doCombineSkill(n),t&&t.call(e)},fail:function(){M.default.showTip("\u770b\u5b8c\u89c6\u9891\u624d\u53ef\u4ee5\u4f7f\u7528\u78c1\u94c1\u54e6\uff5e"),M.default.s_cancelSkilltimes++,n.destroy(),i.setPassing()},context:this}))},vt.prototype.doCombineSkill=function(t){return l(this,void 0,void 0,function(){var e,n,i,o,a,r=this;return u(this,function(s){switch(s.label){case 0:return e=[],n=[],i=[],this.m_BalllistRoot.children.forEach(function(t){500<=t.x||t.x<=-500||600<=t.y||t.y<=-1e3?i.push(t):e.push(t.getComponent(f.default))}),i.forEach(function(t){t.destroy()}),e=e.filter(function(t){return t.m_lv<=10}),this.findBalls(e,n),n.length<=0?(M.default.showTip("\u6ca1\u6709\u53ef\u5408\u6210\u7684\u7403~"),this.setPassing(),t.destroy(),[2]):(this.m_BalllistRoot.children.forEach(function(t){t.getComponent(f.default).iscombine=!0,t.getComponent(f.default).setColliderEnable(!1)}),[4,this.getobj("prefab/common/buff_magnet")]);case 1:return(o=s.sent()).parent=this.node,o.position=cc.v2(0,0),B.AudioMgr.playSound(W.AudioEnum.skill_use),this.m_IsPassing=!0,t.active=!0,a=o.getChildByName("111").position.sub(t.position).mag(),o.active=!1,cc.tween(t).to(a/800,{position:o.getChildByName("111").position,rotation:110}).call(function(){o.active=!0,r.autoCombine(n,o),t.destroy()}).start(),[2]}})})},vt.prototype.findBalls=function(t,e){return l(this,void 0,void 0,function(){var n,i,o;return u(this,function(){if(n=w.default.getParamsInt(R.OnlineKeys.skill_magnet_num,3),e.length>=n)return[2];if(t.length<2)return[2];for(i=t[0],t.splice(0,1),o=0;o<t.length;o++)if(t[o],t[o].m_lv==i.m_lv&&0==t[o].iscombine)return e.push([i,t[o]]),t.splice(o,1),this.findBalls(t,e),[2];return this.findBalls(t,e),[2]})})},vt.prototype.autoCombine=function(t,e){return l(this,void 0,void 0,function(){var n,i,o,a,r,s,c,l,d,p;return u(this,function(g){switch(g.label){case 0:return this.m_IsPassing=!0,e.active=!0,e.getChildByName("111").getComponent(cc.Animation).play("anim_bonus_skill_magnet"),[4,m.default.wait(1250)];case 1:g.sent(),n=[],i=[],p=0,g.label=2;case 2:if(!(p<t.length))return[3,9];o=[],a=0,g.label=3;case 3:return a<2?(r=t[p][a].getComponent(f.default))?(r.iscombine=!0,l=cc.v2(r.node.position.x*(cc.winSize.height/1634),r.node.position.y*(cc.winSize.height/1634)),cc.winSize.height<=1100&&(l=r.node.position),r.node.setSiblingIndex(10),[4,this.getobj("prefab/common/effect_color_out1")]):[3,6]:[3,7];case 4:return(s=g.sent()).active=!0,s.opacity=255,s.parent=h.I.node,s.position=M.default.getTargetPos(e.getChildByName("111").getChildByName("1"),h.I.m_EfflistRoot),c=s.position,l=l.sub(c),c=180*Math.atan2(l.y,l.x)/Math.PI,l=l.mag(),s.angle=c-1,s.scaleX=0,s.scaleY=l/300*.5,n.push(s),cc.tween(s).to(40/60,{scaleX:l/610},{easing:"quintOut"}).call(function(){}).start(),o.push(r),[4,m.default.wait(100)];case 5:g.sent(),g.label=6;case 6:return a++,[3,3];case 7:i.push(o),g.label=8;case 8:return p++,[3,2];case 9:return[4,m.default.wait(2e3)];case 10:g.sent(),n.forEach(function(t){cc.tween(t).to(1/6,{opacity:0}).call(function(){U.PoolMgr.putNode(t)}).start()}),d=function(t){var e,n,o;return u(this,function(a){switch(a.label){case 0:return e=i[t],n=e[0],o=e[1],cc.tween(n.node).to(.3,{position:o.node.position}).call(function(){o.combine(o,n)}).start(),cc.tween(o.node).to(.3,{position:o.node.position},{easing:"quintOut"}).call(function(){}).start(),cc.tween(o.node).to(.15,{scale:1.5}).to(.15,{scale:1}).call(function(){}).start(),[4,m.default.wait(200)];case 1:return a.sent(),[2]}})},p=0,g.label=11;case 11:return p<i.length?[5,d(p)]:[3,14];case 12:g.sent(),g.label=13;case 13:return p++,[3,11];case 14:return[4,m.default.wait(300)];case 15:return g.sent(),this.setPassing(),U.PoolMgr.putNode(e),this.m_BalllistRoot.children.forEach(function(t){t.getComponent(f.default).iscombine=!1,t.getComponent(f.default).setColliderEnable(!0),t.getComponent(f.default).addForce(0,-10)}),[2]}})})},vt.prototype.getobj=function(t){var e=this;return new Promise(function(n){E.LoaderMgr.loadPrefabWithUrl(t).then(function(t){t=U.PoolMgr.getPrefab(t,e.node),n(t)})})},vt.prototype.isHadSkillBuffBall=function(){for(var t=this.m_BalllistRoot.children,e=0;e<t.length;e++){var n=t[e];if(4==n.getComponent(f.default).m_buff)return n}return null},c([i(cc.Prefab)],vt.prototype,"prefabTopbar",void 0),c([i(cc.Node)],vt.prototype,"m_boomEffNew",void 0),c([i(cc.Node)],vt.prototype,"m_bglight",void 0),c([i(cc.Node)],vt.prototype,"m_ballobj2",void 0),c([i(cc.Node)],vt.prototype,"m_Change",void 0),c([i(cc.Node)],vt.prototype,"m_changeicon",void 0),c([i(st.default)],vt.prototype,"m_labcurScore",void 0),c([i(st.default)],vt.prototype,"m_labBestScore",void 0),c([i(cc.SpriteFrame)],vt.prototype,"m_Skins",void 0),c([i(cc.Node)],vt.prototype,"m_Hammer",void 0),c([i(cc.Node)],vt.prototype,"m_Guide",void 0),c([i(cc.Node)],vt.prototype,"comAdLike",void 0),c([i(F.default)],vt.prototype,"pointTipArr",void 0),c([i(cc.Node)],vt.prototype,"adCross",void 0),c([i(cc.Node)],vt.prototype,"nodeRank",void 0),c([i(cc.Node)],vt.prototype,"m_Worning",void 0),c([i(cc.Node)],vt.prototype,"m_Tip",void 0),c([i(cc.Node)],vt.prototype,"m_TarBallLab",void 0),c([i(cc.Sprite)],vt.prototype,"m_TarBallIcon",void 0),c([i(cc.Node)],vt.prototype,"m_bg1",void 0),c([i(cc.Node)],vt.prototype,"m_bg2",void 0),c([i(cc.Node)],vt.prototype,"m_gridadbtn",void 0),c([i(cc.Node)],vt.prototype,"m_Singlead",void 0),c([i(cc.Node)],vt.prototype,"m_gamecamera",void 0),c([i(cc.Node)],vt.prototype,"m_anicamera",void 0),c([i(cc.Node)],vt.prototype,"m_UIcamera",void 0),c([i(cc.Node)],vt.prototype,"m_BgCamera",void 0),c([i(cc.Node)],vt.prototype,"m_CurtainCamera",void 0),c([i(cc.Node)],vt.prototype,"m_SmallTarTip",void 0),c([i(ht.default)],vt.prototype,"comBottomWrap",void 0),c([i(ft.default)],vt.prototype,"comTopWrap",void 0),c([i(cc.Animation)],vt.prototype,"m_StartTip",void 0),c([i(cc.Node)],vt.prototype,"m_CollectGameTip",void 0),o=h=c([o],vt),a.default=o,cc._RF.pop()},{}],BlockParams:[function(t,e,n){"use strict";cc._RF.push(e,"c37bf7PtlhAU4wsefG99ClR","BlockParams");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("CubeParams"),c=i("Enum");function l(){var t=r.call(this)||this;return t.colorType=c.ColorType.Red,t.blockType=c.BlockType.Normal,t}a(l,r=s.default),a=l,o.default=a,cc._RF.pop()},{}],BottomBar:[function(t,e,n){"use strict";cc._RF.push(e,"1e9ffRDyppGOq8UO8HwpemQ","BottomBar");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("BtnStart"),u=i("ViewMgr"),d=i("Action"),p=i("ADCrossItem"),h=i("AudioMgr"),f=i("GameADLike"),m=i("GameFitTask"),g=i("GameAddCoin"),_=i("SDKEnums"),y=i("Enum");function v(){var t=null!==c&&c.apply(this,arguments)||this;return t.nAdItem=null,t.btnStart=null,t.wrapHand=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(v,c=cc.Component),v.prototype.init=function(){this.animWith(y.ComAction.Init)},v.prototype.initWithLevel=function(t){this.btnStart.initWith(t)},v.prototype.animWith=function(t){switch(d.default.stopAnim(this.node),t){case y.ComAction.Init:var e="init",n=this.nAdItem.getComponent(p.default);n.init(_.SDKBannerLocation.LOCATION_PAGE_HOME,1),n.refresh();break;case y.ComAction.Enter:e="in",this.nAdItem.getComponent(p.default).play(!0);break;case y.ComAction.Out:e="out",this.nAdItem.getComponent(p.default).stop()}return d.default.playAddAnim(this.node,"anim_bottom_"+e)},v.prototype.showGuide=function(){},v.prototype.hideGuide=function(){},v.prototype.actionAutoTask=function(t){this.onFitUp(null,t)},v.prototype.onShop=function(){h.AudioMgr.button(),u.ViewMgr.openPopwin(g.default,{data:{type:1}})},v.prototype.onFitUp=function(t,e){var n;e=e||Object.create(null),h.AudioMgr.button(),n=this.isHasGuide?y.HomeUIState.ShowTopMenuOutBottom:t?y.HomeUIState.OutBottom:y.HomeUIState.OutBottomAuto,u.ViewMgr.openPopwin(m.default,{data:{uiHome:n,isAuto:!t}}).catch(function(){return e.failture&&e.failture.call(e.context)}),this.hideGuide()},v.prototype.onDrawer=function(){h.AudioMgr.button(),u.ViewMgr.openPopwin(f.default)},s([o(cc.Node)],v.prototype,"nAdItem",void 0),s([o(l.default)],v.prototype,"btnStart",void 0),s([o(cc.Node)],v.prototype,"wrapHand",void 0),i=s([i],v),a.default=i,cc._RF.pop()},{}],BottomHome:[function(t,e,n){"use strict";cc._RF.push(e,"2a20ayWFkxIbZHb3mmCH9v7","BottomHome");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("Water"),p=i("SDKTools"),h=i("Display"),f=i("DataMgr"),m=i("BattleMgr"),g=i("AudioMgr"),_=i("AudioEnum"),y=i("ImageLabelNew"),v=i("SDKEnums");function b(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_LabBuild=null,t.m_StarSlider=null,t.m_LabHomeHammer=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(b,u=cc.Component),b.prototype.initInfo=function(t){if(void 0===t&&(t=!1),!(i=f.DataMgr.User.getRuningTasks())||0===i.length)return this.node.getChildByName("fitup").getChildByName("fitup copy").active=!1;var e=i[0].id,n=f.DataMgr.Milestone.getTaskCostStar(e=1==e?2:e),i=f.DataMgr.User.Star;e=Math.min(i/n,1),this.m_LabHomeHammer.setText(i+"/"+n),t?cc.tween(this.m_StarSlider).to(.3,{fillRange:e}).start():this.m_StarSlider.fillRange=e,this.node.getChildByName("fitup_tip").active=this.checkIsCanUpBuild(),!f.DataMgr.User.IsFinishHomeGuid&&e<1?(this.node.getChildByName("fitup").getChildByName("fitup").getComponent(cc.Button).interactable=!1,this.node.getChildByName("fitup").getChildByName("fitup copy").active=!0):(this.node.getChildByName("fitup").getChildByName("fitup").getComponent(cc.Button).interactable=!0,this.node.getChildByName("fitup").getChildByName("fitup copy").active=!1),1<=e&&this.showHomeGuid(),this.m_LabBuild.string=this.ComputedProgress.toString()},b.prototype.addStar=function(t){return c(this,void 0,void 0,function(){var e,n,i,o=this;return l(this,function(a){switch(a.label){case 0:g.AudioMgr.playSound(_.AudioEnum.star_fly_start),e=function(e){var i;return l(this,function(a){switch(a.label){case 0:return i=e,h.default.actionStarFly(m.default.I.node.getChildByName("star Node"),n.node.getChildByName("fitup").getChildByName("star").getChildByName("img_star_small"),"anim_star_fly_lvup").then(function(){i==t-1&&m.default.I.levelup(),o.node.getChildByName("fitup").getChildByName("star").getChildByName("img_star_small").getComponent(cc.Animation).play(),o.node.getChildByName("fitup").getComponent(cc.Animation).play(),g.AudioMgr.playSound(_.AudioEnum.star_fly_end),o.initInfo(!0)}),[4,d.default.wait(300)];case 1:return a.sent(),[2]}})},n=this,i=0,a.label=1;case 1:return i<t?[5,e(i)]:[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},Object.defineProperty(b.prototype,"ComputedProgress",{get:function(){var t=f.DataMgr.Milestone,e={};t.getGroupTaskList().forEach(function(t){return e[t.id]=1});var n=f.DataMgr.User.CompleteTasks.filter(function(t){return!!e[t]}).map(function(e){return t.getTaskById(e).cost_star}).reduce(function(t,e){return t+e},0),i=f.DataMgr.Milestone.getMilestoneDetails().milestone.reward_star;return+(100*+(n/(i[i.length-1]+1)).toFixed(2)).toFixed(0)},enumerable:!0,configurable:!0}),b.prototype.checkIsCanUpBuild=function(){if(0==f.DataMgr.User.getRuningTasks().length)return!1;var t=f.DataMgr.User.getRuningTasks()[0].id;f.DataMgr.Milestone.getTaskById(t=1==t?2:t);var e=f.DataMgr.Milestone.getTaskCostStar(t),n=f.DataMgr.User.Star;return t!=p.default.getParamsInt(v.OnlineKeys.task_no_build_tip,516)&&e<=n},b.prototype.showHomeGuid=function(){var t=p.default.getParamsInt(v.OnlineKeys.force_build_tutorial_abtest,2);if(0!=t&&(1!=t||f.DataMgr.UserBase.ID%2!=1))return f.DataMgr.User.reqFinishHomeGuid();f.DataMgr.User.IsFinishHomeGuid||(m.default.I.sdkEventWithKey(v.EventKeys.button_show),this.node.getChildByName("black").active=!0,this.node.getChildByName("black").getComponent(cc.Animation).play(),this.node.getChildByName("black").getChildByName("course_bg1").getComponent(cc.Animation).play(),f.DataMgr.User.reqFinishHomeGuid())},b.prototype.ongohome=function(){if(!f.DataMgr.User.IsFinishHomeGuid&&f.DataMgr.User.Star<3)return h.default.showTip("\u83b7\u5f973\u9897\u661f\u661f\u89e3\u95012048\u5c0f\u5bb6");m.default.I.sdkEventWithKey(v.EventKeys.button_tap),m.default.I.handleHistoryRecord(),h.default.PersistNode.loadToHome()},b.prototype.onlockhome=function(){if(!f.DataMgr.User.IsFinishHomeGuid&&f.DataMgr.User.Star<3)return h.default.showTip("\u83b7\u5f973\u9897\u661f\u661f\u89e3\u95012048\u5c0f\u5bb6"),void cc.tween(this.node.getChildByName("fitup").getChildByName("fitup")).to(.1,{scale:1.1}).to(.1,{scale:1}).start()},s([o(cc.Label)],b.prototype,"m_LabBuild",void 0),s([o(cc.Sprite)],b.prototype,"m_StarSlider",void 0),s([o(y.default)],b.prototype,"m_LabHomeHammer",void 0),i=s([i],b),a.default=i,cc._RF.pop()},{}],BottomItems:[function(t,e,n){"use strict";cc._RF.push(e,"f8264wO4ftGB5YyOrTp4FQv","BottomItems");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("Water"),p=i("Action"),h=i("SDKTools"),f=i("DataMgr"),m=i("SDKEnums"),g=i("BattleMgr"),_=i("EventMgr"),y=i("EventEnum"),v=i("ImageLabelNew"),b=i("PlatformUtils"),w=i("Enum");function S(){var t=null!==u&&u.apply(this,arguments)||this;return t.nItems=[],t.nItemTip=null,t.cdItemTip=10,t}i=(o=cc._decorator).ccclass,o=o.property,r(S,u=cc.Component),S.prototype.onLoad=function(){this.nItemTip.active=!1},S.prototype.update=function(t){0<this.cdItemTip&&(this.cdItemTip-=t)},S.prototype.getNodes=function(){return this.nItems},S.prototype.initInfo=function(){this.addEvent(),this.renderItemsInfo()},S.prototype.refreshInfo=function(){this.renderItemsInfo()},S.prototype.showLight=function(){cc.isValid(this.node)&&this.node.children[0].getComponent(cc.Animation).play()},S.prototype.stopLight=function(){cc.isValid(this.node)&&this.node.children[0].getComponent(cc.Animation).stop()},S.prototype.showTip=function(t){return c(this,void 0,void 0,function(){var e;return l(this,function(n){switch(n.label){case 0:return e=this.nItemTip,!cc.isValid(e)||e.active?[2]:t?(e.active=!0,p.default.playAddAnim(e),[4,d.default.wait(5e3)]):[3,2];case 1:return n.sent(),this.hideTipAnim(e),[3,4];case 2:return this.cdItemTip<=0?(f.DataMgr.User.reqAddDayReward(w.DayKeys.ShowItemTipsTimes,1,!1),this.cdItemTip=10,this.showTipAnim(e),[4,d.default.wait(5e3)]):[3,4];case 3:n.sent(),this.hideTipAnim(e),n.label=4;case 4:return[2]}})})},S.prototype.hideTip=function(){this.hideTipAnim(this.nItemTip)},S.prototype.showTipAnim=function(t){t.active=!0,p.default.playAddAnim(t)},S.prototype.hideTipAnim=function(t){cc.isValid(t)&&t.active&&(t.active=!1,p.default.stopAnim(t))},S.prototype.addEvent=function(){_.EventMgr.on(y.EventEnum.UpdateProps,this.handleUpdateProps,this)},S.prototype.renderItemsInfo=function(){for(var t=0;t<3;t++)this.setItemInfo(this.nItems[t],t)},S.prototype.setItemInfo=function(t,e){var n=f.DataMgr.User.getPropNum(e),i=g.default.I.m_props[e],o=t.getChildByName("prop_star_bg");o.getChildByName("starNum").getComponent(v.default).setValue(150,"",!1);var a=t.getChildByName("video");a.active=!1,o.active=!1;var r=t.getChildByName("bg_propNum");r.active=!0,t.getChildByName("txt_free").active=!1,f.DataMgr.User.getIsHadFreeProp(e)?(r.active=!1,t.getChildByName("txt_free").active=!0):r.getChildByName("hasNum").getComponent(v.default).setValue(n,"x"),n<=0&&(r.active=!1),0<i?(t.getChildByName("tagTime").active=!0,t.getChildByName("tagTime").getChildByName("labnum").getComponent(cc.Label).string=i.toString()):(t.getChildByName("tagTime").active=!1,n<=0&&(r.active=!1,f.DataMgr.User.Diamond<150&&b.default.isWx&&0==PCSDK.platform.isVideoErrored()?a.active=!0:o.active=!0))},S.prototype.checkIsVideoGetItem=function(t){var e=this;return!(0<g.default.I.getTimePropNum(t)||0<f.DataMgr.User.getPropNum(t)||150<=f.DataMgr.User.Diamond||!b.default.isWx||0!=PCSDK.platform.isVideoErrored()||(h.default.dispatch(m.ShareKeys.UseItem,{success:function(){f.DataMgr.User.reqProps(t,1),e.useItemWithType(t)},fail:function(){},context:this}),0))},S.prototype.useItemWithType=function(t){t==w.PropsType.Joker?g.default.I.useJoker():t==w.PropsType.Refresh?g.default.I.useReset():t==w.PropsType.Hammer&&g.default.I.setUseHammer()},S.prototype.onUseItem=function(t,e){this.refreshInfo(),g.default.I.m_IsPassing||g.default.I.m_isUsingJokerball||g.default.I.m_isUsingDelItem||b.default.isWx&&PCSDK.platform.isVideoPlaying()||this.checkIsVideoGetItem(e=+e)||this.useItemWithType(e)},S.prototype.handleUpdateProps=function(){this.refreshInfo()},s([o(cc.Node)],S.prototype,"nItems",void 0),s([o(cc.Node)],S.prototype,"nItemTip",void 0),i=s([i],S),a.default=i,cc._RF.pop()},{}],BottomPower:[function(t,e,n){"use strict";cc._RF.push(e,"6d6daw0y2BFR5xoxtbq1qY5","BottomPower");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("Water"),p=i("Action"),h=i("Enum"),f=i("SDKTools"),m=i("Display"),g=i("ballctr"),_=i("DataMgr"),y=i("BattleMgr"),v=i("RocketCtr"),b=i("AudioMgr"),w=i("PoolMgr"),S=i("AudioEnum"),M=i("SDKAnalytics"),C=i("UserModel"),P=i("LoaderMgr"),A=i("SDKEnums"),T=i("MissionModel"),E=i("OnlineMgr");function B(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_Rocket=null,t.pos=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(B,u=cc.Component),B.prototype.onLoad=function(){this.m_Rocket.active=!1},B.prototype.update=function(){var t;this.pos&&(t=this.pos.sub(this.node.position),t=180*cc.Vec2.UP.angle(t)/Math.PI,this.node.angle=t)},B.prototype.initInfo=function(){var t=this,e=y.default.I.power/100,n=this.node.getChildByName("btn_").getChildByName("btn_di").getChildByName("progress").getComponent(cc.Sprite);cc.tween(n).to(40/60,{fillRange:e}).call(function(){return t.renderFullPower()}).start(),p.default.playAnim(this.node,"anim_bonus_combo_in")},B.prototype.onSkill=function(){if(b.AudioMgr.button(),!y.default.I.m_IsPassing){if(y.default.I.power<100)return m.default.showTip("\u80fd\u91cf\u4e0d\u8db3~");var t;cc.isValid(this.node)&&(t=E.OnlineMgr.getObject(A.OnlineKeys.skill_weights,[.5,.5]),t=Math.random()<t[0]?h.Skill.magnet:h.Skill.rocket,(t=y.default.I.m_BalllistRoot.children.length<15?h.Skill.magnet:t)==h.Skill.magnet?this.doCombineSkill():this.doRocketSkill(),M.default.event(A.EventKeys.bonus_use,"\u4f7f\u7528\u6280\u80fd"))}},B.prototype.doCombineSkill=function(){var t=this,e=[],n=[],i=[];y.default.I.m_BalllistRoot.children.forEach(function(t){500<=t.x||t.x<=-500||600<=t.y||t.y<=-600?i.push(t):e.push(t.getComponent(g.default))}),i.forEach(function(t){t.destroy()}),this.findBalls(e,n),n.length<=0?m.default.showTip("\u6ca1\u6709\u53ef\u5408\u6210\u7684\u7403~"):(y.default.I.m_BalllistRoot.children.forEach(function(t){t.getComponent(g.default).iscombine=!0,t.getComponent(g.default).setColliderEnable(!1)}),b.AudioMgr.playSound(S.AudioEnum.skill_use),y.default.I.power=0,y.default.I.m_IsPassing=!0,y.default.I.comTopWrap.hideTaskTip(),p.default.playAnim(this.node,"anim_bonus_get").then(function(){return t.autoCombine(n)}))},B.prototype.getObj=function(t){var e=this;return new Promise(function(n){P.LoaderMgr.loadPrefabWithUrl(t).then(function(t){t=w.PoolMgr.getPrefab(t,e.node),n(t)})})},B.prototype.doRocketSkill=function(){var t=this,e=f.default.getParamsInt(A.OnlineKeys.skill_rocket_num,6),n=[],i=[],o=[];if(y.default.I.m_BalllistRoot.children.forEach(function(t){(500<=t.x||t.x<=-500||600<=t.y||t.y<=-600?o:n).push(t)}),o.forEach(function(t){t.destroy()}),n.sort(function(t,e){return t.getComponent(g.default).m_lv-e.getComponent(g.default).m_lv}),n.forEach(function(t){t.getComponent(g.default).m_lv<C.default.I.Lv_CurTarBallLv-2&&i.length<e&&i.push(t)}),i.length<=0)return m.default.showTip("\u6ca1\u6709\u6467\u6bc1\u5bf9\u6700\u5c0f\u7403~"),void y.default.I.setPassing();y.default.I.m_BalllistRoot.children.forEach(function(t){t.getComponent(g.default).iscombine=!0,t.getComponent(g.default).setColliderEnable(!1)}),b.AudioMgr.playSound(S.AudioEnum.skill_use),y.default.I.power=0,y.default.I.m_IsPassing=!0,y.default.I.comTopWrap.hideTaskTip(),p.default.playAnim(this.node,"anim_bonus_get_missile").then(function(){return t.rocketBoom(i)})},B.prototype.rocketBoom=function(t){return c(this,void 0,void 0,function(){var e,n;return l(this,function(i){switch(i.label){case 0:y.default.I.m_IsPassing=!0,p.default.playAnim(this.node,"anim_bonus_release_missle"),n=e=0,i.label=1;case 1:return n<t.length?(e=this.createRocket(t[n]),[4,d.default.wait(300)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[4,d.default.wait(1e3*(e-.3))];case 5:return i.sent(),y.default.I.setPassing(),y.default.I.showfullpower(0,!0),_.DataMgr.Missions.addMissionProgress(T.MissionCheckType.UseSkill,1),y.default.I.m_BalllistRoot.children.forEach(function(t){t.getComponent(g.default).iscombine=!1,t.getComponent(g.default).setColliderEnable(!0),t.getComponent(g.default).addForce(0,-10)}),[2]}})})},B.prototype.createRocket=function(t){if(!t||!t.isValid)return 0;t.getChildByName("skill_focus1").active=!0,t.getChildByName("skill_focus1").children[0].getComponent(cc.Animation).play("anim_ball_skill_focus1");var e=cc.instantiate(this.m_Rocket);e.parent=this.node,e.active=!0,e.position=m.default.getTargetPos(this.node.getChildByName("btn_"),this.node);var n=cc.v2(m.default.getTargetPos(t,this.node).x*cc.winSize.height/1624,m.default.getTargetPos(t,this.node).y*cc.winSize.height/1624),i=n.sub(e.position),o=180*cc.Vec2.UP.angle(i)/Math.PI;e.rotation=0;var a=m.default.getTargetPos(t,this.node);a.x*=cc.winSize.height/1624,a.y*=cc.winSize.height/1624;var r=m.default.getEndPointByTrigonometric(90,e.position,a);return i=a.sub(e.position).mag()/400,p.default.bezier(e,1,e.position,r,a,i).then(function(){var n=t.getComponent(g.default);C.default.I.Vibrate&&f.default.vibrateShort(),p.default.shakeEffect(y.default.I.m_UIcamera,.4),p.default.shakeEffect(y.default.I.m_gamecamera,.4),y.default.I.createBoomEff(n.m_lv,n.node.position,n.getScale(),!1),n.node.destroy(),e.destroy()}),cc.tween(e).to(.5*i,{angle:o,scale:.8}).call(function(){e.addComponent(v.default).pos=n}).start(),i},B.prototype.addCombo=function(t){return c(this,void 0,void 0,function(){var e,n,i,o=this;return l(this,function(){return e=y.default.I.power,y.default.I.power+=+t,100<=y.default.I.power&&(y.default.I.power=100),n=y.default.I.power/100,i=this.node.getChildByName("btn_").getChildByName("btn_di").getChildByName("progress").getComponent(cc.Sprite),100<=e||(p.default.playAnim(this.node,"anim_bonus_combo_in"),cc.tween(i).to(40/60,{fillRange:n}).call(function(){o.renderFullPower()}).start()),[2]})})},B.prototype.actionFly=function(t,e){return void 0===e&&(e=0),c(this,void 0,void 0,function(){var n,i,o,a,r,s=this;return l(this,function(c){switch(c.label){case 0:return 100<=y.default.I.power?[2]:[4,d.default.wait(1e3*e)];case 1:return c.sent(),n=t.position,[4,this.getObj("prefab/common/stars")];case 2:return(i=c.sent()).parent=this.node,i.active=!0,i.position=n,[4,d.default.wait(500)];case 3:return c.sent(),o=m.default.getTargetPos(this.node.getChildByName("btn_"),this.node),a=m.default.getEndPointByTrigonometric(40,n,o),r=o.sub(n).mag()/1e3,p.default.bezier(i,1,n,a,o,r).then(function(){w.PoolMgr.putNode(i),s.addCombo(f.default.getParamsInt(A.OnlineKeys.powerNum,5))}),[2]}})})},B.prototype.autoCombine=function(t){return c(this,void 0,void 0,function(){var e,n,i,o,a,r,s,c;return l(this,function(u){switch(u.label){case 0:return y.default.I.m_IsPassing=!0,p.default.playAnim(this.node,"anim_bonus_release01"),[4,d.default.wait(1250)];case 1:u.sent(),e=[],n=[],c=0,u.label=2;case 2:if(!(c<t.length))return[3,8];i=[],o=function(n){var o,r,s,u;return l(this,function(l){switch(l.label){case 0:return(o=t[c][n].getComponent(g.default))?(o.iscombine=!0,u=cc.v2(o.node.position.x*(cc.winSize.height/1634),o.node.position.y*(cc.winSize.height/1634)),cc.winSize.height<=1100&&(u=o.node.position),o.node.setSiblingIndex(10),[4,a.getObj("prefab/common/effect_color_out1")]):[2,"continue"];case 1:return(r=l.sent()).active=!0,r.opacity=255,r.parent=y.default.I.node,r.position=m.default.getTargetPos(a.node.getChildByName("skill_1").getChildByName("111").getChildByName("1"),y.default.I.m_EfflistRoot),s=r.position,u=u.sub(s),s=180*Math.atan2(u.y,u.x)/Math.PI,u=u.mag(),r.angle=s-1,r.scaleX=0,r.scaleY=u/300*.5,e.push(r),cc.tween(r).to(40/60,{scaleX:u/610},{easing:"quintOut"}).call(function(){o.node.getChildByName("ball_light").active=!0}).start(),i.push(o),[4,d.default.wait(100)];case 2:return l.sent(),[2]}})},a=this,r=0,u.label=3;case 3:return r<2?[5,o(r)]:[3,6];case 4:u.sent(),u.label=5;case 5:return r++,[3,3];case 6:n.push(i),u.label=7;case 7:return c++,[3,2];case 8:return[4,d.default.wait(2e3)];case 9:u.sent(),e.forEach(function(t){cc.tween(t).to(1/6,{opacity:0}).call(function(){w.PoolMgr.putNode(t)}).start()}),s=function(t){var e,i,o;return l(this,function(a){switch(a.label){case 0:return e=n[t],i=e[0],o=e[1],i.node.getChildByName("ball_light").active=!1,o.node.getChildByName("ball_light").active=!1,cc.tween(i.node).to(.3,{position:o.node.position}).call(function(){o.combine(o,i)}).start(),cc.tween(o.node).to(.3,{position:o.node.position},{easing:"quintOut"}).call(function(){}).start(),cc.tween(o.node).to(.15,{scale:1.5}).to(.15,{scale:1}).call(function(){}).start(),[4,d.default.wait(200)];case 1:return a.sent(),[2]}})},c=0,u.label=10;case 10:return c<n.length?[5,s(c)]:[3,13];case 11:u.sent(),u.label=12;case 12:return c++,[3,10];case 13:return[4,d.default.wait(300)];case 14:return u.sent(),y.default.I.setPassing(),y.default.I.showfullpower(0,!0),_.DataMgr.Missions.addMissionProgress(T.MissionCheckType.UseSkill,1),y.default.I.m_BalllistRoot.children.forEach(function(t){t.getComponent(g.default).iscombine=!1,t.getComponent(g.default).setColliderEnable(!0),t.getComponent(g.default).addForce(0,-10)}),[2]}})})},B.prototype.findBalls=function(t,e){var n=f.default.getParamsInt(A.OnlineKeys.skill_magnet_num,3);if(!(e.length>=n||t.length<2)){var i=t[0];t.splice(0,1);for(var o=0;o<t.length;o++)if(t[o],t[o].m_lv==i.m_lv&&0==t[o].iscombine)return e.push([i,t[o]]),t.splice(o,1),void this.findBalls(t,e);this.findBalls(t,e)}},B.prototype.renderFullPower=function(){y.default.I.power<100||p.default.playAnim(this.node,"anim_bonus_full")},s([o(cc.Node)],B.prototype,"m_Rocket",void 0),i=s([i],B),a.default=i,cc._RF.pop()},{}],BottomSkip:[function(t,e,n){"use strict";cc._RF.push(e,"7d4027tYYNJuovkeS7VIlF9","BottomSkip");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("AudioMgr"),u=i("ViewDelayShow");function d(){var t=null!==c&&c.apply(this,arguments)||this;return t.btnText=null,t.btnFrame=null,t.isDelay=!0,t}i=(o=cc._decorator).ccclass,o=o.property,r(d,c=cc.Component),d.prototype.onLoad=function(){this.isDelay&&this.node.addComponent(u.default)},d.prototype.initWith=function(t,e){this.callback=t,this.context=e},d.prototype.start=function(){this.initUI()},d.prototype.initUI=function(){this.btnText.spriteFrame=this.btnFrame},d.prototype.onClick=function(){l.AudioMgr.button(),this.callback&&this.callback.call(this.context)},s([o(cc.Sprite)],d.prototype,"btnText",void 0),s([o(cc.SpriteFrame)],d.prototype,"btnFrame",void 0),s([o],d.prototype,"isDelay",void 0),i=s([i],d),a.default=i,cc._RF.pop()},{}],BottomWrap:[function(t,e,n){"use strict";cc._RF.push(e,"6235dQwjSxL8aiwBg/1od5G","BottomWrap");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p,h,f=i("BottomHome"),m=i("BottomPower"),g=i("BottomItems"),_=i("Action"),y=i("PoolMgr"),v=i("LoaderMgr");function b(){var t,e=h.call(this)||this;return e.comHome=null,e.comPower=null,e.loadState=((t={})[d.Home]=p.Default,t[d.Items]=p.Default,t[d.Power]=p.Default,t),e}i=(o=cc._decorator).ccclass,o.property,(o=u=a.BottomAnim||(a.BottomAnim={}))[o.Init=0]="Init",o[o.Eneter=1]="Eneter",o[o.NomralOut=2]="NomralOut",o[o.LvToTwoOut=3]="LvToTwoOut",o[o.SwitchMode=4]="SwitchMode",(o=d=d||{})[o.Home=0]="Home",o[o.Items=1]="Items",o[o.Power=2]="Power",(o=p=p||{})[o.Default=0]="Default",o[o.Failure=1]="Failure",o[o.Loading=1]="Loading",o[o.Success=2]="Success",r(b,h=cc.Component),b.prototype.start=function(){this.init(),window.bottom=this},b.prototype.init=function(){},b.prototype.initUI=function(){},b.prototype.animWith=function(t,e){var n;switch(void 0===e&&(e=0),t){case u.Init:n="init";break;case u.Eneter:n="enter";break;case u.NomralOut:n="normal_out";break;case u.LvToTwoOut:n="lvtotwo_out";break;case u.SwitchMode:n="switch_mode"}n&&cc.isValid(this.node)&&_.default.playAnim(this.node.parent,"anim_ui_"+n,0,e)},b.prototype.addHomeStar=function(t){return c(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,this.checkHome().then(function(){return e.comHome.addStar(t)})]})})},b.prototype.initHome=function(){var t=this;this.checkHome().then(function(){return t.comHome.initInfo()})},b.prototype.checkHome=function(){var t=this;return cc.isValid(this.comHome)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(d.Home).then(function(n){t.comHome||(n=y.PoolMgr.getPrefab(n,t.node),t.comHome=n.getComponent(f.default)),e(1)}).catch(function(){return n()})})},b.prototype.actionPowerFly=function(t,e){return void 0===e&&(e=0),c(this,void 0,void 0,function(){var n=this;return l(this,function(){return[2,this.checkPower().then(function(){return n.comPower.actionFly(t,e)})]})})},b.prototype.addComboPower=function(t){return c(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,this.checkPower().then(function(){return e.comPower.addCombo(t)})]})})},b.prototype.initPower=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return[2,this.checkPower().then(function(){return t.comPower.initInfo()})]})})},b.prototype.checkPower=function(){var t=this;return cc.isValid(this.comPower)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(d.Power).then(function(n){t.comPower||((n=y.PoolMgr.getPrefab(n,t.node)).zIndex=1,t.comPower=n.getComponent(m.default)),e(1)}).catch(function(){return n()})})},b.prototype.getItemNodes=function(){var t=this;return new Promise(function(e,n){t.checkItems().then(function(){return e(t.comItems.getNodes())}).catch(function(){return n()})})},b.prototype.initItems=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return this.checkItems().then(function(){return t.comItems.initInfo()}),[2]})})},b.prototype.refreshItemsInfo=function(){var t=this;this.checkItems().then(function(){return t.comItems.refreshInfo()})},b.prototype.showItemLight=function(){var t=this;this.checkItems().then(function(){return t.comItems.showLight()})},b.prototype.stopItemLight=function(){var t=this;this.checkItems().then(function(){return t.comItems.stopLight()})},b.prototype.showItemTip=function(t){var e=this;void 0===t&&(t=!1),this.checkItems().then(function(){return e.comItems.showTip(t)})},b.prototype.hideItemTip=function(){var t=this;this.checkItems().then(function(){return t.comItems.hideTip()})},b.prototype.checkItems=function(){var t=this;return cc.isValid(this.comItems)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(d.Items).then(function(n){t.comItems||(n=y.PoolMgr.getPrefab(n,t.node),t.comItems=n.getComponent(g.default)),e(1)}).catch(function(){return n()})})},b.prototype.loadPrefab=function(t){var e,n=this;switch(t){case d.Home:e="BottomHome";break;case d.Items:e="BottomItems";break;case d.Power:e="BottomPower"}return this.loadState[t]=p.Loading,new Promise(function(i,o){v.LoaderMgr.loadPrefabWithUrl("prefab/2048/"+e).then(function(e){cc.isValid(n.node)?(n.loadState[t]=p.Success,i(e)):(n.loadState[t]=p.Failure,o())}).catch(function(){n.loadState[t]=p.Failure,n.loadPrefab(t)})})},i=s([i],b),a.default=i,cc._RF.pop()},{}],BtnLike:[function(t,e,n){"use strict";cc._RF.push(e,"9dec74ibVtBY4SwFnOxVA28","BtnLike");var i=t,o=e,a=n,r=__EXTENDS__();o=__DECORATE__,Object.defineProperty(a,"__esModule",{value:!0});var s,c=i("ViewMgr"),l=i("Action"),u=i("Enum"),d=i("AudioMgr"),p=i("GridADPopwin");function h(){return null!==s&&s.apply(this,arguments)||this}i=cc._decorator.ccclass,r(h,s=cc.Component),h.prototype.init=function(){this.animWith(u.ComAction.Init)},h.prototype.animWith=function(t){var e;switch(l.default.stopAnim(this.node),t){case u.ComAction.Init:e="init";break;case u.ComAction.Enter:e="in";break;case u.ComAction.Out:e="out"}return l.default.playAddAnim(this.node,"anim_adlike_"+e)},h.prototype.onAdLike=function(){d.AudioMgr.button(),p.default.isshow=!0,c.ViewMgr.openPopwin(p.default,{data:{isauto:!1},anim:!0})},i=o([i],h),a.default=i,cc._RF.pop()},{}],BtnStart:[function(t,e,n){"use strict";cc._RF.push(e,"6eb4cUrtFBKz7Hg5TCPe+Hg","BtnStart");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Display"),u=i("AudioMgr"),d=i("ImageLabelNew");function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.txtNum=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(p,c=cc.Component),p.prototype.initWith=function(t){this.level=t,this.txtNum.setText(""+t)},p.prototype.onGame=function(){u.AudioMgr.button(),l.default.PersistNode.loadToGame()},s([o(d.default)],p.prototype,"txtNum",void 0),i=s([i],p),a.default=i,cc._RF.pop()},{}],BuildingItem:[function(t,e,n){"use strict";cc._RF.push(e,"5360c6mlqdEJo4T4DxS00mt","BuildingItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("ViewMgr"),p=i("Action"),h=i("SDKTools"),f=i("DataMgr"),m=i("AudioMgr"),g=i("GameFitUp"),_=i("LoaderMgr"),y=i("MapConfig"),v=i("GameFitTask"),b=i("PlatformUtils"),w=i("MilestoneModel"),S=i("Enum"),M=i("ColorListener");function C(){var t=null!==u&&u.apply(this,arguments)||this;return t.nodeFurniture=null,t.spriteLight=null,t.partSmoke1=null,t.partSmoke2=null,t.dragonBone=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(C,u=cc.Component),Object.defineProperty(C.prototype,"nodeImg",{get:function(){return this.nodeFurniture.children[0]},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"isCanTouch",{get:function(){return 3==+this.data.skin_num},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"isTouchAnim",{get:function(){return 1==+this.data.touch_effect},enumerable:!0,configurable:!0}),C.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},C.prototype.initWith=function(t,e,n){return void 0===n&&(n={}),this.data=e,this.showSkin(t,e,n)},C.prototype.changeBone=function(t,e,n,i,o){var a=this;return this.data=n,new Promise(function(r){a.stopLight(),a.playBone(t,e,function(){return a.switchSkin(t,n,i,o)},a).then(function(){r(null),o===S.ActionTaskType.Bone3&&a.showSkin(t,n),o===S.ActionTaskType.Bone2&&a.showSkin(t,n)})})},C.prototype.actionDown=function(){return p.default.stopAnim(this.node,"anim_furniture_idle"),this.node.getComponent(M.default).add(M.AnimEventKey.NewDownSmoke,this.onEndDown,this),this.animDown()},C.prototype.actionFocus=function(t,e){return this.initWith(t,e,{isLight:!0}),this.animLight()},C.prototype.actionUnselect=function(t,e,n){p.default.stopAnim(this.node,"anim_furniture_idle"),n&&this.initWith(t,e,{isLight:!1})},C.prototype.actionPreview=function(t,e){return c(this,void 0,Promise,function(){return l(this,function(){switch(+e.switch_effect){case w.SwitchEffect.Light:return[2,this.actionFocus(t,e)];case w.SwitchEffect.DownAndLight:return this.initWith(t,e,{isLight:!1}),[2,this.actionFocus(t,e)]}return[2,Promise.resolve()]})})},C.prototype.actionChange=function(t,e){return c(this,void 0,Promise,function(){return l(this,function(){return p.default.stopAnim(this.node),this.initWith(t,e,{isLight:!1}),[2,Promise.resolve()]})})},C.prototype.actionClick=function(){var t,e;m.AudioMgr.button(),this.isCanTouch&&(d.ViewMgr.getPopwin(v.default)||d.ViewMgr.getPopwin(g.default)||3===this.data.skin_num&&(e=(t=f.DataMgr.User.getFurnitureSkinById(this.data.id))?t.select:1,this.showSkin(e,this.data,{isLight:!0}),this.animLight(),t=this.data.id,e=f.DataMgr.Milestone.getTaskByAddFurnitureId(t),d.ViewMgr.openPopwin(g.default,{data:{data:e,type:1,furnitures:[t],uiHome:S.HomeUIState.OutBottom}})))},C.prototype.actionTouchAnim=function(){this.isTouchAnim&&p.default.playAddAnim(this.node)},C.prototype.actionClean=function(){return c(this,void 0,void 0,function(){var t,e;return l(this,function(){return t=this.node,e=0<=(e=t.name).indexOf("Dust")?"anim_furniture_dust":"anim_furniture_disappear",[2,p.default.playAddAnim(t,e).then(function(){return cc.isValid(t)&&t.destroy()})]})})},C.prototype.actionBackup=function(t,e,n){return c(this,void 0,void 0,function(){var i=this;return l(this,function(){return cc.isValid(this.node)?(this.node.name=e.id,n?[2,this.animDisappear().then(function(){return i.initWith(t,e,{isLight:!0})})]:(this.initWith(t,e,{isLight:n}),[2,Promise.resolve()])):[2,Promise.resolve()]})})},C.prototype.switchSkin=function(t,e,n,i){switch(p.default.stopAnim(this.node),i){case S.ActionTaskType.Bone1:this.showSkin(t,e);break;case S.ActionTaskType.Bone2:case S.ActionTaskType.Bone4:this.hideSkin();break;case S.ActionTaskType.Bone3:this.showSkin(t,n)}},C.prototype.stopLight=function(){return p.default.stopAnim(this.node)},C.prototype.animLight=function(){return p.default.playAddAnim(this.node,"anim_furniture_idle")},C.prototype.animDown=function(){return p.default.playAddAnim(this.node,"anim_furniture_down")},C.prototype.animShow=function(){return p.default.playAddAnim(this.node,"anim_furniture_show")},C.prototype.animDisappear=function(){return p.default.playAddAnim(this.node,"anim_furniture_disappear")},C.prototype.showSkin=function(t,e,n){var i=!!(n=void 0===n?{}:n).isLight,o=e.id,a=e.colliders,r=e.res_img_scale,s=e.res_img_rect,c=e.res_img_anchor,l=e.res_img_rotation,u=e.res_bone_offset,d=e.res_bone_scale,p=r[0],h=r[1],f=c[0],m=c[1],g=s[0];r=s[1],c=s[2],s=s[3],this.node.scaleX=p,this.node.scaleY=h,this.node.width=g,this.node.height=r,this.node.x=c,this.node.y=s,this.node.name=o,u.length&&(s=u[0],o=u[1],u=d[0],_=d[1],this.dragonBone.node.x=s||0,this.dragonBone.node.y=o||0,this.dragonBone.node.scaleX=u||1,this.dragonBone.node.scaleY=_||1);var _=this.partSmoke1.node;return _.active=!1,_.x=0===f?0:g/2,_.y=0===m?0:-r/2,(_=this.partSmoke2.node).active=!1,_.x=-g/2,_.y=r/2,(_=this.nodeImg).width=g,_.height=r,_.anchorX=f,_.anchorY=m,_.y=0,_.zIndex=1e3,_.angle=l||0,this.nodeFurniture.opacity=255,i&&((i=this.spriteLight.node).width=g,i.height=r,i.anchorX=f,i.anchorY=m,i.angle=l||0),(a=a||[]).length&&!this.nodeImg.getComponent(cc.PolygonCollider)&&((l=this.nodeImg.addComponent(cc.PolygonCollider)).offset=cc.Vec2.ZERO,l.points=a.map(function(t){return t=t.split("&"),cc.v2(+t[0],+t[1])})),this.loadSprite(t,e,n)},C.prototype.loadSprite=function(t,e,n){var i=this;void 0===n&&(n={});var o=e.skin_type,a=e.res_img,r=e.skin_num;return a?new Promise(function(s){var c=!!n.isLight,l=!!n.isInitial,u=y.MapConfig.PrefixRoom+"/"+y.MapConfig.RoomData[o].name,d=a.replace("_1","").replace("_2","").replace("_3","");d=3===r?d+"_"+t:""+a,_.LoaderMgr.loadSpriteFrameWithUrl(u+"/"+d).then(function(t){l&&i.animShow(),c&&cc.isValid(i.node)&&cc.isValid(i.spriteLight)&&(i.spriteLight.spriteFrame=t,i.spriteLight.node.active=!0),cc.isValid(i.node)&&cc.isValid(i.nodeImg)&&(i.nodeImg.active=!0,i.nodeImg.getComponent(cc.Sprite).spriteFrame=t),cc.dynamicAtlasManager.insertSpriteFrame(t),s(null)},function(){return i.loadSprite(t,e,n)}).catch(function(){})}):(cc.isValid(this.nodeImg)&&(this.nodeImg.active=!0,this.nodeImg.getComponent(cc.Sprite).spriteFrame=null),Promise.resolve())},C.prototype.hideSkin=function(){cc.isValid(this.nodeFurniture)&&(this.nodeFurniture.opacity=0)},C.prototype.renderBoneUi=function(){var t=(a=this.data).res_bone_offset,e=a.res_bone_scale,n=a.res_bone,i=t[0],o=t[1],a=e[0];t=e[1],(e=this.dragonBone.node).active=!0,e.scaleX=a||1,e.scaleY=t||1,e.x=i||0,e.y=o||0,b.default.isH5&&(window["bone_"+n]=this.dragonBone)},C.prototype.playBone=function(t,e,n,i){var o=this,a=this.data,r=a.res_bone,s=a.skin_num;return r?new Promise(function(a){o.loadBone().then(function(){o.renderBoneUi(),0<=r.indexOf("floor")&&"floor-2"!==r||1===s?o.dragonBone.playAnimation("running",1):o.dragonBone.playAnimation("skin_"+t,1),n&&n.call(i||o),o.dragonBone.once(dragonBones.EventObject.COMPLETE,function(){e&&o.scheduleOnce(o.hideBone,2/60),a(null)},o)}).catch(function(){h.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u5bb6\u5c45\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\u3002\u9519\u8bef\u7801\uff1a-100",showCancel:!1,confirmText:"\u91cd\u8bd5",success:function(){o.playBone(t,e,n,i)}})})}):Promise.resolve()},C.prototype.hideBone=function(){this.dragonBone&&cc.isValid(this.dragonBone.node)&&(this.dragonBone.node.active=!1)},C.prototype.loadBone=function(){var t=this;return this.dragonBone.dragonAtlasAsset?Promise.resolve():new Promise(function(e){var n=t.data.res_bone;cc.loader.loadRes("texture/bones/"+n+"_ske",dragonBones.DragonBonesAsset,function(i,o){return i?t.loadBone():(t.dragonBone.dragonAsset=o,void cc.loader.loadRes("texture/bones/"+n+"_tex",dragonBones.DragonBonesAtlasAsset,t.onComplete.bind(t,e)))})})},C.prototype.onEndDown=function(){var t=this;this.partSmoke1.node.active=!0,this.partSmoke2.node.active=!0,this.partSmoke1.resetSystem(),this.partSmoke2.resetSystem(),this.node.getComponent(M.default).remove(M.AnimEventKey.NewDownSmoke,this.onEndDown,this),this.scheduleOnce(function(){cc.isValid(t.partSmoke1.node)&&(t.partSmoke1.node.active=!1),cc.isValid(t.partSmoke2.node)&&(t.partSmoke2.node.active=!1)},1.2)},C.prototype.onComplete=function(t,e,n){if(e)return this.loadBone();this.dragonBone.dragonAtlasAsset=n,this.dragonBone.armatureName="Armature",t()},C.prototype.onTouchEnd=function(){},s([o(cc.Node)],C.prototype,"nodeFurniture",void 0),s([o(cc.Sprite)],C.prototype,"spriteLight",void 0),s([o(cc.ParticleSystem)],C.prototype,"partSmoke1",void 0),s([o(cc.ParticleSystem)],C.prototype,"partSmoke2",void 0),s([o(dragonBones.ArmatureDisplay)],C.prototype,"dragonBone",void 0),i=s([i],C),a.default=i,cc._RF.pop()},{}],CCAudio:[function(t,e,n){"use strict";cc._RF.push(e,"eaea91vyedDmqv/MixXl6HV","CCAudio");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("BaseAudio"),c=i("LoaderMgr");function l(){var t=r.call(this)||this;return t._musicMuted=!1,t._soundMuted=!1,t.musicId=-1,t.soundIds=[],t}a(l,r=s.default),Object.defineProperty(l.prototype,"muted",{get:function(){return 0==cc.audioEngine.getVolume(1)},set:function(t){this.musicMuted=t,this.soundMuted=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"musicVolume",{get:function(){return cc.audioEngine.getMusicVolume()},set:function(t){cc.audioEngine.setMusicVolume(t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"musicMuted",{get:function(){return this._musicMuted},set:function(t){this._musicMuted=t,this.musicId<0||(t?cc.audioEngine.pause(this.musicId):cc.audioEngine.resume(this.musicId))},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"soundVolume",{get:function(){return cc.audioEngine.getEffectsVolume()},set:function(t){cc.audioEngine.setEffectsVolume(t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"soundMuted",{get:function(){return this._soundMuted},set:function(t){this._soundMuted=t,this.soundIds.forEach(function(e){return t?cc.audioEngine.pause(e):cc.audioEngine.resume(e)})},enumerable:!0,configurable:!0}),l.prototype.playMusic=function(t,e){var n=this;void 0===e&&(e=!0),this.musicName!=t&&(this.musicName&&cc.audioEngine.stopMusic(),this.musicName=t,this.createAudio(t).then(function(t){n.musicId=cc.audioEngine.playMusic(t,e)}))},l.prototype.pauseMusic=function(){this.musicId<0||cc.audioEngine.pause(this.musicId)},l.prototype.stopMusic=function(){this.musicId<0||(cc.audioEngine.stop(this.musicId),this.musicId=-1)},l.prototype.resumeMusic=function(){var t;0<=this.musicId&&(t=this.musicName,this.musicName=null,this.playMusic(t))},l.prototype.playSound=function(t,e){var n=this;void 0===e&&(e=!1),this.soundMuted||this.createAudio(t).then(function(i){var o=cc.audioEngine.playEffect(i,e);n.soundIds.push(o),e||cc.audioEngine.setFinishCallback(o,function(){return n.onEnded(t,o)})})},l.prototype.stopSound=function(){},l.prototype.stopSounds=function(){this.soundIds.forEach(function(t){return cc.audioEngine.stopEffect(t)}),this.soundIds=[]},l.prototype.pause=function(){this.preMuted=this.muted,this.muted=!0},l.prototype.resume=function(){this.muted=this.preMuted},l.prototype.createAudio=function(t){return c.LoaderMgr.loadAudioWithUrl(this.getPath(t))},l.prototype.onEnded=function(t,e){-1!==(e=this.soundIds.indexOf(e))&&this.soundIds.splice(e,1)},a=l,o.default=a,cc._RF.pop()},{}],CPSCouponItem:[function(t,e,n){"use strict";cc._RF.push(e,"0eb6cC6YQBGa62KrtsAaNWw","CPSCouponItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Action"),u=i("DataMgr"),d=i("DateUtils"),p=i("AudioMgr"),h=i("StringUtils");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.txtName=null,t.imgIcon=null,t.txtCouponType=null,t.txtCouponPrice=null,t.txtProductPrice=null,t.txtCounponEndTime=null,t.txtProductOriginalPrice=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(f,c=cc.Component),f.prototype.initWith=function(t){var e,n,i,o=this;(this.data=t)?(l.default.playAddAnim(this.node,"anim_item_have"),this.txtName.string=h.default.strCut(t.product_name,46),cc.isValid(this.imgIcon)&&(this.imgIcon.node.width=142,this.imgIcon.node.height=142,e=t.thumbnail_img_url||t.main_img,cc.loader.load({url:e,type:"png"},function(t,e){!t&&cc.isValid(o.imgIcon)&&(o.imgIcon.spriteFrame=new cc.SpriteFrame(e))})),t.product_price||t.product_original_price?(i=+t.product_original_price||0,n=+t.product_price||0,this.txtProductPrice.string=""+h.default.changeMoney(n),this.txtProductOriginalPrice.string="\u539f        \u4ef7\xa5  "+h.default.changeMoney(i),l.default.playAddAnim(this.node.children[1],"state_product_price")):l.default.playAddAnim(this.node.children[1],"state_product_random"),t.coupon_list&&t.coupon_list.length?(n=(e=t.coupon_list[0]).quota,i=e.discount,t=e.coupon_type,e=e.use_end_time,n=+n||0,i=+i||0,this.txtCouponType.string=1==+t?"\u6d88\u8d39\u9650\u989d:"+h.default.changeMoney(n)+"\u5143":"\u65e0\u95e8\u69db\u5238",this.txtCouponPrice.string=""+h.default.changeMoney(i),e?(e=d.default.getDateDiff(d.default.today,e.split(" ")[0]),this.txtCounponEndTime.string=0<=e?Math.max(e,1)+"\u5929\u540e\u8fc7\u671f":""):this.txtCounponEndTime.string="",l.default.playAddAnim(this.node.children[1],"state_quan_have")):l.default.playAddAnim(this.node.children[1],"state_quan_none")):l.default.playAddAnim(this.node,"anim_item_empty")},f.prototype.onTask=function(){var t,e,n;p.AudioMgr.button(),this.data&&(n=(e=this.data).wechat_app_info,t=e.click_url,e=n.app_path,n=n.app_id,u.DataMgr.CPS.sendEvent(t,""),PCSDK.wxApi.navigateToMiniProgram(n,e))},s([o(cc.Label)],f.prototype,"txtName",void 0),s([o(cc.Sprite)],f.prototype,"imgIcon",void 0),s([o(cc.Label)],f.prototype,"txtCouponType",void 0),s([o(cc.Label)],f.prototype,"txtCouponPrice",void 0),s([o(cc.Label)],f.prototype,"txtProductPrice",void 0),s([o(cc.Label)],f.prototype,"txtCounponEndTime",void 0),s([o(cc.Label)],f.prototype,"txtProductOriginalPrice",void 0),i=s([i],f),a.default=i,cc._RF.pop()},{}],CPSCouponListItem:[function(t,e,n){"use strict";cc._RF.push(e,"33738IsNNpFUpo5WtgLrfyd","CPSCouponListItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Action"),u=i("DataMgr"),d=i("DateUtils"),p=i("AudioMgr"),h=i("StringUtils"),f=i("ExtScrollView");function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.txtName=null,t.imgIcon=null,t.txtCouponType=null,t.txtCouponPrice=null,t.txtProductPrice=null,t.txtCounponEndTime=null,t.txtProductOriginalPrice=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(m,c=f.ExtScrollItem),m.prototype.updateCell=function(t){var e,n,i,o=this;this.data=t,this.txtName.string=h.default.strCut(t.product_name,46),cc.isValid(this.imgIcon)&&(this.imgIcon.node.width=142,this.imgIcon.node.height=142,e=t.thumbnail_img_url||t.main_img,cc.loader.load({url:e,type:"png"},function(t,e){!t&&cc.isValid(o.imgIcon)&&(o.imgIcon.spriteFrame=new cc.SpriteFrame(e))})),t.product_price||t.product_original_price?(i=+t.product_original_price||0,n=+t.product_price||0,this.txtProductPrice.string=""+h.default.changeMoney(n),this.txtProductOriginalPrice.string="\u539f        \u4ef7\xa5  "+h.default.changeMoney(i),l.default.playAddAnim(this.node.children[0],"state_product_price")):l.default.playAddAnim(this.node.children[0],"state_product_random"),t.coupon_list&&t.coupon_list.length?(n=(e=t.coupon_list[0]).quota,i=e.discount,t=e.coupon_type,e=e.use_end_time,n=+n||0,i=+i||0,this.txtCouponType.string=1==+t?"\u6d88\u8d39\u9650\u989d:"+h.default.changeMoney(n)+"\u5143":"\u65e0\u95e8\u69db\u5238",this.txtCouponPrice.string=""+h.default.changeMoney(i),e?(e=d.default.getDateDiff(d.default.today,e.split(" ")[0]),this.txtCounponEndTime.string=0<=e?Math.max(e,1)+"\u5929\u540e\u8fc7\u671f":""):this.txtCounponEndTime.string="",l.default.playAddAnim(this.node.children[0],"state_quan_have")):l.default.playAddAnim(this.node.children[0],"state_quan_none")},m.prototype.onTask=function(){var t,e,n;p.AudioMgr.button(),this.data&&(n=(e=this.data).wechat_app_info,t=e.click_url,e=n.app_path,n=n.app_id,u.DataMgr.CPS.sendEvent(t,""),PCSDK.wxApi.navigateToMiniProgram(n,e))},s([o(cc.Label)],m.prototype,"txtName",void 0),s([o(cc.Sprite)],m.prototype,"imgIcon",void 0),s([o(cc.Label)],m.prototype,"txtCouponType",void 0),s([o(cc.Label)],m.prototype,"txtCouponPrice",void 0),s([o(cc.Label)],m.prototype,"txtProductPrice",void 0),s([o(cc.Label)],m.prototype,"txtCounponEndTime",void 0),s([o(cc.Label)],m.prototype,"txtProductOriginalPrice",void 0),i=s([i],m),a.default=i,cc._RF.pop()},{}],CPSCouponListPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"c6554fjLxBLK60g4sjX0Mfg","CPSCouponListPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("ViewMgr"),h=i("Action"),f=i("BasePopwin"),m=i("DataMgr"),g=i("BattleMgr"),_=i("AudioMgr"),y=i("OnlineMgr"),v=i("ExtScrollView");function b(){var t=null!==u&&u.apply(this,arguments)||this;return t.nodeTips=null,t.listWrap=null,t.prefabCps=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(b,u=f.default),(d=b).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.initUI()},b.prototype.onClose=function(){u.prototype.onClose.call(this),this.removeChilds()},b.prototype.openAnim=function(){return h.default.playAnim(this.node,"anim_popup_in")},Object.defineProperty(b.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),b.prototype.initUI=function(){var t,e=m.DataMgr.Local.getCpsQuanDatas();e.length?(this.nodeTips.active=!1,(t=cc.instantiate(this.prefabCps)).parent=this.listWrap,t.getComponent(v.default).loadData(e.slice(),0),this.nodeCps=t):this.nodeTips.active=!0},b.prototype.removeChilds=function(){cc.isValid(this.nodeCps)&&(this.nodeCps.destroy(),this.nodeCps=null)},b.prototype.onBack=function(){_.AudioMgr.button(),this.handleClose(!0)},b.prototype.handleClose=function(t){return void 0===t&&(t=!0),c(this,void 0,void 0,function(){var e=this;return l(this,function(){return p.ViewMgr.closePopwin(d,{anim:t}).then(function(){return c(e,void 0,void 0,function(){return l(this,function(){return g.default.I.removePopwinList(),[2]})})}).catch(function(){return c(e,void 0,void 0,function(){return l(this,function(){return g.default.I.removePopwinList(),[2]})})}),[2]})})},b.PREFAB_PATH="prefab/popwin/popwin_coupon_list",s([o(cc.Node)],b.prototype,"nodeTips",void 0),s([o(cc.Node)],b.prototype,"listWrap",void 0),s([o(cc.Prefab)],b.prototype,"prefabCps",void 0),i=d=s([i],b),a.default=i,cc._RF.pop()},{}],CPSCouponPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"156477N7xFM3bnPIrBrulLi","CPSCouponPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("ViewMgr"),h=i("CPSCouponItem"),f=i("Action"),m=i("BasePopwin"),g=i("OpenContext"),_=i("Enum"),y=i("BattleMgr"),v=i("AudioMgr"),b=i("OnlineMgr"),w=i("AppDataMgr"),S=i("RankEnum"),M=i("EventMgr"),C=i("EventEnum");function P(){var t=null!==u&&u.apply(this,arguments)||this;return t.nodeRank=null,t.nodeItems=[],t.prefabRank=null,t.txtJoin=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(P,u=m.default),(d=P).prototype.onOpen=function(t){var e=this;u.prototype.onOpen.call(this,t),this.isAuto=t.data.isAuto||!1,this.datas=t.data.product_list||[],this.nodeItems.forEach(function(t,n){n=e.datas[n],t.getComponent(h.default).initWith(n)})},P.prototype.onOpend=function(t){u.prototype.onOpend.call(this,t),this.actionShowRank()},P.prototype.onClose=function(){u.prototype.onClose.call(this),this.removeChilds()},P.prototype.addEvent=function(){u.prototype.addEvent.call(this),M.EventMgr.on(C.EventEnum.ActionCpsClose,this.handleCpsClose,this)},P.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),M.EventMgr.off(C.EventEnum.ActionCpsClose,this.handleCpsClose,this)},P.prototype.openAnim=function(){return f.default.playAnim(this.node,"anim_popup_CPS_in")},P.prototype.closeAnim=function(){return f.default.playAnim(this.node,"anim_popup_CPS_out")},Object.defineProperty(P.prototype,"BannerOpen",{get:function(){return b.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),P.prototype.removeChilds=function(){},P.prototype.actionHideRank=function(){g.default.I.post(S.RankEvent.Clear)},P.prototype.actionShowRank=function(){var t=new Date,e=.1*(t.getMinutes()+60*t.getHours());3===(e=((t=0===e?1.2:e.toFixed(1))+"").length)?this.txtJoin.fontSize=32:4===e?this.txtJoin.fontSize=30:5===e&&(this.txtJoin.fontSize=28),this.txtJoin.string="\u7b49"+t+"\u4e07\u4eba\u4eca\u65e5\u5df2\u53c2\u52a0",cc.isValid(this.wxrank)&&this.wxrank.destroy(),t=cc.instantiate(this.prefabRank),this.wxrank=t,this.nodeRank.addChild(t),t.y=0,g.default.I.post(S.RankEvent.Show,{box:t.getBoundingBoxToWorld(),winSize:cc.winSize},S.RankType.Coupon)},P.prototype.handleCpsClose=function(){w.AppDataMgr.set(_.AppDataKey.CpsClickClose,1),this.handleClose(!1)},P.prototype.onBack=function(){v.AudioMgr.button(),w.AppDataMgr.set(_.AppDataKey.CpsClickClose,1),this.handleClose(!0)},P.prototype.handleClose=function(t){return void 0===t&&(t=!0),c(this,void 0,void 0,function(){var e,n=this;return l(this,function(i){switch(i.label){case 0:return e=this.isAuto,this.actionHideRank(),[4,this.closeAnim()];case 1:return i.sent(),p.ViewMgr.closePopwin(d,{anim:t}).then(function(){return c(n,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return e?[4,y.default.I.comTopWrap.actionOpenCps()]:[3,2];case 1:t.sent(),t.label=2;case 2:return y.default.I.removePopwinList(),[2]}})})}).catch(function(){return c(n,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return e?[4,y.default.I.comTopWrap.actionOpenCps()]:[3,2];case 1:t.sent(),t.label=2;case 2:return y.default.I.removePopwinList(),[2]}})})}),[2]}})})},P.PREFAB_PATH="prefab/popwin/popwin_coupon",s([o(cc.Node)],P.prototype,"nodeRank",void 0),s([o(cc.Node)],P.prototype,"nodeItems",void 0),s([o(cc.Prefab)],P.prototype,"prefabRank",void 0),s([o(cc.Label)],P.prototype,"txtJoin",void 0),i=d=s([i],P),a.default=i,cc._RF.pop()},{}],CPSModel:[function(t,e,n){"use strict";cc._RF.push(e,"1960bvMihdDL6oooQ+Ociap","CPSModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("Api"),c=i("BaseModel"),l=i("DataMgr"),u=i("Const"),d=i("DateUtils"),p=i("SDKEnums"),h=i("StringUtils"),f=i("OnlineMgr");function m(){var t=null!==r&&r.apply(this,arguments)||this;return t.ApiPrefix="https://daihuo.qq.com",t.loadNum=0,t}a(m,r=c.default),m.prototype.init=function(){var t;this.isGroupA=l.DataMgr.UserBase.ID%2==1,this.isSupported=this.isSupportAB(),this.isSupported?(t=wx.getExptInfoSync(),this.abData=t||{}):this.abData={}},m.prototype.isSupportAB=function(){return"object"==typeof wx&&PCSDK.wxApi.canIUse("2.14.4")},m.prototype.isOpen=function(){if(!this.isSupported)return this.abOpen();var t=this.abData.cps_open_abtest_3;return void 0===t?this.abOpen():"0"!=t&&("2"==t||this.abOpen())},m.prototype.abOpen=function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.cps_open_abtest,0);return!(0==t||1==t&&this.isGroupA)},m.prototype.isProtect=function(){return this.abProtect()},m.prototype.abProtect=function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.cps_show_distrub_protect_abtest,2);return!(0==t||1==t&&this.isGroupA)},m.prototype.getNeedLv=function(){if(!this.isSupported)return this.abNeedLv();var t=this.abData.cps_unlock_lv_3,e=(t||"").split("_");return void 0===t||"0"!=e[0]&&"2"!=e[0]?this.abNeedLv():+e[1]},m.prototype.abNeedLv=function(){var t=(n=f.OnlineMgr.getObject(p.OnlineKeys.cps_unlock_lv,[0,10,30]))[0],e=n[1],n=n[2];return 0==t||1==t&&this.isGroupA?e:n},m.prototype.getNeedLvup=function(){return this.abNeedLvup()},m.prototype.abNeedLvup=function(){var t=(n=f.OnlineMgr.getObject(p.OnlineKeys.cps_show_lvs_require,[0,3,5]))[0],e=n[1],n=n[2];return 0==t||1==t&&this.isGroupA?e:n},m.prototype.sendEvent=function(t,e){var n=this;if(t)return e?this.reqEvent(t,e):void this.getHasMacStr().then(function(e){return n.reqEvent(t,e)})},m.prototype.reqEvent=function(t,e){t&&e&&PCSDK.http.get(t,{},{isCustom:!0,postJson:!0,headers:{"X-SR-Authorization":e}})},m.prototype.loadRecommends=function(t){var e=this;return void 0===t&&(t=3),new Promise(function(n,i){e.getHasMacStr().then(function(o){PCSDK.http.post(e.ApiPrefix+"/recommend/product/list",{open_id:l.DataMgr.UserBase.UserOpenId,mp_appid:u.default.AppId,size:t},{isCustom:!0,postJson:!0,headers:{"X-SR-Authorization":o}}).then(function(t){n(t),(t.product_list||[]).forEach(function(t){return t&&l.DataMgr.CPS.sendEvent(t.exp_url,o)})}).catch(function(t){return i(t)})}).catch(function(t){return i(t)})})},m.prototype.getHasMacStr=function(){var t=this,e=h.default.buildRandomCode(10,!1),n="appid="+u.default.AppId+"&nonce_str="+e+"&time_stamp="+d.default.now;return new Promise(function(e,i){t.loadNum=0,t.loadHasMac(n).then(function(t){e(n+"&sign="+t)}).catch(function(t){i(t)})})},m.prototype.loadHasMac=function(t){var e=this;return new Promise(function(n,i){s.default.getCPSHashHmac({str_sign:t}).then(function(o){o&&o.cps_data&&o.cps_data.sign?n(o.cps_data.sign):e.handleError(t,i)}).catch(function(){e.handleError(t,i)})})},m.prototype.handleError=function(t,e){this.loadNum<5?(this.loadNum++,this.loadHasMac(t)):e(null)},Object.defineProperty(m,"I",{get:function(){return this._instance||(this._instance=new m)},enumerable:!0,configurable:!0}),m._instance=null,a=m,o.default=a,cc._RF.pop()},{}],CashPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"d3687w8GYZIQpgh+D49xnD5","CashPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("Display"),d=i("BasePopwin"),p=i("AudioMgr"),h=i("OnlineMgr"),f=i("SDKEnums"),m=i("SDKAnalytics"),g=i("UserModel");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.moneytxt=null,t.cashtxt=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(_,c=d.default),(l=_).prototype.onLoad=function(){},_.prototype.addEvent=function(){c.prototype.addEvent.call(this)},_.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},Object.defineProperty(_.prototype,"BannerOpen",{get:function(){return h.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),_.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),m.default.event(f.EventKeys.red_packet_cash_panel_show,""),this.cashtxt.string="0.0",this.moneytxt.string=g.default.I.RedPocketData.integral.toString()},_.prototype.ongetcash=function(){p.AudioMgr.button(),u.default.showTip("\u4f59\u989d\u4e0d\u8db3\u65e0\u6cd5\u63d0\u73b0~")},_.prototype.onExchange=function(){p.AudioMgr.button(),u.default.showTip("\u5143\u5b9d\u4e0d\u8db3~")},_.prototype.onBack=function(){p.AudioMgr.button(),this.doClose(l,!1).then(function(){})},_.PREFAB_PATH="prefab/popwin/popwin_cashout01",s([o(cc.Label)],_.prototype,"moneytxt",void 0),s([o(cc.Label)],_.prototype,"cashtxt",void 0),i=l=s([i],_),a.default=i,cc._RF.pop()},{}],ChapterCfg:[function(t,e,n){"use strict";cc._RF.push(e,"e3239pJOatEQ7bG5HckIeZ1","ChapterCfg");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){},cc._RF.pop()},{}],CheckTools:[function(t,e,n){"use strict";cc._RF.push(e,"2c0bcOU7iVPy5S7c8YwCZob","CheckTools");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("SDKTools"),r=i("Const"),s=i("Enum"),c=i("DataMgr"),l=i("ViewMgr"),u=i("GameNoStar"),d=i("MissionModel"),p=i("SDKEnums"),h=i("UserBaseModel"),f=i("OnlineMgr"),m=i("UserModel");function g(){}g.checkStar=function(t,e){return!(t>((e=(void 0===e?{}:e)||{}).max||c.DataMgr.User.Star)&&(l.ViewMgr.openPopwin(u.default,{data:e}),1))},g.checkService=function(){return c.DataMgr.User.getDayDataWithKey(s.DayKeys.ServiceState,s.RewardState.Not)},g.checkCollect=function(t){return this._checkDayState(t,[r.default.Scene.WX_LASTEST])},g.checkFloating=function(){return this._checkDayState(s.DayKeys.FloatingState,[r.default.Scene.WX_FLOATING])},g._checkDayState=function(t,e){var n=c.DataMgr.User.getDayDataWithKey(t,s.RewardState.Not);if(n===s.RewardState.Received)return n;for(var i=!1,o=a.default.Scene,l=0;l<e.length;l++)if(o+""==e[l]+""){i=!0;break}return t!=s.DayKeys.CollectState&&i?(e[0]===r.default.Scene.WX_FLOATING&&c.DataMgr.Missions.addMissionProgress(d.MissionCheckType.Float,1),s.RewardState.Receive):s.RewardState.Not},g.isShareOpen=function(t){var e=null;switch(t){case"prefab/panel/panel_random":e=p.OnlineKeys.lucky_gift_share_abtest;break;case"prefab/popwin/popwin_gift":e=p.OnlineKeys.help_gift_share_abtest;break;case"prefab/popwin/popwin_lvup":e=p.OnlineKeys.double_star_share_abtest;break;case"prefab/popwin/popwin_onlinegift":e=p.OnlineKeys.online_gift_share_abtest;break;case"prefab/panel/panel_revive":e=p.OnlineKeys.revive_share_abtest}return null!=e&&0!=(t=a.default.getParamsInt(e,0))&&(1!=t||h.default.I.ID%2!=1)},Object.defineProperty(g,"IsRedPacketOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.red_packet_abtest,2);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsNewUI",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.UI_style_abtest,2);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsTaskAutoOpen",{get:function(){var t=f.OnlineMgr.getObject(p.OnlineKeys.task_popup_min_lv_abtest,[2,5,20]);return 0===t[0]||2!==t[0]&&c.DataMgr.UserBase.ID%2?m.default.I.CurLevel>=t[1]:m.default.I.CurLevel>=t[2]},enumerable:!0,configurable:!0}),Object.defineProperty(g,"isCanTaskAutoShow",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.task_panel_show_times_abtest,0);return 0===t||2!==t&&c.DataMgr.UserBase.ID%2?0==m.default.I.getDayDataWithKey(s.DayKeys.MissionOpen,0):!m.default.I.IsMissionShowed},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsNewRedPacketUIOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.red_packet_welcome_abtest,0);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsOpenRule",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.tutorial_panel_abtest,0);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsNewGameScene",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.UI_style_abtest,2);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsSignLoginShow",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.sign_pop_timing_abtest,0);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsFadeOutSkillOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.skill_fadeout_abtest,0);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsWrongClickProtectOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.click_wrong_protect_1_abtest,0);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsWrongClick2ProtectOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.click_wrong_protect_2_abtest,0);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsSkillItemOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.skill_ball_abtest,0);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsRefreshOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.refresh_abtest,2);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsSkillBallOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.skill_ball_abtest,2);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IswatermelonOpen",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.gameplay_melon_abtest,0);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsShopWmTip",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.gameplay_melon_post_abtest,2);return 0!==t&&(2===t||!(c.DataMgr.UserBase.ID%2))&&this.IswatermelonOpen},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsShopWmIcon",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.gameplay_melon_icon_abtest,2);return 0!==t&&(2===t||!(c.DataMgr.UserBase.ID%2))&&this.IswatermelonOpen},enumerable:!0,configurable:!0}),Object.defineProperty(g,"IsShopWmTipEveryDay",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.gameplay_melon_post_time,2);return!(0===t||2!==t&&c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),Object.defineProperty(g,"ShowInterstialCustomAd",{get:function(){var t=f.OnlineMgr.getInt(p.OnlineKeys.matrix_inter_abtest,2);return 0===t||2!==t&&!!(c.DataMgr.UserBase.ID%2)},enumerable:!0,configurable:!0}),g.s_showedshareNames=[],g.s_sharefailforcetimes=0,i=g,o.default=i,cc._RF.pop()},{}],ChestPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"c5b91/QsitHhLyHgz+kBH71","ChestPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("ViewMgr"),h=i("Action"),f=i("BasePopwin"),m=i("DataMgr"),g=i("AudioMgr"),_=i("OnlineMgr"),y=i("BattleMgr");function v(){var t=null!==u&&u.apply(this,arguments)||this;return t.animChest=null,t.iconProp=null,t.iconSpriteFrames=[],t.txtDiamond=null,t.txtProps=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(v,u=f.default),(d=v).prototype.openAni=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return h.default.playAnim(this.animChest,"anim_chest_out").then(function(){h.default.playAnim(t.animChest,"anim_chest_open")}),[2]})})},v.prototype.onOpen=function(t){this.m_db=m.DataMgr.Missions.getMissionActDBById(t.data.id),u.prototype.onOpen.call(this,t),this.initUI(),this.openAni(),this.txtProps.string="x"+this.m_db.props_reward[1],this.txtDiamond.string="x"+this.m_db.coins_reward,this.iconProp.spriteFrame=this.iconSpriteFrames[this.m_db.props_reward[0]]},Object.defineProperty(v.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),v.prototype.addEvent=function(){u.prototype.addEvent.call(this)},v.prototype.removeEvent=function(){u.prototype.removeEvent.call(this)},v.prototype.initUI=function(){return c(this,void 0,void 0,function(){return l(this,function(){return[2]})})},v.prototype.onGetReward=function(){m.DataMgr.User.reqProps(this.m_db.props_reward[0],this.m_db.props_reward[1]),y.default.I.doItemAnim(this.m_db.props_reward[0],this.iconProp.node,this.m_db.props_reward[1],!0),m.DataMgr.User.reqDiamond(this.m_db.coins_reward),this.handleClose()},v.prototype.handleClose=function(t){return void 0===t&&(t=!1),c(this,void 0,Promise,function(){return l(this,function(){return[2,p.ViewMgr.closePopwin(d,{anim:t})]})})},v.prototype.onClose=function(){u.prototype.onClose.call(this)},v.prototype.onBack=function(){g.AudioMgr.button(),this.handleClose(!1)},v.PREFAB_PATH="prefab/popwin/popwin_taskchest",s([o(cc.Node)],v.prototype,"animChest",void 0),s([o(cc.Sprite)],v.prototype,"iconProp",void 0),s([o(cc.SpriteFrame)],v.prototype,"iconSpriteFrames",void 0),s([o(cc.Label)],v.prototype,"txtDiamond",void 0),s([o(cc.Label)],v.prototype,"txtProps",void 0),i=d=s([i],v),a.default=i,cc._RF.pop()},{}],CoinFlyOver:[function(t,e,n){"use strict";cc._RF.push(e,"0bcb4MRf+lCGZlHl65iQqoa","CoinFlyOver");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=o("Action"),u=o("Display");function d(){return null!==c&&c.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(d,c=cc.Component),d.prototype.start=function(){this.startPos=this.node.children[0].position},d.prototype.fly=function(t,e){var n=this;return void 0===e&&(e={}),new Promise(function(i){n.state=0,n.params=e,n.resolve=i,(i=u.default.getTargetPos(t,n.node)).y=i.y,n.endPos=i,l.default.playAddAnim(n.node.children[0],"anim_coin_round"),l.default.playAddAnim(n.node).then(function(){n.state+=1,n.checkEnd()}),n.actionCoinFly()})},d.prototype.checkEnd=function(){var t=this;2===this.state&&(this.resolve&&this.resolve(),this.node.children.forEach(function(e){e.x=t.startPos.x,e.y=t.startPos.y}),this.params.end&&this.params.end.call(this.params.context))},d.prototype.actionCoinFly=function(){var t=this,e=this.node.children[0],n=cc.v2(e.position.x,e.position.y),i=cc.v2(this.endPos.x,this.endPos.y),o=u.default.getEndPointByTrigonometric(125-10*this.params.cube.c,n,i);l.default.bezier(e,1,n,o,i,1.5).then(function(){t.state+=1,t.checkEnd()},cc.easeSineIn())},o=s([o],d),a.default=o,cc._RF.pop()},{}],CoinFly:[function(t,e,n){"use strict";cc._RF.push(e,"8fd1fCkYrVE3ohKB42sUTP1","CoinFly");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=o("Action"),u=o("Display");function d(){return null!==c&&c.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(d,c=cc.Component),d.prototype.start=function(){this.startPos=this.node.children[0].position},d.prototype.fly=function(t,e){var n=this;return void 0===e&&(e={}),new Promise(function(i){n.state=0,n.params=e,n.resolve=i,n.flyNum=n.node.children.length-1;var o=n.node.children[5];(i=u.default.getTargetPos(t,n.node)).y=i.y-(e.offset?96:0),o.x=i.x,o.y=i.y,n.endPos=i,l.default.playAddAnim(n.node).then(function(){n.state+=1,n.checkEnd()})})},d.prototype.checkEnd=function(){var t=this;2===this.state&&(this.resolve&&this.resolve(),this.node.children.forEach(function(e){e.x=t.startPos.x,e.y=t.startPos.y}),this.params.end&&this.params.end.call(this.params.context))},d.prototype.CoinStartFly=function(t){var e=this,n=+t,i=this.node.children[n-1],o=cc.v2(i.position.x,i.position.y),a=cc.v2(this.endPos.x,this.endPos.y);t=u.default.getEndPointByTrigonometric(125,o,a),l.default.bezier(i,1,o,t,a,70/60).then(function(){e.params.iteator&&e.params.iteator.call(e.params.context,n),e.flyNum===n&&(e.state+=1,e.checkEnd())})},o=s([o],d),a.default=o,cc._RF.pop()},{}],CoinGiftPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"f7b92P+xXNJNomvDj9Q4Xm/","CoinGiftPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("BasePopwin"),d=i("ViewMgr"),p=i("ShareVideo"),h=i("SDKEnums"),f=i("SDKTools"),m=i("EventEnum"),g=i("BattleMgr"),_=i("OnlineMgr"),y=i("RandomUtils"),v=i("Display"),b=i("AudioMgr"),w=i("AudioEnum"),S=i("DataMgr"),M=i("WXApi"),C=i("UserBaseModel"),P=i("ImageLabelNew");function A(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_sharebtn=null,t.m_labtimes1=null,t.m_labtimes2=null,t.m_labcoins=null,t.m_coinnum=0,t.m_times=0,t}i=(o=cc._decorator).ccclass,o=o.property,r(A,c=u.default),l=A,Object.defineProperty(A.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),A.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),b.AudioMgr.playSound(w.AudioEnum.gift_notice);var e=t.data.isforce;this.callback=t.data.callback,6==v.default.s_CoinGiftFlagtimes?(this.m_times=100,v.default.s_CoinGiftFlagtimes=-1):this.m_times=e?50:10*y.default.random(3,6),this.m_coinnum=5*this.m_times,this.m_labtimes1.setValue(this.m_times),this.m_labtimes2.string=this.m_times.toString(),this.m_labcoins.setText("+"+this.m_coinnum),M.default.I.showsideAD()},A.prototype.addEvent=function(){f.default.bindEvent(m.EventEnum.TacticUpdate.toString(),this.initReward,this)},A.prototype.removeEvent=function(){f.default.removeEvent(m.EventEnum.TacticUpdate.toString(),this.initReward,this)},A.prototype.initReward=function(){},A.prototype.onget=function(){f.default.dispatch(h.ShareKeys.block_gold,{success:this.onSuccess,context:this})},A.prototype.onSuccess=function(){0<=v.default.s_CoinGiftFlagtimes&&(v.default.s_CoinGiftFlagtimes=0),S.DataMgr.User.reqDiamond(this.m_coinnum),d.ViewMgr.closePopwin(l,{anim:!1})},A.prototype.onBack=function(){b.AudioMgr.button(),d.ViewMgr.closePopwin(l,{anim:!1}),this.callback&&this.callback.call(this),0<=v.default.s_CoinGiftFlagtimes&&v.default.s_CoinGiftFlagtimes++;var t=f.default.getParamsInt(h.OnlineKeys.lucky_coins_abtest,0);(0==t||1==t&&C.default.I.ID%2==1)&&(v.default.s_iscloseCoingift=!0)},A.prototype.ongetsmall=function(){b.AudioMgr.button(),S.DataMgr.User.reqDiamond(5),d.ViewMgr.closePopwin(l,{anim:!1}),0<=v.default.s_CoinGiftFlagtimes&&v.default.s_CoinGiftFlagtimes++;var t=f.default.getParamsInt(h.OnlineKeys.lucky_coins_abtest,0);(0==t||1==t&&C.default.I.ID%2==1)&&(v.default.s_iscloseCoingift=!0)},A.prototype.onClose=function(){c.prototype.onClose.call(this),M.default.I.hidesideAD(),g.default.I.removePopwinList()},A.prototype.update=function(){},A.PREFAB_PATH="prefab/popwin/popwin_coingift",s([o(p.default)],A.prototype,"m_sharebtn",void 0),s([o(P.default)],A.prototype,"m_labtimes1",void 0),s([o(cc.Label)],A.prototype,"m_labtimes2",void 0),s([o(P.default)],A.prototype,"m_labcoins",void 0),i=l=s([i],A),a.default=i,cc._RF.pop()},{}],CollectPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"9c5a6GCcstMe5kRqWIFlxkg","CollectPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("AudioMgr"),p=i("OnlineMgr"),h=i("BaseAnimPopwin"),f=i("BattleMgr"),m=i("UserModel");function g(){var t=null!==c&&c.apply(this,arguments)||this;return t.time=8,t.state=0,t.m_btn=null,t.m_LabTime=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(g,c=h.default),(l=g).prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.time=8,this.state=0},g.prototype.onOpend=function(){c.prototype.onOpend.call(this),this.time=8,this.state=0},Object.defineProperty(g.prototype,"BannerOpen",{get:function(){return p.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),g.prototype.ongetreward=function(){d.AudioMgr.button(),m.default.I.reqDiamond(100),f.default.I.doAddOneItem([2,1]),m.default.I.reqShowCollect(),u.ViewMgr.closePopwin(l).then(function(){f.default.I.removePopwinList()})},g.prototype.update=function(t){this.time-=t,5<this.time&&0==this.state?(this.m_btn.getComponent(cc.Animation).play("anim_collect_none"),this.m_btn.getComponent(cc.Button).interactable=!1,this.state=1):this.time<=5&&0<this.time&&1==this.state?(this.m_btn.getComponent(cc.Animation).play("anim_collect_time"),this.m_btn.getComponent(cc.Button).interactable=!1,this.state=2):this.time<0&&2==this.state&&(this.m_btn.getComponent(cc.Animation).play("anim_collect_claim"),this.m_btn.getComponent(cc.Button).interactable=!0,this.state=3),this.m_LabTime.string=Math.floor(this.time).toString()},g.prototype.onBack=function(){d.AudioMgr.button(),u.ViewMgr.closePopwin(l).then(function(){f.default.I.removePopwinList()})},g.PREFAB_PATH="prefab/popwin/popwin_collect",s([o(cc.Node)],g.prototype,"m_btn",void 0),s([o(cc.Label)],g.prototype,"m_LabTime",void 0),i=l=s([i],g),a.default=i,cc._RF.pop()},{}],ColorListener:[function(t,e,n){"use strict";cc._RF.push(e,"78eebPQFoVPaqpvD566DvG1","ColorListener");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Debug");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.circleNode=null,t.events={},t}i=(o=cc._decorator).ccclass,o=o.property,r(u,c=cc.Component),u.prototype.add=function(t,e,n,i){this.events[t]={callback:e,context:n,params:i}},u.prototype.remove=function(t,e,n){var i=this.events[t];i&&i.callback===e&&i.context===n&&(delete this.events[t],this.events[t]=null)},u.prototype.runEvent=function(t){l.default.error("runEvent",t);var e=this.events[t];e&&e.callback&&(t=e.callback).call.apply(t,[e.context||this].concat(e.params||[]))},s([o(cc.Node)],u.prototype,"circleNode",void 0),i=s([i],u),a.default=i,(a=a.AnimEventKey||(a.AnimEventKey={})).RocketBoomSeparate="RocketBoomSeparate",a.RocketBoomMove="RocketBoomMove",a.RocketBoomFire="RocketBoomFire",a.BtnStarMove1="BtnStarMove1",a.BtnStarMove2="BtnStarMove2",a.BtnStarMove3="BtnStarMove3",a.BtnStarParticle1="BtnStarParticle1",a.BtnStarParticle2="BtnStarParticle2",a.BtnStarParticle3="BtnStarParticle3",a.ObstacleBasketDrop="ObstacleBasketDrop",a.ChestStartShow="ChestStartShow",a.ChestOpenBoom="chest_chestboom",a.OverTargetSkipShow="OverTargetSkipShow",a.TaskStarFly="TaskStarFly",a.NewDownSmoke="NewDownSmoke",a.WinFlyCoinEnd="WinFlyCoinEnd",a.GuideTextShow="GuideTextShow",a.GiftCoinAddVal="GiftCoinAddVal",a.RewardLight="RewardLight",cc._RF.pop()},{}],ComPointTip:[function(t,e,n){"use strict";cc._RF.push(e,"ed0b2pa0DxLpL0xazLX/bcy","ComPointTip");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Action"),u=i("ImageLabelNew");function d(){var t=null!==c&&c.apply(this,arguments)||this;return t.style=1,t.redDot=null,t.txtNum=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(d,c=cc.Component),d.prototype.refresh=function(t){this.init(t)},d.prototype.init=function(t){var e,n=0<t;cc.isValid(this.redDot)&&(e=this.redDot.node,n?l.default.playAddAnim(e):l.default.stopAnim(e),2===this.style?this.node.active=n:e.active=n),2===this.style&&cc.isValid(this.txtNum)&&this.txtNum.setValue(t)},s([o({displayName:"\u5c0f\u7ea2\u70b9\u7c7b\u578b",tooltip:"\u5c0f\u7ea2\u70b9\u7c7b\u578b\uff0c1\uff1a\u9ed8\u8ba4\u5c0f\u7ea2\u70b9 2\uff1a\u5927\u578b\u5c0f\u7ea2\u70b9\uff0c\u53ef\u663e\u793a\u6570\u5b57"})],d.prototype,"style",void 0),s([o(cc.Sprite)],d.prototype,"redDot",void 0),s([o(u.default)],d.prototype,"txtNum",void 0),i=s([i],d),a.default=i,cc._RF.pop()},{}],CommonMgr:[function(t,e,n){"use strict";cc._RF.push(e,"4fb2azOj0dKKahrECNVheaH","CommonMgr");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("SDKAnalytics"),r=i("SDKEnums");function s(){this.livingCache={},this.livingCache={},this.levelSelectObjs={}}s.prototype.getLevelSelect=function(t){return!!this.levelSelectObjs[t]},s.prototype.addLevelSelect=function(t,e){this.levelSelectObjs[t]=e},s.prototype.clearLevelSelect=function(){this.levelSelectObjs={}},s.prototype.addLivingCache=function(t,e){this.livingCache[t]=e},s.prototype.getLivingCache=function(t){return this.livingCache[t]},s.prototype.sdkEventWithStr=function(t){(t=r.EventKeys[t])&&a.default.event(t,r.EventFrom.game)},s.prototype.sdkEventWithKey=function(t){t&&a.default.event(t,r.EventFrom.game)},Object.defineProperty(s,"I",{get:function(){return this._instance||(this._instance=new s)},enumerable:!0,configurable:!0}),i=s,o.default=i,cc._RF.pop()},{}],ConfigModel:[function(t,e,n){"use strict";cc._RF.push(e,"70ef3ktOSZOcq3tAT6pie8G","ConfigModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("BaseModel"),c=i("DataMgr"),l=i("RandomUtils"),u=i("UserModel");function d(){return null!==r&&r.apply(this,arguments)||this}a(d,r=s.default),d.prototype.initSignDB=function(t){this._signcfgData=t},d.prototype.initLotteryDB=function(t){this._lotterycfg=t},d.prototype.initLotteryPackDB=function(t){this._lotterypackcfg=t},d.prototype.getLotterys=function(){return this._lotterycfg},d.prototype.getLotteryDB=function(t){for(var e=0;e<this._lotterycfg.length;e++){var n=this._lotterycfg[e];if(n.id==t)return n}},d.prototype.initRedPacketDB=function(t){this._redpacketcfgData=t},d.prototype.getRandomLotteryPack=function(){var t=[];return this.getLotterys().forEach(function(e){4==e.reward_type&&t.push(e)}),t[l.default.random(0,t.length)]},d.prototype.getRandomLottery=function(){var t=this.getRandomlotteryID();return this.getLotteryDB(t)},d.prototype.getRandomlotteryID=function(){var t=[];this.getLotterys().forEach(function(e){for(var n=0;n<e.reward_weight;n++)t.push(e.id)});var e=l.default.random(0,t.length);return t[e]},d.prototype.getRandomPackReward=function(){var t=[],e=[],n=this._lotterypackcfg;n[0].goods_type.forEach(function(e,i){for(var o=n[0].pack_weight[i],a=0;a<o;a++)t.push(e)}),n[1].goods_num.forEach(function(t,i){for(var o=n[1].pack_weight[i],a=0;a<o;a++)e.push(t)});var i=l.default.random(0,t.length);return[i=t[i],n[0].goods_num[i],e[l.default.random(0,e.length)]]},d.prototype.init=function(){},d.prototype.getSignDBById=function(t){for(var e=0;e<this._signcfgData.length;e++){var n=this._signcfgData[e];if(n.id==t)return n}return null},d.prototype.getShareRuleType=function(t){var e=c.DataMgr.User.Data.dayShareRuleIndex;return e[t]>=d.shareRuleMap[t].length&&(e[t]=0),d.shareRuleMap[t][e[t]]},d.prototype.getRedPacketRandomintegral=function(t){var e=u.default.I.RedPocketData.integral+(t=void 0===t?0:t);if(e>this._redpacketcfgData[this._redpacketcfgData.length-1].cost_star[1])return-1;for(var n=0;n<this._redpacketcfgData.length;n++){var i=this._redpacketcfgData[n];if(e>=i.cost_star[0]&&e<=i.cost_star[1])return l.default.random(i.scene_id[0],i.scene_id[1]+1)}return-1},d.prototype.clearData=function(){this.init()},d.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(d,"I",{get:function(){return this.instance||(this.instance=new d)},enumerable:!0,configurable:!0}),d.shareRuleMap={maxRecord:[0,1],propBrick:[2,1,0],relive:[1,1,0],freeStar:[1,1,0],wipeReward:[2,1,1,0],share:[3,4,4,3,4,4,4]},d.instance=null,a=d,o.default=a,cc._RF.pop()},{}],Const:[function(t,e,n){"use strict";cc._RF.push(e,"0d2aat3mRFLrK0nQ56WHpuF","Const");var i=t,o=e,a=n;Object.defineProperty(a,"__esModule",{value:!0}),o=i("Enum");var r=i("SDKTools"),s=i("SDKEnums"),c=i("UserBaseModel");function l(){}Object.defineProperty(l,"MinTarBallLv",{get:function(){var t=r.default.getParamsInt(s.OnlineKeys.first_ball_lv_abtest,0);return 0==t||1==t&&c.default.I.ID%2==1?r.default.getParamsInt(s.OnlineKeys.MinTarBallLv,8):r.default.getParamsInt(s.OnlineKeys.min_tarball_b,6)},enumerable:!0,configurable:!0}),l.Version="9.6",l.DataVersion=1,l.Debug=!1,l.GameEnName="2048balls",l.GameName="\u7403\u7403\u78b0\u78b0\u78b0",l.BaseData="base_data",l.AppId="wx75a2b7814c7a8ce6",l.IsExtLoader=!1,l.MaxHp=5,l.MaxTicket=5,l.baseMinInviteLv=8,l.baseMinLotterylv=4,l.baseMinOnlineGiftlv=3,l.InitTeachBall=0,l.IsOpenGM=!1,l.Scene={WX_STORE:1104,WX_LASTEST:1089,WX_FLOATING:1131,WX_SHARE_FRIEND:1007,WX_SHARE_GROUP:1008,WX_SHARE_TICKET:1044},l.LogRes=((i={Diamond:{id:1e3,name:"\u661f\u661f(\u94bb\u77f3)"}})[o.PropsType.Hammer]={id:2,name:"\u9524\u5b50"},i[o.PropsType.Refresh]={id:1,name:"\u91cd\u7f6e"},i[o.PropsType.Joker]={id:0,name:"\u5c0f\u4e11\u7403"},i[o.PropsType.HomeHammer]={id:3,name:"\u5bb6\u56ed\u88c5\u4fee\u9524"},i),l.PropTypes=[o.PropsType.Joker,o.PropsType.Refresh,o.PropsType.Hammer,o.PropsType.HomeHammer],l.TestGrade=1,l.SubscribeIds={Sign:"AMrcgmIZtw46cMmaZMdP9HKzzVAsYk7NR4MJkcS_sPw",Offline:"jvMHcNnAkkOT6G8R0rMQFky-LDny17hI4WMY0DZ1yno",Mission:"dFno-lWcgVGtwGlRdIb9GYgXpJVyCG8M4JAWOYA0-YE",Activity:"ZLIIKEifllKB541XQnZdEEqLB9w-AuWJ7qRLev9K0Kk",Notice:"6S9N6gRzvrNUSe-AVft03dPaXRHfSjqiOL4jvGE3Ilk"},l.TeachDatas=[[0,0,3,3,3,4,4,4,4,4,0,0,0,3,3,3,4,4,4,4,2,0,0,0,3,3,3,4,4,4,2,2,0,0,0,3,3,3,4,4,2,2,2,0,0,0,3,3,3,4,1,2,2,2,0,0,0,3,3,3,1,1,2,2,2,0,0,0,3,3,1,1,1,2,2,2,0,0,0,3,1,1,1,1,2,2,2,0,0,0,1,1,1,1,1,2,2,2,0,0],[1,4,4,4,4,4,4,4,4,4,1,2,3,3,3,3,3,3,3,4,1,2,0,0,0,0,0,0,3,4,1,2,0,2,3,3,3,0,3,4,1,2,0,2,1,4,3,0,3,4,1,2,0,2,1,4,3,0,3,4,1,2,0,2,2,2,3,0,3,4,1,2,0,0,0,0,0,0,3,4,1,2,2,2,2,2,2,2,3,4,1,1,1,1,1,1,1,1,1,4],[1,1,1,1,0,0,1,1,1,1,1,2,2,2,0,0,2,2,2,1,1,2,4,4,3,3,4,4,2,1,1,2,4,4,3,3,4,4,2,1,0,0,3,3,0,0,3,3,0,0,0,0,3,3,0,0,3,3,0,0,1,2,4,4,3,3,4,4,2,1,1,2,4,4,3,3,4,4,2,1,1,2,2,2,0,0,2,2,2,1,1,1,1,1,0,0,1,1,1,1]],o=l,a.default=o,cc._RF.pop()},{}],CoordData:[function(t,e,n){"use strict";cc._RF.push(e,"9a27fj0VhtJA7Dy2lKUI3/b","CoordData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){this.r=t,this.c=e},cc._RF.pop()},{}],CubeParams:[function(t,e,n){"use strict";cc._RF.push(e,"b661fYhe91D5LADg132TOgi","CubeParams");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){this.scale=1,this.anchorX=.5,this.anchorY=.5,this.opacity=255,this.rotation=0,this.size=cc.size(74,74),this.color=cc.color(255,255,255)},cc._RF.pop()},{}],DailyRewardPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"30a70OmsKJEmrAT0aA/P58K","DailyRewardPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("SDKEnums"),h=i("DataMgr"),f=i("SDKAnalytics"),m=i("Enum"),g=i("ShareVideo"),_=i("BasePopwin"),y=i("Action"),v=i("Water"),b=i("SDKTools"),w=i("EventEnum"),S=i("ViewMgr"),M=i("OnlineMgr"),C=i("GetRewardPopWin"),P=i("BattleMgr"),A=i("Display"),T=i("Const");function E(){var t=null!==u&&u.apply(this,arguments)||this;return t.shareVideo=null,t.iconAnim=null,t.animTitle=null,t.m_close=null,t.m_arrow=null,t.issubscribe=!0,t.time=0,t}i=(o=cc._decorator).ccclass,o=o.property,r(E,u=_.default),(d=E).canShow=function(){return 1!=A.default.s_isShowedReward&&10<=h.DataMgr.User.CurLevel&&0==h.DataMgr.User.getDayDataWithKey(m.DayKeys.TodaySign,0)},Object.defineProperty(E.prototype,"BannerOpen",{get:function(){return M.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),E.prototype.setsubscribe=function(){this.issubscribe=!this.issubscribe,this.m_arrow.active=this.issubscribe,A.default.s_issubscribeDailyReward=this.issubscribe},E.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),A.default.s_isShowedReward=!0,this.initRewardUI(),this.playPopLight(),this.playTitle(),this.issubscribe=A.default.s_issubscribeDailyReward,this.m_arrow.active=A.default.s_issubscribeDailyReward},E.prototype.playTitle=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,v.default.wait(300)];case 1:return t.sent(),y.default.playAnim(this.animTitle),[2]}})})},E.prototype.playPopLight=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,y.default.playAnim(this.iconAnim,m.AnimNames.Poplight)];case 1:return t.sent(),y.default.playAnim(this.iconAnim,m.AnimNames.PoplightNormal),[2]}})})},E.prototype.addEvent=function(){u.prototype.addEvent.call(this),b.default.bindEvent(w.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},E.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),b.default.removeEvent(w.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},E.prototype.initRewardUI=function(){var t=this.ShareKey;t&&this.shareVideo.updateWith(t)},Object.defineProperty(E.prototype,"ShareKey",{get:function(){return p.ShareKeys.DayReward},enumerable:!0,configurable:!0}),E.prototype.singleReward=function(){this.handleClose(!0)},E.prototype.handleDayReward=function(){this.reqDayReward(p.EventKeys.SginDouble,!0)},E.prototype.handleTacticUpdate=function(){this.initRewardUI()},E.prototype.doDayReward=function(){b.default.dispatch(this.ShareKey,{success:this.handleDayReward,context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmok"},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmol"})},E.prototype.reqDayReward=function(t){S.ViewMgr.openPopwin(C.default,{data:{diamond:200,props:[]}}),f.default.event(t,p.EventFrom.Sign),this.handleClose()},E.prototype.handleClose=function(t){return void 0===t&&(t=!0),c(this,void 0,Promise,function(){return l(this,function(){return this.issubscribe&&b.default.subScribe([T.default.SubscribeIds.Sign,T.default.SubscribeIds.Mission,T.default.SubscribeIds.Activity],!0).then(function(){}).catch(function(){A.default.s_issubscribeDailyReward=!1}),[2,S.ViewMgr.closePopwin(d,{anim:t}).then(function(){P.default.I.removePopwinList()})]})})},E.PREFAB_PATH="prefab/popwin/popwin_reward",s([o(g.default)],E.prototype,"shareVideo",void 0),s([o(cc.Node)],E.prototype,"iconAnim",void 0),s([o(cc.Node)],E.prototype,"animTitle",void 0),s([o(cc.Node)],E.prototype,"m_close",void 0),s([o(cc.Node)],E.prototype,"m_arrow",void 0),i=d=s([i],E),a.default=i,cc._RF.pop()},{}],DataMgr:[function(t,e,n){"use strict";cc._RF.push(e,"4d970CBwz5NsZh78DRU4JSR","DataMgr");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var r=i("Api"),s=i("Const"),c=i("Helper"),l=i("SDKTools"),u=i("CPSModel"),d=i("MapsModel"),p=i("UserModel"),h=i("PlotModel"),f=i("LocalModel"),m=i("PointModel"),g=i("Enum"),_=i("ConfigModel"),y=i("LocalMgr"),v=i("StarModel"),b=i("UserExtModel"),w=i("MissionModel"),S=i("UserBaseModel"),M=i("MilestoneModel"),C=i("PlatformUtils");function P(){this.userkey=g.BaseInfoKey.KeyUser}Object.defineProperty(P.prototype,"Maps",{get:function(){return d.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"User",{get:function(){return p.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"UserExt",{get:function(){return b.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"UserBase",{get:function(){return S.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"Point",{get:function(){return m.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"Local",{get:function(){return f.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"Config",{get:function(){return _.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"Star",{get:function(){return v.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"Plot",{get:function(){return h.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"CPS",{get:function(){return u.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"Milestone",{get:function(){return M.default.I},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"Missions",{get:function(){return w.default.I},enumerable:!0,configurable:!0}),P.prototype.init=function(){this.Maps.init()},P.prototype.clear=function(){this.Maps.clearData(),this.User.clearData(),this.Milestone.clearData()},P.prototype.setData=function(t){var e=(t=c.default.isObject(t=void 0===t?{}:t)?t:JSON.parse(t)).userInfo||{};this.User.setData(e),this.baseData=t},P.prototype.syncBaseUserData=function(t,e){return this.syncBaseData({key:this.userkey,data:t},e=void 0!==e&&e)},P.prototype.debugTestServer=function(){return y.LocalMgr.set("WebData",{base_data:{userInfo:{}}}),"object"==typeof PCSDK?r.default.reqSaveData(s.default.BaseData,JSON.stringify({userInfo:{}})):Promise.resolve()},P.prototype.syncToServer=function(){return r.default.reqSaveData(s.default.BaseData,JSON.stringify(this.baseData))},P.prototype.syncBaseData=function(t,e){for(var n=c.default.isArray(t)?t:[t],i=0,o=n.length;i<o;i++){var a=(r=n[i]).key,r=r.data;a===this.userkey&&this.saveUserInfo(r)}return y.LocalMgr.set("WebData",{base_data:this.baseData}),0===l.default.Platform&&l.default.setBaseData(this.baseData),e&&C.default.Platform!==C.Platform.H5?this.syncToServer():Promise.resolve()},P.prototype.saveUserInfo=function(t){var e=this.baseData[this.userkey]||{};t=a({},e,t),this.baseData[this.userkey]=t,this.User.setData(t)},Object.defineProperty(P,"I",{get:function(){return this._instance||(this._instance=new P)},enumerable:!0,configurable:!0}),i=P,o.default=i,o.DataMgr=i.I,cc._RF.pop()},{}],DateUtils:[function(t,e,n){"use strict";cc._RF.push(e,"cdbea1DTQxEoKM2FUTVLiXg","DateUtils");var i=n;function o(){}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(o,"now",{get:function(){return Math.floor(this.nowTime/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(o,"nowTime",{get:function(){return(new Date).getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(o,"today",{get:function(){var t=(n=new Date(this.nowTime)).getFullYear(),e=n.getMonth()+1,n=n.getDate();return t+"-"+this.add(e)+"-"+this.add(n)},enumerable:!0,configurable:!0}),o.getFormatBySecond=function(t,e){var n="";switch(e=void 0===e?1:e){case 0:n=this.getFormatBySecond0(t);break;case 1:n=this.getFormatBySecond1(t);break;case 2:n=this.getFormatBySecond2(t);break;case 3:n=this.getFormatBySecond3(t);break;case 4:n=this.getFormatBySecond4(t);break;case 5:n=this.getFormatBySecond5(t)}return n},o.getFormatBySecond0=function(t){void 0===t&&(t=0);var e=Math.floor(t/60);return(0==e?"00":e<10?"0"+e:""+e)+":"+(0==(t=Math.floor(t%60))?"00":t<10?"0"+t:""+t)},o.getDayHourMin=function(t){void 0===t&&(t=0);var e=Math.floor(t/3600),n=[];n.push(Math.floor(e/24)),n.push(e%24);var i=Math.floor((t-3600*e)/60);return n.push(i),Math.floor((t-3600*e)%60),n},o.getFormatBySecond1=function(t){void 0===t&&(t=0);var e=Math.floor(t/3600),n=0==e?"00":e<10?"0"+e:""+e,i=Math.floor((t-3600*e)/60);return n+":"+(0==i?"00":i<10?"0"+i:""+i)+":"+(0==(e=Math.floor((t-3600*e)%60))?"00":e<10?"0"+e:""+e)},o.getFormatBySecond3=function(t){void 0===t&&(t=0);var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60);return(0==n?"00":n<10?"0"+n:""+n)+":"+(0==(e=Math.floor((t-3600*e)%60))?"00":e<10?"0"+e:""+e)},o.getFormatBySecond2=function(t){var e=new Date(t),n=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),a=e.getHours();return n+"-"+i+"-"+o+" "+(0==a?"00":a<10?"0"+a:""+a)+":"+(0==(t=e.getMinutes())?"00":t<10?"0"+t:""+t)+":"+(0==(e=e.getSeconds())?"00":e<10?"0"+e:""+e)},o.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return 0<e?24<e?Math.floor(e/24)+"\u5929\u524d":e+"\u5c0f\u65f6\u524d":Math.floor(t/60)+"\u5206\u949f\u524d"},o.getFormatBySecond5=function(t){var e=Math.floor(t/86400),n=Math.floor(t%86400/3600),i=Math.floor((t-3600*n)/60),o=Math.floor((t-3600*n)%60),a="";return 0<t?0==e?0==n?(a="",0==i?0==o?"":o<10?"0"+o+"\u79d2":o+"\u79d2":i+"\u5206\u949f"+(0==o?"":o<10?"0"+o+"\u79d2":o+"\u79d2")):(a=n+"\u5c0f\u65f6",0==i?a+(0==o?"":o<10?"0"+o+"\u79d2":o+"\u79d2"):a+(i<10?"0"+i+"\u5206\u949f":i+"\u5206\u949f")):e+"\u5929"+(0==n?"":n<10?"0"+n+"\u5c0f\u65f6":n+"\u5c0f\u65f6"):""},o.getFormatBySecondDay=function(t){var e=Math.floor(t/3600);return 0<e?24<e?Math.floor(e/24)+"\u5929":e+"\u5c0f\u65f6":this.getFormatBySecond3(t)},o.add=function(t){return t<10?"0"+t:t},o.getFormatBySecondTime=function(t){var e=new Date(t),n=(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());return t=e.getMinutes(),e.getSeconds(),(0==n?"00":n<10?"0"+n:""+n)+":"+(0==t?"00":t<10?"0"+t:""+t)},o.getDateDiff=function(t,e){var n=t.split("-");return t=new Date(n[1]+"/"+n[2]+"/"+n[0]),n=e.split("-"),n=new Date(n[1]+"/"+n[2]+"/"+n[0]),parseInt(Math.abs(t.getTime()-n.getTime())/1e3/24/60/60+"")},i.default=o,cc._RF.pop()},{}],Debug:[function(t,e,n){"use strict";cc._RF.push(e,"830eaV5gKhJ5LcpT22+qmFn","Debug");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),i("StringUtils");var a=i("DataMgr"),r=i("OnlineMgr"),s=i("SDKEnums");function c(){}Object.defineProperty(c,"isDebug",{get:function(){return!!r.OnlineMgr.getBool(s.OnlineKeys.DebugFlag,0)},enumerable:!0,configurable:!0}),c.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c.isDebug&&t.unshift("[DebugErr]")},c.errorUser=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=a.DataMgr.UserBase.ID;n&&-1!==c.ignoreLogUsers.indexOf(n)&&t.unshift("[DebugUserError]")},c.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c.isDebug&&t.unshift("[DebugWarn]")},c.ignoreLogUsers=[],c.logger=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c.isDebug&&t.unshift("[DebugLog]")},c.loggerJson=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c.isDebug&&1!==t.length&&t.unshift("[DebugLog]")},i=c,o.default=i,cc._RF.pop()},{}],Declare:[function(t,e,n){"use strict";cc._RF.push(e,"cdc2f9Gkh1PbrceSl6yxgPt","Declare");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),i("PlotModel"),i("MilestoneModel"),cc._RF.pop()},{}],DelayBone:[function(t,e,n){"use strict";cc._RF.push(e,"aee17ZSSpRCX5TiTyz6+uTU","DelayBone");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0}),i=(c=cc._decorator).ccclass;var s,c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.dragonBone=null,t}a(l,s=cc.Component),l.prototype.initWith=function(t,e){var n=this;return this.boneName=t,new Promise(function(t){n.loadBone().then(function(){e?(n.dragonBone.playAnimation(e,1),n.dragonBone.once(dragonBones.EventObject.COMPLETE,t,n)):t(null)}).catch(function(){return t(null)})})},l.prototype.playOne=function(t){var e=this;return this.dragonBone.dragonAtlasAsset?new Promise(function(n){e.dragonBone.playAnimation(t,1),e.dragonBone.once(dragonBones.EventObject.COMPLETE,n,e)}):Promise.resolve()},l.prototype.playLoop=function(t){var e=this;return this.dragonBone.dragonAtlasAsset?new Promise(function(n){e.dragonBone.playAnimation(t,0),n(null)}):Promise.resolve()},l.prototype.loadBone=function(){var t=this;return this.dragonBone.dragonAtlasAsset?Promise.resolve():new Promise(function(e){var n=t.boneName;cc.loader.loadRes("texture/bones/"+n+"_ske",dragonBones.DragonBonesAsset,function(i,o){return i?t.loadBone():(t.dragonBone.dragonAsset=o,void cc.loader.loadRes("texture/bones/"+n+"_tex",dragonBones.DragonBonesAtlasAsset,t.onComplete.bind(t,e)))})})},l.prototype.onComplete=function(t,e,n){if(e)return this.loadBone();this.dragonBone.dragonAtlasAsset=n,this.dragonBone.armatureName="Armature",t()},r([c(dragonBones.ArmatureDisplay)],l.prototype,"dragonBone",void 0),i=r([i],l),o.default=i,cc._RF.pop()},{}],Display:[function(t,e,n){"use strict";cc._RF.push(e,"44f9dR9hfZFIbGhHe8asGxq","Display");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var r=i("Const"),s=i("SDKTools"),c=i("TipsMgr"),l=i("Enum"),u=i("SDKEnums"),d=i("StarConfig"),p=i("AppDataMgr"),h=i("UserModel"),f=i("PersistNode"),m=i("LoaderMgr"),g=i("PoolMgr"),_=i("Action"),y=i("HandleData"),v=i("DataMgr"),b=i("CoinFly"),w=i("SDKAnalytics"),S=i("UserBaseModel"),M=i("WXApi"),C=i("OnlineMgr");function P(){}Object.defineProperty(P,"isCoinBuff",{get:function(){var t=s.default.getParamsInt(u.OnlineKeys.coins_gift_abtest,2);return 0!=t&&(1!=t||S.default.I.ID%2!=1)&&P.s_isclosegift},enumerable:!0,configurable:!0}),P.ShowGride=function(){1==s.default.getParamsInt(u.OnlineKeys.grid_replace_banner_show,0)&&(w.default.event(u.EventKeys.grid_ad_load_try,""),M.default.I.createGridAd({adUnitId:C.OnlineMgr.getAdByType(C.AdType.CustomBannerError),width:660,gridCount:5},{success:function(){},error:function(){},context:this}))},P.hideGride=function(){M.default.I.hideGridAd(C.OnlineMgr.getAdByType(C.AdType.CustomBannerError))},Object.defineProperty(P,"isLottery",{get:function(){var t=s.default.getParamsInt(u.OnlineKeys.lottery_abtest,2);return 0!=t&&(1!=t||S.default.I.ID%2!=1)},enumerable:!0,configurable:!0}),Object.defineProperty(P,"isOnlineGift",{get:function(){var t=s.default.getParamsInt(u.OnlineKeys.online_gift_show_abtest,0);return 0!=t&&(1!=t||S.default.I.ID%2!=1)},enumerable:!0,configurable:!0}),Object.defineProperty(P,"PersistNode",{get:function(){return P.persistNode=P.persistNode||cc.director.getScene().getChildByName("PersistNode").getComponent(f.default)},enumerable:!0,configurable:!0}),P.getViewOffset=function(){return Math.max(0,cc.winSize.height/2-667)},P.topShow=function(t){this.PersistNode.TopBar&&(t===l.TopBarType.None?this.PersistNode.TopBar.node.active=!1:this.PersistNode.TopBar.node.active=!0,this.PersistNode.TopBar.initWith(t))},P.hideTop=function(){this.PersistNode.TopBar.node.active=!1},P.getViewRatio=function(){var t=s.default.SystemData;return t?750/t.screenWidth:1},P.getIphoneBottomOffset=function(){if(!(e=s.default.SystemData))return 0;var t=e.platform,e=e.statusBarHeight;return!t||"ios"!==t.toLocaleLowerCase()&&"devtools"!==t.toLocaleLowerCase()||44!==e?0:14},P.showTip=function(t,e,n){c.TipsMgr.show(t,e=void 0===e?1:e,n)},P.setParent=function(t,e,n){t.parent!=e&&(n?(n=t.convertToWorldSpaceAR(cc.v2(0,0)),n=e.convertToNodeSpaceAR(n),t.parent=e,t.position=n):t.parent=e)},P.getTargetPos=function(t,e){return t=t.convertToWorldSpaceAR(cc.v2(0,0)),e.convertToNodeSpaceAR(t)},P.getWorldPosition=function(t){return t.convertToWorldSpaceAR(cc.v2(0,0))},P.showOnShowInterstitial=function(){s.default.interstitialShow(C.OnlineMgr.getAdByType(C.AdType.Interstitial))},P.showGameStartInsterstitial=function(){var t;s.default.getParamsInt(u.OnlineKeys.insert_ad_old_lv,2),h.default.I.CurLevel<2?0==(t=s.default.getParamsInt(u.OnlineKeys.insert_ad_new_user,0))||1==t&&S.default.I.ID%2==1||s.default.interstitialShow(C.OnlineMgr.getAdByType(C.AdType.Interstitial)):0==(t=s.default.getParamsInt(u.OnlineKeys.insert_ad_old_user,0))||1==t&&S.default.I.ID%2==1||s.default.interstitialShow(C.OnlineMgr.getAdByType(C.AdType.Interstitial))},P.showFailInterstitial=function(){var t=p.AppDataMgr.get(l.AppDataKey.FailCount,0);t+1>=s.default.getParamsInt(u.OnlineKeys.InterstitialFailCd,d.StarConfig.InterstitialAdCd)?(p.AppDataMgr.set(l.AppDataKey.FailCount,0),s.default.interstitialShow(C.OnlineMgr.getAdByType(C.AdType.Interstitial))):p.AppDataMgr.set(l.AppDataKey.FailCount,t+1)},P.showLvInterstitial=function(){var t=p.AppDataMgr.get(l.AppDataKey.LvPassCount,0),e=(i=0==(n=s.default.getParamsInt(u.OnlineKeys.interstitialAd_cd3_abtest,0))||1==n&&S.default.I.ID%2==1?s.default.getParamsObj(u.OnlineKeys.InterstitialLvCd,d.StarConfig.InterstitialLvCd):s.default.getParamsObj(u.OnlineKeys.interstitialAd_cd3_b,d.StarConfig.InterstitialLvCd))[0],n=i[1],i=r.default.MinTarBallLv;h.default.I.Lv_CurTarBallLv-i+1<e||(n<=t+1?(p.AppDataMgr.set(l.AppDataKey.LvPassCount,0),s.default.interstitialShow(C.OnlineMgr.getAdByType(C.AdType.Interstitial))):p.AppDataMgr.set(l.AppDataKey.LvPassCount,t+1))},P.showLvupInterstitial=function(){var t=p.AppDataMgr.get(l.AppDataKey.LvUpCount,0),e=(n=0==(e=s.default.getParamsInt(u.OnlineKeys.interstitialAd_cd4_abtest,0))||1==e&&S.default.I.ID%2==1?s.default.getParamsObj(u.OnlineKeys.InterstitialLvUpCd,d.StarConfig.InterstitialLvUpCd):s.default.getParamsObj(u.OnlineKeys.interstitialAd_cd4_b,d.StarConfig.InterstitialLvUpCd))[0],n=n[1];h.default.I.CurLevel<e||(n<=t+1?(p.AppDataMgr.set(l.AppDataKey.LvUpCount,0),s.default.interstitialShow(C.OnlineMgr.getAdByType(C.AdType.Interstitial))):p.AppDataMgr.set(l.AppDataKey.LvUpCount,t+1))},P.showRewardHintInterstitial=function(){var t=p.AppDataMgr.get(l.AppDataKey.RewardHint,0);t+1>=s.default.getParamsInt(u.OnlineKeys.InterstitialHintCd,d.StarConfig.InterstitialAdCd)?(p.AppDataMgr.set(l.AppDataKey.RewardHint,0),s.default.interstitialShow(C.OnlineMgr.getAdByType(C.AdType.Interstitial))):p.AppDataMgr.set(l.AppDataKey.RewardHint,t+1)},P.getRectSize=function(t){var e={left:0,top:0,width:0,height:0},n=cc.size(t.width+10,t.height+10),i=cc.view.getFrameSize(),o=cc.winSize;return e.left=(.5*o.width+t.x-.5*n.width)/o.width*i.width,e.top=(.5*o.height-t.y-.5*n.height)/o.height*i.height,e.width=n.width/o.width*i.width,e.height=n.height/o.height*i.height,e},P.setBtnInteractable=function(t,e){cc.isValid(t)&&(t.interactable=e)},P.createAuthBtn=function(t,e,n,i){void 0===i&&(i={}),n=P.getRectSize(n),e={isDebug:!(n={type:"text",text:"",style:a({},n,{borderRadius:4})}),msg:e=e||"\u67e5\u770b\u4e16\u754c\u6392\u884c\u699c\u9700\u6388\u6743\r\n\u662f\u5426\u524d\u5f80\u8bbe\u7f6e\u754c\u9762\u5f00\u542f?",callback:function(t){1===t?(s.default.login(!0).then(function(t){return y.default.doSuccess(t)}).catch(function(t){return y.default.doFailure(t)}),i.callback&&i.callback.call(i.context,1)):0===t?i.callback&&i.callback.call(i.context,0):i.callback&&i.callback.call(i.context,-1)},context:this},s.default.createUserBtns(t,n,e)},P.adjustIphoneX=function(t,e){void 0===e&&(e=!1);var n=P.getIphoneOffset();!cc.isValid(t)||(t=t.getComponent(cc.Widget))&&(t.top=n*(e?.5:1),t.updateAlignment())},P.getIphoneOffset=function(){var t=0,e=cc.view.getFrameSize(),n=e.width,i=e.height;return 1125===n&&2436===i||1242===n&&2688===i||360===n&&780===i||375===n&&812===i||414===n&&896===i?t=63:828===n&&1792===i?t=126:1080===n&&2208===i?t=171:360===n&&736===i?t=57:(e=(e=s.default.SystemData)&&e.statusBarHeight||0)<44?t=e+19:n<i&&(t=63),t},P.getEndPointByTrigonometric=function(t,e,n){var i=.382*e.sub(n).mag();return n=t*Math.PI/180,t=e.x+i*Math.cos(n),n=e.y+i*Math.sin(n),cc.v2(t,n)},P.animStar=function(t){var e=P.PersistNode.TopBar.IconStar;return P.actionStarFly(e,t)},P.animCoin=function(t,e,n){void 0===n&&(n=!1);var i=P.PersistNode.TopBar,o=i.IconCoin,a=Math.floor(t/5);return v.DataMgr.User.reqDiamond(t),i.initWith(l.TopBarType.CoinAndStar),P.actionCoinFly(e,o,{offset:n,iteator:function(e){var n=4===e;e=n?a+t%5:a,i.initWith(l.TopBarType.CoinAndStar),i.actionCoinFly(e,n)},context:this})},P.actionCoinFly=function(t,e,n){return void 0===n&&(n={}),new Promise(function(i){m.LoaderMgr.loadPrefabWithUrl("prefab/common/coin_fly").then(function(o){var a=P.PersistNode.node,r=g.PoolMgr.getPrefab(o,a);a=P.getTargetPos(t,a),r.x=a.x,r.y=a.y,r.getComponent(b.default).fly(e,n).then(function(){g.PoolMgr.putNode(r),i(null)})})})},P.actionStarFly=function(t,e,n){return void 0===n&&(n="anim_star_fly"),new Promise(function(i){m.LoaderMgr.loadPrefabWithUrl("prefab/common/star_fly").then(function(o){var a=P.PersistNode.node,r=g.PoolMgr.getPrefab(o,a);o=P.getTargetPos(t,a),r.x=o.x,r.y=o.y,a=P.getTargetPos(e,a),o=cc.v2(o.x,o.y),a=cc.v2(a.x,a.y),r.children[0].getComponent(cc.ParticleSystem).resetSystem(),r.children[1].children[0].getComponent(cc.ParticleSystem).resetSystem(),_.default.playAddAnim(r,n),_.default.bezier(r,1,o,cc.v2(-300,400),a,1).then(function(){s.default.vibrateShort(),g.PoolMgr.putNode(r),i(null)})})})},P.sdkEventWithStr=function(t){v.DataMgr.User.isHadEventKey(t)||((t=u.EventKeys[t])&&w.default.event(t,""),v.DataMgr.User.reqaddEventKey(t))},P.sdkEventWithKey=function(t){v.DataMgr.User.isHadEventKey(t.toString())||(t&&w.default.event(t,""),v.DataMgr.User.reqaddEventKey(t.toString()))},P.persistNode=null,P.s_isopenedLottery=!1,P.s_iscloselvup=!1,P.s_isShowedReward=!1,P.s_isShowedActInvite=!1,P.s_isShowedLottery=!1,P.s_isShowedLottery2=!1,P.s_isclosegift=!1,P.s_iscloseCoingift=!1,P.s_isclosestartgift=!1,P.s_issubscribeDailyReward=!0,P.s_CoinGiftFlagtimes=0,P.s_isSureCloseLottery=!1,P.s_isCloseOnlineGift=!1,P.s_isShowedCollectTip=!1,P.s_isShowWxAd=0,P.s_isShowedAD=!1,P.s_cancelSkilltimes=0,i=P,o.default=i,cc._RF.pop()},{}],Enum:[function(t,e,n){"use strict";cc._RF.push(e,"e8223wSf5BG3btDB1SrP785","Enum");var i=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),(i=o.AppDataKey||(o.AppDataKey={})).GameQuit="game.quit",i.FailCount="fail.count",i.HomeCount="home.count",i.GameCount="home.count",i.RewardHint="reward.hint",i.OfflineTime="offline.time",i.CpsOpenLvUp="cps.open.lvup",i.CpsOpenType="cps.open.type",i.CpsClickClose="cps.click.close",i.ServiceState="service.state",i.OnHideHistory="onhide.history",i.UserInviteUid="user.invite.uid",i.EnterGameState="entergame.state",i.UserInviteType="user.invite.type",i.LvPassCount="lv.count",i.LvUpCount="lvup.count",i.InviteFriendOpen="invite.friend.open",i.UseItemShareNum="use.item.sharenum",(i=o.RecordKey||(o.RecordKey={})).FirstLoadGame="first.load.game",i.FirstLoadHome="first.load.home",i.FirstHomeEnter="first.home.enter",i.FirstTaskNoStar="first.task.nostar",(i=o.LocalDataKey||(o.LocalDataKey={})).Vibrate="vibrate",i.SignDouble="sign.double",i.MusicState="music.state",i.SoundState="sound.state",i.IsWaterMelon="iswatermelon",i.SettingState="setting.state",i.CpsQuanCache="cps.quan.cache",i.OfflineDouble="offline.double",i.OfflineSubscribe="offline.subscribe",i.ShowedWaterMelon="showedmelon",(i=o.DayKeys||(o.DayKeys={})).RecordNum="record.num",i.ReliveNum="relive.num",i.TodaySign="today.sign",i.CollectState="collect.state",i.AddGameState="addgame.state",i.ServiceState="service.state",i.FloatingState="floating.state",i.ShopFreeStar="share.free.star",i.BlockRewardNum="block.reward.num",i.RedPacketNum="redpacket.reward.num",i.SuperRewardNum="super.reward.num",i.ShowItemTipsTimes="show.itemtip.times",i.ClickAd="ClickAd",i.DailyMission="daily.mission",i.InviteCount="invite.count",i.SevenDaySign="sevendat.sign",i.lotterytimes="lottery.times",i.TodaySignShowed="TodaySignShowed",i.InviteFriendOpen="invite.friend.open",i.MissionOpen="mission.open",i.SkillBallGet="skill.ball.get",i.ShowedMelon="showed.melon",(o.BaseInfoKey||(o.BaseInfoKey={})).KeyUser="userInfo",(i=o.ErrorCode||(o.ErrorCode={}))[i.Unknow=1001]="Unknow",i[i.NetworkError=1e3]="NetworkError",i[i.LoginError=3e3]="LoginError",i[i.LoginInvlid=1e4]="LoginInvlid",(i=o.ModuleType||(o.ModuleType={})).ShopInvite="\u5546\u5e97\u9080\u8bf7",i.MenuInvite="\u83dc\u5355\u9080\u8bf7",i.TempInvite="\u4e34\u65f6\u9080\u8bf7",i.InviteNum="\u9080\u8bf7\u9886\u5956",i.Collect="\u6536\u85cf\u529f\u80fd",i.Service="\u5ba2\u670d\u529f\u80fd",i.Floating="\u60ac\u6d6e\u529f\u80fd",i.Menu="\u9996\u9875\u83dc\u5355",i.Shop="\u9996\u9875\u5546\u5e97",i.Fail="\u5931\u8d25\u754c\u9762",i.Activity="\u6d3b\u52a8\u4e2d\u5fc3",i.TaskList="\u4efb\u52a1\u5217\u8868\u4e2d\u5fc3",(i=o.InviteType||(o.InviteType={}))[i.Star=90]="Star",i[i.Net=100]="Net",(i=o.MenuType||(o.MenuType={}))[i.Menu=0]="Menu",i[i.Coin=1]="Coin",(i=o.RewardState||(o.RewardState={}))[i.Not=0]="Not",i[i.Receive=1]="Receive",i[i.Received=2]="Received",(i=o.EnterGameState||(o.EnterGameState={}))[i.First=1]="First",i[i.HistoryRecord=2]="HistoryRecord",i[i.HistoryCancel=3]="HistoryCancel",i[i.EnterMaxRecord=4]="EnterMaxRecord",i[i.MaxRecordClick=5]="MaxRecordClick",i[i.MenuMaxRecord=6]="MenuMaxRecord",i[i.FailMaxRecord=7]="FailMaxRecord",(i=o.PropTensesState||(o.PropTensesState={}))[i.Do=0]="Do",i[i.Doing=1]="Doing",i[i.Done=2]="Done",(i=o.BlockType||(o.BlockType={}))[i.Normal=0]="Normal",i[i.Money=1]="Money",i[i.Props=2]="Props",(i=o.ColorType||(o.ColorType={}))[i.None=-1]="None",i[i.Red=0]="Red",i[i.Yellow=1]="Yellow",i[i.Blue=2]="Blue",i[i.Green=3]="Green",i[i.Violet=4]="Violet",(i=o.GameMode||(o.GameMode={}))[i.Normal=0]="Normal",i[i.HighRecord=1]="HighRecord",i[i.History=2]="History",(i=o.PropsType||(o.PropsType={}))[i.Hammer=2]="Hammer",i[i.HomeHammer=3]="HomeHammer",i[i.Reset=222]="Reset",i[i.Boom=333]="Boom",i[i.Joker=0]="Joker",i[i.Refresh=1]="Refresh",(i=o.PropFromType||(o.PropFromType={}))[i.reviveProp=0]="reviveProp",i[i.share=1]="share",i[i.userProp=2]="userProp",(i=o.PropUseState||(o.PropUseState={}))[i.NotUse=-2]="NotUse",i[i.CanUse=-1]="CanUse",i[i.Hammer=1]="Hammer",i[i.Brush=2]="Brush",i[i.Reset=3]="Reset",i[i.Boom=4]="Boom",(i=o.RewardPopwinFrom||(o.RewardPopwinFrom={}))[i.super=0]="super",i[i.block=1]="block",i[i.hints=2]="hints",i[i.dayReward=3]="dayReward",(i=o.ShareRuleType||(o.ShareRuleType={}))[i.video=0]="video",i[i.share=1]="share",i[i.result=2]="result",i[i.shareFail=3]="shareFail",i[i.shareSuccess=4]="shareSuccess",(i=o.ShareRuleFrom||(o.ShareRuleFrom={})).maxRecord="maxRecord",i.propBrick="propBrick",i.revive="revive",i.freeStar="freeStar",i.wipeReward="wipeReward",i.share="share",(i=o.SceneTypes||(o.SceneTypes={})).GameScene="2048new",i.LoadScene="LoadScene",i.HomeScene="HomeScene",i.GameSceneNew="2048new",i.GameWatermelon="2048watermelon",(i=o.ChapterType||(o.ChapterType={}))[i.Reward=0]="Reward",i[i.Normal=1]="Normal",(i=o.ExchangeType||(o.ExchangeType={}))[i.BubbleBig=0]="BubbleBig",i[i.BubbleSmall=1]="BubbleSmall",i[i.Redpacket=2]="Redpacket",i[i.Task=3]="Task",(i=o.AnimNames||(o.AnimNames={})).Poplight="anim_poplight",i.PoplightNormal="anim_poplight_normal",i.ChestOpen="anim_chest_open",i.ChestDouble="anim_chest_double",i.Treasure="anim_treasure",i.HomeMenuOpen="home_menu_open",i.HomeMenuClose="home_menu_close",i.ItemHammerLoop="item_hammer_loop",i.TreasureNormal="anim_treasure_normal",i.RewardHintout="anim_reward_hintout",i.RankWorld="state_rank_world",i.RankFriend="state_rank_friend",(i=o.SkinShopType||(o.SkinShopType={}))[i.Main=0]="Main",i[i.Logo=1]="Logo",(i=o.Skill||(o.Skill={}))[i.magnet=0]="magnet",i[i.rocket=1]="rocket",(i=o.ComAction||(o.ComAction={}))[i.Init=0]="Init",i[i.Enter=1]="Enter",i[i.Out=2]="Out",(i=o.LoadType||(o.LoadType={}))[i.Json=1]="Json",i[i.Page=2]="Page",i[i.Seed=3]="Seed",i[i.Room=4]="Room",i[i.Plot=5]="Plot",i[i.Guide=6]="Guide",i[i.Scene=7]="Scene",i[i.Living=8]="Living",(i=o.ActionRole||(o.ActionRole={})).None="none",i.Idle="idle",i.Happy="happy",i.Appear="appear",i.Happy2Idle="happy-idle",i.Idle2Happy="idle-happy",(i=o.ActionTreasure||(o.ActionTreasure={})).GDown="G-down",i.SDown="S-down",i.GIdle="G_idle",i.SIdle="S_idle",i.GTitle="G_title",i.STitle="S_title",i.SOpen="S_open",i.GOpen="G_open",i.GOpenCoin="G_open_coin",(i=o.ActionFitTask||(o.ActionFitTask={}))[i.Out=-1]="Out",i[i.Pos0=0]="Pos0",i[i.Pos1=1]="Pos1",i[i.Pos2=2]="Pos2",(i=o.ActionTaskType||(o.ActionTaskType={}))[i.None=-1]="None",i[i.Garbage=0]="Garbage",i[i.Bone1=1]="Bone1",i[i.Bone2=2]="Bone2",i[i.Bone3=3]="Bone3",i[i.Bone4=5]="Bone4",i[i.Normal=4]="Normal",i[i.Replace=6]="Replace",i[i.Bone3Doubule=7]="Bone3Doubule",(i=o.PlotUIState||(o.PlotUIState={}))[i.None=0]="None",i[i.Entering=1]="Entering",i[i.EnterEnd=2]="EnterEnd",i[i.Hideing=3]="Hideing",i[i.HideEnd=4]="HideEnd",(i=o.PlotState||(o.PlotState={}))[i.None=0]="None",i[i.Plan=1]="Plan",i[i.Over=2]="Over",(i=o.EnterGameType||(o.EnterGameType={}))[i.None=0]="None",i[i.Task=1]="Task",i[i.StartGame=2]="StartGame",(i=o.RoomType||(o.RoomType={}))[i.None=-1]="None",i[i.Common=0]="Common",i[i.Living=1]="Living",i[i.Bed=2]="Bed",i[i.Bath=3]="Bath",i[i.Study=4]="Study",i[i.Garden=5]="Garden",i[i.Kitchen=6]="Kitchen",i[i.Porch=10]="Porch",i[i.Balcony=11]="Balcony",i[i.GardenSwing=50]="GardenSwing",i[i.GardenStudio=51]="GardenStudio",i[i.GardenBarbecue=52]="GardenBarbecue",i[i.GardenSwimming=53]="GardenSwimming",i[i.Garden1=100]="Garden1",i[i.Garden2=101]="Garden2",i[i.Garden3=102]="Garden3",i[i.GardenPond=103]="GardenPond",i[i.GardenFlowerhouse=104]="GardenFlowerhouse",(i=o.TopBarType||(o.TopBarType={}))[i.None=0]="None",i[i.Hp=1]="Hp",i[i.Coin=2]="Coin",i[i.Star=3]="Star",i[i.Whole=4]="Whole",i[i.HpAndCoin=5]="HpAndCoin",i[i.HpAndStar=6]="HpAndStar",i[i.CoinAndStar=7]="CoinAndStar",i[i.CoinShow=8]="CoinShow",(o=o.HomeUIState||(o.HomeUIState={}))[o.None=0]="None",o[o.ShowAll=1]="ShowAll",o[o.HideAll=2]="HideAll",o[o.OutAll=3]="OutAll",o[o.Top=4]="Top",o[o.Menu=5]="Menu",o[o.Bottom=6]="Bottom",o[o.OutBottom=7]="OutBottom",o[o.OutBottomAuto=8]="OutBottomAuto",o[o.TopMenu=9]="TopMenu",o[o.OutTopMenu=10]="OutTopMenu",o[o.OutBottomMenu=11]="OutBottomMenu",o[o.ShowTopMenuOutBottom=12]="ShowTopMenuOutBottom",cc._RF.pop()},{}],EventEnum:[function(t,e,n){"use strict";cc._RF.push(e,"940fa3cabNBlL56dZZKsHDq","EventEnum");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),(i=i.EventEnum||(i.EventEnum={})).AppShow="app.show",i.AppHide="app.hide",i.CrossCancel="cross.cancel",i.TacticUpdate="tactic.update",i.UpdateCoin="update.coin",i.UpdateDiamond="update.diamond",i.UpdateReduceStar="update.reduce.star",i.UpdateProps="update.props",i.UpdateChest="update.chest",i.UpdateLevel="update.level",i.UpdateStar="update.star",i.UpdateExtInvite="update.extinvite",i.LoadHomeLiving="loadhome.living",i.LoadHomeSuccess="loadhome.success",i.ActionCpsClose="action.cps.lose",i.GuideOver="guide.over",i.ShowFitUp="show.fitup",i.HideFitUp="hide.fitup",i.MoveMapToNode="move.mapto.node",i.MenuClose="menu.close",i.LoginSuccess="login.success",i.BannerFailure="banner.failure",i.BannerSuccess="banner.success",i.RecieveExchange="recieve.exchange",i.SceneToShow="scene.to.show",i.SceneToHide="scene.to.hide",i.SwitchLockBg="switch.lockbg",i.ClickUseProp="click.use.prop",i.HintsUseProp="hints.use.prop",i.RecordItemClick="record.item.click",i.ServiceRewardSuc="service.reward.suc",i.SceneToFront="back.to.front",i.SceneToBack="first.open.view",i.GameChestGet="game.chest.get",i.GameChapterPass="game.chapter.pass",i.GameWithChapter="game.with.chapter",i.GameChapterRelive="game.chapter.relive",i.GameChapterHistory="game.chapter.history",i.GamePackageLoaded="game.package.loaded",i.ActionPlanTask="action.plan.task",i.ActionUnSelect="action.unselect",i.ActionPreview="action.preview",i.ActionChanged="action.change",i.ActionPlotAnim="action.plot.anim",i.ActionViewTemp="action.view.temp",i.ActionCheckTaskNode="action.check.tasknode",i.SDKADUpdate="pc.banner.update",i.PopwinFromFirst="popwin.from.first",i.PopwinToPop="popwin.to.pop",i.UpdateFriendRank="update.friend.rank",i.FitUpGuideSelect="fitup.guide.select",i.PlayAddCoinAnim="play.add.coinanim",i.UpdateAvatar="update.avatar",i.UpdateMissionData="update.mission.data",i.MissionComplete="mission.complete",i.Gride2AdFail="gridead.failure2",i.Gride2AdSucc="gridead.success2",cc._RF.pop()},{}],EventMgr:[function(t,e,n){"use strict";cc._RF.push(e,"c40f0LvIblMeKIcIiOlOIFK","EventMgr");var i,o=n;function a(){this.dispatcher=new cc.EventTarget}Object.defineProperty(o,"__esModule",{value:!0}),a.prototype.on=function(t,e,n){this.dispatcher.on(t.toString(),e,n)},a.prototype.off=function(t,e,n){e?this.dispatcher.off(t.toString(),e,n):this.dispatcher.off(t.toString())},a.prototype.offTarget=function(t){this.dispatcher.targetOff(t)},a.prototype.once=function(t,e,n){this.dispatcher.once(t.toString(),e,n)},a.prototype.emit=function(t,e){void 0===e&&(e=null),(t=new cc.Event.EventCustom(t.toString(),!0)).setUserData(e),this.dispatcher.dispatchEvent(t)},Object.defineProperty(a,"I",{get:function(){return this.__instance||(this.__instance=new a)},enumerable:!0,configurable:!0}),o.default=i=a,o.EventMgr=i.I,cc._RF.pop()},{}],ExchangeData:[function(t,e,n){"use strict";cc._RF.push(e,"4b2e3Ye3MRNeYWVGfLhz952","ExchangeData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){},cc._RF.pop()},{}],ExchangePopwin:[function(t,e,n){"use strict";cc._RF.push(e,"086a2+b3hJJ+KJC1eU9R3pI","ExchangePopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("BasePopwin"),p=i("AudioMgr"),h=i("OnlineMgr"),f=i("SDKEnums"),m=i("SDKAnalytics"),g=i("UserModel"),_=i("DateUtils"),y=i("CashPopwin"),v=i("Api"),b=i("RandomUtils"),w=i("Action");function S(){var t=null!==c&&c.apply(this,arguments)||this;return t.logobjs=[],t.moneytxt=null,t.bar=null,t.m_Tip=null,t.dataList=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(S,c=d.default),(l=S).prototype.onLoad=function(){},S.prototype.addEvent=function(){c.prototype.addEvent.call(this)},S.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},Object.defineProperty(S.prototype,"BannerOpen",{get:function(){return h.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),S.prototype.onOpen=function(t){var e=this;c.prototype.onOpen.call(this,t),this.m_Tip.active=!1,this.setLog(),t=g.default.I.RedPocketData.integral,this.moneytxt.string=t+" \u2248 "+(t/1e5).toFixed(2)+"\u5143",this.bar.fillRange=Math.min(t/5e5,1),m.default.event(f.EventKeys.red_packet_panel_show,""),this.dataList.length<=0?v.default.getlighttipdata({}).then(function(t){e.dataList=t.radio_list||[],e.showtip()}).catch(function(){e.m_Tip.active=!1}):this.showtip()},S.prototype.showtip=function(){this.dataList.length<=0?this.m_Tip.active=!1:(this.m_Tip.active=!0,this.m_Tip.getChildByName("mask").getChildByName("richtext").getComponent(cc.RichText).string="<color=#ffffff>\u606d\u559c</c><color=#fff552>"+this.dataList[b.default.random(0,this.dataList.length)].nickname+"</c></color>\u4e8e"+_.default.getFormatBySecondTime(_.default.nowTime)+"\u6210\u529f</c><color=#fff552>\u63d0\u73b05\u5143\u7ea2\u5305",w.default.playAnim(this.m_Tip,"anim_exchange_tips").then(function(){}))},S.prototype.setLog=function(){var t=[],e=g.default.I.RedPocketData.log;e.sort(function(t,e){return e.t-t.t}),this.logobjs.forEach(function(n,i){var o,a,r;i<t.length+e.length?(n.active=!0,i<t.length?(a=(o=t[i]).v,r=o.t,n.getComponent(cc.Animation).play("anim_redpacket_list_having")):(a=(o=e[i-t.length]).v,r=o.t,n.getComponent(cc.Animation).play("anim_redpacket_list_had")),n.getChildByName("num").getComponent(cc.Label).string="+"+a,n.getChildByName("time").getComponent(cc.Label).string=_.default.getFormatBySecond(1e3*r,2)):n.active=!1})},S.prototype.onExchange=function(){p.AudioMgr.button(),u.ViewMgr.openPopwin(y.default)},S.prototype.onBack=function(){p.AudioMgr.button(),this.doClose(l,!1)},S.PREFAB_PATH="prefab/popwin/popwin_exchange",S.isshow=!1,s([o(cc.Node)],S.prototype,"logobjs",void 0),s([o(cc.Label)],S.prototype,"moneytxt",void 0),s([o(cc.Sprite)],S.prototype,"bar",void 0),s([o(cc.Node)],S.prototype,"m_Tip",void 0),i=l=s([i],S),a.default=i,cc._RF.pop()},{}],ExtScrollView:[function(t,e,n){"use strict";cc._RF.push(e,"62c30/n5IJHza9BGsQPWTjs","ExtScrollView");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c,l=cc._decorator,u=l.ccclass,d=l.property;function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.itemPrefab=null,t.itemspace=10,t.animType=s.none,t.itemNodeArr=[],t.itemTempSize=null,t.prevContentPosition=cc.v2(0,0),t}i=l.menu,(l=s=o.AnimType||(o.AnimType={}))[l.none=0]="none",l[l.scale=1]="scale",l[l.scaleX=2]="scaleX",l[l.scaleY=3]="scaleY",a(p,c=cc.ScrollView),p.prototype.onLoad=function(){this.vertical?(this.content.anchorX=.5,this.content.anchorY=1):(this.content.anchorX=1,this.content.anchorY=.5)},p.prototype.loadData=function(t,e,n){var i=this;void 0===e&&(e=0),this.scheduleOnce(function(){i.contentRect=i.node.getBoundingBoxToWorld(),i.dataList=t,i.createCellList(e),i.content.on(cc.Node.EventType.POSITION_CHANGED,i.updateContentView,i)},n=void 0===n?.01:n)},p.prototype.createCellList=function(t){void 0===t&&(t=0),this.itemTempSize=this.itemPrefab.data.getContentSize(),this.vertical?(this.content.height=this.dataList.length*(this.itemTempSize.height+this.itemspace),this.content.y=this.content.parent.height/2+(this.itemTempSize.height+this.itemspace)*t,this.content.y=Math.min(this.content.y,this.content.height-this.content.parent.height/2),this.content.height<=this.content.parent.height&&(this.content.y=this.content.parent.height/2)):(this.content.width=this.dataList.length*(this.itemTempSize.width+this.itemspace),this.content.x=this.content.parent.width/-2-(this.itemTempSize.width+this.itemspace)*t,this.content.x=Math.max(this.content.x,-this.content.width+this.content.parent.width/2),this.content.width<=this.content.parent.width&&(this.content.x=-this.content.parent.width/2));for(var e,n,i=this.vertical?Math.ceil(this.node.height/this.itemTempSize.height):Math.floor(this.node.width/this.itemTempSize.width),o=t=t>this.dataList.length-i?Math.max(this.dataList.length-i,0):t,a=0;e=cc.instantiate(this.itemPrefab),this.content.addChild(e),this.itemNodeArr.push(e),o>=this.dataList.length?e.active=!1:e.getComponent(f).updateCell(this.dataList[o],o),this.vertical?e.y=-o*(this.itemTempSize.height+this.itemspace)-(this.itemTempSize.height-this.itemTempSize.height*e.anchorY):e.x=o*(this.itemTempSize.width+this.itemspace)+(this.itemTempSize.width-this.itemTempSize.width*e.anchorX),e.__itemID=o,n=e.getBoundingBoxToWorld(),this.animType!==s.none&&(this.animType==s.scale&&(e.scale=0),this.animType==s.scaleX&&(e.scaleX=0),this.animType==s.scaleY&&(e.scaleY=0),e.runAction(cc.sequence(cc.delayTime(.1*a),cc.scaleTo(.3,1,1).easing(cc.easeBackOut()))),a++),o==t&&(this.firstNode=e),this.lastNode=e,!(o>=this.dataList.length)&&(o++,this.contentRect.intersects(n)););},p.prototype.updateContentView=function(){var t,e,n=this.vertical?this.content.y<this.prevContentPosition.y:this.content.x>this.prevContentPosition.x;n&&0<this.firstNode.__itemID?(t=this.lastNode.getBoundingBoxToWorld(),this.contentRect.intersects(t)||(this.lastNode.active=!0,this.vertical?this.lastNode.y=this.firstNode.y+this.itemTempSize.height+this.itemspace:this.lastNode.x=this.firstNode.x-(this.itemTempSize.width+this.itemspace),e=Math.max(0,this.firstNode.__itemID-1),this.lastNode.__itemID=e,this.lastNode.getComponent(f).updateCell(this.dataList[e],e),this.firstNode=this.lastNode,this.itemNodeArr.unshift(this.itemNodeArr.pop()),this.lastNode=this.itemNodeArr[this.itemNodeArr.length-1])):!n&&this.lastNode.__itemID<this.dataList.length-1&&(t=this.firstNode.getBoundingBoxToWorld(),this.contentRect.intersects(t)||(this.vertical?this.firstNode.y=this.lastNode.y-(this.itemTempSize.height+this.itemspace):this.firstNode.x=this.lastNode.x+this.itemTempSize.width+this.itemspace,e=Math.min(this.dataList.length-1,this.lastNode.__itemID+1),this.firstNode.__itemID=e,this.firstNode.getComponent(f).updateCell(this.dataList[e],e),this.lastNode=this.firstNode,this.itemNodeArr.push(this.itemNodeArr.shift()),this.firstNode=this.itemNodeArr[0])),this.prevContentPosition=this.content.position},r([d({type:cc.Prefab,tooltip:"\u5217\u8868\u5b50\u8282\u70b9\u9884\u5236\u5bf9\u8c61"})],p.prototype,"itemPrefab",void 0),r([d({type:cc.Float,tooltip:"\u6bcf\u9879\u4e4b\u95f4\u7684\u95f4\u9694"})],p.prototype,"itemspace",void 0),r([d({type:cc.Enum(s),tooltip:"\u5f00\u573a\u52a8\u753b\u7c7b\u578b"})],p.prototype,"animType",void 0),i=r([u,i("\u81ea\u5b9a\u4e49/ExtScrollView")],p),o.default=i;var h,f=(a(m,h=cc.Component),m.prototype.updateCell=function(){},m);function m(){return null!==h&&h.apply(this,arguments)||this}o.ExtScrollItem=f,cc._RF.pop()},{}],FailPopwin2:[function(t,e,n){"use strict";cc._RF.push(e,"77ab6xCDvFHOKtz/D/lpiXf","FailPopwin2");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("SDKTools"),p=i("Display"),h=i("DataMgr"),f=i("AudioMgr"),m=i("SDKAnalytics"),g=i("Enum"),_=i("SDKEnums"),y=i("OnlineMgr"),v=i("RankPopwin"),b=i("BasePopwin"),w=i("BattleMgr2"),S=i("OpenContext"),M=i("RankEnum"),C=i("EventMgr"),P=i("EventEnum"),A=i("WXApi"),T=i("ImageLabelNew");function E(){var t=null!==c&&c.apply(this,arguments)||this;return t.txtScore=null,t.txtMaxScore=null,t.txtCross=null,t.rankPrefab=null,t.isrestart=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(E,c=b.default),(l=E).prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.score=t.data.score,this.isrestart=t.data.isrestart,this.isrestart?this.node.getChildByName("content").getChildByName("btn_replay").getChildByName("text_again").getComponent(cc.Animation).play("anim_txt_replay"):this.node.getChildByName("content").getChildByName("btn_replay").getChildByName("text_again").getComponent(cc.Animation).play("anim_txt_continue"),this.initUI(),this.initRank(),A.default.I.showgrideadBottom()},E.prototype.getcross=function(t){return 5+(94<(t=Math.ceil(t/1500*94))?94:t)},E.prototype.onOpend=function(){},E.prototype.onClose=function(){c.prototype.onClose.call(this),A.default.I.hidegrideadBottom()},Object.defineProperty(E.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),E.prototype.addEvent=function(){c.prototype.addEvent.call(this),C.EventMgr.on(P.EventEnum.UpdateFriendRank,this.handleUpdateFriendRank,this)},E.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),C.EventMgr.off(P.EventEnum.UpdateFriendRank,this.handleUpdateFriendRank,this)},E.prototype.initUI=function(){this.txtScore.setValue(this.score),this.txtMaxScore.setValue(w.default.I.m_bestScore),this.txtCross.setValue(this.getcross(this.score)),p.default.showFailInterstitial()},E.prototype.initRank=function(){S.default.I.save(this.score,0)},E.prototype.actionShowRank=function(){cc.isValid(this.wxrank)&&this.wxrank.destroy();var t=cc.instantiate(this.rankPrefab);this.wxrank=t,this.node.getChildByName("content").addChild(t),t.y=60,S.default.I.post(M.RankEvent.Show,{keys:["score3"],box:t.getBoundingBoxToWorld(),openid:h.DataMgr.UserBase.UserOpenId,value:this.score,winSize:cc.winSize},M.RankType.Over)},E.prototype.actionHideRank=function(){S.default.I.post(M.RankEvent.Clear)},E.prototype.handleClose=function(t){u.ViewMgr.closePopwin(l,{anim:t})},E.prototype.onInvite=function(){f.AudioMgr.button(),d.default.share(_.ShareKeys.Friends,{invite_type:g.InviteType.Net}),m.default.event(_.EventKeys.OverShare,_.EventFrom.Over)},E.prototype.onRank=function(){f.AudioMgr.button(),u.ViewMgr.openPopwin(v.default,{data:{type:g.ModuleType.Fail}}),m.default.event(_.EventKeys.OverRank,_.EventFrom.Over)},E.prototype.onAgain=function(){f.AudioMgr.button(),this.handleClose(!1),w.default.I.restart(),m.default.event(_.EventKeys.OverAgain,_.EventFrom.Over)},E.prototype.handleUpdateFriendRank=function(){},E.PREFAB_PATH="prefab/popwin/popwin_fail2",s([o(T.default)],E.prototype,"txtScore",void 0),s([o(T.default)],E.prototype,"txtMaxScore",void 0),s([o(T.default)],E.prototype,"txtCross",void 0),s([o(cc.Prefab)],E.prototype,"rankPrefab",void 0),i=l=s([i],E),a.default=i,cc._RF.pop()},{}],FailPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"d4387H7XJlO54Gz4+RDhvN0","FailPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("SDKTools"),p=i("Display"),h=i("DataMgr"),f=i("AudioMgr"),m=i("SDKAnalytics"),g=i("Enum"),_=i("SDKEnums"),y=i("OnlineMgr"),v=i("RankPopwin"),b=i("BasePopwin"),w=i("BattleMgr"),S=i("OpenContext"),M=i("RankEnum"),C=i("EventMgr"),P=i("EventEnum"),A=i("WXApi");function T(){var t=null!==c&&c.apply(this,arguments)||this;return t.txtScore=null,t.txtMaxScore=null,t.rankPrefab=null,t.isrestart=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(T,c=b.default),(l=T).prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.score=t.data.score,this.isrestart=t.data.isrestart,this.isrestart?this.node.getChildByName("content").getChildByName("btn_replay").getChildByName("text_again").getComponent(cc.Animation).play("anim_txt_replay"):this.node.getChildByName("content").getChildByName("btn_replay").getChildByName("text_again").getComponent(cc.Animation).play("anim_txt_continue"),this.initUI(),this.initRank(),A.default.I.showgrideadBottom(),S.default.I.post(M.RankEvent.Loading,{offset:0})},T.prototype.onOpend=function(){this.actionShowRank()},T.prototype.onClose=function(){c.prototype.onClose.call(this),A.default.I.hidegrideadBottom()},Object.defineProperty(T.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),T.prototype.addEvent=function(){c.prototype.addEvent.call(this),C.EventMgr.on(P.EventEnum.UpdateFriendRank,this.handleUpdateFriendRank,this)},T.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),C.EventMgr.off(P.EventEnum.UpdateFriendRank,this.handleUpdateFriendRank,this)},T.prototype.initUI=function(){this.txtScore.string=""+w.default.I.m_curScore;var t=h.DataMgr.User.getMaxRecordDatas(w.default.I.m_Type);t&&t.length?this.txtMaxScore.string=""+t[0].score:this.txtMaxScore.string="\u65e0",p.default.showFailInterstitial()},T.prototype.initRank=function(){S.default.I.save(this.score,0)},T.prototype.actionShowRank=function(){cc.isValid(this.wxrank)&&this.wxrank.destroy();var t=cc.instantiate(this.rankPrefab);this.wxrank=t,this.node.getChildByName("content").addChild(t),t.y=60,S.default.I.post(M.RankEvent.Show,{keys:0==w.default.I.m_Type?["score"]:["score2"],box:t.getBoundingBoxToWorld(),openid:h.DataMgr.UserBase.UserOpenId,value:this.score,winSize:cc.winSize},M.RankType.Over)},T.prototype.actionHideRank=function(){S.default.I.post(M.RankEvent.Clear)},T.prototype.handleClose=function(t){u.ViewMgr.closePopwin(l,{anim:t})},T.prototype.onInvite=function(){f.AudioMgr.button(),d.default.share(_.ShareKeys.Friends,{invite_type:g.InviteType.Net}),m.default.event(_.EventKeys.OverShare,_.EventFrom.Over)},T.prototype.onRank=function(){f.AudioMgr.button(),u.ViewMgr.openPopwin(v.default,{data:{type:g.ModuleType.Fail}}),m.default.event(_.EventKeys.OverRank,_.EventFrom.Over)},T.prototype.onAgain=function(){f.AudioMgr.button(),this.handleClose(!1),this.isrestart?w.default.I.restart():w.default.I.backGamelv(),m.default.event(_.EventKeys.OverAgain,_.EventFrom.Over)},T.prototype.handleUpdateFriendRank=function(){S.default.I.post(M.RankEvent.Loading,{offset:0}),this.actionShowRank()},T.PREFAB_PATH="prefab/popwin/popwin_fail",s([o(cc.Label)],T.prototype,"txtScore",void 0),s([o(cc.Label)],T.prototype,"txtMaxScore",void 0),s([o(cc.Prefab)],T.prototype,"rankPrefab",void 0),i=l=s([i],T),a.default=i,cc._RF.pop()},{}],FeedbackPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"9278bZDF6FO4rpPaxJfn8x1","FeedbackPopwin");var i=t,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c,l=i("ViewMgr"),u=i("AudioMgr"),d=i("BaseAnimPopwin"),p=i("OnlineMgr");function h(){return null!==s&&s.apply(this,arguments)||this}i=cc._decorator.ccclass,a(h,s=d.default),(c=h).prototype.onOpen=function(t){s.prototype.onOpen.call(this,t)},Object.defineProperty(h.prototype,"BannerOpen",{get:function(){return p.OnlineMgr.getBanner(c.PREFAB_PATH)},enumerable:!0,configurable:!0}),h.prototype.onBack=function(){u.AudioMgr.button(),l.ViewMgr.closePopwin(c)},h.PREFAB_PATH="prefab/popwin/popwin_feedback",i=c=r([i],h),o.default=i,cc._RF.pop()},{}],FitTaskItem:[function(t,e,n){"use strict";cc._RF.push(e,"e1fe8u3xqhFe5c8adHEO/8D","FitTaskItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("DataMgr"),u=i("AudioMgr"),d=i("MapConfig"),p=i("LoaderMgr"),h=i("ImageLabelNew"),f=i("Action");function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.txtCost=null,t.imgIcon=null,t.imgName=null,t.frameLoading=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(m,c=cc.Component),m.prototype.start=function(){this.node.children[0].getChildByName("btn_green1").on(cc.Node.EventType.TOUCH_END,this.onTask,this)},m.prototype.initWith=function(t,e,n){this.data=t,this.callback=e,this.context=n,this.isTouched=!1,n=t.cost_star,n=l.DataMgr.Milestone.getTaskCostStar(t.id),this.txtCost.setText(n+""),n=this.imgIcon.node,f.default.stopAnim(n),n.rotation=0,n.width=50,n.height=50,n.scale=1,n.color=cc.color(174,208,248),this.imgIcon.spriteFrame=this.frameLoading,f.default.playAddAnim(n),this.loadTextSprite(t),this.loadIconSprite(t),this.preloadSprite(t)},m.prototype.loadTextSprite=function(t){var e=this;this.loadSprite(t,1).then(function(t){cc.isValid(e.imgName)&&(e.imgName.spriteFrame=t),cc.dynamicAtlasManager.insertSpriteFrame(t)}).catch(function(){return e.loadTextSprite(t)})},m.prototype.loadIconSprite=function(t){var e=this;this.loadSprite(t,0).then(function(t){var n,i;cc.isValid(e.imgIcon)&&(n=t.getRect(),i=e.imgIcon.node,f.default.stopAnim(i),i.rotation=0,i.scale=.75,i.width=n.width||110,i.height=n.height||97,i.color=cc.color(255,255,255),e.imgIcon.spriteFrame=t),cc.dynamicAtlasManager.insertSpriteFrame(t)}).catch(function(){return e.loadIconSprite(t)})},m.prototype.loadSprite=function(t,e){var n=t.icon;return t=t.room_type,e=0===e?"icon":"txt",t=d.MapConfig.PrefixRoom+"/"+d.MapConfig.RoomData[t].name+"-task",p.LoaderMgr.loadSpriteFrameWithUrl(t+"/"+e+"_"+n)},m.prototype.preloadSprite=function(t){var e,n,i=t.add_furnitures;i.length&&(i=i[0],(i=l.DataMgr.Milestone.getFurnitureById(i))&&3===i.skin_num&&(e=t.select,n=t.room_type,[1,2,3].forEach(function(t){var i=d.MapConfig.PrefixRoom+"/"+d.MapConfig.RoomData[n].name+"-task";t="icon_"+e+"_select_"+t,p.LoaderMgr.loadSpriteFrameWithUrl(i+"/"+t)})))},m.prototype.onTask=function(t){u.AudioMgr.button(),this.isTouched||(this.isTouched=!1,this.callback&&this.callback.call(this.context,t,this.node,this.data))},s([o(h.default)],m.prototype,"txtCost",void 0),s([o(cc.Sprite)],m.prototype,"imgIcon",void 0),s([o(cc.Sprite)],m.prototype,"imgName",void 0),s([o(cc.SpriteFrame)],m.prototype,"frameLoading",void 0),i=s([i],m),a.default=i,cc._RF.pop()},{}],FloatingPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"7a5b9kFkBpAtINd5UdGBIs0","FloatingPopwin");var i=t,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c,l=i("ViewMgr"),u=i("AudioMgr"),d=i("BaseAnimPopwin"),p=i("OnlineMgr");function h(){return null!==s&&s.apply(this,arguments)||this}i=cc._decorator.ccclass,a(h,s=d.default),(c=h).prototype.onOpen=function(t){s.prototype.onOpen.call(this,t)},Object.defineProperty(h.prototype,"BannerOpen",{get:function(){return p.OnlineMgr.getBanner(c.PREFAB_PATH)},enumerable:!0,configurable:!0}),h.prototype.onBack=function(){u.AudioMgr.button(),l.ViewMgr.closePopwin(c)},h.PREFAB_PATH="prefab/popwin/popwin_floating",i=c=r([i],h),o.default=i,cc._RF.pop()},{}],Friends:[function(t,e,n){"use strict";cc._RF.push(e,"6ec96RaZfNE5ZUpa4zvIEjI","Friends");var i,o,a=t,r=n,s=__EXTENDS__(),c=__DECORATE__;function l(t){var e="",n=!1;switch(t.type){case"touchstart":e="listTouchStart";break;case"touchmove":e="listTouchMove";break;case"touchend":case"touchcancel":e="listTouchEnd",n=!0}wx.postMessage({message:e,data:n?"{}":JSON.stringify({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY})})}function u(){return o.call(this)||this}Object.defineProperty(r,"__esModule",{value:!0}),i=a("BaseRank"),a=cc._decorator.ccclass,s(u,o=i.default),u.prototype.onLoad=function(){o.prototype.onLoad.call(this)},u.prototype.update=function(){this.render()},u.prototype.show=function(){this.Potential()},u.prototype.refresh=function(){},u.prototype.dissmiss=function(){o.prototype.dissmiss.call(this)},u.prototype.touchStart=function(t){t.type="touchstart",l(t)},u.prototype.touchMove=function(t){t.type="touchmove",l(t)},u.prototype.touchEnd=function(t){t.type="touchend",l(t)},u.prototype.touchCancel=function(t){t.type="touchcancel",l(t)},a=c([a],u),r.default=a,cc._RF.pop()},{}],FurnitureItem:[function(t,e,n){"use strict";cc._RF.push(e,"1ae4b2Ko69IHoKEsWnadntz","FurnitureItem");var i,o=t,a=e,r=n,s=__EXTENDS__(),c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;function d(){var t=null!==i&&i.apply(this,arguments)||this;return t.txtName=null,t.txtGroup=null,t.imgIcon=null,t}Object.defineProperty(r,"__esModule",{value:!0}),o("AudioMgr"),o("Action"),o("Display"),o("MapConfig"),o("DataMgr"),o("EventEnum"),o("EventMgr"),o("LoaderMgr"),o("GameGM"),o("ViewMgr"),o=(a=cc._decorator).ccclass,a=a.property,s(d,i=cc.Component),d.prototype.initWith=function(){},d.prototype.loadIconSprite=function(){},d.prototype.loadSprite=function(){},d.prototype.preloadSprite=function(){},d.prototype.onMission=function(){return l(this,void 0,void 0,function(){return u(this,function(){return[2]})})},c([a(cc.Label)],d.prototype,"txtName",void 0),c([a(cc.Label)],d.prototype,"txtGroup",void 0),c([a(cc.Sprite)],d.prototype,"imgIcon",void 0),o=c([o],d),r.default=o,cc._RF.pop()},{}],GameADLike:[function(t,e,n){"use strict";cc._RF.push(e,"f3c98j/LChCCZjvSmRJlITh","GameADLike");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("ADMgr"),h=i("AudioMgr"),f=i("ExtScrollView"),m=i("OnlineMgr"),g=i("SDKEnums"),_=i("BasePopwin");function y(){var t=null!==u&&u.apply(this,arguments)||this;return t.scrollview=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(y,u=_.default),(d=y).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.initData(),this.initUI()},y.prototype.onOpend=function(){u.prototype.onOpend.call(this),this.isLocked=!1},y.prototype.onTouchMask=function(){this.onBack()},y.prototype.onRelease=function(){this.scrollview.node.children[0].children[0].removeAllChildren()},y.prototype.showTopBar=function(){},Object.defineProperty(y.prototype,"isOpenedBannner",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"BannerOpen",{get:function(){return m.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),y.prototype.addEvent=function(){},y.prototype.removeEvent=function(){},y.prototype.initData=function(){this.isLocked=!0},y.prototype.initUI=function(){this.renderList()},y.prototype.renderList=function(){var t=this;this.retList().then(function(){t.scrollview.loadData(t.buildDataList(t.dataList),0,.3)}).catch(function(){t.scrollview.loadData(t.buildDataList(t.dataList),0,.3)})},y.prototype.buildDataList=function(t){for(var e=[],n=0,i=t.length;n<i;n+=3)e.push(t.slice(n,n+3));return e},y.prototype.retList=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return[2,new Promise(function(e){p.ADMgr.reqList(g.SDKBannerType.TYPE_LIST).then(function(n){n=n.banner_list||[],(t.dataList=n)&&0!==n.length?e(1):(t.node.active=!1,e(0))})})]})})},y.prototype.onBack=function(){return c(this,void 0,void 0,function(){return l(this,function(){return h.AudioMgr.button(),this.isLocked,[2]})})},y.PREFAB_PATH="prefab/game/game_like",s([o(f.default)],y.prototype,"scrollview",void 0),i=d=s([i],y),a.default=i,cc._RF.pop()},{}],GameAddCoin:[function(t,e,n){"use strict";cc._RF.push(e,"6d879h3WuFFTKQEGJWvpv7K","GameAddCoin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("Action"),d=i("AudioMgr"),p=i("OnlineMgr"),h=i("BasePopwin");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.imgLight=null,t.nodeTitle=null,t.btnAddCoin=null,t.btnSpace=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(f,c=h.default),(l=f).prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.data=t.data,this.initTitle(),this.initBuyBtn(),u.default.playAnim(this.imgLight)},f.prototype.onRelease=function(){u.default.stopAnim(this.imgLight),u.default.stopAnim(this.btnAddCoin.node)},f.prototype.update=function(){},Object.defineProperty(f.prototype,"isOpenedBannner",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"BannerOpen",{get:function(){return p.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),f.prototype.showTopBar=function(){},f.prototype.initTitle=function(){var t=0===this.data.type?1:2;u.default.playAddAnim(this.nodeTitle,"state_coin_title"+t)},f.prototype.initBuyBtn=function(){},f.prototype.synchBtnCd=function(){},f.prototype.onAddCoin=function(){d.AudioMgr.button()},f.prototype.onBack=function(){d.AudioMgr.button()},f.prototype.handleReward=function(){},f.PREFAB_PATH="prefab/game/game_addcoin",s([o(cc.Node)],f.prototype,"imgLight",void 0),s([o(cc.Node)],f.prototype,"nodeTitle",void 0),s([o(cc.Button)],f.prototype,"btnAddCoin",void 0),s([o(cc.Node)],f.prototype,"btnSpace",void 0),i=l=s([i],f),a.default=i,cc._RF.pop()},{}],GameFitTask:[function(t,e,n){"use strict";cc._RF.push(e,"0090djp+bFLW5LeDpdt54XR","GameFitTask");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("ViewMgr"),h=i("Water"),f=i("Action"),m=i("GameFitUpGift"),g=i("PlotMgr"),_=i("Display"),y=i("FitTaskItem"),v=i("DataMgr"),b=i("SDKEnums"),w=i("AudioMgr"),S=i("EventMgr"),M=i("PoolMgr"),C=i("ArrayUtils"),P=i("CommonMgr"),A=i("CheckTools"),T=i("EventEnum"),E=i("SDKAnalytics"),B=i("LoaderMgr"),D=i("ImageLabelNew"),I=i("BaseAnimPopwin"),k=i("OnlineMgr"),O=i("MissionModel"),R=i("ColorListener"),N=i("Enum");function L(){var t=null!==u&&u.apply(this,arguments)||this;return t.wrapHand=null,t.nodeProgress=null,t.txtDay=null,t.txtProgress=null,t.nodeTxtTip=null,t.nodeStarFly=null,t.nodeTaskList=null,t.nodeGifts=[],t.taskPrefab=null,t.progressBar=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(L,u=I.default),(d=L).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.nodeProgress.active=!1,this.initData(),this.initPage()},L.prototype.initPage=function(){this.initUI(),this.checkTreasure();var t=v.DataMgr.Milestone,e={};t.getGroupTaskList().forEach(function(t){return e[t.id]=1});var n,i=v.DataMgr.User.getRuningTasks();i.length&&1==i[0].id?(n=v.DataMgr.User.getRuningTasks(),n=t.getTaskById(n[0].id),this.handleTask(n)):i.length&&2==i[0].id&&this.checkShowGuideForce(2),this.node.getChildByName("bg").y=-459.5-_.default.getViewOffset(),_.default.sdkEventWithKey(b.EventKeys.panel_task_show)},L.prototype.onClosed=function(){this.data=null,u.prototype.onClosed.call(this)},L.prototype.onRelease=function(){u.prototype.onRelease.call(this),this.hideGuide(),this.removeTasks()},Object.defineProperty(L.prototype,"isMaskShow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(L.prototype,"BannerOpen",{get:function(){return k.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),L.prototype.addEvent=function(){u.prototype.addEvent.call(this),S.EventMgr.on(T.EventEnum.HideFitUp,this.onHideTask,this)},L.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),S.EventMgr.off(T.EventEnum.HideFitUp,this.onHideTask,this)},L.prototype.showTopBar=function(){_.default.topShow(N.TopBarType.Star)},Object.defineProperty(L.prototype,"ComputedProgress",{get:function(){var t=v.DataMgr.Milestone,e={};return t.getGroupTaskList().forEach(function(t){return e[t.id]=1}),+(v.DataMgr.User.CompleteTasks.filter(function(t){return!!e[t]}).map(function(e){return t.getTaskById(e).cost_star}).reduce(function(t,e){return t+e},0)/this.progressMax).toFixed(2)},enumerable:!0,configurable:!0}),L.prototype.checkTreasure=function(){var t=v.DataMgr.User.TaskTreasures,e=v.DataMgr.Milestone,n={};e.getGroupTaskList().forEach(function(t){return n[t.id]=1});for(var i=v.DataMgr.User.CompleteTasks.filter(function(t){return!!n[t]}).map(function(t){return e.getTaskById(t).cost_star}).reduce(function(t,e){return t+e},0),o=this.data.milestone.reward_star,a=0;a<o.length;a++){var r=o[a];if(r<=i&&!t[r])return void this.animTreasure(r,a)}},L.prototype.setLocked=function(t){this.isLocked=t},L.prototype.initData=function(){this.setLocked(!1),this.isUpdate=!1,this.data=v.DataMgr.Milestone.getMilestoneDetails();var t=this.data.milestone.reward_star;this.progressMax=t[t.length-1]},L.prototype.initUI=function(){this.nodeStarFly.active=!1,this.initProgress(),this.initTreasure(),this.initTasks(),this.node.children[0].y=17-_.default.getViewOffset()},L.prototype.initProgress=function(){this.nodeProgress.active=!0;var t=this.ComputedProgress;t=Math.min(1,t),this.progressBar.fillRange=t,this.txtProgress.setText(Math.floor(100*t)+"%"),this.progressCurr=t},L.prototype.initTreasure=function(){var t=this,e=this.data,n=e.group,i=e.milestone.reward_star;this.txtDay.setText(n.day+"");var o=v.DataMgr.User.TaskTreasures;this.nodeGifts.forEach(function(e,n){n=i[n],o[n]?e.active=!1:(e.active=!0,e.x=e.parent.width*(n-t.progressMax/2)/t.progressMax)})},L.prototype.getActiveCount=function(){var t=0;return this.nodeTaskList.children.forEach(function(e){e.isValid&&e.active&&t++}),t},L.prototype.initTasks=function(){var t=this,e=v.DataMgr.User.getRuningTasks();this.nodeTxtTip.active=0===e.length;var n=[],i=[],o=N.ActionFitTask.Out;e.forEach(function(a,r){var s=a.id,c=a.from,l=a.to,u=(a=c!==o?c:l,t.buildTaskItem(a=void 0===a?0:a,s));return c===l?n.push(function(){return t.actionShow(u,s)}):c===o?n.push(function(){return t.actionEnter(u,s,l)}):l===o?n.push(function(){return t.actionOut(u,s,l)}):l<c&&(u.active=!0,i.push({node:u,from:s,to:l}),!(r=e[r+1])||r.from===o)?n.push(function(){return t.actionMoves(i)}):void 0}),C.default.queue(n)},L.prototype.buildTaskItem=function(t,e){var n=cc.instantiate(this.taskPrefab);return n.y=107-107*t,n.parent=this.nodeTaskList,n.active=!1,n.name=e+"",e=v.DataMgr.Milestone.getTaskById(e),n.getComponent(y.default).initWith(e,this.onItemClick,this),n},L.prototype.actionMoves=function(t){var e=this;return new Promise(function(n){var i=t.length-1;t.forEach(function(t,o){var a=t.node,r=t.from;t=t.to,e.actionMoveUp(a,r,t).then(function(){return o===i&&n(null)}).catch(function(){return o===i&&n(null)})})})},L.prototype.actionEnter=function(t,e,n){return c(this,void 0,void 0,function(){return l(this,function(i){switch(i.label){case 0:return t.active=!0,v.DataMgr.User.reqUpdateTaskState(e,{from:n}),[4,f.default.playAddAnim(t,"anim_task_come")];case 1:return i.sent(),[2]}})})},L.prototype.actionShow=function(t){return c(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return t.active=!0,[4,f.default.playAddAnim(t,"anim_task_show")];case 1:return e.sent(),[2]}})})},L.prototype.actionOut=function(t,e,n){return c(this,void 0,void 0,function(){return l(this,function(){return t.active=!0,v.DataMgr.User.reqUpdateTaskState(e,{from:n}),[2,f.default.playAddAnim(t,"anim_task_out").then(function(){return t.destroy()})]})})},L.prototype.actionMoveUp=function(t,e,n){return c(this,void 0,Promise,function(){var i=this;return l(this,function(){return t.active=!0,v.DataMgr.User.reqUpdateTaskState(e,{from:n}),[2,f.default.playAddAnim(t,"anim_task_up").then(function(){t.y=107-107*n,i.actionShow(t,e)})]})})},L.prototype.actionFlyStar=function(t,e){return c(this,void 0,void 0,function(){var n,i,o,a,r,s,c,u,d;return l(this,function(l){switch(l.label){case 0:return n=e.children[0].children[1],1!==t?[3,1]:[2,this.actionReduceStar(1,n)];case 1:if(_.default.animStar(n),i=[],2===t)i=[1,2];else if(3===t)i=[1,2,3];else for(o=Math.floor(t/3),a=t%3,s=r=0;s<3;s++)i[s]=0<a?o+r+1:o+r,a--,r=i[s];c=i.length,u=0,l.label=2;case 2:return u<c?(d=i[u],u===c-1?[2,this.actionReduceStar(d,n)]:(this.actionReduceStar(d,n),[4,h.default.wait(300)])):[3,5];case 3:l.sent(),l.label=4;case 4:return u++,[3,2];case 5:return[2]}})})},L.prototype.actionReduceStar=function(t,e){return c(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return S.EventMgr.emit(T.EventEnum.UpdateReduceStar,t),[4,_.default.animStar(e)];case 1:return n.sent(),e.parent.parent.getComponent(cc.Animation).play(),[2]}})})},L.prototype.removeTasks=function(){for(var t=this.nodeTaskList.childrenCount-1;0<=t;t--){var e=this.nodeTaskList.children[t];f.default.stopAnim(e),e.destroy()}},L.prototype.refreshProgress=function(){var t=this.ComputedProgress;this.progressCurr=t,this.txtProgress.setText(Math.floor(100*t)+"%")},L.prototype.animTreasure=function(t,e){return c(this,void 0,void 0,function(){var n;return l(this,function(i){switch(i.label){case 0:return n={id:+(n=(n=this.data.milestone).rewards[e].split(":"))[0],num:+n[1]},v.DataMgr.User.reqTaskTreasure(t),[4,f.default.playAddAnim(this.nodeGifts[e])];case 1:return i.sent(),g.default.I.setIsPloting(!1),[4,this.doClose(d,!0)];case 2:return i.sent(),S.EventMgr.emit(T.EventEnum.SwitchLockBg,1),p.ViewMgr.openPopwin(m.default,{data:{progress:t,type:t===this.progressMax?1:0,data:[n]}}),[2]}})})},L.prototype.update=function(){var t;this.isUpdate&&0!==this.progressCurr&&((t=this.progressBar.fillRange+this.delaRatio)<this.progressCurr?this.progressBar.fillRange=t:(this.isUpdate=!1,this.checkTreasure()))},L.prototype.checkShowGuideForce=function(t){t=v.DataMgr.Milestone.getTaskById(t),this.showGuideForce(t)},L.prototype.hideGuide=function(){var t=this.wrapHand.children[0];t&&(t.active=!1)},L.prototype.showGuideForce=function(t){var e=this;t.have_guide&&B.LoaderMgr.loadResWithUrl("prefab/guide/game_fit up_guide",cc.Prefab,{success:function(t){var n=e.wrapHand.getChildByName("GuideForce");n||((n=M.PoolMgr.getPrefab(t,e.wrapHand)).name="GuideForce",n.active=!0,n.position=cc.v2(0,0),f.default.playAnim(n,"anim_guide_in"))}})},L.prototype.hideGuideForce=function(){var t=this.wrapHand.getChildByName("GuideForce");t&&t.destroy()},L.prototype.onItemClick=function(t,e,n){var i=this;if(n&&-1e3==n.plot_id)return _.default.showTip("\u7a0b\u5e8f\u5458\u6b63\u5728\u62fc\u547d\u52a0\u73ed\u71ac\u591c~\n\u66f4\u591a\u5185\u5bb9\u5373\u5c06\u66f4\u65b0\uff0c\u656c\u8bf7\u671f\u5f85...",1,{type:1});var o=(r=this.data.group).day,a=r.id,r=this.data.milestone.taskgroup_ids;if(o===v.DataMgr.Milestone.Milestones.length&&a===r[r.length-1])return _.default.showTip("\u7a0b\u5e8f\u5458\u6b63\u5728\u62fc\u547d\u52a0\u73ed\u71ac\u591c~\n\u66f4\u591a\u5185\u5bb9\u5373\u5c06\u66f4\u65b0\uff0c\u656c\u8bf7\u671f\u5f85...",1,{type:1});n.id<=3&&P.default.I.sdkEventWithStr("Task"+n.id+"_doButtonTap");var s=v.DataMgr.Milestone.getTaskCostStar(n.id);A.default.checkStar(s,{taskId:n.id})&&(this.isLocked||S.EventMgr.emit(T.EventEnum.ActionCheckTaskNode,{data:n,callback:function(){return i.handleTaskNodeExsit(t,s,e,n)},context:this}))},L.prototype.handleTaskNodeExsit=function(t,e,n,i){var o=this;v.DataMgr.Missions.addMissionProgress(O.MissionCheckType.FinishHomeTask,1),_.default.sdkEventWithKey(b.EventKeys.panel_task_tap),E.default.event(b.EventKeys.taks_do_success,""),this.setLocked(!0);var a=t.target;t=_.default.getTargetPos(a,this.nodeStarFly.parent),this.nodeStarFly.x=t.x-170,this.nodeStarFly.y=t.y+100,this.nodeStarFly.children[0].children[1].getComponent(D.default).setValue(-e),this.hideGuide(),this.actionFlyStar(e,a).then(function(){f.default.playAddAnim(n,"anim_task_doit"),n.getComponent(R.default).add(R.AnimEventKey.TaskStarFly,o.onTaskStarFly,o,[n,i])})},L.prototype.onTaskStarFly=function(t,e){var n=this;this.nodeStarFly.active=!0,f.default.playAddAnim(this.nodeStarFly).then(function(){return n.handleTask(e)}),t.getComponent(R.default).remove(R.AnimEventKey.TaskStarFly,this.onTaskStarFly,this)},L.prototype.onHideTask=function(){this.onBack()},L.prototype.onBack=function(){var t,e;w.AudioMgr.button(),this.isLocked||(t={},v.DataMgr.Milestone.getGroupTaskList().forEach(function(e){return t[e.id]=1}),(e=v.DataMgr.User.getRuningTasks()).length&&e[0].id<=2||(g.default.I.setIsPloting(!1),p.ViewMgr.closePopwin(d,{data:{uiHome:N.HomeUIState.Bottom},anim:!0})))},L.prototype.onTaskEnd=function(t,e,n,i){v.DataMgr.User.reqUpdateTaskState(t,{to:N.ActionFitTask.Out},!0),v.DataMgr.User.reqNextAppearTask(),v.DataMgr.User.reqAsyncNextTask(v.DataMgr.Milestone.getTaskById(t)),v.DataMgr.User.reqStar(-e,{isSync:!0}),n&&i.length&&v.DataMgr.User.reqOpenFurnitureSkin(n,i,!0,!0),2===t&&P.default.I.sdkEventWithKey(b.EventKeys.Task2_decorAniFin)},L.prototype.handleTask=function(t){return c(this,void 0,void 0,function(){var e,n,i,o=this;return l(this,function(a){switch(a.label){case 0:return e=t.plot_id,n=t.cost_star,n=v.DataMgr.Milestone.getTaskCostStar(t.id),e&&v.DataMgr.User.reqAysncPlot(e,N.PlotState.Plan),i=0===(i=g.default.I.getStatus(e)).code,g.default.I.setIsPloting(i),[4,p.ViewMgr.closePopwin(d,{data:{uiHome:N.HomeUIState.OutTopMenu}})];case 1:return a.sent(),this.setLocked(!1),i?(g.default.I.resetTask(),g.default.I.execute(e)):S.EventMgr.emit(T.EventEnum.ActionPlanTask,{data:t,isMove:!0,callback:function(e,i){return o.onTaskEnd(t.id,n,e,i)},context:this}),[2]}})})},L.prototype.onGame=function(){w.AudioMgr.button(),this.isLocked||_.default.PersistNode.loadToGame()},L.PREFAB_PATH="prefab/game/game_fit-task",s([o(cc.Node)],L.prototype,"wrapHand",void 0),s([o(cc.Node)],L.prototype,"nodeProgress",void 0),s([o(D.default)],L.prototype,"txtDay",void 0),s([o(D.default)],L.prototype,"txtProgress",void 0),s([o(cc.Node)],L.prototype,"nodeTxtTip",void 0),s([o(cc.Node)],L.prototype,"nodeStarFly",void 0),s([o(cc.Node)],L.prototype,"nodeTaskList",void 0),s([o(cc.Node)],L.prototype,"nodeGifts",void 0),s([o(cc.Prefab)],L.prototype,"taskPrefab",void 0),s([o(cc.Sprite)],L.prototype,"progressBar",void 0),i=d=s([i],L),a.default=i,cc._RF.pop()},{}],GameFitUpGift:[function(t,e,n){"use strict";cc._RF.push(e,"558b6uehFVDybixv9TDRh3d","GameFitUpGift");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u,d=i("ViewMgr"),p=i("GameFitTask"),h=i("Action"),f=i("DataMgr"),m=i("AudioMgr"),g=i("EventMgr"),_=i("EventEnum"),y=i("BaseAnimPopwin"),v=i("Enum"),b=i("ColorListener"),w=i("OnlineMgr"),S=i("ImageLabelNew");function M(){var t=null!==l&&l.apply(this,arguments)||this;return t.nodeOpen=null,t.nodeItem=null,t.nodeLight=null,t.txtRewardCoin=null,t.boneGift=null,t.islock=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(M,l=y.default),u=M,Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return w.OnlineMgr.getBanner(u.PREFAB_PATH)},enumerable:!0,configurable:!0}),M.prototype.onOpen=function(t){l.prototype.onOpen.call(this,t),this.isLocked=!1,this.rewards=t.data.data,this.progress=t.data.progress,this.isGiftLarge=1===t.data.type,this.islock=!1,this.initData(),this.initUI(),this.initOpen()},M.prototype.onOpend=function(t){l.prototype.onOpend.call(this,t)},M.prototype.onTouchMask=function(){this.onReward(null)},M.prototype.addEvent=function(){l.prototype.addEvent.call(this),this.nodeItem.getComponent(b.default).add(b.AnimEventKey.GiftCoinAddVal,this.onAddCoin,this)},M.prototype.removeEvent=function(){l.prototype.removeEvent.call(this),this.nodeItem.getComponent(b.default).remove(b.AnimEventKey.GiftCoinAddVal,this.onAddCoin,this)},M.prototype.initData=function(){this.setState(c.None)},M.prototype.initUI=function(){this.nodeOpen.active=!1,this.txtRewardCoin.setValue(0,"+")},M.prototype.initOpen=function(){this.setState(c.Title);var t=this.isGiftLarge?v.ActionTreasure.GTitle:v.ActionTreasure.STitle;this.boneGift.playAnimation(t,1),this.boneGift.addEventListener(dragonBones.EventObject.COMPLETE,this.onTitleEnd,this)},M.prototype.isState=function(t){return this.state===t},M.prototype.setState=function(t){this.isState(t)||(this.state=t)},M.prototype.onAddCoin=function(){this.txtRewardCoin.setValue(this.rewards[0].num,"+")},M.prototype.onTitleEnd=function(){this.setState(c.Down);var t=this.isGiftLarge?v.ActionTreasure.GDown:v.ActionTreasure.SDown;this.boneGift.playAnimation(t,1),this.boneGift.addEventListener(dragonBones.EventObject.COMPLETE,this.onDownEnd,this),this.boneGift.removeEventListener(dragonBones.EventObject.COMPLETE,this.onTitleEnd,this)},M.prototype.onDownEnd=function(){var t=this;this.setState(c.Idle);var e=this.isGiftLarge?v.ActionTreasure.GIdle:v.ActionTreasure.SIdle;this.boneGift.playAnimation(e,0),this.boneGift.removeEventListener(dragonBones.EventObject.COMPLETE,this.onDownEnd,this),this.nodeOpen.active=!0,h.default.playAddAnim(this.nodeOpen,"anim_tap_open_apper").then(function(){return h.default.playAddAnim(t.nodeOpen,"anim_tap_open")}),h.default.playAddAnim(this.nodeLight.children[0]),h.default.playAddAnim(this.nodeLight,"anim_light_appear")},M.prototype.onOpenEnd=function(){this.boneGift.removeEventListener(dragonBones.EventObject.COMPLETE,this.onOpenEnd,this)},M.prototype.onOpenCoin=function(t){var e=this;"item_coin "===t.name&&(h.default.playAddAnim(this.nodeLight,"anim_light_dark"),h.default.playAddAnim(this.nodeItem).then(function(){f.DataMgr.User.reqDiamond(e.rewards[0].num),g.EventMgr.emit(_.EventEnum.SwitchLockBg,0),d.ViewMgr.closePopwin(u,{data:{uiHome:v.HomeUIState.None}}),d.ViewMgr.openPopwin(p.default,{data:{uiHome:v.HomeUIState.TopMenu}})})),this.boneGift.removeEventListener(dragonBones.EventObject.FRAME_EVENT,this.onOpenCoin,this)},M.prototype.actionOpen=function(){this.setState(c.Open);var t=this.isGiftLarge?v.ActionTreasure.GOpen:v.ActionTreasure.SOpen;this.boneGift.playAnimation(t,1),this.boneGift.addEventListener(dragonBones.EventObject.COMPLETE,this.onOpenEnd,this),this.boneGift.addEventListener(dragonBones.EventObject.FRAME_EVENT,this.onOpenCoin,this)},M.prototype.onReward=function(){m.AudioMgr.button(),this.isState(c.Idle)&&(this.islock||(this.islock=!0,this.actionOpen()))},M.PREFAB_PATH="prefab/game/game_fit-up-gift",s([o(cc.Node)],M.prototype,"nodeOpen",void 0),s([o(cc.Node)],M.prototype,"nodeItem",void 0),s([o(cc.Node)],M.prototype,"nodeLight",void 0),s([o(S.default)],M.prototype,"txtRewardCoin",void 0),s([o(dragonBones.ArmatureDisplay)],M.prototype,"boneGift",void 0),i=u=s([i],M),a.default=i,(i=c=c||{})[i.None=0]="None",i[i.Title=1]="Title",i[i.Down=2]="Down",i[i.Idle=3]="Idle",i[i.Open=4]="Open",i[i.OpenEnd=5]="OpenEnd",cc._RF.pop()},{}],GameFitUp:[function(t,e,n){"use strict";cc._RF.push(e,"e84e3TFaXlNBLAiimP43Cui","GameFitUp");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p,h=i("ViewMgr"),f=i("Action"),m=i("SDKTools"),g=i("Display"),_=i("GuideHand"),y=i("GuideMgr"),v=i("DataMgr"),b=i("ShareVideo"),w=i("CommonMgr"),S=i("AudioMgr"),M=i("PoolMgr"),C=i("EventMgr"),P=i("EventEnum"),A=i("LoaderMgr"),T=i("MapConfig"),E=i("BaseAnimPopwin"),B=i("OnlineMgr"),D=i("Enum"),I=i("GuideDatas"),k=i("SDKEnums");function O(){var t=null!==d&&d.apply(this,arguments)||this;return t.wrapHand=null,t.nodeClose=null,t.nodeLocks=[],t.nodeSelect=null,t.shareVideo=null,t.frameLoading=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(O,d=E.default),p=O,Object.defineProperty(O.prototype,"isMaskShow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"BannerOpen",{get:function(){return B.OnlineMgr.getBanner(p.PREFAB_PATH)},enumerable:!0,configurable:!0}),O.prototype.start=function(){var t=this;this.nodeSelect.children.forEach(function(e,n){return e.on(cc.Node.EventType.TOUCH_END,t.onSelect.bind(t,n+1,e),t)})},O.prototype.onOpen=function(t){this.params=t.data,this.isFromTask=0===this.params.type,d.prototype.onOpen.call(this,t),this.isSelected=!this.isFromTask,this.isLocked=!0,y.default.I.addRoot(I.GuideRoot.FitUpSelect,this.nodeSelect),this.initSelectData(),this.initUI()},O.prototype.onOpend=function(t){d.prototype.onOpend.call(this,t),this.isLocked=!1,y.default.I.begin(I.GuideID.Task2)},O.prototype.showTopBar=function(){this.IsGuideTask?g.default.topShow(D.TopBarType.None):g.default.topShow(D.TopBarType.Star)},O.prototype.onRelease=function(){this.hideGuide(),this.unschedule(this.showGuide),d.prototype.onRelease.call(this)},O.prototype.addEvent=function(){d.prototype.addEvent.call(this),C.EventMgr.on(P.EventEnum.HideFitUp,this.onHideFitUp,this),C.EventMgr.on(P.EventEnum.GuideOver,this.onGuideOver,this),C.EventMgr.on(P.EventEnum.FitUpGuideSelect,this.onGuideSelect,this),m.default.bindEvent(P.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},O.prototype.removeEvent=function(){d.prototype.removeEvent.call(this),C.EventMgr.off(P.EventEnum.HideFitUp,this.onHideFitUp,this),C.EventMgr.off(P.EventEnum.GuideOver,this.onGuideOver,this),C.EventMgr.off(P.EventEnum.FitUpGuideSelect,this.onGuideSelect,this),m.default.removeEvent(P.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},Object.defineProperty(O.prototype,"TaskId",{get:function(){return this.params.data.id},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"IsGuideTask",{get:function(){var t=1e3*this.params.data.id;return t===I.GuideID.Task2&&y.default.I.isHasGuide(t)},enumerable:!0,configurable:!0}),O.prototype.initSelectData=function(){this.IsGuideTask&&v.DataMgr.User.reqOpenFurnitureSkin(2,this.params.furnitures,!1);var t=v.DataMgr.User.getFurnitureSkinById(this.params.furnitures[0]);this.skinData=s({select:1},t,{opens:t.opens.length?t.opens:[1]}),this.setSelectSkin(this.skinData.select)},O.prototype.setSelectSkin=function(t){this.selectSkin=t},O.prototype.initUI=function(){this.initSkins(),this.initRewardUI(),f.default.playAddAnim(this.node.children[1],"anim_fitup_unlockfly"),2===this.TaskId&&w.default.I.sdkEventWithKey(k.EventKeys.Task2_choosePanelShow),this.nodeClose.active=!this.isFromTask,this.node.children[1].y=17-g.default.getViewOffset(),this.node.getChildByName("bg").y=-459.5-g.default.getViewOffset()},O.prototype.unSelect=function(){this.isSelected&&C.EventMgr.emit(P.EventEnum.ActionUnSelect,s({},this.params,{skin:this.skinData.select,isChange:this.selectSkin!==this.skinData.select}))},O.prototype.initSkins=function(){var t=this;this.nodeSelect.children.forEach(function(e,n){t.loadIconSprite(e,t.params.data,n),e.active&&t.preloadSprite(t.params.data,n),t.renderSelect(e,n+1)});var e=this.skinData.opens;this.nodeLocks.forEach(function(t,n){t&&(t.active=-1===e.indexOf(n+1))})},O.prototype.initRewardUI=function(){this.shareVideo.updateWithType(k.ShareVideoType.None)},O.prototype.loadIconSprite=function(t,e,n){var i,o=this;cc.isValid(t)&&(i=t.children[1].children[0],f.default.stopAnim(i),i.angle=0,i.width=50,i.height=50,i.color=cc.color(174,208,248),i.getComponent(cc.Sprite).spriteFrame=this.frameLoading,f.default.playAddAnim(i)),this.loadSprite(e,n).then(function(e){var n,i,o;cc.isValid(t)&&(n=e.getRect(),o=(i=t.children[1].children[0]).getComponent(cc.Sprite),f.default.stopAnim(i),i.rotation=0,i.width=n.width||167,i.height=n.height||197,o.spriteFrame=e,i.color=cc.color(255,255,255)),cc.dynamicAtlasManager.insertSpriteFrame(e)}).catch(function(){return o.loadIconSprite(t,e,n)})},O.prototype.loadSprite=function(t,e){var n=t.room_type;return t=t.select,n=T.MapConfig.PrefixRoom+"/"+T.MapConfig.RoomData[n].name+"-task",e="icon_"+t+"_select_"+(e%3+1),A.LoaderMgr.loadSpriteFrameWithUrl(n+"/"+e)},O.prototype.preloadSprite=function(t,e){t.add_furnitures.forEach(function(t){var n=(a=v.DataMgr.Milestone.getFurnitureById(t)).skin_type,i=a.res_img,o=a.skin_num,a=(t=e%3+1,T.MapConfig.PrefixRoom+"/"+T.MapConfig.RoomData[n].name);n=i.replace("_1","").replace("_2","").replace("_3",""),(i=3===o?n+"_"+t:""+i)&&A.LoaderMgr.loadSpriteFrameWithUrl(a+"/"+i)})},O.prototype.updateRewardUI=function(){this.shareVideo.updateWithKey(k.ShareKeys.FurnitureSkin)},O.prototype.renderSelect=function(t,e){e===this.selectSkin?(this.selectNode=t,f.default.playAddAnim(t,"state_fitup_select_2")):f.default.playAddAnim(t,"state_fitup_select_1")},O.prototype.renderUnSelect=function(t){t&&f.default.playAddAnim(t,"state_fitup_select_1")},O.prototype.showGuide=function(){var t=this;if(v.DataMgr.User.getCurrPlot()){var e=this.wrapHand.getChildByName("GuideHand");if(e)return e.getComponent(_.default).initWith(cc.Vec2.ZERO),void(e.active=!0);A.LoaderMgr.loadResWithUrl("prefab/guide/comp/course_hand",cc.Prefab,{success:function(e){(e=M.PoolMgr.getPrefab(e,t.wrapHand)).name="GuideHand",e.active=!0,e.getComponent(_.default).initWith(cc.Vec2.ZERO)}})}},O.prototype.hideGuide=function(){var t=this.wrapHand.children[0];t&&(t.active=!1)},O.prototype.onHideFitUp=function(t){return l(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.isFromTask?[2]:(this.unSelect(),[4,h.ViewMgr.closePopwin(p,{data:{uiHome:D.HomeUIState.Bottom},anim:!t.detail})]);case 1:return e.sent(),[2]}})})},O.prototype.onBack=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return S.AudioMgr.button(),this.isLocked||this.isFromTask?[2]:[4,h.ViewMgr.closePopwin(p,{data:{uiHome:D.HomeUIState.Bottom},anim:!0})];case 1:return t.sent(),this.unSelect(),[2]}})})},O.prototype.onGuideOver=function(){this.IsGuideTask&&(g.default.topShow(D.TopBarType.Whole),this.scheduleOnce(this.showGuide,10))},O.prototype.onGuideSelect=function(t){t=+t.detail,this.onSelect(t,this.nodeSelect.children[t-1]),w.default.I.sdkEventWithKey(k.EventKeys.Task2_choosePanelSelect2nd)},O.prototype.onSelect=function(t,e){S.AudioMgr.button(),this.isLocked||this.selectSkin!==t&&(C.EventMgr.emit(P.EventEnum.MoveMapToNode,[this.params.furnitures[0],null]),this.setSelectSkin(t),this.isSelected=!0,this.renderUnSelect(this.selectNode),this.renderSelect(e,t),0<=this.skinData.opens.indexOf(t)?this.initRewardUI():this.updateRewardUI(),C.EventMgr.emit(P.EventEnum.ActionPreview,s({},this.params,{skin:t})))},O.prototype.onSure=function(){var t;S.AudioMgr.button(),this.isLocked||(2<=(t=this.TaskId)&&t<=4&&w.default.I.sdkEventWithStr("Task"+t+"_choosePanelConfirm"),-1!==this.skinData.opens.indexOf(this.selectSkin)?this.isFromTask||this.selectSkin!==this.skinData.select?(h.ViewMgr.closePopwin(p,{data:{uiHome:this.isFromTask?D.HomeUIState.OutTopMenu:D.HomeUIState.Bottom},anim:!0}),this.isFromTask||v.DataMgr.User.reqSelectFurnitureSkin(this.selectSkin,this.params.furnitures,!0),C.EventMgr.emit(P.EventEnum.ActionChanged,s({},this.params,{skin:this.selectSkin}))):(h.ViewMgr.closePopwin(p,{data:{uiHome:D.HomeUIState.Bottom},anim:!0}),this.unSelect()):m.default.dispatch(k.ShareKeys.FurnitureSkin,{success:this.handleSkinReward,context:this}))},O.prototype.handleSkinReward=function(){return l(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return t=this.selectSkin,this.isLocked=!0,[4,v.DataMgr.User.reqOpenFurnitureSkin(t,this.params.furnitures,!1)];case 1:return e.sent(),this.isLocked=!1,this.initSelectData(),this.setSelectSkin(t),this.initRewardUI(),[2]}})})},O.prototype.handleTacticUpdate=function(){},O.PREFAB_PATH="prefab/game/game_fit-up",c([o(cc.Node)],O.prototype,"wrapHand",void 0),c([o(cc.Node)],O.prototype,"nodeClose",void 0),c([o(cc.Node)],O.prototype,"nodeLocks",void 0),c([o(cc.Node)],O.prototype,"nodeSelect",void 0),c([o(b.default)],O.prototype,"shareVideo",void 0),c([o(cc.SpriteFrame)],O.prototype,"frameLoading",void 0),i=p=c([i],O),a.default=i,cc._RF.pop()},{}],GameGM:[function(t,e,n){"use strict";cc._RF.push(e,"b4c8ctcgXBNGYNA15OG+PK+","GameGM");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("Api"),p=(i("ViewMgr"),i("PlotMgr")),h=i("Display"),f=i("GuideMgr"),m=i("BasePopwin"),g=i("DataMgr"),_=i("Enum");function y(){var t=null!==u&&u.apply(this,arguments)||this;return t.mEditCoin=null,t.mEditStars=null,t.mEditTarBall=null,t.content=null,t.scrollview=null,t.prefabItem=null,t}i=(i("AudioMgr"),i("EventMgr"),i("EventEnum"),i("RoomItem"),i("BattleMgr"),o=cc._decorator).ccclass,o=o.property,r(y,u=m.default),y.prototype.start=function(){},y.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t)},y.prototype.onDisable=function(){},y.prototype.onDestroy=function(){},Object.defineProperty(y.prototype,"BannerOpen",{get:function(){return!1},enumerable:!0,configurable:!0}),y.prototype.showTopBar=function(){},y.prototype.renderList=function(){},y.prototype.createNode=function(){},y.prototype.onEditCoin=function(){},y.prototype.onEidtStars=function(){},y.prototype.onResetGuide=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[3,2];case 1:return t.sent(),[2,h.default.showTip("\u91cd\u7f6e\u6210\u529f")];case 2:return[2]}})})},y.prototype.onKillGame=function(){},y.prototype.onResetAllAccount=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[3,2];case 1:t.sent(),d.default.testAllUser(null),g.DataMgr.clear(),f.default.I.clear(),cc.director.loadScene(_.SceneTypes.LoadScene,function(){}),t.label=2;case 2:return[2]}})})},y.prototype.onResetSelfAccount=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[3,2];case 1:t.sent(),d.default.testSelfUser(null),g.DataMgr.clear(),f.default.I.clear(),p.default.I.clear(),cc.director.loadScene(_.SceneTypes.LoadScene,function(){}),t.label=2;case 2:return[2]}})})},y.prototype.onTarBallLv=function(){},y.prototype.onCoin=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[3,2];case 1:t.sent(),h.default.showTip("\u4fee\u6539\u6210\u529f"),t.label=2;case 2:return[2]}})})},y.prototype.onStars=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[3,2];case 1:t.sent(),h.default.showTip("\u4fee\u6539\u6210\u529f"),t.label=2;case 2:return[2]}})})},y.prototype.onBack=function(){},y.prototype.reqStars=function(t,e){return void 0===e&&(e={}),c(this,void 0,Promise,function(){return l(this,function(){return[2]})})},y.prototype.reqDiamond=function(t,e){return void 0===e&&(e={}),c(this,void 0,Promise,function(){return l(this,function(){return[2]})})},y.PREFAB_PATH="prefab/game/game_gm",s([o(cc.EditBox)],y.prototype,"mEditCoin",void 0),s([o(cc.EditBox)],y.prototype,"mEditStars",void 0),s([o(cc.EditBox)],y.prototype,"mEditTarBall",void 0),s([o(cc.Node)],y.prototype,"content",void 0),s([o(cc.ScrollView)],y.prototype,"scrollview",void 0),s([o(cc.Prefab)],y.prototype,"prefabItem",void 0),i=s([i],y),a.default=i,cc._RF.pop()},{}],GameLoad:[function(t,e,n){"use strict";cc._RF.push(e,"d69bbsLvkxHz49rSeKMM7m7","GameLoad");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=o("ViewMgr"),d=o("Display"),p=o("BasePopwin"),h=o("Enum"),f=o("EventMgr"),m=o("EventEnum");function g(){return null!==c&&c.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(g,c=p.default),(l=g).prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.loadGame()},Object.defineProperty(g.prototype,"isOpenedBannner",{get:function(){return!1},enumerable:!0,configurable:!0}),g.prototype.showTopBar=function(){d.default.topShow(h.TopBarType.None)},g.prototype.loadGame=function(){this.initGame(),u.ViewMgr.closePopwin(l,{data:{uiHome:h.HomeUIState.None}}),f.EventMgr.emit(m.EventEnum.GamePackageLoaded)},g.prototype.initGame=function(){},g.PREFAB_PATH="prefab/game/game_load",o=l=s([o],g),a.default=o,cc._RF.pop()},{}],GameNewDay:[function(t,e,n){"use strict";cc._RF.push(e,"3c3b2+t5mpA3aI/R0AijbLs","GameNewDay");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("ViewMgr"),h=i("Action"),f=i("BasePopwin");function m(){var t=null!==u&&u.apply(this,arguments)||this;return t.boneNewDay=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(m,u=f.default),d=m,Object.defineProperty(m.prototype,"isMaskShow",{get:function(){return!1},enumerable:!0,configurable:!0}),m.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.params=t,this.initUI()},m.prototype.openAnim=function(){return Promise.resolve()},Object.defineProperty(m.prototype,"isOpenedBannner",{get:function(){return!1},enumerable:!0,configurable:!0}),m.prototype.showTopBar=function(){},m.prototype.initUI=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,h.default.playAddAnim(this.node,"anim_dayoff")];case 1:return t.sent(),[4,h.default.playAddAnim(this.node,"anim_dayon")];case 2:return t.sent(),this.boneNewDay.node.active=!0,this.boneNewDay.playAnimation("run",1),this.boneNewDay.addEventListener(dragonBones.EventObject.COMPLETE,this.onRunnEnd,this),[2]}})})},m.prototype.onRunnEnd=function(){this.boneNewDay.removeEventListener(dragonBones.EventObject.COMPLETE,this.onRunnEnd,this);var t=this.params&&this.params.end;p.ViewMgr.closePopwin(d).then(function(){return t&&t.callback.call(t.context)})},m.PREFAB_PATH="prefab/game/game_newday",s([o(dragonBones.ArmatureDisplay)],m.prototype,"boneNewDay",void 0),i=d=s([i],m),a.default=i,cc._RF.pop()},{}],GameNoStar:[function(t,e,n){"use strict";cc._RF.push(e,"d6f15afmtNKApxdDYAAE6xR","GameNoStar");var i=t,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c,l=i("ViewMgr"),u=i("GameFitTask"),d=i("Display"),p=i("SDKEnums"),h=i("AudioMgr"),f=i("OnlineMgr"),m=i("Enum"),g=i("BaseAnimPopwin");function _(){return null!==s&&s.apply(this,arguments)||this}i=cc._decorator.ccclass,a(_,s=g.default),(c=_).prototype.onOpen=function(t){s.prototype.onOpen.call(this),this.data=t.data},Object.defineProperty(_.prototype,"isOpenedBannner",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"BannerOpen",{get:function(){return f.OnlineMgr.getBanner(c.PREFAB_PATH)},enumerable:!0,configurable:!0}),_.prototype.showTopBar=function(){d.default.topShow(m.TopBarType.Star)},_.prototype.onStarGame=function(){h.AudioMgr.button(),d.default.sdkEventWithKey(p.EventKeys.panel_not_enough_stars_tap),l.ViewMgr.closePopwin(c,{data:{uiHome:m.HomeUIState.None},anim:!1}),l.ViewMgr.closePopwin(u.default,{data:{uiHome:m.HomeUIState.None},anim:!1}),d.default.PersistNode.loadToGame()},_.prototype.onBack=function(){h.AudioMgr.button(),this.doClose(c)},_.PREFAB_PATH="prefab/game/game_nostar",i=c=r([i],_),o.default=i,cc._RF.pop()},{}],GameStory:[function(t,e,n){"use strict";cc._RF.push(e,"7470aMi8HJNsZBtaXkKuTUV","GameStory");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("PlotMgr"),u=i("Display"),d=i("DelayBone"),p=i("Enum"),h=i("AudioMgr"),f=i("SDKEnums"),m=i("BaseAnimPopwin"),g=i("OnlineMgr"),_=i("EventMgr");function y(){var t=null!==c&&c.apply(this,arguments)||this;return t.comBone=null,t.txtContent=null,t.richText=null,t.typerTimer=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(y,c=m.default),y.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.wordsState={},this.isLocked=!0,this.data=t.data,this.wordsState[this.data.id]=0,this.richText.string="",this.txtContent.string="",this.duration=g.OnlineMgr.getInt(f.OnlineKeys.PlotAutoNext,3),this.initBone(),this.actionTalk(),_.EventMgr.emit(f.EventKeys.hidewxad)},y.prototype.onOpend=function(){c.prototype.onOpend.call(this),this.isLocked=!1,this.initContent(this.data)},y.prototype.onClose=function(){_.EventMgr.emit(f.EventKeys.showwxad),c.prototype.onClose.call(this),this.stopNext(),this.isLocked=!0,this.wordsState=null,this.richText.string="",this.txtContent.string="",this.typerTimer&&clearInterval(this.typerTimer)},y.prototype.onRefresh=function(t){this.data=t.data,this.wordsState[this.data.id]=0,this.actionTalk(),this.initContent(t.data)},Object.defineProperty(y.prototype,"isMaskShow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"isOpenedBannner",{get:function(){return!1},enumerable:!0,configurable:!0}),y.prototype.addEvent=function(){c.prototype.addEvent.call(this)},y.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},y.prototype.showTopBar=function(){u.default.topShow(p.TopBarType.None)},y.prototype.initBone=function(){var t=this;this.comBone.initWith("role","").then(function(){t.actionTalk(),t.comBone.node.children[0].active=!1})},y.prototype.initContent=function(t){var e=t.words;this.richText.string="",this.txtContent.string="",this.makeRichTextTyper(e),u.default.sdkEventWithStr(t.event)},y.prototype.startNext=function(){this.stopNext(),this.schedule(this.playNext,this.duration)},y.prototype.stopNext=function(){this.unschedule(this.playNext)},y.prototype.playNext=function(){l.default.I.actionStep()},y.prototype.actionTalk=function(){var t=this,e=this.data.role_2d_ani;1===e.length?this.comBone.playLoop(e[0]):this.comBone.playOne(e[0]).then(function(){return t.onTalkEnd()})},y.prototype.onTalkEnd=function(){var t=this.data.role_2d_ani;this.comBone.playLoop(t[t.length-1])},y.prototype.onContent=function(){var t,e,n;h.AudioMgr.button(),this.isLocked||(t=(n=this.data).id,e=n.words,0===(n=this.wordsState[t])?(this.typerTimer&&clearInterval(this.typerTimer),this.richText.string=e,this.wordsState[t]=1,this.startNext()):1===n&&(this.stopNext(),this.playNext()))},y.prototype.onSkip=function(){h.AudioMgr.button(),this.isLocked||l.default.I.skip()},y.prototype.onShowFull=function(){h.AudioMgr.button(),this.isLocked},y.prototype.makeRichTextTyper=function(t){for(var e=this,n=/<.+?\/?>/g,i=t.match(n),o=["\u2701","\u2702","\u2703","\u2704","\u273a","\u273b","\u273c","\u2744","\u2745","\u2746","\u2747","\u2748","\u2749","\u274a"].find(function(e){return-1==t.indexOf(e)}),a=t.replace(n,o),r=[],s=[],c={},l=0,u=0;u<a.length;u++)a[u]==o&&(s.push(u),2<=s.length?(c.endStr=i[2*r.length+1],c.endtIdx=u-l,r.push(c),s=[],c={}):(c.startIdx=u-l,c.startStr=i[2*r.length]),l+=1);var d=t.replace(n,"").split(""),p=[];for(u=1;u<=d.length;u++){for(var h=d.join("").slice(0,u),f=0,m=0;m<r.length;m++){var g=r[m],_=g.startIdx,y=g.endtIdx;_<u&&u<=y?(h=h.slice(0,_+f)+g.startStr+h.slice(_+f)+g.endStr,f+=g.startStr.length+g.endStr.length):y<u&&(h=h.slice(0,_+f)+g.startStr+h.slice(_+f,y+f)+g.endStr+h.slice(y+f),f+=g.startStr.length+g.endStr.length)}p.unshift(h)}this.typerTimer&&clearInterval(this.typerTimer),this.typerTimer=setInterval(function(){p.length?e.richText.string=p.pop():(e.startNext(),e.wordsState[e.data.id]=1,e.typerTimer&&clearInterval(e.typerTimer))},50)},y.PREFAB_PATH="prefab/game/game_story",s([o(d.default)],y.prototype,"comBone",void 0),s([o(cc.Label)],y.prototype,"txtContent",void 0),s([o(cc.RichText)],y.prototype,"richText",void 0),i=s([i],y),a.default=i,cc._RF.pop()},{}],Garbage:[function(t,e,n){"use strict";cc._RF.push(e,"d2f0bVIKHxNCJJdHESb5dBm","Garbage");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0}),i=(c=cc._decorator).ccclass;var s,c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.dragonBone=null,t}a(l,s=cc.Component),l.prototype.play=function(){var t=this;return new Promise(function(e){t.loadBone().then(function(){t.dragonBone.playAnimation("boom",1),t.dragonBone.once(dragonBones.EventObject.COMPLETE,e,t)}).catch(function(){return e(null)})})},l.prototype.loadBone=function(){var t=this;return this.dragonBone.dragonAtlasAsset?Promise.resolve():new Promise(function(e){cc.loader.loadRes("texture/bones/boom_ske",dragonBones.DragonBonesAsset,function(n,i){return n?t.loadBone():(t.dragonBone.dragonAsset=i,void cc.loader.loadRes("texture/bones/boom_tex",dragonBones.DragonBonesAtlasAsset,t.onComplete.bind(t,e)))})})},l.prototype.onComplete=function(t,e,n){if(e)return this.loadBone();this.dragonBone.dragonAtlasAsset=n,this.dragonBone.armatureName="Armature",t()},r([c(dragonBones.ArmatureDisplay)],l.prototype,"dragonBone",void 0),i=r([i],l),o.default=i,cc._RF.pop()},{}],GetCashPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"6bb5483mCZMVpcQRyvakMM+","GetCashPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("Display"),d=i("BasePopwin"),p=i("AudioMgr"),h=i("OnlineMgr");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.cashtxt=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(f,c=d.default),(l=f).prototype.onLoad=function(){},f.prototype.addEvent=function(){c.prototype.addEvent.call(this)},f.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},Object.defineProperty(f.prototype,"BannerOpen",{get:function(){return h.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),f.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.cashtxt.string="0.0"},f.prototype.ongetcash=function(){p.AudioMgr.button(),u.default.showTip("\u4f59\u989d\u4e0d\u8db3\u65e0\u6cd5\u63d0\u73b0~")},f.prototype.onBack=function(){p.AudioMgr.button(),this.doClose(l,!1).then(function(){})},f.PREFAB_PATH="prefab/popwin/popwin_cashout02",s([o(cc.Label)],f.prototype,"cashtxt",void 0),i=l=s([i],f),a.default=i,cc._RF.pop()},{}],GetRewardPopWin:[function(t,e,n){"use strict";cc._RF.push(e,"b99e8vHJO1Jk7jz1sZcPxWC","GetRewardPopWin");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p,h=i("SDKEnums"),f=i("DataMgr"),m=i("ShareVideo"),g=i("SDKTools"),_=i("ViewMgr"),y=i("OnlineMgr"),v=i("BattleMgr"),b=i("SDKAnalytics"),w=i("Const"),S=i("BaseAnimPopwin"),M=i("AudioMgr"),C=i("AudioEnum");function P(){var t=null!==d&&d.apply(this,arguments)||this;return t.m_isreturnMain=!1,t.m_DesFrom="",t.shareVideo=null,t.m_Icons=[],t.itemobj=null,t.diamondobj=null,t.isdouble=!1,t.time=0,t.Diamond=0,t.reward=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(P,d=S.default),p=P,Object.defineProperty(P.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(p.PREFAB_PATH)},enumerable:!0,configurable:!0}),P.prototype.onOpen=function(t){return l(this,void 0,void 0,function(){return u(this,function(){return d.prototype.onOpen.call(this,t),M.AudioMgr.playSound(C.AudioEnum.congrats),this.Diamond=t.data.diamond||0,this.reward=t.data.props||[],0<this.Diamond?(this.diamondobj.active=!0,this.diamondobj.getChildByName("num").getComponent(cc.Label).string="+"+this.Diamond.toString()):(this.diamondobj.active=!1,this.itemobj.x=0),0<this.reward.length?(this.itemobj.active=!0,this.itemobj.getComponent(cc.Sprite).spriteFrame=this.m_Icons[this.reward[0]],this.itemobj.getChildByName("num").getComponent(cc.Label).string="+"+this.reward[1].toString()):(this.itemobj.active=!1,this.diamondobj.x=0),this.initRewardUI(),[2]})})},P.prototype.addEvent=function(){d.prototype.addEvent.call(this)},P.prototype.removeEvent=function(){d.prototype.removeEvent.call(this)},P.prototype.getparam=function(){return 0<this.Diamond&&0<this.reward.length?4:0<this.reward.length?this.reward[0]:0<this.Diamond?3:void 0},P.prototype.initRewardUI=function(){var t=this.ShareKey;t&&this.shareVideo.updateWith(t)},Object.defineProperty(P.prototype,"ShareKey",{get:function(){return h.ShareKeys.DoubleReward},enumerable:!0,configurable:!0}),P.prototype.singleReward=function(){this.reqDayReward(!1)},P.prototype.handleDayReward=function(){this.reqDayReward(!0)},P.prototype.handleTacticUpdate=function(){this.initRewardUI()},P.prototype.doDayReward=function(){g.default.dispatch(this.ShareKey,{success:this.handleDayReward,context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmoi",branchDim:this.getparam().toString()},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmoj",wxgamebranchdim:this.getparam().toString()})},P.prototype.reqDayReward=function(t){var e=(this.isdouble=t)?2*this.Diamond:this.Diamond;0<e&&(f.DataMgr.User.reqDiamond(e,10),b.default.addLogRes([s({},w.default.LogRes.Diamond,{type:1,cnum:e,onum:f.DataMgr.User.Diamond,reason:this.m_DesFrom+"isdouble="+this.isdouble,levelid:0})])),0<this.reward.length&&(t=this.reward[0],e=this.reward[1],this.isdouble?(this.itemobj.getChildByName("num").getComponent(cc.Label).string="+"+(2*e).toString(),3==t?(v.default.I.overChestAni(),f.DataMgr.User.reqStar(2*e)):f.DataMgr.User.reqProps(t,2*e),v.default.I.doItemAnim(t,this.itemobj,2*e,!0)):(3==t?(v.default.I.overChestAni(),f.DataMgr.User.reqStar(e)):f.DataMgr.User.reqProps(t,e),v.default.I.doItemAnim(t,this.itemobj,e,!0))),this.handleClose()},P.prototype.handleClose=function(t){return void 0===t&&(t=!0),l(this,void 0,Promise,function(){return u(this,function(){return[2,_.ViewMgr.closePopwin(p,{anim:t}).then(function(){v.default.I.removePopwinList()})]})})},P.PREFAB_PATH="prefab/popwin/popwin_getreward",c([o(m.default)],P.prototype,"shareVideo",void 0),c([o(cc.SpriteFrame)],P.prototype,"m_Icons",void 0),c([o(cc.Node)],P.prototype,"itemobj",void 0),c([o(cc.Node)],P.prototype,"diamondobj",void 0),i=p=c([i],P),a.default=i,cc._RF.pop()},{}],GetSignPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"5ac883EJ8tEOJz+Pww2AtbR","GetSignPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p,h=i("ViewMgr"),f=i("DataMgr"),m=i("BattleMgr"),g=i("AudioMgr"),_=i("OnlineMgr"),y=i("BaseAnimPopwin"),v=cc._decorator;function b(){var t=null!==d&&d.apply(this,arguments)||this;return t.m_HadTip=null,t.m_LabNum=null,t.m_SkinIcons=[],t.m_CoinIcon=null,t.m_icon=null,t}o=v.ccclass,i=v.property,(v=u=a.SignRewardType||(a.SignRewardType={}))[v.Skin=0]="Skin",v[v.Skin2Coin=2]="Skin2Coin",r(b,d=y.default),p=b,Object.defineProperty(b.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(p.PREFAB_PATH)},enumerable:!0,configurable:!0}),b.prototype.onOpen=function(t){return c(this,void 0,void 0,function(){return l(this,function(){return d.prototype.onOpen.call(this,t),this.m_type=t.data.type,this.m_id=t.data.id,this.m_type==u.Skin2Coin?(this.m_HadTip.active=!0,this.m_HadTip.getComponent(cc.Animation).play("anim_reward skin"),this.m_icon.spriteFrame=this.m_CoinIcon,this.m_LabNum.string="+300"):(this.m_HadTip.active=!1,this.m_LabNum.string="+1",this.m_icon.spriteFrame=this.m_SkinIcons[this.m_id]),[2]})})},b.prototype.onback=function(){g.AudioMgr.button(),this.m_type==u.Skin2Coin?f.DataMgr.User.reqDiamond(300):(f.DataMgr.User.reqAddSkin(this.m_id),f.DataMgr.User.reqChangSkin(this.m_id),f.DataMgr.User.reqInitdSkinVideoTimes(),m.default.I.setSkin(!1)),this.handleClose(!1)},b.prototype.addEvent=function(){d.prototype.addEvent.call(this)},b.prototype.removeEvent=function(){d.prototype.removeEvent.call(this)},b.prototype.handleClose=function(t){return void 0===t&&(t=!0),c(this,void 0,Promise,function(){return l(this,function(){return[2,h.ViewMgr.closePopwin(p,{anim:t}).then(function(){})]})})},b.PREFAB_PATH="prefab/popwin/popwin_getsign",s([i(cc.Node)],b.prototype,"m_HadTip",void 0),s([i(cc.Label)],b.prototype,"m_LabNum",void 0),s([i(cc.SpriteFrame)],b.prototype,"m_SkinIcons",void 0),s([i(cc.SpriteFrame)],b.prototype,"m_CoinIcon",void 0),s([i(cc.Sprite)],b.prototype,"m_icon",void 0),o=p=s([o],b),a.default=o,cc._RF.pop()},{}],GiftPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"17015JE6PVNpqeYvvc4jWBg","GiftPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("Action"),h=i("SDKTools"),f=i("BasePopwin"),m=i("DataMgr"),g=i("ShareVideo"),_=i("SDKEnums"),y=i("AudioMgr"),v=i("EventEnum"),b=i("OnlineMgr"),w=i("ViewMgr"),S=i("Display"),M=i("RandomUtils"),C=i("BattleMgr"),P=i("BaseAnimPopwin"),A=i("UserBaseModel"),T=i("CheckTools");function E(){var t=null!==u&&u.apply(this,arguments)||this;return t.nodeLight=null,t.nodePoint=null,t.nodeDouble=null,t.nodeProgress=null,t.shareVideo=null,t.nodeItems=[],t.btnGiveUp=null,t.pointArr=[-185,-130,0,150],t.progressArr=[0,.2,.5,.9],t}i=(o=cc._decorator).ccclass,o=o.property,r(E,u=P.default),(d=E).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.isCancel=!1,this.isBottom=!0,this.isJumpOpen=!1,this.initTitle(),this.initProgress(),this.initRewardUI(),this.hideBanner(),this.btnGiveUp.active=!1,C.default.I.sdkEventWithKey(_.EventKeys.Level3_giftHelpShow)},E.prototype.onupdatesharestate=function(){u.prototype.onupdatesharestate.call(this),this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?this.shareVideo.update2shareforce():this.handleTacticUpdate()},E.prototype.onOpend=function(t){u.prototype.onOpend.call(this,t),this.btnGiveUp.active=!0,this.isJumpOpen?(this.hideBanner(),this.btnGiveUp.y=-548-S.default.getViewOffset(),this.scheduleOnce(this.showBanner,M.default.random(1.5,1.51))):(this.showBanner(),this.setNoOpenJumpBtnPos()),this.animProgress()},Object.defineProperty(E.prototype,"isOpenedBannner",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"BannerOpen",{get:function(){return b.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),E.prototype.addEvent=function(){u.prototype.addEvent.call(this),h.default.bindEvent(v.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},E.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),h.default.removeEvent(v.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},E.prototype.onBannerSuccess=function(t){u.prototype.onBannerSuccess.call(this,t),this.showSuccessBanner(t)},E.prototype.onBannerFailure=function(t){u.prototype.onBannerFailure.call(this,t),this.showFailureBanner()},E.prototype.showSuccessBanner=function(){this.isJumpOpen&&this.scheduleOnce(this.setOpenJumpBtnPos,1.5)},E.prototype.showFailureBanner=function(){this.setNoOpenJumpBtnPos()},E.prototype.setOpenJumpBtnPos=function(){this.isBottom=!1;var t=S.default.getViewOffset();this.btnGiveUp.y=-634-t+f.default.getBannerOffset()},E.prototype.setNoOpenJumpBtnPos=function(){this.isBottom=!1;var t=S.default.getViewOffset();this.btnGiveUp.y=-348-t},E.prototype.initRewardUI=function(){this.shareVideo.updateWith(_.ShareKeys.GiftHelp)},E.prototype.initProgress=function(){var t=m.DataMgr.User.GiftProgress,e=this.pointArr[t];this.nodePoint.y=e,t=this.progressArr[t],this.nodeProgress.getComponent(cc.Sprite).fillRange=t},E.prototype.initTitle=function(){m.DataMgr.User.GiftProgress?p.default.playAddAnim(this.nodeDouble,"anim_gifthelp_triple"):p.default.playAddAnim(this.nodeDouble,"anim_gifthelp_double")},E.prototype.animProgress=function(){var t,e=this,n=m.DataMgr.User.GiftProgress;n!==this.nodeItems.length&&(t=this.pointArr[n+1],cc.tween(this.nodePoint).to(.2,{y:t}).start(),t=this.progressArr[n+1],cc.tween(this.nodeProgress.getComponent(cc.Sprite)).to(.2,{fillRange:t}).call(function(){return e.setSelectUI(n)}).start())},E.prototype.actionResetAnim=function(){var t=this;return new Promise(function(e){var n=t.pointArr[0];cc.tween(t.nodePoint).to(.4,{y:n}).start(),n=t.progressArr[0],cc.tween(t.nodeProgress.getComponent(cc.Sprite)).to(.4,{fillRange:n}).call(function(){return t.setUnSelectUI()}).delay(10/60).call(function(){return e()}).start()})},E.prototype.setSelectUI=function(t){var e=this.nodeItems[t];p.default.playAnim(e,"anim_gifthelp_on"),(t=e.getChildByName("item_"+(t+1))).zIndex=1,this.nodeLight.active=!0,this.nodeLight.parent=t.parent,this.nodeLight.position=t.position,this.nodeLight.getComponent(cc.ParticleSystem).resetSystem()},E.prototype.setUnSelectUI=function(){var t=(t=m.DataMgr.User.GiftProgress)&&t-1;t=this.nodeItems[t],p.default.playAnim(t,"anim_gifthelp_off"),this.nodeLight.active=!1},E.prototype.onReward=function(){var t=this;y.AudioMgr.button(),this.isCancel||(this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?h.default.dispatchType(_.ShareVideoType.Share,_.ShareKeys.GiftHelp,{success:function(){T.default.s_sharefailforcetimes<h.default.getParamsInt(_.OnlineKeys.share_force_fail_times,2)?(T.default.s_sharefailforcetimes++,S.default.showTip("\u5206\u4eab\u5931\u8d25\uff0c\u6c42\u52a9\u7fa4\u53cb\u8bd5\u8bd5\u5427\uff5e")):t.handleReward()},context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmog",branchDim:m.DataMgr.User.GiftProgress.toString()},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmoh",wxgamebranchdim:m.DataMgr.User.GiftProgress.toString()}):h.default.dispatch(_.ShareKeys.GiftHelp,{success:this.handleReward,context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmog",branchDim:m.DataMgr.User.GiftProgress.toString()},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmoh",wxgamebranchdim:m.DataMgr.User.GiftProgress.toString()}))},E.prototype.onBack=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return y.AudioMgr.button(),h.default.showModal({content:"\u653e\u5f03\u540e,\u4e0b\u6b21\u9886\u53d6\u5c06\u5931\u53bb\u591a\u500d\n\u5956\u52b1\u673a\u4f1a\u3002\u786e\u5b9a\u653e\u5f03\u4e48\uff1f",cancelText:"\u653e\u5f03",confirmText:"\u53bb\u9886\u5956",confirmColor:"#FF0000",showCancel:!0,success:function(e){e.confirm?t.onReward():e.cancel&&((0==(e=h.default.getParamsInt(_.OnlineKeys.gift_help_abtest,0))||1==e&&A.default.I.ID%2==1)&&(S.default.s_isclosestartgift=!0),t.onCancel().catch(function(){return t.isCancel=!1}))}}),[2]})})},E.prototype.onCancel=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return y.AudioMgr.button(),this.isCancel=!0,[4,this.actionResetAnim()];case 1:return t.sent(),[4,this.reqGiftProgress(0)];case 2:return t.sent(),this.handleClose(),S.default.showLvInterstitial(),[2]}})})},E.prototype.onClose=function(){u.prototype.onClose.call(this),C.default.I.sdkEventWithKey(_.EventKeys.Level3_giftHelpClose)},E.prototype.handleClose=function(t){return w.ViewMgr.closePopwin(d,{anim:t=void 0!==t&&t}).then(function(){C.default.I.removePopwinList()})},E.prototype.handleReward=function(){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t=m.DataMgr.User.GiftProgress,t+=1,[4,this.reqGiftProgress(t)];case 1:return e.sent(),[4,this.handleClose(!1)];case 2:return e.sent(),t=m.DataMgr.User.GiftProgress,C.default.I.doAddHelpItem(t),[2]}})})},E.prototype.reqGiftProgress=function(t){return m.DataMgr.User.reqGiftProgress(t)},E.prototype.handleTacticUpdate=function(){this.initRewardUI()},E.PREFAB_PATH="prefab/popwin/popwin_gift",s([o(cc.Node)],E.prototype,"nodeLight",void 0),s([o(cc.Node)],E.prototype,"nodePoint",void 0),s([o(cc.Node)],E.prototype,"nodeDouble",void 0),s([o(cc.Node)],E.prototype,"nodeProgress",void 0),s([o(g.default)],E.prototype,"shareVideo",void 0),s([o(cc.Node)],E.prototype,"nodeItems",void 0),s([o(cc.Node)],E.prototype,"btnGiveUp",void 0),i=d=s([i],E),a.default=i,cc._RF.pop()},{}],GridADPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"0f490sjCBdGjpW7p9ZG+4jw","GridADPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ADLike2"),d=i("WXApi"),p=i("Action"),h=i("BasePopwin"),f=i("BattleMgr"),m=i("AudioMgr"),g=i("EventMgr"),_=i("EventEnum"),y=i("OnlineMgr"),v=i("SDKEnums");function b(){var t=null!==c&&c.apply(this,arguments)||this;return t.adlike1=null,t.adlike2=null,t.nodeContent=null,t.failtimes=0,t.isauto=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(b,c=h.default),l=b,Object.defineProperty(b.prototype,"isFullScreen",{get:function(){return!0},enumerable:!0,configurable:!0}),b.prototype.onLoad=function(){this.adlike1.init(v.SDKBannerLocation.LOCATION_PAGE_RESULT),this.adlike2.init(v.SDKBannerLocation.LOCATION_PAGE_RESULT),this.adlike1.node.active=!1,this.adlike2.node.active=!1},b.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.node.getComponent(cc.Animation).play(),this.isauto=t.data.isauto,this.failtimes=0,this.node.zIndex=1e5,this.isauto&&1<=d.default.I.gridadnum?(this.node.getChildByName("close").opacity=0,cc.tween(this.node.getChildByName("close")).to(3,{}).to(.3,{opacity:255}).start()):this.node.getChildByName("close").opacity=255,p.default.playAddAnim(this.nodeContent,"anim_ad_no"),d.default.I.showallgridad()},b.prototype.addEvent=function(){c.prototype.addEvent.call(this),g.EventMgr.on(_.EventEnum.Gride2AdSucc,this.onGride2AdSucc,this),g.EventMgr.on(_.EventEnum.Gride2AdFail,this.onGride2AdFail,this)},b.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),g.EventMgr.off(_.EventEnum.Gride2AdSucc,this.onGride2AdSucc,this),g.EventMgr.off(_.EventEnum.Gride2AdFail,this.onGride2AdFail,this)},Object.defineProperty(b.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),b.prototype.openAnim=function(){return p.default.playAddAnim(this.node,"anim_popwinad_in")},b.prototype.closeAnim=function(){return p.default.playAddAnim(this.node,"anim_popwinad_out")},b.prototype.onGride2AdSucc=function(){p.default.playAddAnim(this.nodeContent,"anim_ad_no"),this.adlike1.node.active=!1,this.adlike2.node.active=!1},b.prototype.onGride2AdFail=function(){p.default.playAddAnim(this.nodeContent,"anim_ad_have"),this.adlike1.node.active=!0,this.adlike2.node.active=!0,this.adlike1.show(),this.adlike2.show(),this.failtimes++,this.checkautoclose()},b.prototype.checkautoclose=function(){1<=this.failtimes&&this.isauto&&(this.doClose(l).then(function(){f.default.I&&f.default.I.node&&f.default.I.node.isValid&&f.default.I.removePopwinList()}),l.isshow=!1,d.default.I.hideallgridad())},b.prototype.onBack=function(){m.AudioMgr.button(),this.doClose(l).then(function(){f.default.I&&f.default.I.node&&f.default.I.node.isValid&&f.default.I.removePopwinList()}),l.isshow=!1,d.default.I.hideallgridad()},b.prototype.onBackbg=function(){this.node.getChildByName("close").opacity<255||(this.doClose(l).then(function(){f.default.I&&f.default.I.node&&f.default.I.node.isValid&&f.default.I.removePopwinList()}),l.isshow=!1,d.default.I.hideallgridad())},b.PREFAB_PATH="prefab/popwin/popwin_ad",b.isshow=!1,s([o(u.default)],b.prototype,"adlike1",void 0),s([o(u.default)],b.prototype,"adlike2",void 0),s([o(cc.Node)],b.prototype,"nodeContent",void 0),i=l=s([i],b),a.default=i,cc._RF.pop()},{}],GuideDatas:[function(t,e,n){"use strict";cc._RF.push(e,"436c8shXHdFQoJfLJttbvCD","GuideDatas");var i,o,a=e,r=n;Object.defineProperty(r,"__esModule",{value:!0}),(o=i=r.GuideID||(r.GuideID={}))[o.None=0]="None",o[o.Lv1=1]="Lv1",o[o.Task2=2e3]="Task2",o[o.Finish=2001]="Finish",(a=r.GuideState||(r.GuideState={}))[a.None=0]="None",a[a.Entering=1]="Entering",a[a.EnterEnd=2]="EnterEnd",a[a.Hideing=3]="Hideing",a[a.HideEnd=4]="HideEnd",(a=o=r.GuideRoot||(r.GuideRoot={}))[a.FitUpSelect=0]="FitUpSelect",r.default=((r={})[i.Task2]={0:{prefab:"guide_1",steps:[{arrows:[],finger:!0,fingerPos:cc.v3(-50,-150,0),target:{touch:!0,type:o.FitUpSelect,path:"bg_fit_choice_2"},hights:[],talk:{style:0,text:"\u5bb6\u88c5\u6709<color=#f12be1>\u591a\u79cd\u6837\u5f0f</color>\u53ef\u4ee5\u9009\u62e9",state:"state_crouse_guide1_1",click:!1,position:[0,213]},next:2}]}},r),cc._RF.pop()},{}],GuideDeclare:[function(t,e,n){"use strict";cc._RF.push(e,"a3a4dhqZuRJpYh56izx9xIZ","GuideDeclare");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GuideHand:[function(t,e,n){"use strict";cc._RF.push(e,"bd413YdF9NJF6xjragBrntJ","GuideHand");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0}),i=(c=cc._decorator).ccclass;var s,c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.boneHand=null,t}a(l,s=cc.Component),l.prototype.initWith=function(t){var e=this.node;e.active=!0,e.zIndex=1e4,e.position=t,e.children[0].getComponent(dragonBones.ArmatureDisplay).playAnimation("hand_idle",0)},r([c(dragonBones.ArmatureDisplay)],l.prototype,"boneHand",void 0),i=r([i],l),o.default=i,cc._RF.pop()},{}],GuideMgr:[function(t,e,n){"use strict";cc._RF.push(e,"347113xODNKC4pe3PY2MGo+","GuideMgr");var i=t,o=n,a=__AWAITER__,r=__GENERATOR__;Object.defineProperty(o,"__esModule",{value:!0});var s=i("Debug"),c=i("Water"),l=i("Action"),u=i("Display"),d=i("DataMgr"),p=i("AudioMgr"),h=i("PoolMgr"),f=i("LoaderMgr"),m=i("GuideHand"),g=i("GuideDatas"),_=i("CommonMgr"),y=i("EventEnum"),v=i("EventMgr"),b=i("LayerMgr"),w=i("SDKEnums");function S(){this.mOffsetY=0,this.mData=null,this.mState=g.GuideState.None,this.mRoots={},this.mStepObj={},this.mConfig=g.default,this.mOffsetY=(cc.winSize.height-1624)/2}Object.defineProperty(S.prototype,"GuideData",{get:function(){return this.mData},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"GuideMask",{get:function(){return this.GuideContainer.children[0]},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"GuideWrapHand",{get:function(){return this.mNode.getChildByName("wrap_hand")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"GuideWrapArrow",{get:function(){return this.mNode.getChildByName("wrap_arrow")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"GuideContainer",{get:function(){return b.default.I.getLayer(b.Layer.Guide)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"IsEntering",{get:function(){return this.isState(g.GuideState.Entering)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"IsFinish",{get:function(){return d.DataMgr.User.isHadGuide(g.GuideID.Finish)},enumerable:!0,configurable:!0}),S.prototype.getById=function(t){return(t=this.mConfig[t])?t[0]||void 0:null},Object.defineProperty(S.prototype,"CurrStepIndex",{get:function(){var t=this.GuideData.id;return this.mStepObj[t]||0},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"CurrStepData",{get:function(){return this.GuideData.steps[this.CurrStepIndex]},enumerable:!0,configurable:!0}),S.prototype.addStepIndex=function(t){this.mStepObj[t]+=1},S.prototype.isStepOver=function(t){var e=this.getById(t);return!e||this.mStepObj[t]>=e.steps.length},S.prototype.isHasGuide=function(t){return!d.DataMgr.User.isHadGuide(t)&&!this.isStepOver(t)},S.prototype.isGuideLv1=function(){var t=d.DataMgr.User.MaxLevel;return t===g.GuideID.Lv1&&this.isHasGuide(t)},S.prototype.clear=function(){this.mRoots={},this.mStepObj={}},S.prototype.preload=function(t){return this.IsFinish||d.DataMgr.User.isHadGuide(t)||!(t=this.getById(t))?Promise.resolve():f.LoaderMgr.loadPrefabWithUrl("prefab/guide/"+t.prefab)},S.prototype.begin=function(t){var e=this.getById(t);return!(!e||d.DataMgr.User.isHadGuide(t)||this.isStepOver(t)||(s.default.error("\u3010GuideMgr begin\u3011\u5f00\u59cb\u5f15\u5bfc",t,e),e.id=t,this.mData=e,this.mStepObj[t]=this.mStepObj[t]||0,this.setState(g.GuideState.Entering),this.showWith(e),v.EventMgr.emit(w.EventKeys.hidewxad),0))},S.prototype.synch=function(t){t&&d.DataMgr.User.reqAysncGuide(t)},S.prototype.addRoot=function(t,e){this.mRoots[t]=e},S.prototype.getRoot=function(t){return this.mRoots[t]},S.prototype.clearRoot=function(t){delete this.mRoots[t],this.mRoots[t]=null},S.prototype.loadNode=function(t){var e=this,n=this.GuideContainer.getChildByName("guide");return n?(this.mNode=n,Promise.resolve(n)):new Promise(function(i,o){e.preload(t).then(function(t){(n=cc.instantiate(t)).parent=e.GuideContainer,n.name="guide",e.mNode=n,i(n)}).catch(function(){return o()})})},S.prototype.showMaskUI=function(){var t=this.GuideMask;t.opacity=0,t.active=!0},S.prototype.hideMaskUI=function(){this.GuideMask.active=!1},S.prototype.renderTalkUI=function(t){var e,n=this,i=this.mNode,o=(c=t.talk).state,a=c.text,r=c.style,s=c.click,c=c.position;0===r?e=i.getChildByName("course_bg1"):1===r&&(e=i.getChildByName("course_bg2")),e?(e.zIndex=100,e.position=cc.v2(c[0],c[1]),l.default.playAddAnim(e).then(function(){n.renderFingerUI(t),n.setState(g.GuideState.EnterEnd)}),o?l.default.playAddAnim(i,o).then(function(){n.renderTalkText(a,e)}):this.renderTalkText(a,e)):(this.renderFingerUI(t),this.setState(g.GuideState.EnterEnd),o&&l.default.playAddAnim(i,o)),s&&e&&e.getChildByName("btn_continue").on("click",this.onTalkTouch,this),this.mTalkNode=e},S.prototype.renderTalkText=function(t,e){t?e.getChildByName("word").children.forEach(function(e){"txt_rich"===e.name?(e.active=!0,e.getComponent(cc.RichText).string=t):e.active=!1}):(e=e.getChildByName("word").getChildByName("txt_rich"))&&(e.active=!1)},S.prototype.renderFingerUI=function(t){var e=t.finger;t=t.fingerPos,"boolean"==typeof e&&(t?this.showHand(cc.v2(t.x,t.y+667-cc.winSize.height/2)):(t=this.mNode.getChildByName("course_bg2").getChildByName("btn_continue"))&&(t=u.default.getTargetPos(t,this.mNode),this.showHand(t)))},S.prototype.showHand=function(t){var e=this.GuideWrapHand,n=e.children[0];n?(n.getComponent(m.default).initWith(cc.Vec2.ZERO),e.active=!0,e.zIndex=1e3,e.position=t):f.LoaderMgr.loadResWithUrl("prefab/guide/game_guide_hand",cc.Prefab,{success:function(i){n=h.PoolMgr.getPrefab(i,e),e.active=!0,e.zIndex=1e3,e.position=t,n.children[0].getComponent(cc.Animation).play("anim_hand_touch1")}})},S.prototype.hideHand=function(){var t=this.GuideWrapHand.children[0];t&&h.PoolMgr.putNode(t)},S.prototype.renderArrowUI=function(t){var e,n=this,i=this.GuideWrapArrow;i&&((e=t.arrows)&&0!==e.length?(this.arrowNodes=[],i.zIndex=1e3,i.active=!0,f.LoaderMgr.loadResWithUrl("prefab/guide/comp/course_arrow",cc.Prefab,{success:function(t){e.forEach(function(e){var o=e.scale,a=e.angle,r=e.pos;(e=h.PoolMgr.getPrefab(t,i)).active=!0,e.scale=o||1,e.angle=a||0,e.position=cc.v2(r.x,r.y+n.mOffsetY/2),l.default.playAddAnim(e),n.arrowNodes.push(e)})}})):i.active=!1)},S.prototype.hideArrow=function(){(this.arrowNodes||[]).forEach(function(t){return h.PoolMgr.putNode(t)})},S.prototype.renderMaskUI=function(){var t=this.GuideMask;t.opacity=100,t.active=!0,t.runAction(cc.fadeTo(.45,180))},S.prototype.renderHightsUI=function(t){var e=this;if(!(t=t.hights)||!t.length)return Promise.resolve();var n=[];return t.forEach(function(t){return n.push(e.renderGuideNode(t))}),Promise.all(n)},S.prototype.renderTargetUI=function(t){return(t=t.target)?this.renderGuideNode(t):Promise.resolve()},S.prototype.renderGuideNode=function(t){return a(this,void 0,void 0,function(){var e,n,i,o,a=this;return r(this,function(r){switch(r.label){case 0:return e=t.type,n=t.touch,o=t.path,i=this.mNode.getChildByName("target"),[4,this.findNodes(e,o)];case 1:return o=(o=r.sent()).map(function(t){var o=u.default.getTargetPos(t,i);(t=cc.instantiate(t)).active=!0,t.position=o,t.parent=i,e!==g.GuideRoot.FitUpSelect||n&&t.on(cc.Node.EventType.TOUCH_END,a.onFitUpTouch,a)}),[2,Promise.all(o)]}})})},S.prototype.showWith=function(t){var e=this,n=t.id,i=t.steps[this.CurrStepIndex];this.showMaskUI(),this.loadNode(n).then(function(t){return a(e,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return t.active=!0,[4,this.renderHightsUI(i)];case 1:return e.sent(),[4,this.renderTargetUI(i)];case 2:return e.sent(),this.renderTalkUI(i),this.renderArrowUI(i),this.renderMaskUI(i),[2]}})})}).catch(function(){return e.hideMaskUI()})},S.prototype.findNodes=function(t,e){return a(this,void 0,void 0,function(){var n;return r(this,function(i){switch(i.label){case 0:n=this.getRoot(t),i.label=1;case 1:return(n=this.findLayerObj(n,e))?[2,Promise.resolve([n])]:[4,c.default.wait(10)];case 2:return i.sent(),[3,1];case 3:return[2]}})})},S.prototype.findLayerObj=function(t,e){if(!t)return null;var n=e.split("/"),i=t.getChildByName(n[0]);if(!i)return null;for(var o=1;o<n.length;o++)if(!(i=i.getChildByName(n[o])))return null;return i},S.prototype.isState=function(t){return this.mState===t},S.prototype.setState=function(t){this.isState(t)||(this.mState=t)},S.prototype.onTalkTouch=function(){var t,e;p.AudioMgr.button(),this.isState(g.GuideState.EnterEnd)&&(t=this.mData.id,e=this.CurrStepIndex,t==g.GuideID.Lv1&&1===e&&_.default.I.sdkEventWithStr("Level1_tutorialStep2Fin"),this.actionNextStep())},S.prototype.onFitUpTouch=function(){p.AudioMgr.button(),this.isState(g.GuideState.EnterEnd)&&(v.EventMgr.emit(y.EventEnum.FitUpGuideSelect,2),this.actionNextStep())},S.prototype.actionNextStep=function(){var t=this.mData.id,e=(n=this.CurrStepData).talk,n=n.next;switch(e=e.click,this.CurrStepIndex,this.addStepIndex(t),e&&this.mTalkNode.getChildByName("btn_continue").off("click",this.onTalkTouch,this),n){case 1:this.GuideMask.opacity=100,this.mNode.getChildByName("target").removeAllChildren(!0),this.hideHand(),this.hideArrow(),this.begin(t);break;case 2:this.GuideMask.opacity=100,this.GuideMask.active=!1,this.hideHand(),this.hideArrow(),this.mNode.destroy(),this.synch(t),v.EventMgr.emit(y.EventEnum.GuideOver),v.EventMgr.emit(w.EventKeys.showwxad);break;case 3:this.GuideMask.opacity=0,this.mNode.active=!1,this.mNode.getChildByName("target").removeAllChildren(!0),this.hideHand(),this.hideArrow(),v.EventMgr.emit(w.EventKeys.showwxad)}},Object.defineProperty(S,"I",{get:function(){return this.__instance||(this.__instance=new S)},enumerable:!0,configurable:!0}),i=S,o.default=i,cc._RF.pop()},{}],HandleData:[function(t,e,n){"use strict";cc._RF.push(e,"8fca1gNQqdMlYFI5l8tKQ2t","HandleData");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("Api"),r=i("Debug"),s=i("Const"),c=i("Helper"),l=i("SDKTools"),u=i("Display"),d=i("DataMgr"),p=i("EventMgr"),h=i("EventEnum"),f=i("AppDataMgr"),m=i("Enum");function g(){}g.doLogin=function(t){var e=this;l.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:t,showCancel:!1,confirmText:"\u786e\u5b9a",success:function(){l.default.login(!0).then(function(t){return e.handleLoginSuccess(t)}).catch(function(t){return e.handleLoginFailure(t)})}})},g.doFailure=function(t,e,n){var i=t.code,o=t.msg;if(t&&t.hasOwnProperty("errMsg")&&!t.hasOwnProperty("msg"))g.doLogin("\u8bfb\u53d6\u7528\u6237\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u3002\r\n\u9519\u8bef\u7801\uff1a"+(t.err_code||0));else if(d.DataMgr.UserBase.ID||"request:fail timeout"!==o&&"request:fail"!==o)switch(i){case m.ErrorCode.LoginError:case m.ErrorCode.LoginInvlid:g.doLogin("\u767b\u5f55\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55");break;default:e?e.call(n||this):-1!==i&&o&&u.default.showTip(o+"\n\u9519\u8bef\u7801\uff1a"+i,3),r.default.error("HandleData doFailure code: "+i+" msg: "+o)}else g.doLogin("\u7f51\u7edc\u8d85\u65f6\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u3002\r\n\u9519\u8bef\u7801\uff1a-2")},g.doSuccess=function(t){if(t&&c.default.isPlainObject(t)&&0!==Object.keys(t).length)for(var e in t.hasOwnProperty("tips_data")&&this.handleTipsData(t.tips_data),t.hasOwnProperty("user_base_data")&&this.handleUserBaseData(t.user_base_data),t.hasOwnProperty("user_ext_data")&&this.handleUserExtData(t.user_ext_data),t.hasOwnProperty("wxyx_data")&&(u.default.s_isShowWxAd=+t.wxyx_data.is_show),t)this.handleWithKeyAndValue(e,t[e])},g.handleWithKeyAndValue=function(t,e){t===s.default.BaseData&&this.handleBaseData(e)},g.handleBaseData=function(t){d.DataMgr.setData(t)},g.handleTipsData=function(t){d.DataMgr.Point.setData(t)},g.handleUserBaseData=function(t){d.DataMgr.UserBase.setData(t)},g.handleUserExtData=function(t){d.DataMgr.UserExt.setData(t)},g.handleLoginSuccess=function(t){g.doSuccess(t);var e=f.AppDataMgr.get(m.AppDataKey.UserInviteUid,""),n=f.AppDataMgr.get(m.AppDataKey.UserInviteType,0);e&&n&&e+""!=d.DataMgr.UserBase.ID+""&&(a.default.setInviteFriend({invite_uid:e,invite_type:n}),f.AppDataMgr.set(m.AppDataKey.UserInviteUid,0)),p.EventMgr.emit(h.EventEnum.LoginSuccess,t)},g.handleLoginFailure=function(t){g.doFailure(t)},i=g,o.default=i,cc._RF.pop()},{}],Helper:[function(t,e,n){"use strict";cc._RF.push(e,"89c4eZ5wQRNVbc8wyT2xRIp","Helper");var i=n;function o(){}Object.defineProperty(i,"__esModule",{value:!0}),o.throttle=function(t,e,n){return void 0===n&&(n=""),n="\u8bf7\u7b49\u5f85"+(e=void 0===e?600:e)/1e3+"s\u540e\u518d\u6b21\u70b9\u51fb",new Promise(function(n){if(o.map[t])return!1;o.map[t]=!0;var i=setTimeout(function(){o.map[t]=!1,clearTimeout(i),i=null},e);n()})},Object.defineProperty(o,"nextId",{get:function(){return this.messageIndex++},enumerable:!0,configurable:!0}),o.isFunction=function(t){return"function"==typeof t},o.isString=function(t){return"[object String]"===o.toString.call(t)},o.isObject=function(t){return"object"==typeof t&&null!==t},o.isPlainObject=function(t){return null!==t&&"[object Object]"===o.toString.call(t)&&"isPrototypeOf"in t},o.isArray=function(t){return"[object Array]"===o.toString.call(t)},o.isNumber=function(t){return"number"==typeof t&&isFinite(t)},o.isNullOrUndefined=function(t){return null==t},o.clone=function(t){if(!t)return t;if(!o.isPlainObject(t))return t;if(o.isArray(t))for(var e=[],n=0,i=t.length;n<i;n++)e.push(o.clone(t[n]));else for(var a in e={},t)e[a]=o.clone(t[a]);return e},o.messageIndex=0,o.toString=Object.prototype.toString,o.map={},i.default=o,cc._RF.pop()},{}],HistoryData:[function(t,e,n){"use strict";cc._RF.push(e,"65c5frqKRhB1Kx16T3Auvc2","HistoryData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){this.timeProps={0:0,1:0,2:0}},i.BallData=function(){},cc._RF.pop()},{}],HomeScene:[function(t,e,n){"use strict";cc._RF.push(e,"edc1cmRLO9PDovq60JC8sq2","HomeScene");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p=i("ADLike"),h=i("ViewMgr"),f=i("BtnLike"),m=i("WXApi"),g=i("ViewBack"),_=i("SDKTools"),y=i("BottomBar"),v=i("MapView"),b=i("BaseScene"),w=i("Display"),S=i("GameGM"),M=i("GuideMgr"),C=i("DataMgr"),P=i("PlatformAd"),A=i("DateUtils"),T=i("EventMgr"),E=i("CommonMgr"),B=i("GuideDatas"),D=i("EventEnum"),I=i("LoaderMgr"),k=i("OnlineMgr"),O=i("TopMenu"),R=i("PlatformUtils"),N=i("PlotMgr"),L=i("AppDataMgr"),x=i("SDKEnums"),F=i("Enum");function U(){var t=null!==d&&d.apply(this,arguments)||this;return t.bgLock=null,t.mapNode=null,t.nAdLike=null,t.nViewBack=null,t.nTopMenu=null,t.nBottomBar=null,t.prefabTopbar=null,t.stateViewTemp=0,t}i=(o=cc._decorator).ccclass,o=o.property,r(U,d=b.default),Object.defineProperty(U.prototype,"MapView",{get:function(){return this.mapNode.getComponent(v.default)},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"TopMenu",{get:function(){return this.nTopMenu.getComponent(O.default)},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"ViewBack",{get:function(){return this.nViewBack.getComponent(g.default)},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"BottomBar",{get:function(){return this.nBottomBar.getComponent(y.default)},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"LeftADLike",{get:function(){return this.nAdLike.getComponent(f.default)},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"BottomADLike",{get:function(){return this.comAdLike.getComponent(p.default)},enumerable:!0,configurable:!0}),U.prototype.actionMoveMap=function(t,e){return this.MapView.moveMapToNode(t,e)},U.prototype.onDestroy=function(){d.prototype.onDestroy.call(this),E.default.I.clearLevelSelect()},U.prototype.onDisable=function(){this.MapView.release()},U.prototype.addEvent=function(){d.prototype.addEvent.call(this),T.EventMgr.on(D.EventEnum.MoveMapToNode,this.handleMoveMap,this),T.EventMgr.on(D.EventEnum.ActionPreview,this.handlePreview,this),T.EventMgr.on(D.EventEnum.ActionChanged,this.handleChanged,this),T.EventMgr.on(D.EventEnum.ActionViewTemp,this.handleViewTemp,this),T.EventMgr.on(D.EventEnum.ActionUnSelect,this.handleUnselect,this),T.EventMgr.on(D.EventEnum.ActionPlanTask,this.handlePlanTask,this),T.EventMgr.on(D.EventEnum.ActionPlotAnim,this.handlePlotAnim,this),T.EventMgr.on(D.EventEnum.PlayAddCoinAnim,this.handleAddCoin,this),T.EventMgr.on(D.EventEnum.UpdateExtInvite,this.handleInviteHp,this),T.EventMgr.on(D.EventEnum.SwitchLockBg,this.handleSwitchLockBg,this),T.EventMgr.on(D.EventEnum.LoadHomeSuccess,this.handleHomeSuccess,this),T.EventMgr.on(D.EventEnum.ActionCheckTaskNode,this.handleCheckTaskNode,this),R.default.isTecent&&"object"==typeof wx?(wx.onShow(this.handleShow),wx.onHide(this.handleHide)):(cc.game.on(cc.game.EVENT_SHOW,this.handleShow,this),cc.game.on(cc.game.EVENT_HIDE,this.handleHide,this))},U.prototype.removeEvent=function(){d.prototype.removeEvent.call(this),T.EventMgr.off(D.EventEnum.MoveMapToNode,this.handleMoveMap,this),T.EventMgr.off(D.EventEnum.ActionPreview,this.handlePreview,this),T.EventMgr.off(D.EventEnum.ActionChanged,this.handleChanged,this),T.EventMgr.off(D.EventEnum.ActionViewTemp,this.handleViewTemp,this),T.EventMgr.off(D.EventEnum.ActionUnSelect,this.handleUnselect,this),T.EventMgr.off(D.EventEnum.ActionPlanTask,this.handlePlanTask,this),T.EventMgr.off(D.EventEnum.ActionPlotAnim,this.handlePlotAnim,this),T.EventMgr.off(D.EventEnum.PlayAddCoinAnim,this.handleAddCoin,this),T.EventMgr.off(D.EventEnum.UpdateExtInvite,this.handleInviteHp,this),T.EventMgr.off(D.EventEnum.SwitchLockBg,this.handleSwitchLockBg,this),T.EventMgr.off(D.EventEnum.LoadHomeSuccess,this.handleHomeSuccess,this),T.EventMgr.off(D.EventEnum.ActionCheckTaskNode,this.handleCheckTaskNode,this),R.default.isTecent&&"object"==typeof wx?(wx.offShow(this.handleShow),wx.offHide(this.handleHide)):(cc.game.off(cc.game.EVENT_SHOW,this.handleShow,this),cc.game.off(cc.game.EVENT_HIDE,this.handleHide,this))},Object.defineProperty(U.prototype,"BannerOpen",{get:function(){return k.OnlineMgr.getBanner("home")},enumerable:!0,configurable:!0}),U.prototype.onOpen=function(){this.MapView.preload(),this.setHomeUI(F.HomeUIState.HideAll),1==_.default.getParamsInt(x.OnlineKeys.build_scene_module_ad,0)&&m.default.I.showSinglegridad();var t=k.OnlineMgr.getBool(x.OnlineKeys.GmFlag,R.default.isH5?1:0);this.nTopMenu.parent.getChildByName("btn_gm_test").active=t},U.prototype.handleHomeSuccess=function(){this.initUI(),this.preload()},U.prototype.onSceneShow=function(t){var e=t.detail||{};N.default.I.isPloting?e.hasOwnProperty("uiHome")&&this.setHomeUI(t.detail.uiHome):(e=e.hasOwnProperty("uiHome")?+e.uiHome:F.HomeUIState.ShowAll,this.setHomeUI(e))},U.prototype.onSceneHide=function(t){var e=t.detail||{};N.default.I.isPloting?e.hasOwnProperty("uiHome")&&this.setHomeUI(t.detail.uiHome):(e=e.hasOwnProperty("uiHome")?+e.uiHome:F.HomeUIState.OutAll,this.setHomeUI(e))},U.prototype.onBannerSuccess=function(t){var e,n;0!==(n=Math.max(0,cc.winSize.height-1334))&&t&&t.detail&&t.detail.height&&(e=w.default.getViewRatio(),n=t.detail.height*e+w.default.getIphoneBottomOffset()*e,this.setBottomOffset(n))},U.prototype.onBannerFailure=function(){this.setBottomOffset(220)},U.prototype.initUI=function(){w.default.PersistNode.TopBar||w.default.PersistNode.install(cc.instantiate(this.prefabTopbar)),w.default.adjustIphoneX(this.nTopMenu.parent),this.initEnter(),this.initMapView(),w.default.sdkEventWithKey(x.EventKeys.scene_enter),N.default.I.begin(this)},U.prototype.setBottomOffset=function(t){var e=this.nBottomBar.parent.getComponent(cc.Widget);e.bottom=t,e.updateAlignment()},U.prototype.initMapView=function(){this.MapView.init()},U.prototype.preload=function(){M.default.I.preload(B.GuideID.Lv1),this.scheduleOnce(this.initPreload,2)},U.prototype.initPreload=function(){[].forEach(function(t){return I.LoaderMgr.loadPrefabWithUrl(t)})},U.prototype.showLockBg=function(){this.bgLock.active=!0},U.prototype.hideLockBg=function(){this.bgLock.active=!1},Object.defineProperty(U.prototype,"isShowBottomGuide",{get:function(){var t=N.default.I.isPlotStart(),e=C.DataMgr.User.isPlanPlot(N.PlotID.Task01),n=C.DataMgr.User.isOverPlot(N.PlotID.Task01);return!(t||e||n)},enumerable:!0,configurable:!0}),U.prototype.setHomeUI=function(t){switch(t){case F.HomeUIState.None:return Promise.resolve();case F.HomeUIState.ShowAll:return w.default.topShow(F.TopBarType.Star),this.TopMenu.animWith(F.ComAction.Enter),this.LeftADLike.animWith(F.ComAction.Enter),this.BottomADLike.animWith(F.ComAction.Enter),this.BottomBar.animWith(F.ComAction.Enter);case F.HomeUIState.HideAll:return w.default.topShow(F.TopBarType.None),this.TopMenu.animWith(F.ComAction.Init),this.LeftADLike.animWith(F.ComAction.Init),this.BottomADLike.animWith(F.ComAction.Init),this.BottomBar.animWith(F.ComAction.Init);case F.HomeUIState.OutAll:return w.default.topShow(F.TopBarType.None),this.TopMenu.animWith(F.ComAction.Out),this.LeftADLike.animWith(F.ComAction.Out),this.BottomADLike.animWith(F.ComAction.Out),this.BottomBar.animWith(F.ComAction.Out);case F.HomeUIState.OutBottomMenu:return this.TopMenu.animWith(F.ComAction.Out),this.LeftADLike.animWith(F.ComAction.Out),this.BottomADLike.animWith(F.ComAction.Out),this.BottomBar.animWith(F.ComAction.Out);case F.HomeUIState.Menu:return this.LeftADLike.animWith(F.ComAction.Enter),this.TopMenu.animWith(F.ComAction.Enter);case F.HomeUIState.ShowTopMenuOutBottom:return w.default.topShow(F.TopBarType.Star),this.TopMenu.animWith(F.ComAction.Enter),this.LeftADLike.animWith(F.ComAction.Enter),this.BottomADLike.animWith(F.ComAction.Out),this.BottomBar.animWith(F.ComAction.Out);case F.HomeUIState.TopMenu:return w.default.topShow(F.TopBarType.Star),this.LeftADLike.animWith(F.ComAction.Enter),this.TopMenu.animWith(F.ComAction.Enter);case F.HomeUIState.Bottom:return this.BottomADLike.animWith(F.ComAction.Enter),this.BottomBar.animWith(F.ComAction.Enter);case F.HomeUIState.OutBottom:return this.BottomADLike.animWith(F.ComAction.Out),this.BottomBar.animWith(F.ComAction.Out);case F.HomeUIState.OutBottomAuto:return w.default.topShow(F.TopBarType.Star),this.BottomADLike.animWith(F.ComAction.Init),this.BottomBar.animWith(F.ComAction.Init);case F.HomeUIState.OutTopMenu:return w.default.topShow(F.TopBarType.None),this.LeftADLike.animWith(F.ComAction.Out),this.TopMenu.animWith(F.ComAction.Out)}},U.prototype.initBottomLv=function(t){this.BottomBar.initWithLevel(t)},U.prototype.initEnter=function(){var t=this;this.TopMenu.init(),this.BottomBar.init(),this.LeftADLike.init(),this.BottomADLike.setOffset(b.default.ADLikeOffsetY);var e=C.DataMgr.User.MaxLevel;this.showLockBg(),this.initBottomLv(e-1),this.initAnimEnter().then(function(){t.checkAutoTask(),t.actionEnterEnd(e)}).catch(function(){t.checkAutoTask(),t.actionEnterEnd(e)}),C.DataMgr.Maps.resetAddStar()},U.prototype.initAnimEnter=function(){return!N.default.I.isPlotStart()&&this.isShowBottomGuide?this.setHomeUI(F.HomeUIState.Bottom):this.setHomeUI(F.HomeUIState.HideAll)},U.prototype.actionEnterEnd=function(t){this.hideLockBg(),this.initBottomLv(t)},U.prototype.isOpenTask=function(){return!!C.DataMgr.User.isOverPlot(N.PlotID.Task01)&&(L.AppDataMgr.get(F.AppDataKey.GameQuit,!1),!0)},U.prototype.checkAutoTask=function(){var t=this;this.isOpenTask()&&this.BottomBar.actionAutoTask({failture:function(){return t.setHomeUI(F.HomeUIState.ShowAll)},context:this}),C.DataMgr.User.isOverPlot(N.PlotID.Task01)&&P.default.interstitialWithHome()},U.prototype.actionViewTempOut=function(){},U.prototype.onGMJump=function(t,e){return l(this,void 0,void 0,function(){var t;return u(this,function(n){switch(n.label){case 0:return(t=+e)?[4,C.DataMgr.syncBaseUserData({maxLevel:t,maxScore:0,addScore:0},!0)]:[3,2];case 1:n.sent(),w.default.PersistNode.loadToGame(),n.label=2;case 2:return[2]}})})},U.prototype.onGMTest=function(){h.ViewMgr.openPopwin(S.default,{data:{type:1}})},U.prototype.handleMoveMap=function(t){t=(e=t.detail)[0];var e=e[1];this.actionMoveMap(t,e)},U.prototype.handlePreview=function(t){t=t.detail,this.MapView.actionPreview(t)},U.prototype.handleChanged=function(t){t=t.detail,this.MapView.actionChangedTask(t)},U.prototype.handleCheckTaskNode=function(t){t=t.detail,this.MapView.actionCheckTaskNode(t)},U.prototype.handleViewTemp=function(t){var e,n=this,i=+t.detail.type,o=t.detail.data;switch(i){case 0:this.showLockBg(),this.stateViewTemp=1;break;case 1:1===this.stateViewTemp&&(this.hideLockBg(),this.ViewBack.animIn(o));break;case 2:case 3:1===this.stateViewTemp&&(this.stateViewTemp=0,e=this.ViewBack.Data,this.MapView.actionBackup({skin:1,data:e,furnitures:[e.add_furnitures[0],e.del_furnitures[0]],callback:function(){},context:this}).then(function(){return n.actionViewTempOut(i)}).catch(function(){return n.actionViewTempOut(i)}))}},U.prototype.handleUnselect=function(t){var e=t.detail.isChange;t=t.detail,this.MapView.actionUnselect(t,e)},U.prototype.handlePlanTask=function(t){var e,n,i,o,a=this,r=(c=t.detail).data,c=s({},c,{skin:1,furnitures:r.add_furnitures.slice()});t.detail.isMove?(e=r.plot_id,t=r.del_furnitures,r=r.add_furnitures,i=(e&&(n=C.DataMgr.Plot.getPlotById(e).focus).length?n:t)[0],o=r[0]||null,this.actionMoveMap(i,o).then(function(){return a.MapView.actionPlanTask(c)}).catch(function(){return a.MapView.actionPlanTask(c)})):this.MapView.actionPlanTask(c)},U.prototype.handlePlotAnim=function(t){var e=t.detail,n=(t=e.data,e.callback),i=e.context;this.MapView.actionPlotAnim(t).then(function(){return n&&n.call(i)}).catch(function(){return n&&n.call(i)})},U.prototype.handleAddCoin=function(){},U.prototype.handleShow=function(){},U.prototype.handleHide=function(){C.DataMgr.syncBaseUserData({lastTime:A.default.nowTime},!0)},U.prototype.handleInviteHp=function(){this.TopMenu.refreshWith(O.TopMenuUI.Invite)},U.prototype.handleSwitchLockBg=function(t){1==+t.detail?this.showLockBg():this.hideLockBg()},c([o(cc.Node)],U.prototype,"bgLock",void 0),c([o(cc.Node)],U.prototype,"mapNode",void 0),c([o(cc.Node)],U.prototype,"nAdLike",void 0),c([o(cc.Node)],U.prototype,"nViewBack",void 0),c([o(cc.Node)],U.prototype,"nTopMenu",void 0),c([o(cc.Node)],U.prototype,"nBottomBar",void 0),c([o(cc.Prefab)],U.prototype,"prefabTopbar",void 0),i=c([i],U),a.default=i,cc._RF.pop()},{}],ImageLabelNew:[function(t,e,n){"use strict";cc._RF.push(e,"15cc5MAteNBoLwaAkppxCHY","ImageLabelNew");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("RandomUtils");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.sprite=null,t.spriteColor=cc.color(255,255,255,255),t.spriteFrames=[],t.spritePlus=null,t.spriteMinus=null,t.spriteTimes=null,t.spriteProgress=null,t.spriteDiv=null,t.spriteColon=null,t.spriteInfinite=null,t.layoutSpaceX=2,t.stepTime=.05,t.stepRate=.2,t.isNumberAdd=!1,t._step=0,t._value=0,t._offset=0,t._spriteCaches=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(u,c=cc.Component),u.prototype.start=function(){this.sprite.node.active=!1,this.layoutSpaceX&&(this.node.getComponent(cc.Layout).spacingX=this.layoutSpaceX),this.isNumberAdd&&this.setText("0")},u.prototype.setText=function(t){for(var e=0;e<this._spriteCaches.length;e++)this._spriteCaches[e].node.active=!1;for(var n=t.length,i=0;i<n;i++){var o=void 0;(o=i<this._spriteCaches.length?this._spriteCaches[i]:this.createSprite()).node.active=!0,o.node.color=this.spriteColor,o.spriteFrame=this.getSpriteFrame(t.charAt(i))}},u.prototype.setValue=function(t,e,n){void 0===n&&(n=!0),this._char=e=void 0===e?"":e,t!=this._value&&n?(this._offset=t-this._value,this._step=Math.abs(Math.floor(this._offset*this.stepRate)),this._value=t,this.unschedule(this.updateNumber),this.schedule(this.updateNumber,this.stepTime)):(this._value=t,this.setText(""+this._char+this.value))},Object.defineProperty(u.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"LayoutSpaceX",{set:function(t){this.layoutSpaceX=t,this.node.getComponent(cc.Layout).spacingX=t},enumerable:!0,configurable:!0}),u.prototype.reset=function(t){this._char="",this._step=0,this._offset=0,this._value=t},u.prototype.getSpriteFrame=function(t){if(!Number.isNaN(+t))return this.spriteFrames[t];switch(t){case"+":return this.spritePlus;case"-":return this.spriteMinus;case"*":case"x":case"X":return this.spriteTimes;case"/":return this.spriteDiv;case"%":return this.spriteProgress;case":":case"\uff1a":return this.spriteColon;case"\u221e":return this.spriteInfinite}return null},u.prototype.createSprite=function(){var t=cc.instantiate(this.sprite.node);return t.parent=this.node,t=t.getComponent(cc.Sprite),this._spriteCaches.push(t),t},u.prototype.updateNumber=function(t){0==this._offset?this.unschedule(this.updateNumber):(t=Math.floor(this._step*(1+t)),t=l.default.range(Math.floor(.8*t),t),0!=this._offset&&0==t&&(t=1),0<this._offset?(this._offset-=t,this._offset=Math.max(this._offset,0)):this._offset<0&&(this._offset+=t,this._offset=Math.min(this._offset,0)),t=this._value-this._offset,this.setText(""+this._char+t))},s([o(cc.Sprite)],u.prototype,"sprite",void 0),s([o],u.prototype,"spriteColor",void 0),s([o(cc.SpriteFrame)],u.prototype,"spriteFrames",void 0),s([o(cc.SpriteFrame)],u.prototype,"spritePlus",void 0),s([o(cc.SpriteFrame)],u.prototype,"spriteMinus",void 0),s([o(cc.SpriteFrame)],u.prototype,"spriteTimes",void 0),s([o(cc.SpriteFrame)],u.prototype,"spriteProgress",void 0),s([o(cc.SpriteFrame)],u.prototype,"spriteDiv",void 0),s([o(cc.SpriteFrame)],u.prototype,"spriteColon",void 0),s([o(cc.SpriteFrame)],u.prototype,"spriteInfinite",void 0),s([o],u.prototype,"layoutSpaceX",void 0),s([o({tooltip:"\u95f4\u9694\u591a\u957f\u65f6\u95f4\u66f4\u65b0\uff0c\u5355\u4f4d\uff1a\u79d2"})],u.prototype,"stepTime",void 0),s([o({tooltip:"\u6bcf\u79d2\u504f\u79fb\u6570\u503c"})],u.prototype,"stepRate",void 0),s([o],u.prototype,"isNumberAdd",void 0),i=s([i],u),a.default=i,cc._RF.pop()},{}],ImageLabel:[function(t,e,n){"use strict";cc._RF.push(e,"4cf7af8vc1HVqPwtyQ2rbe/","ImageLabel");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0}),i=(c=cc._decorator).ccclass;var s,c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.images=[],t.text="0",t.unitimages=[],t.unitimages2=[],t.imageobjs=[],t}a(l,s=cc.Component),l.prototype.getFinalUnitImgs=function(t){var e=[];t-=4;var n=Math.floor(t/(26-Math.floor(t/26)));return 25<=n?(e.push(this.unitimages2[25]),e.push(this.unitimages2[25])):(e.push(this.unitimages2[n]),e.push(this.unitimages2[n+=t%(26-n)])),e},l.prototype.setText=function(t){if(this.spriteobj||(this.spriteobj=this.node.getChildByName("sprite").getComponent(cc.Sprite),this.spriteobj.node.active=!1,this.layout=this.getComponent(cc.Layout)),this.text=t[0],+this.text){for(var e=0;e<this.imageobjs.length;e++)this.imageobjs[e].node.active=!1;for(var n,i=this.text.length,o=0;o<i;o++){var a=+this.text.charAt(o),r=void 0;(r=o<this.imageobjs.length?this.imageobjs[o]:this.createSprite()).node.active=!0,r.spriteFrame=this.images[a]}2<=t.length&&((r=this.createSprite()).node.active=!0,"0"==t[1]?r.spriteFrame=this.unitimages[0]:"1"==t[1]?r.spriteFrame=this.unitimages[1]:"2"==t[1]?r.spriteFrame=this.unitimages[2]:"3"==t[1]?r.spriteFrame=this.unitimages[3]:(n=this.getFinalUnitImgs(+t[1]),r.spriteFrame=n[0],(t=this.createSprite()).node.active=!0,t.spriteFrame=n[1]))}else cc.error("only number")},l.prototype.createSprite=function(){var t=cc.instantiate(this.spriteobj.node);return t.parent=this.node,t=t.getComponent(cc.Sprite),this.imageobjs.push(t),t},l.prototype.onLoad=function(){this.spriteobj=this.node.getChildByName("sprite").getComponent(cc.Sprite),this.spriteobj.node.active=!1,this.layout=this.getComponent(cc.Layout)},l.prototype.start=function(){},r([c(cc.SpriteFrame)],l.prototype,"images",void 0),r([c(cc.String)],l.prototype,"text",void 0),r([c(cc.SpriteFrame)],l.prototype,"unitimages",void 0),r([c(cc.SpriteFrame)],l.prototype,"unitimages2",void 0),i=r([i],l),o.default=i,cc._RF.pop()},{}],InviteActPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"18a74nshEZKzbTr979icxHt","InviteActPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("Api"),h=i("ViewMgr"),f=i("DataMgr"),m=i("AudioMgr"),g=i("SDKAnalytics"),_=i("SDKEnums"),y=i("Enum"),v=i("OnlineMgr"),b=i("BaseAnimPopwin"),w=i("SDKTools"),S=i("InviteRewardPopwin"),M=i("DateUtils"),C=i("UserModel"),P=i("BattleMgr"),A=i("Display");function T(){var t=null!==u&&u.apply(this,arguments)||this;return t.content=null,t.m_items=[],t.m_InviteBtn=null,t.m_labday=null,t.m_labhour=null,t.m_labmin=null,t.m_invitecount=0,t.m_list=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(T,u=b.default),(d=T).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),A.default.s_isShowedActInvite=!0,this.type=t.data.type,this.reqList(this.type),g.default.event(_.EventKeys.invite_event_show,"")},T.prototype.onOpend=function(){u.prototype.onOpend.call(this)},Object.defineProperty(T.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),T.prototype.reqList=function(t){var e=this;p.default.getListByInvite({invite_type:t}).then(function(t){t=t.invite_list,e.renderList(t)})},T.prototype.getInvitelist=function(){var t=[];return this.m_list.forEach(function(e){0!=e.is_receive&&1==e.is_new&&1601222400<=e.create_time&&t.push(e)}),t},T.prototype.renderList=function(t){this.m_list=t=t||[];var e=this.getInvitelist();this.m_invitecount=e.length,e.length<3?this.m_InviteBtn.getComponent(cc.Animation).play("anim_btn_invite"):this.m_InviteBtn.getComponent(cc.Animation).play("anim_btn_get"),this.m_items.forEach(function(t,n){var i;n<e.length?(t.getComponent(cc.Animation).play("anim_friend_have"),i=t.getChildByName("have").getChildByName("head").getComponent(cc.Sprite),(n=e[n].invite_avatar_url)&&-1===n.indexOf("default_icon/icon_avatar")&&cc.loader.load({url:n,type:"png"},function(t,e){!t&&cc.isValid(i)&&(i.spriteFrame=new cc.SpriteFrame(e))})):t.getComponent(cc.Animation).play("anim_friend_no")})},T.prototype.onInvite=function(){m.AudioMgr.button(),this.m_invitecount<3?(w.default.share(_.ShareKeys.InviteAct,{invite_type:y.InviteType.Star}),g.default.event(_.EventKeys.invite_event_invite_tap,"")):(f.DataMgr.User.reqFinishInviteAct(),h.ViewMgr.openPopwin(S.default),h.ViewMgr.closePopwin(d,{anim:!0}).then(function(){P.default.I.removePopwinList()}),g.default.event(_.EventKeys.invite_event_prize_get,""))},T.prototype.update=function(){var t;this.m_labday&&this.m_labhour&&this.m_labmin&&(t=M.default.getDayHourMin((C.default.I.ActInviteTime-M.default.nowTime)/1e3),this.m_labday.string=t[0].toString(),this.m_labhour.string=t[1].toString(),this.m_labmin.string=t[2].toString())},T.prototype.onClose=function(){u.prototype.onClose.call(this)},T.prototype.onBack=function(){return c(this,void 0,void 0,function(){return l(this,function(){return m.AudioMgr.button(),h.ViewMgr.closePopwin(d,{anim:!0}).then(function(){P.default.I.removePopwinList()}),g.default.event(_.EventKeys.InviteClose,_.EventFrom.Invite),[2]})})},T.PREFAB_PATH="prefab/popwin/popwin_special",s([o(cc.Node)],T.prototype,"content",void 0),s([o(cc.Node)],T.prototype,"m_items",void 0),s([o(cc.Node)],T.prototype,"m_InviteBtn",void 0),s([o(cc.Label)],T.prototype,"m_labday",void 0),s([o(cc.Label)],T.prototype,"m_labhour",void 0),s([o(cc.Label)],T.prototype,"m_labmin",void 0),i=d=s([i],T),a.default=i,cc._RF.pop()},{}],InviteData:[function(t,e,n){"use strict";cc._RF.push(e,"988d8WgD9hIdIOzkBf81FL3","InviteData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){},cc._RF.pop()},{}],InviteItem:[function(t,e,n){"use strict";cc._RF.push(e,"6f7ccKwcbVDa6wZyQad8RR9","InviteItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var l,u=i("Api"),d=i("Const"),p=i("SDKTools"),h=i("DataMgr"),f=i("AudioMgr"),m=i("SDKAnalytics"),g=i("OnlineMgr"),_=i("Enum"),y=i("SDKEnums");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.txtReward=null,t.iconHead=null,t.btnYet=null,t.btnInvite=null,t.btnReward=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(v,l=cc.Component),v.prototype.init=function(t,e){var n=this;e?this.txtReward.string=e.reward_val+"":(i=g.OnlineMgr.InviteRewards,this.txtReward.string=""+i[Math.min(t,i.length-1)]);var i=e.invite_avatar_url;i&&-1===i.indexOf("default_icon/icon_avatar")&&cc.loader.load({url:i,type:"png"},function(t,e){!t&&cc.isValid(n.iconHead)&&(n.iconHead.spriteFrame=new cc.SpriteFrame(e))}),e&&(this.data=e,this.updateBtn())},v.prototype.doReward=function(){h.DataMgr.Point.updatePoint(_.ModuleType.InviteNum,-1),this.data.is_receive=_.RewardState.Received,this.updateBtn();var t=this.data.reward_val;h.DataMgr.User.reqDiamond(t,100),m.default.addLogRes(s({},d.default.LogRes.Diamond,{type:1,cnum:t,onum:h.DataMgr.User.Diamond,reason:"\u9080\u8bf7\u5956\u52b1",levelid:0})),m.default.event(y.EventKeys.InviteReward,y.EventFrom.Invite)},v.prototype.updateBtn=function(){switch(this.btnYet.active=this.btnReward.active=this.btnInvite.active=!1,this.data.is_receive){case _.RewardState.Not:this.btnInvite.active=!0;break;case _.RewardState.Receive:this.btnReward.active=!0;break;case _.RewardState.Received:this.btnYet.active=!0}},v.prototype.onShare=function(){f.AudioMgr.button();var t=this.data.type;p.default.share(y.ShareKeys.Invite,{invite_type:t}),m.default.event(y.EventKeys.InviteShare,y.EventFrom.Invite)},v.prototype.onReward=function(t){var e=this;f.AudioMgr.button();var n=(i=this.data).type,i=i.id;t.target.getComponent(cc.Button).interactable=!1,u.default.receivedByInvite({invite_id:i,invite_type:n}).then(function(){return e.doReward()}).catch(function(){return t.target.getComponent(cc.Button).interactable=!0})},c([o(cc.Label)],v.prototype,"txtReward",void 0),c([o(cc.Sprite)],v.prototype,"iconHead",void 0),c([o(cc.Node)],v.prototype,"btnYet",void 0),c([o(cc.Node)],v.prototype,"btnInvite",void 0),c([o(cc.Node)],v.prototype,"btnReward",void 0),i=c([i],v),a.default=i,cc._RF.pop()},{}],InvitePopwin:[function(t,e,n){"use strict";cc._RF.push(e,"67efdVui1JFaLA46NwoIN5g","InvitePopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("Api"),h=i("InviteItem"),f=i("ViewMgr"),m=i("DataMgr"),g=i("AudioMgr"),_=i("SDKAnalytics"),y=i("SDKEnums"),v=i("Enum"),b=i("OnlineMgr"),w=i("BaseAnimPopwin");function S(){var t=null!==u&&u.apply(this,arguments)||this;return t.item=null,t.content=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(S,u=w.default),(d=S).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.type=t.data.type},S.prototype.onOpend=function(){u.prototype.onOpend.call(this),this.reqList(this.type),m.DataMgr.Point.updatePoint(v.ModuleType.TempInvite)},Object.defineProperty(S.prototype,"BannerOpen",{get:function(){return b.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),S.prototype.reqList=function(t){var e=this;p.default.getListByInvite({invite_type:t}).then(function(t){t=t.invite_list,e.renderList(t)})},S.prototype.renderList=function(t){var e=this;(t=t||[]).forEach(function(t,n){return e.createNode(n,t)})},S.prototype.createNode=function(t,e){var n=cc.instantiate(this.item);this.content.addChild(n),n.getComponent(h.default).init(t,e)},S.prototype.onBack=function(){return c(this,void 0,void 0,function(){return l(this,function(){return g.AudioMgr.button(),f.ViewMgr.closePopwin(d,{anim:!0}),_.default.event(y.EventKeys.InviteClose,y.EventFrom.Invite),[2]})})},S.PREFAB_PATH="prefab/popwin/popwin_invite",s([o(cc.Prefab)],S.prototype,"item",void 0),s([o(cc.Node)],S.prototype,"content",void 0),i=d=s([i],S),a.default=i,cc._RF.pop()},{}],InviteRewardPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"97e79iD/edJKLJm/5apvRIS","InviteRewardPopwin");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=o("ViewMgr"),h=o("AudioMgr"),f=o("OnlineMgr"),m=o("BaseAnimPopwin"),g=o("UserModel");function _(){var t=null!==u&&u.apply(this,arguments)||this;return t.openflag=0,t}o=(i=cc._decorator).ccclass,i.property,r(_,u=m.default),(d=_).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.openflag=0},_.prototype.onOpend=function(){u.prototype.onOpend.call(this)},_.prototype.onopen=function(){return c(this,void 0,void 0,function(){return l(this,function(){return this.onBack(),[2]})})},Object.defineProperty(_.prototype,"BannerOpen",{get:function(){return f.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),_.prototype.onBack=function(){return c(this,void 0,void 0,function(){return l(this,function(){return h.AudioMgr.button(),p.ViewMgr.closePopwin(d,{anim:!0}),g.default.I.reqDiamond(1e4),[2]})})},_.PREFAB_PATH="prefab/popwin/popwin_invitereward",o=d=s([o],_),a.default=o,cc._RF.pop()},{}],InvitefirendPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"8e39fQ7YSZOrLuS7fAneBCS","InvitefirendPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("BasePopwin"),h=i("AudioMgr"),f=i("SDKAnalytics"),m=i("SDKEnums"),g=i("Enum"),_=i("OnlineMgr"),y=i("Friends"),v=i("AppDataMgr"),b=i("BattleMgr"),w=i("UserModel");function S(){var t=null!==u&&u.apply(this,arguments)||this;return t.content=null,t.invitebtns=[],t.friends=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(S,u=p.default),(d=S).prototype.onLoad=function(){var t=this;this.invitebtns.forEach(function(e,n){e.node.on("click",function(){t.friends.Inivte(n)})})},S.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),v.AppDataMgr.set(g.AppDataKey.InviteFriendOpen,1),w.default.I.reqAddDayReward(g.DayKeys.InviteFriendOpen,1)},S.prototype.onOpend=function(){u.prototype.onOpend.call(this),this.friends.show()},Object.defineProperty(S.prototype,"BannerOpen",{get:function(){return _.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),S.prototype.refresh=function(){h.AudioMgr.button(),this.friends.show()},S.prototype.onBack=function(){return c(this,void 0,void 0,function(){return l(this,function(){return h.AudioMgr.button(),this.doClose(d,!1).then(function(){b.default.I.removePopwinList()}),f.default.event(m.EventKeys.InviteClose,m.EventFrom.Invite),[2]})})},S.PREFAB_PATH="prefab/popwin/popwin_invitefriend",s([o(cc.Node)],S.prototype,"content",void 0),s([o(cc.Button)],S.prototype,"invitebtns",void 0),s([o(y.default)],S.prototype,"friends",void 0),i=d=s([i],S),a.default=i,cc._RF.pop()},{}],ItemAni:[function(t,e,n){"use strict";cc._RF.push(e,"5f082Sw4TJJXJVff5BUhvMy","ItemAni");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c=cc._decorator;function l(){return null!==s&&s.apply(this,arguments)||this}i=c.ccclass,c.property,a(l,s=cc.Component),l.prototype.onLoad=function(){this.ratio=1,this.play()},l.prototype.play=function(){this.doRunAction()},l.prototype.stop=function(){this.node.stopAllActions()},l.prototype.refresh=function(){},l.prototype.doRunAction=function(){this.node.stopAllActions(),this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.6*this.ratio).easing(cc.easeBackIn()),cc.callFunc(this.doRefresh,this),cc.scaleTo(.5,+this.ratio).easing(cc.easeElasticOut(3)),cc.rotateTo(1/60,5.2),cc.rotateTo(.25,30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,-30).easing(cc.easeCubicActionOut()),cc.rotateTo(.25,0).easing(cc.easeCubicActionOut()),cc.delayTime(2))))},l.prototype.doRefresh=function(){},i=r([i],l),o.default=i,cc._RF.pop()},{}],ItemTipPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"aa1c9dUMfJL/ZTv3QhndSCk","ItemTipPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("SDKEnums"),h=i("DataMgr"),f=i("ShareVideo"),m=i("SDKTools"),g=i("EventEnum"),_=i("ViewMgr"),y=i("OnlineMgr"),v=i("Display"),b=i("BattleMgr"),w=i("AudioMgr"),S=i("BaseAnimPopwin"),M=i("AudioEnum");function C(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_isreturnMain=!1,t.m_DesFrom="",t.m_Icons=[],t.m_ID=0,t.labdes=null,t.diamondobj=null,t.sharevideo1=null,t.img=null,t.isdouble=!1,t.time=0,t.Diamond=0,t.reward=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(C,u=S.default),d=C,Object.defineProperty(C.prototype,"ShareKey",{get:function(){return p.ShareKeys.ItemTipUse},enumerable:!0,configurable:!0}),C.openTip=function(t){return this.isopen=!0,0<h.DataMgr.User.getPropNum(1)?b.default.I.addPopwinList(d,{id:1,type:t}):0<h.DataMgr.User.getPropNum(2)?b.default.I.addPopwinList(d,{id:2,type:t}):0<h.DataMgr.User.getPropNum(0)?b.default.I.addPopwinList(d,{id:0,type:t}):b.default.I.addPopwinList(d,{id:1,type:t}),!0},C.prototype.addEvent=function(){u.prototype.addEvent.call(this),m.default.bindEvent(g.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},C.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),m.default.removeEvent(g.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},Object.defineProperty(C.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),C.prototype.onOpen=function(t){return c(this,void 0,void 0,function(){return l(this,function(){return u.prototype.onOpen.call(this,t),w.AudioMgr.playSound(M.AudioEnum.gift_notice),d.isopen=!0,this.m_ID=t.data.id,this.img.spriteFrame=this.m_Icons[this.m_ID],this.labdes.string=this.getDes(this.m_ID),this.initRewardUI(),v.default.getViewOffset(),[2]})})},C.prototype.handleTacticUpdate=function(){this.initRewardUI()},C.prototype.initRewardUI=function(){h.DataMgr.User.getPropNum(this.m_ID)<=0?this.sharevideo1.updateWith(this.ShareKey):this.sharevideo1.getComponent(cc.Animation).play("state_use_free")},C.prototype.onVideoUse=function(){w.AudioMgr.button(),m.default.dispatch(this.ShareKey,{success:this.handleReward,context:this})},C.prototype.getDes=function(t){return 0==t?"\u5f69\u7403\uff1a\u4e0e\u4efb\u610f\u7403\u5408\u6210":1==t?"\u968f\u673a\uff1a\u6253\u4e71\u6240\u6709\u7403\u7684\u4f4d\u7f6e":2==t?"\u9524\u5b50\uff1a\u6d88\u9664\u4efb\u610f\u7403":""},C.prototype.onuse=function(){w.AudioMgr.button(),0<h.DataMgr.User.getPropNum(this.m_ID)?(this.useitem(this.m_ID),this.handleClose(!1)):m.default.dispatch(this.ShareKey,{success:this.handleReward,context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmoq",branchDim:this.m_ID.toString()},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmor",wxgamebranchdim:this.m_ID.toString()})},C.prototype.handleReward=function(){var t=this;h.DataMgr.User.reqProps(this.m_ID,1).then(function(){t.useitem(t.m_ID),t.handleClose(!1)})},C.prototype.useitem=function(t){0==t?b.default.I.useJoker():1==t?b.default.I.useReset():b.default.I.setUseHammer()},C.prototype.onback=function(){w.AudioMgr.button(),this.handleClose(!1),b.default.I.showItemTip(!0),b.default.I.worningtime=-2},C.prototype.onBannerSuccess=function(t){u.prototype.onBannerSuccess.call(this,t),v.default.getViewOffset()},C.prototype.handleClose=function(t){return void 0===t&&(t=!0),c(this,void 0,Promise,function(){return l(this,function(){return[2,_.ViewMgr.closePopwin(d,{anim:t}).then(function(){b.default.I.removePopwinList(),d.isopen=!1})]})})},C.PREFAB_PATH="prefab/popwin/popwin_itemtip",C.isopen=!1,s([o(cc.SpriteFrame)],C.prototype,"m_Icons",void 0),s([o(cc.Label)],C.prototype,"labdes",void 0),s([o(cc.Node)],C.prototype,"diamondobj",void 0),s([o(f.default)],C.prototype,"sharevideo1",void 0),s([o(cc.Sprite)],C.prototype,"img",void 0),i=d=s([i],C),a.default=i,cc._RF.pop()},{}],LabelQQOffset:[function(t,e,n){"use strict";cc._RF.push(e,"48605pefkFNQZfEvH3/c0vh","LabelQQOffset");var i=t,o=e,a=n,r=__EXTENDS__();o=__DECORATE__,Object.defineProperty(a,"__esModule",{value:!0});var s,c=i("PlatformUtils");function l(){return null!==s&&s.apply(this,arguments)||this}i=cc._decorator.ccclass,r(l,s=cc.Component),l.prototype.start=function(){c.default.isQQ&&(this.node.y=this.node.y-3)},i=o([i],l),a.default=i,cc._RF.pop()},{}],LayerMgr:[function(t,e,n){"use strict";cc._RF.push(e,"18f89hhBiRPgr8URqP4i8RH","LayerMgr");var i=n;function o(){this.layers=[],this.init()}Object.defineProperty(i,"__esModule",{value:!0}),o.prototype.init=function(){this.layers.forEach(function(t){return t.destroy()}),this.layers=[];for(var t=cc.director.getScene(),e=cc.winSize,n=["Bg","Popwin","Modal","Tips","Mask","Guide"],i=0;i<n.length;i++){var o=new cc.Node;o.anchorX=.5,o.anchorY=.5,o.setContentSize(e),o.setPosition(e.width/2,e.height/2),o.name=n[i],t.addChild(o),this.layers.push(o)}},o.prototype.reset=function(){this.layers.forEach(function(t){return t.destroy()}),this.layers=[]},o.prototype.addTo=function(t,e){var n=this.layers[t];cc.isValid(n)||this.init(),e.parent=this.layers[t]},o.prototype.getLayer=function(t){return this.layers[t]},Object.defineProperty(o,"I",{get:function(){return this._instance||(this._instance=new o)},enumerable:!0,configurable:!0}),i.default=o,(i=i.Layer||(i.Layer={}))[i.Bg=0]="Bg",i[i.Popwin=1]="Popwin",i[i.Modal=2]="Modal",i[i.Tips=3]="Tips",i[i.Mask=4]="Mask",i[i.Guide=5]="Guide",cc._RF.pop()},{}],LevelupPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"512e9jZ41tElKd/9SMil0MT","LevelupPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("BasePopwin"),h=i("ViewMgr"),f=i("ShareVideo"),m=i("SDKEnums"),g=i("SDKTools"),_=i("EventEnum"),y=i("BattleMgr"),v=i("OnlineMgr"),b=i("RandomUtils"),w=i("Display"),S=i("AudioMgr"),M=i("AudioEnum"),C=i("Water"),P=i("WXApi"),A=i("CheckTools");function T(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_Titles=[],t.AnimObj=null,t.boxs=[],t.m_sharebtn=null,t.m_lv=null,t.img=null,t.reward=1,t.time=0,t}i=(o=cc._decorator).ccclass,o=o.property,r(T,u=p.default),d=T,Object.defineProperty(T.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),T.prototype.playboxani=function(){var t=b.default.random(0,3);this.boxs[t].getComponent(cc.Animation).play(),this.time=5},T.prototype.onupdatesharestate=function(){u.prototype.onupdatesharestate.call(this),2!=y.default.I.m_curlevel?this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?this.m_sharebtn.update2shareforce():this.initReward():this.comShareToggle.node.active=!1},T.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.reward=1,2==y.default.I.m_curlevel?this.node.getChildByName("lvup").getChildByName("pro").getChildByName("btn_skip").scale=0:this.node.getChildByName("lvup").getChildByName("pro").getChildByName("btn_skip").scale=1,this.node.getChildByName("lvup").getChildByName("con").y=w.default.getTargetPos(y.default.I.node.getChildByName("top").getChildByName("progresspos"),this.node.getChildByName("lvup")).y,this.m_lv.string=y.default.I.m_curlevel.toString(),this.img.spriteFrame=this.m_Titles[y.default.I.getTitle(y.default.I.m_curlevel)],S.AudioMgr.playSound(M.AudioEnum.level_up),P.default.I.showsideAD(),this.doAni(),this.time=4,this.onopenbox(),this.initReward(),w.default.getViewOffset()},T.prototype.doAni=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,C.default.wait(200)];case 1:return t.sent(),cc.tween(this.node.getChildByName("lvup").getChildByName("con")).to(.5,{y:150},{easing:cc.easing.quartOut}).start(),[2]}})})},T.prototype.onopenbox=function(){this.AnimObj.getComponent(cc.Animation).play(),2==y.default.I.m_curlevel?y.default.I.sdkEventWithKey(m.EventKeys.Exp2_panel3to1ChestTap):3==y.default.I.m_curlevel?y.default.I.sdkEventWithKey(m.EventKeys.Exp3_panel3to1ChestTap):4==y.default.I.m_curlevel?y.default.I.sdkEventWithKey(m.EventKeys.Exp4_panel3to1ChestTap):5==y.default.I.m_curlevel&&y.default.I.sdkEventWithKey(m.EventKeys.Exp5_panel3to1ChestTap)},T.prototype.addEvent=function(){g.default.bindEvent(_.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},T.prototype.removeEvent=function(){g.default.removeEvent(_.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},T.prototype.initReward=function(){if(2==y.default.I.m_curlevel)return this.m_sharebtn.getComponent(cc.Animation).play("state_lvup_free"),void(this.m_sharebtn.node.getChildByName("layout").getChildByName("x2").active=!1);this.m_sharebtn.updateWith(m.ShareKeys.levelupReward),this.m_sharebtn.node.getChildByName("layout").getChildByName("x2").active=!0},T.prototype.onget=function(){var t=this;if(2==y.default.I.m_curlevel)return h.ViewMgr.closePopwin(d,{anim:!1}),void y.default.I.checkOpenCps();this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?g.default.dispatchType(m.ShareVideoType.Share,m.ShareKeys.levelupReward,{success:function(){A.default.s_sharefailforcetimes<g.default.getParamsInt(m.OnlineKeys.share_force_fail_times,2)?(A.default.s_sharefailforcetimes++,w.default.showTip("\u5206\u4eab\u5931\u8d25\uff0c\u6c42\u52a9\u7fa4\u53cb\u8bd5\u8bd5\u5427\uff5e")):t.onSuccess()},context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmo8",branchDim:this.reward.toString()},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmo9",wxgamebranchdim:this.reward.toString()}):g.default.dispatch(m.ShareKeys.levelupReward,{success:this.onSuccess,context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmo8",branchDim:this.reward.toString()},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmo9",wxgamebranchdim:this.reward.toString()})},T.prototype.onSuccess=function(){this.reward=2,h.ViewMgr.closePopwin(d,{anim:!1}),y.default.I.checkOpenCps()},T.prototype.onBack=function(){w.default.s_iscloselvup=!0,w.default.showLvupInterstitial(),h.ViewMgr.closePopwin(d,{anim:!1}),y.default.I.checkOpenCps()},T.prototype.onClose=function(){u.prototype.onClose.call(this),P.default.I.hidesideAD(),y.default.I.doLevelUpAni(this.reward).then(function(){y.default.I.removePopwinList()}),2==y.default.I.m_curlevel?y.default.I.sdkEventWithKey(m.EventKeys.Exp2_panel3to1ChestClose):3==y.default.I.m_curlevel?y.default.I.sdkEventWithKey(m.EventKeys.Exp3_panel3to1ChestClose):4==y.default.I.m_curlevel?y.default.I.sdkEventWithKey(m.EventKeys.Exp4_panel3to1ChestClose):5==y.default.I.m_curlevel&&y.default.I.sdkEventWithKey(m.EventKeys.Exp5_panel3to1ChestClose)},T.prototype.update=function(){},T.PREFAB_PATH="prefab/popwin/popwin_lvup",s([o(cc.SpriteFrame)],T.prototype,"m_Titles",void 0),s([o(cc.Node)],T.prototype,"AnimObj",void 0),s([o(cc.Node)],T.prototype,"boxs",void 0),s([o(f.default)],T.prototype,"m_sharebtn",void 0),s([o(cc.Label)],T.prototype,"m_lv",void 0),s([o(cc.Sprite)],T.prototype,"img",void 0),i=d=s([i],T),a.default=i,cc._RF.pop()},{}],LoadGame:[function(t,e,n){"use strict";cc._RF.push(e,"521dfS3r0dG5IQx6FbGoc0M","LoadGame");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=o("LayerMgr"),p=o("ViewMgr"),h=o("WXApi"),f=o("Debug"),m=o("SDKEnums"),g=o("ArrayUtils"),_=o("CheckTools"),y=o("SDKAnalytics"),v=o("Enum");function b(){var t=null!==u&&u.apply(this,arguments)||this;return t.mProgress=0,t}o=(i=cc._decorator).ccclass,i.property,r(b,u=cc.Component),b.prototype.action=function(t){this.params=t,this.loadState=0,this.mProgress=0,this.loadInfo=Object.create({state:0,scene:!1}),this.initRes()},b.prototype.initRes=function(){this.loadRes()},b.prototype.loadRes=function(){var t=this,e=(e=[]).map(function(){return function(){return Promise.resolve()}});g.default.queue(e).then(function(){return t.preloadScene()}).then(function(){return t.handleResSuccess()}).catch(function(){y.default.event(m.EventKeys.resource_redown_panel_show,""),cc.director.loadScene("LoadScene",function(){p.ViewMgr.init()})})},b.prototype.preloadScene=function(){var t=this;return new Promise(function(e,n){cc.director.preloadScene((_.default.IsNewGameScene,v.SceneTypes.GameSceneNew),t.onProgress.bind(t,t.mProgress),t.onLoaded.bind(t,e,n))})},b.prototype.setProgress=function(t){this.mProgress+=t},b.prototype.onProgress=function(){},b.prototype.onLoaded=function(t,e,n){n?e(v.LoadType.Scene):t()},b.prototype.handleResSuccess=function(){this.loadState++,this.checkEnter()},b.prototype.checkEnter=function(){1===this.loadState&&this.enterGame()},b.prototype.enterGame=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return this.params.before&&this.params.before.call(this.params.context),d.default.I.reset(),cc.director.loadScene((_.default.IsNewGameScene,v.SceneTypes.GameSceneNew),function(e){p.ViewMgr.init(),h.default.I.showSinglegridad(),t.params.after&&t.params.after.call(t.params.context),f.default.warn("\u6e38\u620f\u573a\u666f\u52a0\u8f7d\u6210\u529f: "+v.SceneTypes.GameScene,e)}),[2]})})},o=s([o],b),a.default=o,cc._RF.pop()},{}],LoadHome:[function(t,e,n){"use strict";cc._RF.push(e,"a5e14A5OaFEEqDSy95m4T9Z","LoadHome");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=o("LayerMgr"),p=o("ViewMgr"),h=o("SDKEnums"),f=o("ArrayUtils"),m=o("AudioMgr"),g=o("AudioEnum"),_=o("SDKAnalytics"),y=o("LoaderMgr"),v=o("Enum");function b(){return null!==u&&u.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(b,u=cc.Component),b.prototype.action=function(t){this.params=t,this.loadState=0,this.loadInfo=Object.create({state:0,plot:!1,scene:!1}),this.timeErrors=((t={})[v.LoadType.Scene]=0,t),this.initUI(),this.initRes()},b.prototype.initUI=function(){this.onWaitEnd()},b.prototype.onWaitEnd=function(){this.loadState++,this.checkEnter()},b.prototype.initRes=function(){this.loadRes(-1)},b.prototype.loadRes=function(t){var e=this,n=[];this.loadInfo.plot||n.push(v.LoadType.Plot),n=n.map(function(t){return function(){if(t===v.LoadType.Plot)return e.loadResPlot()}}),-1!=t&&this.timeErrors.hasOwnProperty(t)&&_.default.event("enter_home_retry_"+t+"_"+this.timeErrors[t],""),f.default.queue(n).then(function(){return e.preloadScene()}).then(function(){return e.handleResSuccess()}).then(function(){-1!=t&&_.default.event("enter_home_retry_success","")}).catch(function(t){_.default.event(h.EventKeys.resource_redown_panel_show,""),_.default.event("enter_home_error_"+t,""),cc.director.loadScene("LoadScene",function(){p.ViewMgr.init()})})},b.prototype.loadResPlot=function(){var t=this;return new Promise(function(e){y.LoaderMgr.loadPrefabWithUrl("prefab/game/game_story").then(function(){t.loadInfo.plot=!0,e(null)}).catch(function(){t.loadInfo.plot=!0,e(null)})})},b.prototype.preloadScene=function(){var t=this;return new Promise(function(e,n){cc.director.preloadScene(v.SceneTypes.HomeScene,t.onProgress.bind(t,0),t.onLoaded.bind(t,e,n))})},b.prototype.onProgress=function(){},b.prototype.onLoaded=function(t,e,n){n?(this.loadInfo.scene=!1,e(v.LoadType.Scene)):(this.loadInfo.scene=!0,t())},b.prototype.handleResSuccess=function(){this.loadState++,this.checkEnter()},b.prototype.checkEnter=function(){2===this.loadState&&this.enterGame()},b.prototype.enterGame=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return this.params.before&&this.params.before.call(this.params.context),d.default.I.reset(),cc.director.loadScene(v.SceneTypes.HomeScene,function(){m.AudioMgr.stopMusic(),m.AudioMgr.playMusic(g.AudioEnum.music3,!0),p.ViewMgr.init(),t.params.after&&t.params.after.call(t.params.context)}),[2]})})},o=s([o],b),a.default=o,cc._RF.pop()},{}],LoadPlist:[function(t,e,n){"use strict";cc._RF.push(e,"e4685fS4ilPB7bBJlXwd8qP","LoadPlist");var i=n;function o(){this.BRACE_REGEX=/[\{\}]/g}Object.defineProperty(i,"__esModule",{value:!0}),o.prototype.parseSize=function(t){var e=(t=t.slice(1,-1)).split(",");return t=parseFloat(e[0]),e=parseFloat(e[1]),new cc.Size(t,e)},o.prototype.parseVec2=function(t){var e=(t=t.slice(1,-1)).split(",");return t=parseFloat(e[0]),e=parseFloat(e[1]),new cc.Vec2(t,e)},o.prototype.parseTriangles=function(t){return t.split(" ").map(parseFloat)},o.prototype.parseVertices=function(t){return t.split(" ").map(parseFloat)},o.prototype.parseRect=function(t){return t=(t=t.replace(this.BRACE_REGEX,"")).split(","),new cc.Rect(parseFloat(t[0]||"0"),parseFloat(t[1]||"0"),parseFloat(t[2]||"0"),parseFloat(t[3]||"0"))},o.prototype.parsePlist=function(t,e){var n,i=t.metadata,o=t.frames,a=(t=new cc.SpriteAtlas).getSpriteFrames();for(n in o){var r=o[n],s=!1,c=void 0,l=void 0,u=void 0;0===i.format?(s=!1,c="{"+r.originalWidth+","+r.originalHeight+"}",l="{"+r.offsetX+","+r.offsetY+"}",u="{{"+r.x+","+r.y+"},{"+r.width+","+r.height+"}}"):1===i.format||2===i.format?(s=r.rotated,c=r.sourceSize,l=r.offset,u=r.frame):3===i.format&&(s=r.textureRotated,c=r.spriteSourceSize,l=r.spriteOffset,u=r.textureRect);var d=new cc.SpriteFrame;if(d.setTexture(e,this.parseRect(u),!!s,this.parseVec2(l),this.parseSize(c)),r.triangles){var p=this.parseVertices(r.vertices),h=this.parseVertices(r.verticesUV);d.vertices={triangles:this.parseTriangles(r.triangles),x:[],y:[],u:[],v:[]};for(var f=0;f<p.length;f+=2)d.vertices.x.push(p[f]),d.vertices.y.push(p[f+1]);for(f=0;f<h.length;f+=2)d.vertices.u.push(h[f]),d.vertices.v.push(h[f+1])}a[cc.path.mainFileName(n)]=d}return t._spriteFrames=a,t},o.prototype.load=function(t,e,n,i){var o=this,a=t+"/"+e;cc.loader.load(a,function(e,r){return e?i(e):(a=t+"/"+n,void cc.loader.load(a,function(t,e){return t?i(t):(e=o.parsePlist(r,e),void i(null,e))}))})},Object.defineProperty(o,"I",{get:function(){return this._instance||(this._instance=new o)},enumerable:!0,configurable:!0}),o._instance=null,i.default=o,cc._RF.pop()},{}],LoadScene:[function(t,e,n){"use strict";cc._RF.push(e,"ef6f6SX7FRAOrbvCxkiKHw2","LoadScene");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0}),i("Main");var u,d,p=i("Api"),h=i("ViewMgr"),f=i("Const"),m=i("SDKTools"),g=i("DataMgr"),_=i("SDKEnums"),y=i("ArrayUtils"),v=i("HandleData"),b=i("SDKAnalytics"),w=i("LocalMgr"),S=i("MapConfig"),M=i("OnlineMgr"),C=i("AppDataMgr"),P=i("Enum"),A=i("LoaderMgr");function T(){var t=null!==d&&d.apply(this,arguments)||this;return t.txtProgress=null,t.progressBar=null,t.persistNode=null,t.mProgress=0,t.errorNum=0,t}i=(o=cc._decorator).ccclass,o=o.property,r(T,d=cc.Component),T.prototype.start=function(){this.loadInfo=Object.create({state:0,json:!1,skin:!1,plot:!1,scene:!1}),this.errorNum=0,this.preload(),this.initEnv(),this.persistNode.zIndex=1e4,cc.game.addPersistRootNode(this.persistNode)},T.prototype.preload=function(){},T.prototype.initEnv=function(){return c(this,void 0,void 0,function(){var t,e,n=this;return l(this,function(i){switch(i.label){case 0:return[4,this.awaitWrap(m.default.env(f.default.Version))];case 1:if(t=i.sent(),e=t[0],t[1],e){if(!(this.errorNum<=3))return[2,m.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u521d\u59cb\u5316\u73af\u5883\u5931\u8d25\uff0c\u8bf7\u70b9\u51fb\u3010\u91cd\u8bd5\u3011",showCancel:!1,confirmText:"\u91cd\u8bd5",success:function(){n.initEnv&&n.initEnv()}})];this.initEnv(),this.errorNum++}return(e=m.default.CdnUrl)&&"object"==typeof window&&"object"==typeof window.wxDownloader&&(window.wxDownloader.REMOTE_SERVER_ROOT=""+e+f.default.GameEnName),this.timeErrors=((e={})[u.Json]=0,e[u.Scene]=0,e[u.Package]=0,e),this.loadLogin(!1),this.loadRes(-1),m.default.updateOnlineParams().then(function(){return M.OnlineMgr.init()}),[2]}})})},T.prototype.loadRes=function(t){var e=this,n=[];this.loadInfo.json||n.push(u.Json),this.loadInfo.skin||n.push(u.Skin),n=n.map(function(t){return function(){switch(t){case u.Json:return e.loadResJson();case u.Skin:return e.loadResSkin()}}}),-1!=t&&this.timeErrors.hasOwnProperty(t)&&b.default.event("enter_game_retry_"+t+"_"+this.timeErrors[t],""),y.default.queue(n).then(function(){return e.preloadScene()}).then(function(){return e.handleResSuccess()}).then(function(){-1!=t&&b.default.event("enter_game_retry_success","")}).catch(function(t){b.default.event(_.EventKeys.resource_redown_panel_show,""),b.default.event("enter_game_error_"+t,""),cc.director.loadScene("LoadScene",function(){h.ViewMgr.init()})})},T.prototype.loadResSkin=function(){return c(this,void 0,Promise,function(){var t,e,n,i=this;return l(this,function(){return e=w.LocalMgr.get("WebData"),t=f.default.BaseData,e&&"object"==typeof e[t]&&"object"==typeof e[t].userInfo&&(e=(e[f.default.BaseData].userInfo||{}).curskin,0<(n=+e))?[2,new Promise(function(t,e){A.LoaderMgr.loadResWithUrl("anims/skin/anim_skin0"+(n+1),cc.AnimationClip,{success:function(e){i.loadInfo.skin=!0,t(e)},failure:function(t){i.loadInfo.skin=!1,e(t)},context:i})})]:(this.loadInfo.skin=!0,[2,Promise.resolve()])})})},T.prototype.loadResJson=function(){var t=this;return new Promise(function(e,n){var i=S.MapConfig.JsonPath,o=i.Zip,a=i.Plot,r=i.Milestone,s=i.Missions,c=i.ActiveReward,l=i.Daily_rewards,d=i.Lottery,p=i.Lottery_pack,h=i.RedPacket,f=[a,r,s,c,l,d,p,h];o=cc.url.raw("resources/data/"+o),cc.loader.load({url:o,type:"binary"},function(i,o){i?(t.loadInfo.json=!1,n(u.Json)):JSZip.loadAsync(o).then(function(t){var e,n,i=[];for(e in t.files)t.files.hasOwnProperty(e)&&0<=f.indexOf(e)&&(n=t.files[e],i.push(n.async("text")));var o=Object.keys(t.files).filter(function(t){return 0<=f.indexOf(t)}).map(function(t){return t.replace("configs/","")});return new Promise(function(t){return Promise.all(i).then(function(e){return t([o,e])})})}).then(function(n){var i=n[0],o=n[1];i.forEach(function(t,e){var n=JSON.parse(o[e]);switch(t){case a:g.DataMgr.Plot.setCfg(n);break;case r:g.DataMgr.Milestone.setCfg(n);break;case s:g.DataMgr.Missions.setCfg(n);break;case c:g.DataMgr.Missions.setActCfg(n);break;case l:g.DataMgr.Config.initSignDB(n);break;case d:g.DataMgr.Config.initLotteryDB(n);break;case p:g.DataMgr.Config.initLotteryPackDB(n);break;case h:g.DataMgr.Config.initRedPacketDB(n)}}),t.loadInfo.json=!0,t.setProgress(.1),e(null)}).catch(function(){t.loadInfo.json=!1,n(u.Json)})})})},T.prototype.preloadScene=function(){var t=this;return new Promise(function(e,n){cc.director.preloadScene(w.LocalMgr.get(P.LocalDataKey.IsWaterMelon)?P.SceneTypes.GameWatermelon:P.SceneTypes.GameSceneNew,t.onProgress.bind(t,t.mProgress),t.onLoaded.bind(t,e,n))})},T.prototype.onProgress=function(t,e,n,i){i&&cc.isValid(this.progressBar)&&this.progressBar.progress<(t+=e/n*(1-t))&&(this.progressBar.progress=t,t=Math.min(Math.floor(100*t),100),this.txtProgress.string=""+t)},T.prototype.onLoaded=function(t,e,n){n?e(u.Scene):t()},T.prototype.setProgress=function(t){this.mProgress+=t,this.progressBar.progress=this.mProgress},T.prototype.handleResSuccess=function(){var t=this;b.default.newLoadingFinish(!0).then(function(){t.sdkEventWithKey(_.EventKeys.FirstLogin_Loading100Reach),t.loadInfo.state+=1,t.checkEnter()}).catch(function(){t.loadInfo.state+=1,t.checkEnter()})},T.prototype.loadLogin=function(t){var e=this;m.default.login(t).then(function(t){return e.handleLoginSuccess(t)}).catch(function(t){return e.handleLoginFailure(t)})},T.prototype.handleLoginSuccess=function(t){this.loadInfo.state+=1,v.default.doSuccess(t),this.checkEnter(),this.sdkEventWithKey(_.EventKeys.FirstLogin_LoadingStart);var e=C.AppDataMgr.get(P.AppDataKey.UserInviteUid,"");t=C.AppDataMgr.get(P.AppDataKey.UserInviteType,0),e&&t&&e+""!=g.DataMgr.UserBase.ID+""&&(p.default.setInviteFriend({invite_uid:e,invite_type:t}),C.AppDataMgr.set(P.AppDataKey.UserInviteUid,0))},T.prototype.handleLoginFailure=function(){var t=this;m.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u6e38\u620f\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u70b9\u51fb\u3010\u91cd\u65b0\u767b\u5f55\u3011",showCancel:!1,confirmText:"\u91cd\u65b0\u767b\u5f55",success:function(){t.loadLogin&&t.loadLogin(!0)}})},T.prototype.checkEnter=function(){2===this.loadInfo.state&&this.enterGame()},T.prototype.enterGame=function(){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return m.default.checkUpdate(),[4,m.default.getAllData().catch(function(){})];case 1:return t=e.sent()||w.LocalMgr.get("WebData")||{base_data:{}},v.default.doSuccess(t),cc.director.loadScene(w.LocalMgr.get(P.LocalDataKey.IsWaterMelon)?P.SceneTypes.GameWatermelon:P.SceneTypes.GameSceneNew,function(){h.ViewMgr.init()}),[2]}})})},T.prototype.awaitWrap=function(t){return c(this,void 0,void 0,function(){return l(this,function(){return[2,t.then(function(t){return[null,t]}).catch(function(t){return[t,null]})]})})},T.prototype.sdkEventWithStr=function(t){g.DataMgr.User.isHadEventKey(t)||((t=_.EventKeys[t])&&b.default.event(t,""),g.DataMgr.User.reqaddEventKey(t))},T.prototype.sdkEventWithKey=function(t){g.DataMgr.User.isHadEventKey(t.toString())||(t&&b.default.event(t,""),g.DataMgr.User.reqaddEventKey(t.toString()))},s([o(cc.Label)],T.prototype,"txtProgress",void 0),s([o(cc.ProgressBar)],T.prototype,"progressBar",void 0),s([o(cc.Node)],T.prototype,"persistNode",void 0),i=s([i],T),a.default=i,(i=u=u||{})[i.Json=1]="Json",i[i.Page=2]="Page",i[i.Room=3]="Room",i[i.Plot=4]="Plot",i[i.Guide=5]="Guide",i[i.Scene=6]="Scene",i[i.Package=7]="Package",i[i.Skin=8]="Skin",cc._RF.pop()},{}],LoadWatermelon:[function(t,e,n){"use strict";cc._RF.push(e,"7604e61DPJDkqg3lxOjcwQR","LoadWatermelon");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=o("LayerMgr"),p=o("ViewMgr"),h=o("WXApi"),f=o("Debug"),m=o("SDKEnums"),g=o("ArrayUtils"),_=o("SDKAnalytics"),y=o("Enum"),v=o("Display");function b(){var t=null!==u&&u.apply(this,arguments)||this;return t.mProgress=0,t}o=(i=cc._decorator).ccclass,i.property,r(b,u=cc.Component),b.prototype.action=function(t){this.params=t,this.loadState=0,this.mProgress=0,this.loadInfo=Object.create({state:0,scene:!1}),this.initRes()},b.prototype.initRes=function(){this.loadRes()},b.prototype.loadRes=function(){var t=this,e=(e=[]).map(function(){return function(){return Promise.resolve()}});g.default.queue(e).then(function(){return t.preloadScene()}).then(function(){return t.handleResSuccess()}).catch(function(){_.default.event(m.EventKeys.resource_redown_panel_show,""),cc.director.loadScene("LoadScene",function(){p.ViewMgr.init()})})},b.prototype.preloadScene=function(){var t=this;return new Promise(function(e,n){cc.director.preloadScene(y.SceneTypes.GameWatermelon,t.onProgress.bind(t,t.mProgress),t.onLoaded.bind(t,e,n))})},b.prototype.setProgress=function(t){this.mProgress+=t},b.prototype.onProgress=function(){},b.prototype.onLoaded=function(t,e,n){n?e(y.LoadType.Scene):t()},b.prototype.handleResSuccess=function(){this.loadState++,this.checkEnter()},b.prototype.checkEnter=function(){1===this.loadState&&this.enterGame()},b.prototype.enterGame=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return this.params.before&&this.params.before.call(this.params.context),d.default.I.reset(),v.default.hideTop(),cc.director.loadScene(y.SceneTypes.GameWatermelon,function(e){p.ViewMgr.init(),h.default.I.showSinglegridad2(),t.params.after&&t.params.after.call(t.params.context),f.default.warn("\u6e38\u620f\u573a\u666f\u52a0\u8f7d\u6210\u529f: "+y.SceneTypes.GameScene,e)}),[2]})})},o=s([o],b),a.default=o,cc._RF.pop()},{}],LoaderCfg:[function(t,e,n){"use strict";cc._RF.push(e,"0ef76Ip3qpBsKzS8zGLOQnZ","LoaderCfg");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.ResJson={Maps:"config/maps"},cc._RF.pop()},{}],LoaderMgr:[function(t,e,n){"use strict";cc._RF.push(e,"292b2MWvV5LBq/39PVUk8RV","LoaderMgr");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("Helper");function r(){this.resLoadNumMap=null,this.resLoadNumMap=new Map}r.prototype.loadSpriteFramesWithUrl=function(t){var e=this;return new Promise(function(n,i){e.loadResWithUrl(t,cc.SpriteAtlas,{success:function(t){return n(t.getSpriteFrames())},failure:function(t){return i(t)},context:e})})},r.prototype.loadSpriteFrameWithUrl=function(t){var e=this;return new Promise(function(n,i){e.loadResWithUrl(t,cc.SpriteFrame,{success:function(t){return n(t)},failure:function(t){return i(t)},context:e})})},r.prototype.loadAudioWithUrl=function(t){var e=this;return new Promise(function(n,i){e.loadResWithUrl(t,cc.AudioClip,{success:function(t){return n(t)},failure:function(t){return i(t)},context:e})})},r.prototype.loadPrefabWithUrl=function(t){var e=this;return new Promise(function(n,i){e.loadResWithUrl(t,cc.Prefab,{success:function(t){return n(t)},failure:function(t){return i(t)},context:e})})},r.prototype.loadResWithUrl=function(t,e,n){var i=this;n=n||Object.create(null);var o=cc.loader.getRes(t,e);if(cc.isValid(o))return n.success&&n.success.call(n.context,o);n.prefix&&n.prefix.call(n.context),cc.loader.loadRes(t,e,function(t,e,i){n.progress&&n.progress.call(n.context,t,e,i)},function(e,o){if(e)return cc.error("ResManager loadRes Error",e),void(n.failure&&n.failure.call(n.context,e));n.success&&n.success.call(n.context,o);for(var a=0,r=cc.loader.getDependsRecursively(t);a<r.length;a++){var s=r[a],c=i.resLoadNumMap.get(s);null==c?i.resLoadNumMap.set(s,1):i.resLoadNumMap.set(s,c+1)}})},r.prototype.releaseRes=function(t){for(var e=0,n=cc.loader.getDependsRecursively(t);e<n.length;e++){var i=n[e],o=this.resLoadNumMap.get(i);a.default.isNullOrUndefined(o)||(o--,this.resLoadNumMap.set(i,Math.max(o,0)),o<=0&&(cc.loader.releaseRes(t),this.resLoadNumMap.delete(i)))}},r.prototype.loadRes=function(t,e){return new Promise(function(n){var i=cc.loader.getRes(t,e);if(cc.isValid(i))return n(i);cc.loader.loadRes(t,e,function(e,i){e?(cc.warn("loadAsset error",t),n(e)):cc.isValid(i)?n(i):n(e)})})},r.prototype.loadResArray=function(t,e){return new Promise(function(n){var i={},o=[];if(t.forEach(function(t){var n=cc.loader.getRes(t,e);cc.isValid(n)?i[t]=n:o.push(t)}),0==o.length)return n(i);cc.loader.loadResArray(o,e,function(t){if(t)return n(null);var a=!0;o.forEach(function(t){var n=cc.loader.getRes(t,e);cc.isValid(n)?i[t]=n:a=!1}),n(a?i:null)})})},r.prototype.loadPrefabObj=function(t){return new Promise(function(e){var n=cc.loader.getRes(t,cc.Prefab);if(cc.isValid(n))return e(cc.instantiate(n));cc.loader.loadRes(t,cc.Prefab,function(t,n){!t&&cc.isValid(n)?e(cc.instantiate(n)):e(null)})})},Object.defineProperty(r,"I",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),r._instance=null,i=r,o.default=i,o.LoaderMgr=i.I,cc._RF.pop()},{}],LocalMgr:[function(t,e,n){"use strict";cc._RF.push(e,"9d5b54BTAVAiI5tWtMyj68r","LocalMgr");var i,o=n;function a(){this.store=cc.sys.localStorage}Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(a,"timestamp",{get:function(){return+((new Date).getTime()/1e3).toFixed(0)},enumerable:!0,configurable:!0}),a.__isExpired=function(t){return!t||0<=a.timestamp-(t.timestamp+t.expiration)},a.prototype.isExist=function(t){return this.store.getItem(t)},a.prototype.set=function(t,e,n){return e={timestamp:a.timestamp,expiration:n=void 0===n?0:n,key:t,value:e},this.store.setItem(t,JSON.stringify(e)),this},a.prototype.get=function(t){var e;try{if(!(e=this.store.getItem(t)))return null;e=JSON.parse(e)}catch(t){return null}return e.expiration&&a.__isExpired(e)?(this.remove(t),null):e.value},a.prototype.remove=function(t){try{this.store.removeItem(t)}catch(t){}return this},a.prototype.clear=function(){try{this.store.clear()}catch(t){}return this},Object.defineProperty(a,"I",{get:function(){return this._instance||(this._instance=new a)},enumerable:!0,configurable:!0}),a._instance=null,o.default=i=a,o.LocalMgr=i.I,cc._RF.pop()},{}],LocalModel:[function(t,e,n){"use strict";cc._RF.push(e,"8db28sz02pDD5ibfy8aINp5","LocalModel");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var r=i("DateUtils"),s=i("Enum"),c=i("LocalMgr"),l=i("ArrayUtils");function u(){}u.prototype.getValueWithKey=function(t,e){void 0===e&&(e=0);var n=r.default.today;return(t=c.LocalMgr.get(t))&&void 0!==t[n]?t[n]:e},u.prototype.isDefaultWithKey=function(t){return!c.LocalMgr.isExist(t)||c.LocalMgr.get(t)},u.prototype.getCpsQuanDatas=function(){return this.getValueWithKey(s.LocalDataKey.CpsQuanCache,[])},u.prototype.saveCpsQuanDatas=function(t){var e,n,i=this;t&&0!==t.length&&(e=[],n=this.getCpsQuanDatas(),t.forEach(function(t){l.default.indexOf(n,function(e){return e.inner_sku_id===t.inner_sku_id},i)<0&&e.push(a({},t))}),e.length&&c.LocalMgr.set(s.LocalDataKey.CpsQuanCache,((t={})[r.default.today]=e.concat(n),t)))},u.prototype.isVibrateOpen=function(){return this.isDefaultWithKey(s.LocalDataKey.Vibrate)},u.prototype.saveVibrate=function(t){c.LocalMgr.set(s.LocalDataKey.Vibrate,t)},Object.defineProperty(u,"I",{get:function(){return this._instance||(this._instance=new u)},enumerable:!0,configurable:!0}),u._instance=null,i=u,o.default=i,cc._RF.pop()},{}],"LogUtils\u200b\u200b":[function(t,e,n){"use strict";cc._RF.push(e,"e73f7PbO9JPEZsGEm6lfcqR","LogUtils\u200b\u200b");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("Const");function r(){}i("StringUtils"),r.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.default.Debug&&t.unshift("[DebugErr]")},r.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.default.Debug&&t.unshift("[DebugWarn]")},r.logger=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.default.Debug&&t.unshift("[DebugLog]")},r.loggerJson=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.default.Debug&&1!==t.length&&t.unshift("[DebugLog]")},i=r,o.default=i,cc._RF.pop()},{}],LotteryPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"e0520XO0C1NvYbiNwvyJhOh","LotteryPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("AudioEnum"),h=i("AudioMgr"),f=i("BattleMgr"),m=i("Display"),g=i("Water"),_=i("Enum"),y=i("DataMgr"),v=i("EventEnum"),b=i("OnlineMgr"),w=i("SDKAnalytics"),S=i("SDKEnums"),M=i("SDKTools"),C=i("PlatformUtils"),P=i("WXApi"),A=i("BaseAnimPopwin"),T=i("ShareVideo"),E=i("ViewMgr"),B=i("GetRewardPopWin");function D(){var t=null!==u&&u.apply(this,arguments)||this;return t.islock=!1,t.content=null,t.m_items=[],t.m_goBtn=null,t.m_labTimes=null,t.m_sharevideo=null,t.isplay=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(D,u=A.default),(d=D).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),w.default.event(S.EventKeys.lottery_panel_show,""),m.default.s_isShowedLottery=!0,t=this.gethadTimes(),this.m_goBtn.active=0<t,this.m_labTimes.string=t.toString(),t%2==1?this.content.getChildByName("lay_anim").getComponent(cc.Animation).play("anim_lucky_have"):this.content.getChildByName("lay_anim").getComponent(cc.Animation).play("anim_lucky_no");for(var e=0;e<this.m_items.length;e++)this.m_items[e].getComponent(cc.Animation).play("anim_lucky_normal");this.content.getChildByName("light").getComponent(cc.Animation).play("anim_lucylight_slow"),this.playidle(),this.initreward(),P.default.I.showgrideadBottom()},D.prototype.playidle=function(){return c(this,void 0,void 0,function(){var t,e;return l(this,function(n){switch(n.label){case 0:this.isplay=!0,n.label=1;case 1:if(!this.isplay)return[2];t=0,n.label=2;case 2:return t<this.m_items.length?this.isplay?((e=this.m_items[t]).getComponent(cc.Animation).play("anim_lucky_light"),[4,g.default.wait(500)]):[2]:[3,5];case 3:n.sent(),e.getComponent(cc.Animation).play("anim_lucky_normal"),n.label=4;case 4:return t++,[3,2];case 5:return[3,1];case 6:return[2]}})})},D.prototype.onResume=function(){u.prototype.onResume.call(this);var t=this.gethadTimes();this.m_goBtn.active=0<t,this.m_labTimes.string=t.toString(),t%2==1?this.content.getChildByName("lay_anim").getComponent(cc.Animation).play("anim_lucky_have"):this.content.getChildByName("lay_anim").getComponent(cc.Animation).play("anim_lucky_no");for(var e=0;e<this.m_items.length;e++)this.m_items[e].getComponent(cc.Animation).play("anim_lucky_normal");P.default.I.showgrideadBottom()},D.prototype.onClose=function(){u.prototype.onClose.call(this),P.default.I.hidegrideadBottom(),this.isplay=!1},D.prototype.onOpend=function(){u.prototype.onOpend.call(this),this.islock=!1},D.prototype.addEvent=function(){u.prototype.addEvent.call(this),M.default.bindEvent(v.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},D.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),M.default.removeEvent(v.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},Object.defineProperty(D.prototype,"BannerOpen",{get:function(){return b.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"ShareKey",{get:function(){return this.gethadTimes()%3==0?S.ShareKeys.lotterypack:S.ShareKeys.lottery},enumerable:!0,configurable:!0}),D.prototype.handleTacticUpdate=function(){this.initreward()},D.prototype.initreward=function(){this.m_sharevideo.updateWithKey(this.ShareKey)},D.prototype.gethadTimes=function(){return 12-y.DataMgr.User.getDayDataWithKey(_.DayKeys.lotterytimes,0)},D.prototype.onGoReward=function(){var t;h.AudioMgr.button(),this.islock||(t=this.gethadTimes())<=0||(w.default.event(S.EventKeys.lottery_panel_draw_tap,""),11==t?w.default.event(S.EventKeys.lottery_panel_2nd_draw_tap,""):6==t?w.default.event(S.EventKeys.lottery_panel_7th_draw_tap,""):1==t&&w.default.event(S.EventKeys.lottery_panel_12th_draw_tap,""),M.default.dispatch(this.ShareKey,{success:this.handlereward,context:this}))},D.prototype.handlereward=function(){var t=this.gethadTimes()%2==1?y.DataMgr.Config.getRandomLotteryPack():y.DataMgr.Config.getRandomLottery();this.playgetAni(t),y.DataMgr.User.reqAddDayReward(_.DayKeys.lotterytimes),this.m_labTimes.string=this.gethadTimes().toString(),this.m_goBtn.active=0<this.gethadTimes()},D.prototype.playgetAni=function(t){return c(this,void 0,void 0,function(){var e,n,i,o,a,r;return l(this,function(s){switch(s.label){case 0:for(this.isplay=!1,this.content.getChildByName("light").getComponent(cc.Animation).play("anim_lucylight_fast"),a=t.id,this.islock=!0,o=a-1,n=0;n<this.m_items.length;n++)(i=this.m_items[n]).getComponent(cc.Animation).play("anim_lucky_normal");e=0,s.label=1;case 1:if(!(e<3))return[3,6];n=0,s.label=2;case 2:return n<this.m_items.length?((i=this.m_items[n]).getComponent(cc.Animation).play("anim_lucky_light"),h.AudioMgr.playSound(p.AudioEnum.lottery_swift),M.default.vibrateShort(),[4,g.default.wait(50)]):[3,5];case 3:s.sent(),i.getComponent(cc.Animation).play("anim_lucky_normal"),s.label=4;case 4:return n++,[3,2];case 5:return e++,[3,1];case 6:if(r=0,!(10<(r=o<=4?10+a:a)))return[3,15];n=0,s.label=7;case 7:return n<this.m_items.length?((i=this.m_items[n]).getComponent(cc.Animation).play("anim_lucky_light"),h.AudioMgr.playSound(p.AudioEnum.lottery_swift),M.default.vibrateShort(),[4,g.default.wait(50)]):[3,10];case 8:s.sent(),i.getComponent(cc.Animation).play("anim_lucky_normal"),s.label=9;case 9:return n++,[3,7];case 10:n=0,s.label=11;case 11:return n<r-10?(i=this.m_items[n],n==r-10-1?i.getComponent(cc.Animation).play("anim_lucky_on"):i.getComponent(cc.Animation).play("anim_lucky_light"),h.AudioMgr.playSound(p.AudioEnum.lottery_swift),M.default.vibrateShort(),[4,g.default.wait(200+10*n)]):[3,14];case 12:s.sent(),n!=r-10-1&&i.getComponent(cc.Animation).play("anim_lucky_normal"),s.label=13;case 13:return n++,[3,11];case 14:return[3,19];case 15:n=0,s.label=16;case 16:return n<r?(i=this.m_items[n],n==r-1?i.getComponent(cc.Animation).play("anim_lucky_on"):i.getComponent(cc.Animation).play("anim_lucky_light"),h.AudioMgr.playSound(p.AudioEnum.lottery_swift),M.default.vibrateShort(),[4,g.default.wait(200+10*n)]):[3,19];case 17:s.sent(),n!=r-1&&i.getComponent(cc.Animation).play("anim_lucky_normal"),s.label=18;case 18:return n++,[3,16];case 19:return[4,g.default.wait(1e3)];case 20:return s.sent(),this.content.getChildByName("light").getComponent(cc.Animation).play("anim_lucylight_slow"),this.islock=!1,o=0,a=[],3==t.reward_type?o=t.reward_num:4==t.reward_type?(r=y.DataMgr.Config.getRandomPackReward(),a=[r[0],r[1]],o=r[2]):a=[t.reward_type,t.reward_num],E.ViewMgr.openPopwin(B.default,{data:{diamond:o,props:a}}),this.playidle(),[2]}})})},D.prototype.onPause=function(){u.prototype.onPause.call(this),P.default.I.hidegrideadBottom()},D.prototype.update=function(){},D.prototype.onBack=function(){return c(this,void 0,void 0,function(){var t,e=this;return l(this,function(){return h.AudioMgr.button(),C.default.isH5?(m.default.s_isSureCloseLottery=!0,E.ViewMgr.closePopwin(d,{anim:!0}).then(function(){f.default.I.removePopwinList()})):this.islock||(0<(t=this.gethadTimes())&&t%2==1&&!m.default.s_isSureCloseLottery?M.default.showModal({content:"\u672c\u6b21\u5fc5\u4e2d\u5927\u5956\u3002\u786e\u5b9a\u653e\u5f03\u4e48\uff1f",cancelText:"\u653e\u5f03",confirmText:"\u53bb\u62bd\u5956",confirmColor:"#FF0000",showCancel:!0,success:function(t){t.confirm?e.onGoReward():t.cancel&&(m.default.s_isSureCloseLottery=!0,E.ViewMgr.closePopwin(d,{anim:!0}).then(function(){f.default.I.removePopwinList()}))}}):E.ViewMgr.closePopwin(d,{anim:!0}).then(function(){f.default.I.removePopwinList()})),[2]})})},D.PREFAB_PATH="prefab/popwin/popwin_lottery",s([o(cc.Node)],D.prototype,"content",void 0),s([o(cc.Node)],D.prototype,"m_items",void 0),s([o(cc.Node)],D.prototype,"m_goBtn",void 0),s([o(cc.Label)],D.prototype,"m_labTimes",void 0),s([o(T.default)],D.prototype,"m_sharevideo",void 0),i=d=s([i],D),a.default=i,cc._RF.pop()},{}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"f2044fhPydBvKTKXSan2TI3","Main");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)},r=__AWAITER__,s=__GENERATOR__;Object.defineProperty(o,"__esModule",{value:!0});var c=i("Api"),l=i("Const"),u=i("SDKTools"),d=i("Display"),p=i("DataMgr"),h=i("DateUtils"),f=i("SDKAnalytics"),m=i("AppDataMgr"),g=i("Enum"),_=i("PlatformUtils"),y=i("SDKEnums"),v=i("MissionModel"),b=i("ViewMgr"),w=i("CPSCouponPopwin"),S=i("EventMgr"),M=i("EventEnum");function C(){this.init()}cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0,cc.dynamicAtlasManager.maxFrameSize=2048,C.prototype.init=function(){u.default.setBannerWidth(750,500),_.default.isWx&&(wx.onShow(this.onShow.bind(this)),wx.onHide(this.onHide.bind(this)))},C.prototype.onShow=function(t){return r(this,void 0,void 0,function(){var e,n,i,o,r;return s(this,function(){return r=t.query,e=r.user_invite_uid,n=r.invite_type,m.AppDataMgr.set(g.AppDataKey.UserInviteUid,e||""),m.AppDataMgr.set(g.AppDataKey.UserInviteType,n||0),(i=0!==p.DataMgr.UserBase.ID)&&1===m.AppDataMgr.get(g.AppDataKey.ServiceState,0)&&(m.AppDataMgr.set(g.AppDataKey.ServiceState,0),c.default.getKfResources().then(function(t){t&&t.res_data&&+t.res_data.diamond?(p.DataMgr.User.reqServiceReward(g.RewardState.Received),p.DataMgr.Point.updatePoint(g.ModuleType.Service),t=t.res_data.diamond,p.DataMgr.User.reqDiamond(t,100),f.default.addLogRes(a({},l.default.LogRes.Diamond,{type:1,cnum:t,onum:p.DataMgr.User.Diamond,reason:"\u5ba2\u670d\u9886\u53d6\u5956\u52b1",levelid:0})),d.default.showTip("\u5ba2\u670d\u5956\u52b1\u9886\u53d6\u6210\u529f",1.2),p.DataMgr.Missions.addMissionProgress(v.MissionCheckType.Service,1)):d.default.showTip("\u8bf7\u53d1\u9001\u4fe1\u606f\uff0c\u5e76\u7b49\u5f85\u56de\u590d\u540e\u70b9\u51fb\u8fdb\u5165\u6e38\u620f",1.2)})),o=u.default.getParamsInt(y.OnlineKeys.InterstitialAdOnshow,0),r=u.default.IsShareIng,i&&o&&!r&&d.default.showOnShowInterstitial(),b.ViewMgr.getPopwin(w.default)&&S.EventMgr.emit(M.EventEnum.ActionCpsClose),e&&n&&i&&e+""!=p.DataMgr.UserBase.ID+""&&c.default.setInviteFriend({invite_uid:e,invite_type:n}),[2]})})},C.prototype.onHide=function(){m.AppDataMgr.get(g.AppDataKey.OnHideHistory,!1)||p.DataMgr.syncBaseUserData({lastTime:h.default.nowTime},!0),m.AppDataMgr.set(g.AppDataKey.OfflineTime,0)},new(o.default=i=C),cc._RF.pop()},{}],MapConfig:[function(t,e,n){"use strict";cc._RF.push(e,"813c8W69pZE25zDU3kbQbSE","MapConfig");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),i=i("Enum"),o.MapConfig={PrefixRoom:"texture/room-new",RoomData:((o={})[i.RoomType.Common]={id:i.RoomType.Common,name:"common-room"},o[i.RoomType.Living]={id:i.RoomType.Living,name:"living-room"},o[i.RoomType.Bed]={id:i.RoomType.Bed,name:"bed-room"},o[i.RoomType.Bath]={id:i.RoomType.Bath,name:"bath-room"},o[i.RoomType.Study]={id:i.RoomType.Study,name:"study-room"},o[i.RoomType.Porch]={id:i.RoomType.Porch,name:"porch-room"},o[i.RoomType.Garden]={id:i.RoomType.Garden,name:"garden-room"},o[i.RoomType.Balcony]={id:i.RoomType.Balcony,name:"balcony-room"},o[i.RoomType.Kitchen]={id:i.RoomType.Kitchen,name:"kitchen-room"},o[i.RoomType.GardenSwing]={id:i.RoomType.GardenSwing,name:"garden-swing"},o[i.RoomType.GardenStudio]={id:i.RoomType.GardenStudio,name:"garden-studio"},o[i.RoomType.GardenBarbecue]={id:i.RoomType.GardenBarbecue,name:"garden-barbecue"},o[i.RoomType.GardenSwimming]={id:i.RoomType.GardenSwimming,name:"garden-swimming"},o[i.RoomType.Garden1]={id:i.RoomType.Garden1,name:"garden-1"},o[i.RoomType.Garden2]={id:i.RoomType.Garden2,name:"garden-2"},o[i.RoomType.Garden3]={id:i.RoomType.Garden3,name:"garden-3"},o[i.RoomType.GardenPond]={id:i.RoomType.GardenPond,name:"garden-pond"},o[i.RoomType.GardenFlowerhouse]={id:i.RoomType.GardenFlowerhouse,name:"garden-flowerroom"},o),JsonPath:{Zip:"configs.bin",Plot:"Plot.json",Milestone:"Milestone.json",Missions:"Missions.json",ActiveReward:"Missions_rewards.json",Daily_rewards:"Daily_rewards.json",Lottery:"Lottery.json",Lottery_pack:"Lottery_pack.json",RedPacket:"Redpacket.json"},FurnitureRelated:[["N3-BathroomWall2","N3-BathroomWall1"]],FurnitureSpecial:{Floor1:"O1-Floor1",NewDaySofa:"A1-NewDaySofa",NewDayBath:"A1-NewDayBathroom",NewDayStudy:"A1-NewDayStudyroom",NewDayPorch:"A1-NewDayPorchroom",NewDayKitchen:"A1-NewDayKitchenroom",BedRoomBed:"O2-BedrommBedBed1",NewDayGardenSwimming:"A1-NewDayGardenSwimming"}},cc._RF.pop()},{}],MapView:[function(t,e,n){"use strict";cc._RF.push(e,"4c656aH01xAlJW7Ry4k+XUP","MapView");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p=i("Garbage"),h=i("ViewMgr"),f=i("WXApi"),m=(i("Water"),i("Action")),g=i("SDKTools"),_=i("Display"),y=i("DataMgr"),v=i("DateUtils"),b=i("PoolMgr"),w=i("ArrayUtils"),S=i("EventMgr"),M=i("GameFitUp"),C=i("BuildingItem"),P=i("EventEnum"),A=i("GameNewDay"),T=i("MapConfig"),E=i("LoaderMgr"),B=i("PlotMgr"),D=i("PlatformUtils"),I=i("SDKEnums"),k=i("UserBaseModel"),O=i("Enum"),R=i("MilestoneModel");function N(){var t=null!==d&&d.apply(this,arguments)||this;return t.map=null,t.buildingItem=null,t.garbagePrefab=null,t.wxAd=null,t.defaultScale=2,t.minScale=2,t.maxScale=3,t.moveOffset=2,t.edgeOffset=80,t.isLocked=!1,t.isMoving=!1,t.isCacheing=!1,t.mapTouchList=[],t.onSingleTouch=null,t.touchBegin=cc.Vec2.ZERO,t}i=(o=cc._decorator).ccclass,o=o.property,r(N,d=cc.Component),N.prototype.showWxAD=function(){var t;1==_.default.s_isShowWxAd&&(0==(t=g.default.getParamsInt(I.OnlineKeys.youxuan_ad_abtest,0))||1==t&&k.default.I.ID%2==1?f.default.I.showwxSinglegridad(this.wxAd):f.default.I.showwxSinglegridad2(this.wxAd))},N.prototype.hideWxAD=function(){f.default.I.hidewxSinglegridad(),f.default.I.hidewxSinglegridad2()},N.prototype.start=function(){this.showWxAD(),D.default.isH5&&(window.MapView=this)},N.prototype.preload=function(){this.initData(),this.initRoom(),this.initMapCamare(),this.initCacheLiving()},N.prototype.init=function(){this.addEvent(),this.initMask(),this.initOuter(),this.initMapView()},N.prototype.release=function(){this.addCacheLiving()},N.prototype.onDisable=function(){this.hideWxAD(),this.releaseCacheLiving(),this.removeEvent(),this.clear()},N.prototype.addEvent=function(){var t=this.node;S.EventMgr.on(I.EventKeys.hidewxad,this.hideWxAD,this),S.EventMgr.on(I.EventKeys.showwxad,this.showWxAD,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!0),t.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0),t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this,!0)},N.prototype.removeEvent=function(){var t=this.node;S.EventMgr.off(I.EventKeys.hidewxad,this.hideWxAD,this),S.EventMgr.off(I.EventKeys.showwxad,this.showWxAD,this),t.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!0),t.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0),t.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this,!0)},N.prototype.getRoom=function(t){return this.roomNodeMap||(this.roomNodeMap={}),this.roomNodeMap[t]},N.prototype.getRoomOld=function(t){return t=this.getRoom(t),cc.isValid(t)?t.getChildByName("old"):null},N.prototype.getRoomNew=function(t){return t=this.getRoom(t),cc.isValid(t)?t.getChildByName("new"):null},N.prototype.getShadow=function(t){return t=T.MapConfig.RoomData[t].name,this.map.getChildByName(t+"-shadow")},Object.defineProperty(N.prototype,"EffectNode",{get:function(){return this.map.getChildByName("effect")},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"Milestone",{get:function(){return this.modleMilestone||(this.modleMilestone=y.DataMgr.Milestone),this.modleMilestone},enumerable:!0,configurable:!0}),N.prototype.clear=function(){this.mapTouchList=[],this.roomNodeMap={},this.isCacheing=!1,this.modleMilestone=null},N.prototype.initData=function(){this.roomNodeMap={},this.isCacheing=!1},N.prototype.initRoom=function(){var t,e=T.MapConfig.RoomData;for(t in e){var n=e[t].name;this.roomNodeMap[+t]=this.map.getChildByName(n)}var i=(o=y.DataMgr.User.Milestone).curr_scene,o=o.through_scenes;o=[i].concat(o),this.toggleLivingDoor(o.indexOf(5)<0)},N.prototype.toggleLivingDoor=function(t){var e=this.getRoom(O.RoomType.Common);!cc.isValid(e)||(e=e.getChildByName("living-room_door"))&&(e.active=t)},N.prototype.initOuter=function(){var t=this;["gate_1","gate_2","fountain","kitchen_outwall","bathroom_outwall","living-room_outwall3","living-room_outwall2","living-room_outwall1"].forEach(function(e){return t.loadCommonOuter(e)})},N.prototype.loadCommonOuter=function(t){var e,n,i,o=this,a=O.RoomType.Common,r=this.getRoom(a);cc.isValid(r)&&(e=r.getChildByName(t),cc.isValid(e)&&(n=e.children[0],cc.isValid(n)&&(i=T.MapConfig.PrefixRoom+"/outer",E.LoaderMgr.loadSpriteFrameWithUrl(i+"/"+t).then(function(t){cc.isValid(o.node)&&cc.isValid(r)&&cc.isValid(e)&&cc.isValid(n)&&(n.getComponent(cc.Sprite).spriteFrame=t),cc.dynamicAtlasManager.insertSpriteFrame(t)},function(){return o.loadCommonOuter(t)}).catch(function(){}))))},N.prototype.initMask=function(){y.DataMgr.User.isOverPlot(B.PlotID.Start1)?y.DataMgr.User.isOverPlot(B.PlotID.Task01)?this.getShadow(O.RoomType.Living).active=!1:this.loadLivingGarbage():this.loadLivingShadow()},N.prototype.loadLivingGarbage=function(){var t,e=this,n=O.RoomType.Living,i=this.getShadow(n);cc.isValid(i)&&(t=T.MapConfig.PrefixRoom+"/shadow",n=T.MapConfig.RoomData[n].name+"-garbage",E.LoaderMgr.loadSpriteFrameWithUrl(t+"/"+n).then(function(t){cc.isValid(e.node)&&cc.isValid(i)&&(i.active=!0,i.opacity=0,i.getChildByName("garbage").getComponent(cc.Sprite).spriteFrame=t,cc.tween(i).to(20/60,{opacity:255}).start(),m.default.playAddAnim(i)),cc.dynamicAtlasManager.insertSpriteFrame(t)},function(){return e.loadLivingGarbage()}).catch(function(){}))},N.prototype.loadLivingShadow=function(){var t=this,e=O.RoomType.Living,n=T.MapConfig.PrefixRoom+"/shadow",i=T.MapConfig.RoomData[e].name+"-black";E.LoaderMgr.loadSpriteFrameWithUrl(n+"/"+i).then(function(n){var i=t.getShadow(e);cc.isValid(t.node)&&cc.isValid(i)&&(i.active=!0,i.opacity=0,i.getChildByName("shadow").getComponent(cc.Sprite).spriteFrame=n,cc.tween(i).to(.5,{opacity:255}).start()),cc.dynamicAtlasManager.insertSpriteFrame(n)},function(){return t.loadLivingShadow()}).catch(function(){})},N.prototype.loadShadowSprite=function(t){var e=this;return new Promise(function(n){var i=T.MapConfig.PrefixRoom+"/shadow",o=""+T.MapConfig.RoomData[t].name;E.LoaderMgr.loadSpriteFrameWithUrl(i+"/"+o).then(function(i){var o=e.getShadow(t);cc.isValid(e.node)&&cc.isValid(o)&&(o.active=!0,(o=o.children[0]).opacity=0,o.getComponent(cc.Sprite).spriteFrame=i,cc.tween(o).to(20/60,{opacity:255}).start()),cc.dynamicAtlasManager.insertSpriteFrame(i),n(null)},function(){return e.loadShadowSprite(t)}).catch(function(){})})},N.prototype.hideMask=function(t,e){var n=this.getShadow(t);if(n){if(m.default.stopAnim(n),e)return new Promise(function(t){cc.tween(n).to(.5,{opacity:0}).call(function(){cc.isValid(n)&&n.destroy(),t(null)}).start()});n.destroy()}},N.prototype.initMapView=function(){var t=this,e=[O.RoomType.Living,O.RoomType.Common],n=[O.RoomType.GardenSwing,O.RoomType.Bed,O.RoomType.Bath,O.RoomType.Kitchen,O.RoomType.Study,O.RoomType.Porch,O.RoomType.Balcony,O.RoomType.GardenSwimming,O.RoomType.GardenStudio,O.RoomType.Garden1,O.RoomType.GardenPond,O.RoomType.Garden2,O.RoomType.Garden3,O.RoomType.GardenBarbecue,O.RoomType.GardenFlowerhouse],i={};switch(y.DataMgr.User.Milestone.curr_scene){case 3:i[O.RoomType.Bed]=1;break;case 4:i[O.RoomType.Bed]=1,i[O.RoomType.Bath]=1;break;case 5:i[O.RoomType.Bed]=1,i[O.RoomType.Bath]=1,i[O.RoomType.Kitchen]=1;break;case 6:i[O.RoomType.Bed]=1,i[O.RoomType.Bath]=1,i[O.RoomType.Kitchen]=1,i[O.RoomType.Porch]=1;break;case 7:i[O.RoomType.Bed]=1,i[O.RoomType.Bath]=1,i[O.RoomType.Kitchen]=1,i[O.RoomType.Porch]=1,i[O.RoomType.Study]=1;break;case 8:i[O.RoomType.Bed]=1,i[O.RoomType.Bath]=1,i[O.RoomType.Kitchen]=1,i[O.RoomType.Porch]=1,i[O.RoomType.Study]=1,i[O.RoomType.GardenSwimming]=1}Object.keys(i).forEach(function(t){var i=+t;e.push(i),n=n.filter(function(t){return t!==i})});var o=[];e.forEach(function(e){return o.push(function(){return t.initMapWithTypes([e],e!==O.RoomType.Living||!t.isCacheing)})}),n.forEach(function(e){return o.push(function(){return t.loadShadowSprite(e)})}),w.default.queue(o).then(function(){return cc.isValid(t.node)&&t.removeCacheLiving()}).catch(function(){return cc.isValid(t.node)&&t.removeCacheLiving()})},N.prototype.initNewDayMapView=function(){var t=-1;switch(y.DataMgr.User.Milestone.curr_scene+1){case 3:t=O.RoomType.Bed;break;case 4:t=O.RoomType.Bath;break;case 5:t=O.RoomType.Kitchen;break;case 6:t=O.RoomType.Porch;break;case 7:t=O.RoomType.Study;break;case 8:t=O.RoomType.GardenSwimming}-1!=t&&this.initMapWithTypes([t],!0)},N.prototype.initMapWithTypes=function(t,e){var n=this;void 0===e&&(e=!0);for(var i=this.Milestone.getOldFurnitures(t),o=y.DataMgr.User.Milestone.complete_tasks,a={},r=[],s=[],c=this,l=0;l<i.length;l++)!function(t){var e,n,r=i[t].id;r&&(e=c.Milestone.getTaskIdByFurnitureId(r),n=0!=o.filter(function(t){return e===t}).length,a[e]||(s=n?(a[e]=!0,n=(t=c.Milestone.getTaskById(e).add_furnitures)[0],(n=c.Milestone.getTaskOtherByFurnitureId(n))&&0<=o.indexOf(n.id)&&n.add_furnitures.length&&(t=n.add_furnitures.concat(t.slice(1))),s.concat(t)):s.concat([r])))}(l);var u=[];s.forEach(function(t){(t=n.buildBuildById(t))&&u.push(t)});var d=Math.ceil(u.length/2);for(l=0;l<d;l++)!function(){var t=[];u.slice(2*l,2*l+2).forEach(function(n){var i=n[0],o=n[1];n=n[2],t.push(i.getComponent(C.default).initWith(o,n,{isInitial:e}))}),r.push(function(){return Promise.all(t)})}();return w.default.queue(r)},N.prototype.initMapCamare=function(){var t;B.default.I.isPlotStart()?this.setMapCamare(B.PlotID.Start1):y.DataMgr.User.isOverPlot(B.PlotID.Task01)?(t=cc.Vec2.ZERO,this.smoothOperate(this.map,t,this.defaultScale)):this.setMapCamare(B.PlotID.Task01,150)},N.prototype.setMapCamare=function(t,e){void 0===e&&(e=0);var n=cc.Vec2.ZERO;t=y.DataMgr.Plot.getPlotById(t).focus[0],(t=this.map.getChildByName("anchor").getChildByName(t))?(t=_.default.getTargetPos(t,this.map),e=this.checkMovePos(-t.x,-t.y+e),this.map.x=e.x,this.map.y=e.y):this.smoothOperate(this.map,n,this.defaultScale)},N.prototype.initCacheLiving=function(){var t=_.default.PersistNode.getLivingRoom();if(t&&t.length){for(var e=this.getRoomNew(O.RoomType.Living),n=(t=t.reverse()).length-1;0<=n;n--)t[n].parent=e;this.isCacheing=!0}},N.prototype.addCacheLiving=function(){var t=this.getRoomOld(O.RoomType.Living);cc.isValid(t)&&(t=t.children,_.default.PersistNode.addLivingRoom(t))},N.prototype.removeCacheLiving=function(){var t,e=this.getRoomNew(O.RoomType.Living);e&&cc.isValid(e)&&(t=e.children)&&t.length&&e.removeAllChildren(!0)},N.prototype.releaseCacheLiving=function(){this.unschedule(this.removeCacheLiving)},N.prototype.actionPlotAnim=function(t){return l(this,void 0,void 0,function(){var e,n,i=this;return u(this,function(o){switch(o.label){case 0:switch(t){case"anim_1":return[3,1];case"anim_2":return[3,2];case"anim_3":return[3,3];case"anim_4":return[3,4];case"anim_5":return[3,7];case"anim_6":return[3,10];case"anim_10":return[3,13];case"anim_11":return[3,16];case"anim_12":return[3,19]}return[3,22];case 1:return(e=this.getShadow(O.RoomType.Living))&&(e.active=!0,m.default.playAddAnim(e)),[2,Promise.resolve()];case 2:return[2,this.moveMapToNode("O1-Allfloor0",null).then(function(){var t=i.getRoomOld(O.RoomType.Living).getChildByName("O1-Floor1");if(!t)return Promise.resolve();var e=i.Milestone.getFurnitureById("O1-Floor1");return e.res_bone="floor_dong",t.getComponent(C.default).changeBone(0,!1,e,null,O.ActionTaskType.Bone4)})];case 3:return this.initNewDayMapView(),[2,new Promise(function(t){h.ViewMgr.openPopwin(A.default,{end:{callback:function(){return t(null)},context:i}})})];case 4:return n="O2-BedrommBedBed1",[4,this.moveMapToNode(n,null)];case 5:return o.sent(),[4,this.hideMask(O.RoomType.Bed,!0)];case 6:return o.sent(),[3,22];case 7:return n=T.MapConfig.FurnitureSpecial.NewDayBath,[4,this.moveMapToNode(n,null)];case 8:return o.sent(),[4,this.hideMask(O.RoomType.Bath,!0)];case 9:return o.sent(),[3,22];case 10:return n=T.MapConfig.FurnitureSpecial.NewDayKitchen,[4,this.moveMapToNode(n,null)];case 11:return o.sent(),[4,this.hideMask(O.RoomType.Kitchen,!0)];case 12:return o.sent(),this.toggleLivingDoor(!1),[3,22];case 13:return n=T.MapConfig.FurnitureSpecial.NewDayPorch,[4,this.moveMapToNode(n,null)];case 14:return o.sent(),[4,this.hideMask(O.RoomType.Porch,!0)];case 15:return o.sent(),[3,22];case 16:return n=T.MapConfig.FurnitureSpecial.NewDayStudy,[4,this.moveMapToNode(n,null)];case 17:return o.sent(),[4,this.hideMask(O.RoomType.Study,!0)];case 18:return o.sent(),[3,22];case 19:return n=T.MapConfig.FurnitureSpecial.NewDayGardenSwimming,[4,this.moveMapToNode(n,null)];case 20:return o.sent(),[4,this.hideMask(O.RoomType.GardenSwimming,!0)];case 21:return o.sent(),[3,22];case 22:return[2]}})})},N.prototype.actionPlanTask=function(t){var e=t.data,n=t.callback,i=t.context;switch(e.action_type){case O.ActionTaskType.Garbage:this.hideMask(O.RoomType.Living,!0),this.clearGarbage(e).then(function(){n&&n.call(i)}).catch(function(){n&&n.call(i)});break;case O.ActionTaskType.Replace:this.replace(t);break;default:this.focus(t)}},N.prototype.actionChangedTask=function(t){var e=t.data.action_type;switch(e){case O.ActionTaskType.Bone1:case O.ActionTaskType.Bone2:case O.ActionTaskType.Bone3:this.changeBone(t,e);break;case O.ActionTaskType.Bone3Doubule:this.changeBones(t,O.ActionTaskType.Bone3);break;case O.ActionTaskType.Normal:this.changeNormal(t);break;case O.ActionTaskType.Replace:this.change(t)}},N.prototype.actionPreview=function(t){this.preview(t)},N.prototype.actionBackup=function(t){return this.backup(t)},N.prototype.actionUnselect=function(t,e){this.unselect(t,e)},N.prototype.actionCheckTaskNode=function(t){var e=t.data,n=t.callback;if(t=t.context,(e=e.del_furnitures||[]).length&&this.checkFurniture(e[0]).code<0)return _.default.showTip("\u65b0\u7684\u5bb6\u5177\u8d44\u6e90\u6b63\u5728\u4e0b\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff5e");n&&n.call(t)},N.prototype.focus=function(t){var e=this,n=t.data,i=t.skin,o=t.furnitures,a=t.callback,r=t.context,c=n.del_furnitures,l=[],u=[];o.forEach(function(t,n){var o=e.Milestone.getFurnitureById(t).skin_num;n=c[n],e.focusFurniture(i,n,t),(3===o?l:u).push(t)}),l.length&&h.ViewMgr.openPopwin(M.default,{data:{data:n,type:0,uiHome:O.HomeUIState.Menu,furnitures:l.slice(),callback:a,context:r}}),u.length&&this.actionChangedTask(s({},t,{furnitures:u.slice()}))},N.prototype.replace=function(t){return l(this,void 0,void 0,function(){var e,n,i,o,a,r=this;return u(this,function(s){switch(s.label){case 0:return a=t.data,e=t.skin,n=t.furnitures,i=t.callback,o=t.context,(a=a.del_furnitures).slice(1).forEach(function(t){var e=r.Milestone.getFurnitureById(t).room_type;(t=r.getRoomOld(e).getChildByName(t))&&r.cleanFurniture(t)}),[4,this.backupFurniture(e,a[0],n[0],!1)];case 1:return s.sent(),i&&i.call(o,e,n),[2]}})})},N.prototype.focusFurniture=function(t,e,n){var i=(o=this.checkFurniture(e)).code,o=(e=o.msg,o.node);return i<0?Promise.reject(e):(n=this.Milestone.getFurnitureById(n),o.getComponent(C.default).actionFocus(t,n))},N.prototype.backupFurniture=function(t,e,n,i){var o=(a=this.checkFurniture(e)).code,a=(e=a.msg,a.node);return o<0?Promise.resolve(e):(n=this.Milestone.getFurnitureById(n),a.getComponent(C.default).actionBackup(t,n,i))},N.prototype.unselect=function(t,e){var n=this,i=t.skin;t.furnitures.forEach(function(t){n.unselectFurniture(i,t,e)})},N.prototype.unselectFurniture=function(t,e,n){var i=(a=this.checkFurniture(e)).code,o=a.msg,a=a.node;return i<0?Promise.resolve(o):(e=this.Milestone.getFurnitureById(e),a.getComponent(C.default).actionUnselect(t,e,n))},N.prototype.preview=function(t){var e=this,n=t.skin;t.furnitures.forEach(function(t){return e.previewFurniture(n,t,t)})},N.prototype.change=function(t){var e=this,n=t.skin;t.furnitures.forEach(function(t){return e.changeFurniture(n,t,t)})},N.prototype.backup=function(t){var e=t.skin,n=(t=(n=t.furnitures)[0],n[1]);return this.backupFurniture(e,t,n,!0)},N.prototype.previewFurniture=function(t,e,n){var i=(o=this.checkFurniture(e)).code,o=(e=o.msg,o.node);return i<0?Promise.resolve(e):(n=this.Milestone.getFurnitureById(n),o.getComponent(C.default).actionPreview(t,n))},N.prototype.changeFurniture=function(t,e,n){var i=(o=this.checkFurniture(e)).code,o=(e=o.msg,o.node);return-1===i?Promise.resolve(e):(n=this.Milestone.getFurnitureById(n),o.getComponent(C.default).actionChange(t,n))},N.prototype.checkFurniture=function(t){if(!t)return{code:-1,msg:"\u3010\u7269\u54c1\u9009\u62e9-\u6ca1\u6709\u7269\u54c1\u6765\u6e90src\u3011"};var e=this.Milestone.getFurnitureById(t);return e?(e=this.getRoomOld(e.room_type).getChildByName(t))?{code:0,msg:"",node:e}:{code:-3,msg:"\u3010\u7269\u54c1\u9009\u62e9-\u6ca1\u6709\u627e\u5230\u7269\u54c1\u6765\u6e90:"+t+"\u3011"}:{code:-2,msg:"\u3010\u7269\u54c1\u9009\u62e9-\u6ca1\u6709\u7269\u54c1\u6765\u6e90"+t+"\u3011"}},N.prototype.changeNormal=function(t){return l(this,void 0,Promise,function(){var e,n,i,o,a,r=this;return u(this,function(){return e=t.skin,n=t.furnitures,i=t.callback,o=t.context,a=n.map(function(t){var e=(n=r.checkFurniture(t)).code,n=(t=n.msg,n.node);return e<0?Promise.reject(t):n.getComponent(C.default).actionDown()}),[2,Promise.all(a).then(function(){return i&&i.call(o,e,n)}).catch(function(){return i&&i.call(o,e,n)})]})})},N.prototype.changeBone=function(t,e){return l(this,void 0,Promise,function(){var n,i,o,a,r,s,c,l,d,p,h=this;return u(this,function(){return s=t.data,n=t.skin,i=t.furnitures,o=t.callback,a=t.context,c=s.add_furnitures,r=s.del_furnitures,d=c[0],p=r[0],l=this.checkFurniture(d),s=l.code,c=l.msg,l=l.node,s<0?[2,Promise.reject(c)]:(d=this.Milestone.getFurnitureById(d),p=this.Milestone.getFurnitureById(p),r.slice(1).forEach(function(t){var e=h.Milestone.getFurnitureById(t).room_type;(t=h.getRoomOld(e).getChildByName(t))&&h.cleanFurniture(t)}),[2,l.getComponent(C.default).changeBone(n,!0,d,p,e).then(function(){return o&&o.call(a,n,i)}).catch(function(){return o&&o.call(a,n,i)})])})})},N.prototype.changeBones=function(t,e){return l(this,void 0,Promise,function(){var n,i,o,a,r,s,c,l,d,p,h=this;return u(this,function(){return n=t.data,i=t.skin,o=t.furnitures,a=t.callback,r=t.context,p=n.add_furnitures,s=n.del_furnitures,c=[],l=[],d="",p.forEach(function(t,e){var n=(o=h.checkFurniture(t)).code,i=o.msg,o=o.node;0<=n?(l.push({node:o,newId:t,oldId:s[e]}),c.push(s[e])):d+=i}),0===l.length?[2,Promise.resolve(d)]:(c.forEach(function(t){var e=h.Milestone.getFurnitureById(t).room_type;(t=h.getRoomOld(e).getChildByName(t))&&h.cleanFurniture(t)}),p=l.map(function(t){var n=h.Milestone.getFurnitureById(t.newId),o=h.Milestone.getFurnitureById(t.oldId);return t.node.getComponent(C.default).changeBone(i,!0,n,o,e)}),[2,Promise.all(p).then(function(){return a&&a.call(r,i,o)}).catch(function(){return a&&a.call(r,i,o)})])})})},N.prototype.clearGarbage=function(t){return l(this,void 0,void 0,function(){var e,n,i,o,a=this;return u(this,function(){return(o=t.del_furnitures)&&o.length?(e=this.Milestone.getFurnitureById(o[0]).room_type,n=this.getRoomOld(e),i=0,(o=w.default.shuffle(o).slice()).forEach(function(t,e){var i=n.getChildByName(t);i&&a.scheduleOnce(function(){return a.cleanFurniture(i)},.2*(e+1))}),o=o.slice(0,1).map(function(t){var e=n.getChildByName(t);return e?(i+=1,function(){return a.playClearGarbageAnim(e,i-1)}):function(){return Promise.resolve()}}),[2,w.default.queue(o).then(function(){})]):[2,Promise.resolve()]})})},N.prototype.playClearGarbageAnim=function(t,e){var n=this;return new Promise(function(i){0===e?n.animClearGarbageBone(t).then(function(){return i(null)}).catch(function(){return i(null)}):n.scheduleOnce(function(){n.animClearGarbageBone(t).then(function(){return i(null)}).catch(function(){return i(null)})},.1*e)})},N.prototype.animClearGarbageBone=function(t){var e=this;return new Promise(function(n){var i=e.EffectNode,o=_.default.getTargetPos(t,i),a=b.PoolMgr.getPrefab(e.garbagePrefab);a.x=o.x-50,a.y=o.y+50,i.addChild(a),a.getComponent(p.default).play().then(function(){return l(e,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,this.cleanFurniture(t)];case 1:return e.sent(),n(null),cc.isValid(a)&&b.PoolMgr.putNode(a),[2]}})})})})},N.prototype.cleanFurniture=function(t){return l(this,void 0,void 0,function(){return u(this,function(){return cc.isValid(t)?(t.getComponent(C.default).actionClean(),[2]):[2,Promise.resolve()]})})},N.prototype.moveMapToNode=function(t,e,n){var i=this;if(void 0===n&&(n=!0),!t)return Promise.resolve();var o,a=this.Milestone.getFurnitureById(t);if(!a)return Promise.resolve();switch(a.type){case R.FurnitureType.Old:case R.FurnitureType.New:o=this.getRoomOld(a.room_type);break;case R.FurnitureType.Anchor:o=this.map.getChildByName("anchor")}var r=o.getChildByName(t);if(!r)return Promise.resolve();var s=_.default.getTargetPos(r,this.map);!e||t===T.MapConfig.FurnitureSpecial.NewDaySofa||(r=this.buildBuildById(e))&&(c=r[0],t=r[1],l=r[2],c.getComponent(C.default).initWith(t,l,{isInitial:!0}),a=this.Milestone.getFurnitureById(e),s=_.default.getTargetPos(c,this.map),c.destroy()),cc.tween(this.map).stop(),e=(l=a.res_offset)[0]||0;var c=l[1]||0;c+=150,s=cc.v2(s.x-e,s.y-c);var l=this.checkMovePos(-s.x,-s.y),u=(e=this.map.position,c=l.x,s=l.y,c=parseInt(c+""),s=parseInt(s+""),cc.v2(c*this.map.scale,s*this.map.scale)),d=(e=e.sub(u).mag(),Math.max(.4,e/500));return n?new Promise(function(t){i.isLocked=!0,cc.tween(i.map).to(d,{x:u.x,y:u.y},{easing:cc.easing.quintOut}).call(function(){i.isLocked=!1,t(null)}).start()}):(this.map.x=l.x,this.map.y=l.y,Promise.resolve())},N.prototype.buildBuildById=function(t){var e=this.Milestone.getFurnitureById(t),n=this.getRoomOld(e.room_type);if(n.getChildByName(t))return null;var i=y.DataMgr.User.getFurnitureSkinById(t);return t=i?i.select:0,(i=cc.instantiate(this.buildingItem)).parent=n,[i,t,e]},N.prototype.checkMovePos=function(t,e){var n=t;return t=e,n+(e=this.map.scale*this.edgeOffset)>this.MaxOffset.x?n=this.MaxOffset.x-e:n-e<-this.MaxOffset.x&&(n=-this.MaxOffset.x+e),t+e>this.MaxOffset.y?t=this.MaxOffset.y-e:t-e<-this.MaxOffset.y&&(t=-this.MaxOffset.y+e),{x:n,y:t}},N.prototype.onTouchStart=function(t){this.touchBegin=t.getLocation(),this.touchTime=v.default.nowTime,this.moveTween1&&this.moveTween1.stop(),this.moveTween2&&this.moveTween2.stop(),this.moveTween3&&this.moveTween3.stop(),this.moveTween1=null,this.moveTween2=null,this.moveTween3=null,this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0)},N.prototype.onTouchMove=function(t){var e,n,i,o;this.isLocked||(2<=(o=t.getTouches()).length?(this.isMoving=!0,i=o[0],e=o[1],n=cc.v2(i.getDelta()),t=cc.v2(e.getDelta()),i=this.map.convertToNodeSpaceAR(cc.v2(i.getLocation())),e=this.map.convertToNodeSpaceAR(cc.v2(e.getLocation())),i=i.sub(e),n=n.sub(t),t=1,t=Math.abs(i.x)>Math.abs(i.y)?(i.x+n.x)/i.x*this.map.scaleX:(i.y+n.y)/i.y*this.map.scaleY,i=e.add(cc.v2(i.x/2,i.y/2)),this.smoothOperate(this.map,i,t)):1===o.length&&(this.isMoving||this.isCanStartMove(o[0]))&&(this.isMoving=!0,o=cc.v2(o[0].getDelta()),this.dealMove(o,this.map,this.node)))},N.prototype.onTouchEnd=function(t){var e,n,i,o,a;!this.isLocked&&t.getTouches().length<=1&&(this.isMoving?v.default.nowTime-this.touchTime<300?(e=(n=this.MaxOffset).x,o=n.y,i=cc.v2(this.touchBegin.x-t.getLocation().x,this.touchBegin.y-t.getLocation().y),n=this.map.x+-2*i.x,i=this.map.y+-2*i.y,n=Math.min(+e,Math.max(n,0-e)),i=Math.min(+o,Math.max(i,0-o)),this.moveTween1=cc.tween(this.map).to(1,{x:n,y:i},{easing:cc.easing.quintOut}).start(),o=this.checkMovePos(n,i),Object.keys(o).length&&(a={},o.x&&(a.x=o.x),o.y&&(a.y=o.y),this.moveTween2=cc.tween(this.map).delay(.3).to(1,s({},a),{easing:cc.easing.quintOut}).start())):(n=this.map.x,i=this.map.y,o=this.checkMovePos(n,i),Object.keys(o).length&&(a={},o.x&&(a.x=o.x),o.y&&(a.y=o.y),this.moveTween3=cc.tween(this.map).delay(1).to(1,s({},a),{easing:cc.easing.quintOut}).start()),S.EventMgr.emit(P.EventEnum.HideFitUp,!1)):(a=cc.v2(t.getLocation()),a=this.map.convertToNodeSpaceAR(a),this.dealSelect(t,a)),this.isMoving=!1,this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0))},N.prototype.onTouchCancel=function(t){var e,n,i,o,a;this.isLocked||(t.getTouches().length<=1&&(v.default.nowTime-this.touchTime<300?(e=(n=this.MaxOffset).x,o=n.y,i=cc.v2(this.touchBegin.x-t.getLocation().x,this.touchBegin.y-t.getLocation().y),n=this.map.x+-2*i.x,i=this.map.y+-2*i.y,n=Math.min(+e,Math.max(n,0-e)),i=Math.min(+o,Math.max(i,0-o)),this.moveTween1=cc.tween(this.map).to(1,{x:n,y:i},{easing:cc.easing.quintOut}).start(),o=this.checkMovePos(n,i),Object.keys(o).length&&(a={},o.x&&(a.x=o.x),o.y&&(a.y=o.y),this.moveTween2=cc.tween(this.map).delay(.3).to(1,s({},a),{easing:cc.easing.quintOut}).start())):(n=this.map.x,i=this.map.y,o=this.checkMovePos(n,i),Object.keys(o).length&&(a={},o.x&&(a.x=o.x),o.y&&(a.y=o.y),this.moveTween3=cc.tween(this.map).delay(1).to(1,s({},a),{easing:cc.easing.quintOut}).start()))),this.isMoving=!1,this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0))},N.prototype.isCanStartMove=function(t){var e=t.getStartLocation();return t=t.getLocation(),Math.abs(t.x-e.x)>this.moveOffset||Math.abs(t.y-e.y)>this.moveOffset},N.prototype.dealMove=function(t,e,n){var i=e.convertToWorldSpaceAR(cc.Vec2.ZERO);(i=n.convertToNodeSpaceAR(i)).x+=t.x,i.y+=t.y,(i=this.calculateEdge(e,n,i)).left<=0&&i.right<=0&&(e.x+=t.x),i.top<=0&&i.bottom<=0&&(e.y+=t.y)},N.prototype.getColliders=function(){var t,e=[];for(t in this.roomNodeMap){var n=this.getRoomOld(+t);cc.isValid(n)&&(n=n.children.filter(function(t){return t.active&&t.children[1]}).map(function(t){return t.children[1].children[0].getComponent(cc.PolygonCollider)}).filter(function(t){return!!t}),e=e.concat(n))}return e},N.prototype.dealSelect=function(t,e){if(this.onSingleTouch&&this.onSingleTouch(e),(e=t.target.getComponent(C.default))&&e.data){for(var n=t.getLocation(),i=this.getColliders(),o=void 0,a=i.length-1;0<=a;a--){var r=(o=i[a]).node.convertToNodeSpaceAR(n);if(cc.Intersection.pointInPolygon(r,o.points)){(r=(r=o.node.parent.parent)&&r.getComponent(C.default))&&r.actionClick(),r&&r.actionTouchAnim();break}}S.EventMgr.emit(P.EventEnum.ActionViewTemp,{type:2,data:null})}},N.prototype.removeTouchFromContent=function(t,e){for(var n=t.getTouches().map(function(t){return t.getID()}),i=e.length-1;0<=i;--i)-1<n.indexOf(e[i].id)&&e.splice(i,1)},N.prototype.smoothOperate=function(t,e,n){var i;this.minScale<=n&&n<=this.maxScale?(i=n-t.scaleX,i=e.scale(cc.v2(i,i)),i=t.position.sub(cc.v2(i.x,i.y)),n=Math.floor(100*n)/100,t.scale=n,this.dealScalePos(cc.v2(i.x,i.y),t)):cc.misc.clampf(n,this.minScale,this.maxScale)},N.prototype.dealScalePos=function(t,e){var n;1===e.scale?t=cc.Vec2.ZERO:(n=this.node.convertToWorldSpaceAR(t),n=this.node.convertToNodeSpaceAR(n),0<(n=this.calculateEdge(e,this.node,n)).left&&(t.x-=n.left),0<n.right&&(t.x+=n.right),0<n.top&&(t.y+=n.top),0<n.bottom&&(t.y-=n.bottom)),e.position=cc.v2(t.x,t.y)},N.prototype.calculateEdge=function(t,e,n){var i=(e.width-t.width*t.scaleX)/2;return t=(e.height-t.height*t.scaleY)/2,{left:i+n.x,right:i-n.x,top:t-n.y,bottom:t+n.y}},Object.defineProperty(N.prototype,"MaxOffset",{get:function(){var t=this.map.scale,e=(this.map.width*t-cc.winSize.width)/2;return t=(this.map.height*t-cc.winSize.height)/2,cc.v2(e,t)},enumerable:!0,configurable:!0}),c([o(cc.Node)],N.prototype,"map",void 0),c([o(cc.Prefab)],N.prototype,"buildingItem",void 0),c([o(cc.Prefab)],N.prototype,"garbagePrefab",void 0),c([o(cc.Node)],N.prototype,"wxAd",void 0),c([o({tooltip:"\u56fe\u7247\u521d\u59cb\u7f29\u653e"})],N.prototype,"defaultScale",void 0),c([o({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5c0fscale"})],N.prototype,"minScale",void 0),c([o({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5927scale"})],N.prototype,"maxScale",void 0),c([o({tooltip:"\u5355\u70b9\u89e6\u6478\u5bb9\u5fcd\u8bef\u5dee"})],N.prototype,"moveOffset",void 0),i=c([i],N),a.default=i,cc._RF.pop()},{}],MapsModel:[function(t,e,n){"use strict";cc._RF.push(e,"6f740YZxm9CqY1OSFn8NELI","MapsModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("BaseModel"),c=i("DataMgr"),l=i("LoaderCfg");function u(){var t=r.call(this)||this;return t.moneyArr=[],t.rewardArr=[],t.chapterArr=[],t.lastChapter=null,t}a(u,r=s.default),u.prototype.init=function(){var t=(n=cc.loader.getRes(l.ResJson.Maps).json).money,e=n.reward,n=n.chapter;this.lastChapter=n[n.length-1],this.moneyArr=t,this.rewardArr=e,this.chapterArr=n},Object.defineProperty(u.prototype,"MoneyList",{get:function(){return this.moneyArr},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"RewardList",{get:function(){return this.rewardArr},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"ChapterList",{get:function(){return this.chapterArr},enumerable:!0,configurable:!0}),u.prototype.getChapterByLv=function(t){var e,n=this.ChapterList;return t<=n.length?e=n[t-1]:((e=JSON.parse(JSON.stringify(this.lastChapter))).id=t,e.grade=4e3*(t-n.length)+this.lastChapter.grade,t%5==0&&(e.HPWeight=[35,45])),e},u.prototype.getMoneyNum=function(){var t=this.MoneyList;return t[Math.min(c.DataMgr.User.Data.moneyIndex,t.length-1)].num},Object.defineProperty(u.prototype,"AddStar",{get:function(){return this._addStar},enumerable:!0,configurable:!0}),u.prototype.setAddStar=function(t){this._addStar+=t},u.prototype.resetAddStar=function(){this._addStar=0},u.prototype.clearData=function(){this.init()},u.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(u,"I",{get:function(){return this.instance||(this.instance=new u)},enumerable:!0,configurable:!0}),u.instance=null,a=u,o.default=a,cc._RF.pop()},{}],MenuPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"f819ao2rdZI9o3VxO4Yq5Ba","MenuPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var d,p,h=i("Const"),f=i("Action"),m=i("AudioMgr"),g=i("EventMgr"),_=i("EventEnum"),y=i("OnlineMgr"),v=i("Enum"),b=i("ComPointTip"),w=i("SDKTools"),S=i("ViewMgr"),M=i("RecordPopwin"),C=i("InvitePopwin"),P=i("SDKEnums"),A=i("SDKAnalytics"),T=i("RankPopwin"),E=i("DataMgr"),B=i("UserModel"),D=i("AudioEnum"),I=i("BattleMgr"),k=i("Display"),O=i("PointMgr"),R=i("SkinShopPopwin"),N=i("UserBaseModel"),L=i("ShopPopwin"),x=i("ImageLabel"),F=i("SignPopwin"),U=i("BaseAnimPopwin");function K(){var t=null!==d&&d.apply(this,arguments)||this;return t.txtRecordScore=null,t.loginbtn=null,t.labname=null,t.labid=null,t.iconAudio=null,t.iconVibrate=null,t.btnRank=null,t.btnFeedback=null,t.pointTip=null,t.headicon=null,t.wxBtnsPos=[],t.ballobj=null,t.isclose=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(K,d=U.default),(p=K).prototype.onOpen=function(t){d.prototype.onOpen.call(this,t),this.isclose=!1,this.initUI(),this.initAudio(),this.initVibrate()},K.prototype.onOpend=function(){d.prototype.onOpend.call(this),this.doInitOpen()},K.prototype.onClose=function(){d.prototype.onClose.call(this),this.removePoint(),w.default.destoryUserBtn("menu"),this.wxBtnFeedback&&this.wxBtnFeedback.destroy()},K.prototype.onResume=function(){this.BannerOpen&&this.showBanner()},K.prototype.onReward=function(){E.DataMgr.User.CurLevel<w.default.getParamsInt(P.OnlineKeys.sign_min_lv,6)?k.default.showTip("\u8fd8\u672a\u89e3\u9501\u7b7e\u5230\u529f\u80fd~\u5feb\u53bb\u5347\u7ea7\u5427"):(S.ViewMgr.openPopwin(F.default),this.handleClose())},K.prototype.onTouchMask=function(){this.onBack()},Object.defineProperty(K.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(p.PREFAB_PATH)},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"BannerUid",{get:function(){return this.BannerOpen?y.OnlineMgr.getAdByType(y.AdType.BannerCommon):null},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"BannerType",{get:function(){return 3},enumerable:!0,configurable:!0}),K.prototype.addEvent=function(){d.prototype.addEvent.call(this),g.EventMgr.on(_.EventEnum.MenuClose,this.handleClose,this),g.EventMgr.on(_.EventEnum.UpdateAvatar,this.initUI,this)},K.prototype.removeEvent=function(){d.prototype.removeEvent.call(this),g.EventMgr.off(_.EventEnum.MenuClose,this.handleClose,this),g.EventMgr.off(_.EventEnum.UpdateAvatar,this.initUI,this)},K.prototype.openAnim=function(){return f.default.playAnim(this.node.getChildByName("content"),v.AnimNames.HomeMenuOpen)},K.prototype.closeAnim=function(){return f.default.playAnim(this.node.getChildByName("content"),v.AnimNames.HomeMenuClose)},K.prototype.initUI=function(){this.txtRecordScore.string=B.default.I.Lv_BestScore.toString(),this.labid.string=(N.default.I.ID+1e7).toString(),this.labname.string=N.default.I.Data.nickname,this.loginbtn.node.active=!w.default.Authorize;var t=E.DataMgr.User.getMaxRecordDatas(I.default.I.m_Type)||[],e=-1;(e=0<t.length?this.getMaxBall(t[0]):e)&&0<e?(this.ballobj.active=!0,this.ballobj.getComponent(cc.Sprite).spriteFrame=I.default.I.getSkin(e),e=I.default.I.getTarBallNum(e),this.ballobj.getChildByName("num").getComponent(x.default).setText(e)):this.ballobj.active=!1,this.setHeadIcon()},K.prototype.getMaxBall=function(t){var e=t.balls;if(null==e||e.length<=0)return-1;for(var n=0,i=0;i<e.length;i++){var o=e[i];o.lv>n&&(n=o.lv)}return n},K.prototype.checkLoadBanner=function(){this.loadBanner()},K.prototype.doInitOpen=function(){this.initFeedback(this.wxBtnsPos[2]),this.initAuthBtn(this.wxBtnsPos[0])},K.prototype.onBack=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(){return this.isclose||(this.isclose=!0,m.AudioMgr.button(),this.hideBanner(),this.closeAnim().then(function(){t.doClose(p)})),[2]})})},K.prototype.onRecord=function(){m.AudioMgr.button(),S.ViewMgr.openPopwin(M.default,{data:{type:v.EnterGameState.MenuMaxRecord}}),this.handleClose()},K.prototype.onInvite=function(){m.AudioMgr.button(),S.ViewMgr.openPopwin(C.default,{data:{type:v.InviteType.Star}}),this.handleClose(),A.default.event(P.EventKeys.MenuInvite,P.EventFrom.Menu)},K.prototype.onRank=function(){m.AudioMgr.button(),S.ViewMgr.openPopwin(T.default,{data:{type:v.ModuleType.Menu}}),this.handleClose()},K.prototype.onSound=function(){var t=this;m.AudioMgr.button(),E.DataMgr.User.reqSwitchMute().then(function(){m.AudioMgr.musicMuted=E.DataMgr.User.Data.mute,m.AudioMgr.playBgm(D.AudioEnum.music2),t.initAudio()}),A.default.event(P.EventKeys.MenuAudio,P.EventFrom.Menu)},K.prototype.onVibrate=function(){var t=this;m.AudioMgr.button(),E.DataMgr.User.reqSwitchVibrate().then(function(){return t.initVibrate(!0)}),A.default.event(P.EventKeys.MenuVibrate,P.EventFrom.Menu)},K.prototype.onRestart=function(){m.AudioMgr.button(),I.default.I.saveGame(!0),B.default.I.reqLvCurTarBall(h.default.MinTarBallLv,!1),I.default.I.GameOver(!0),this.handleClose(),g.EventMgr.emit(_.EventEnum.GameWithChapter),A.default.event(P.EventKeys.MenuNewGame,P.EventFrom.Menu)},K.prototype.onShare=function(){m.AudioMgr.button(),w.default.share(P.ShareKeys.Friends,{invite_type:v.InviteType.Net}),A.default.event(P.EventKeys.MenuShare,P.EventFrom.Menu)},K.prototype.onHome=function(){m.AudioMgr.button(),!B.default.I.IsFinishHomeGuid&&B.default.I.Star<3?k.default.showTip("\u83b7\u5f973\u9897\u661f\u661f\u89e3\u95012048\u5c0f\u5bb6"):(I.default.I.handleHistoryRecord(),k.default.PersistNode.loadToHome(),this.handleClose())},K.prototype.onshop=function(){m.AudioMgr.button(),S.ViewMgr.openPopwin(L.default),this.handleClose()},K.prototype.onSkinShop=function(){m.AudioMgr.button(),S.ViewMgr.openPopwin(R.default),this.handleClose(),A.default.event(P.EventKeys.avatarShop_click,"\u4e3b\u754c\u9762")},K.prototype.initAuthBtn=function(t){var e=this;k.default.createAuthBtn("menu","",t,{callback:function(t){1===t&&(e.initUI(),e.loginbtn.node.active=!1),0===t&&k.default.showTip("\u67e5\u770b\u6392\u884c\u699c\u9700\u6388\u6743\u54e6~")},context:this})},K.prototype.initFeedback=function(t){t=k.default.getRectSize(t),t={type:"text",text:"",backgroundColor:"rgb(0,0,0)",style:s({},t,{borderRadius:4})},this.wxBtnFeedback=w.default.createFeedbackButton(t)},K.prototype.onHide=function(){w.default.hideUserBtn("menu"),this.wxBtnFeedback&&this.wxBtnFeedback.hide()},K.prototype.onShow=function(){w.default.showUserBtn("menu"),this.wxBtnFeedback&&this.wxBtnFeedback.show()},K.prototype.addPoint=function(){O.PointMgr.register([{type:v.ModuleType.MenuInvite,comps:[this.pointTip]}]),E.DataMgr.Point.updatePoint(v.ModuleType.Menu)},K.prototype.removePoint=function(){O.PointMgr.unregister([{type:v.ModuleType.MenuInvite,comps:[this.pointTip]}])},K.prototype.initAudio=function(){var t=this.iconAudio.node.getComponent(cc.Animation);E.DataMgr.User.Data.mute?t.play("anim_music_off"):t.play("anim_music_on")},K.prototype.initVibrate=function(t){void 0===t&&(t=!1);var e=this.iconVibrate.node.getComponent(cc.Animation);t&&E.DataMgr.User.Data.vibrate&&w.default.vibrateShort(),E.DataMgr.User.Data.vibrate?e.play("anim_shake_on"):e.play("anim_shake_off")},K.prototype.setHeadIcon=function(){var t=this,e=N.default.I.Data.avatar_url;e&&cc.loader.load({url:e,type:"png"},function(e,n){!e&&cc.isValid(t.headicon)&&(t.headicon.spriteFrame=new cc.SpriteFrame(n))})},K.prototype.onAnimationEnd=function(){this.doInitOpen()},K.prototype.handleClose=function(){w.default.hideUserBtn("menu"),this.wxBtnFeedback&&this.wxBtnFeedback.hide(),this.doClose(p)},K.PREFAB_PATH="prefab/popwin/popwin_menu",c([o(cc.Label)],K.prototype,"txtRecordScore",void 0),c([o(cc.Sprite)],K.prototype,"loginbtn",void 0),c([o(cc.Label)],K.prototype,"labname",void 0),c([o(cc.Label)],K.prototype,"labid",void 0),c([o(cc.Sprite)],K.prototype,"iconAudio",void 0),c([o(cc.Sprite)],K.prototype,"iconVibrate",void 0),c([o(cc.Node)],K.prototype,"btnRank",void 0),c([o(cc.Node)],K.prototype,"btnFeedback",void 0),c([o(b.default)],K.prototype,"pointTip",void 0),c([o(cc.Sprite)],K.prototype,"headicon",void 0),c([o(cc.Node)],K.prototype,"wxBtnsPos",void 0),c([o(cc.Node)],K.prototype,"ballobj",void 0),i=p=c([i],K),a.default=i,cc._RF.pop()},{}],MilestoneModel:[function(t,e,n){"use strict";cc._RF.push(e,"4109eBOpwVEApvvhY+a0MQM","MilestoneModel");var i=t,o=n,a=__EXTENDS__(),r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var s,c,l=i("BaseModel"),u=i("DataMgr"),d=i("Enum"),p=i("UserBaseModel"),h=i("SDKTools"),f=i("SDKEnums");function m(){var t=c.call(this)||this;return t.init(),t}(i=s=o.MilestoneKey||(o.MilestoneKey={})).Tasks="Tasks",i.TasksOld="TasksOld",i.Furniture="Furniture",i.TaskGroup="TaskGroup",i.Milestones="Milestones",a(m,c=l.default),m.prototype.init=function(){this._cfgData=Object.create(null)},m.prototype.setCfg=function(t){this._cfgData=t},m.prototype.getCfg=function(t){return this._cfgData[t]},m.prototype.clearData=function(){this.init()},Object.defineProperty(m.prototype,"Tasks",{get:function(){return this.getCfg(s.Tasks)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"TasksOld",{get:function(){return this.getCfg(s.TasksOld)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"TaskGroup",{get:function(){return this.getCfg(s.TaskGroup)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"Furniture",{get:function(){return this.getCfg(s.Furniture)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"Milestones",{get:function(){return this.getCfg(s.Milestones)},enumerable:!0,configurable:!0}),m.prototype.getTaskById=function(t){return this.Tasks[t]||{id:t,action_type:4,groupId:0,room_type:d.RoomType.Living,name:"\u65b0\u7684\u4e00\u5929",icon:"Day1_13",select:"Day1_13",cost_star:1,del_furnitures:[],add_furnitures:[],focus_furniture:"",have_guide:0,plot_id:-1e3}},m.prototype.getTaskOldById=function(t){return this.TasksOld[t]},m.prototype.getTaskOldBySceneId=function(t){var e,n,i=[];for(e in this.TasksOld)!Object.prototype.hasOwnProperty.call(this.TasksOld,e)||(n=this.TasksOld[e]).scene_id===t&&i.push(r({},n));return i},m.prototype.getFurnitureById=function(t){return this.Furniture[t]},m.prototype.getTaskCostStar=function(t){var e=h.default.getParamsInt(f.OnlineKeys.task_unlock_minlv_abtest,0);return 2==t?2==e||1==e&&p.default.I.ID%2==0?5:3:this.getTaskById(t).cost_star},m.prototype.getMilestoneById=function(t){return this.Milestones.filter(function(e){return e.id===t})[0]},m.prototype.getTaskIdByFurnitureId=function(t){var e,n=this.Tasks;for(e in n)if(n[e].del_furnitures.filter(function(e){return e===t}).length)return+e;return 0},m.prototype.getTaskOtherByFurnitureId=function(t){var e,n=this.Tasks;for(e in n)if(n[e].del_furnitures[0]===t)return r({},n[e]);return null},m.prototype.getTaskByAddFurnitureId=function(t){var e,n=this.Tasks;for(e in n)if(n[e].add_furnitures.filter(function(e){return e===t}).length)return n[e];return null},m.prototype.getTaskByPlotId=function(t){var e,n=this.Tasks;for(e in n)if(n[e].plot_id===t)return n[e];return null},m.prototype.getTaskGroupById=function(t){return this.TaskGroup[t]||{id:t,day:1,task_ids:[],name:""}},m.prototype.getNextTaskGroupById=function(t){for(var e=this.Milestones,n=e.length,i=null,o=0;o<n;o++){var a=e[o],s=a.taskgroup_ids,c=a.scene_id,l=a.next_milestone,u=s.indexOf(t);if(0<=u){u===s.length-1?(a=e[o+1])&&(i={curr_group:a.taskgroup_ids[0],curr_scene:a.scene_id,next_scene:a.next_milestone}):i={curr_group:s[u+1],curr_scene:c,next_scene:l};break}}if(i){var d=i.curr_group;return r({},i,{task_list:this.getTaskListById(d)})}return null},m.prototype.getTaskListById=function(t){var e=this;return this.getTaskGroupById(t).task_ids.map(function(t){return e.Tasks[t]})},m.prototype.getMilestoneDetails=function(){var t=(e=u.DataMgr.User.Milestone).curr_group,e=e.curr_scene;return{milestone:this.getMilestoneById(e),group:this.getTaskGroupById(t),tasks:this.getTaskListById(t)}},m.prototype.getGroupTaskList=function(){var t=u.DataMgr.User.Milestone.curr_scene;return this.getGroupTaskListById(t)},m.prototype.getGroupTaskListById=function(t){var e=this,n=[];return this.getMilestoneById(t).taskgroup_ids.forEach(function(t){var i=e.getTaskGroupById(t).task_ids.map(function(n){return n=e.getTaskById(n),r({},n,{groupId:t})});n=n.concat(i)}),n},m.prototype.getOldFurnitures=function(t){var e=[],n={};t.forEach(function(t){return n["O"+t]=1});var i,o=this.Furniture;for(i in o){var a=o[i],r=a.id.split("-")[0];n[r]&&e.push(a)}return e},m.prototype.getNewFurnitures=function(t){void 0===t&&(t=1);var e,n=[],i=this.Furniture,o=this.getCompleteTaskAddFurnitures();for(e in i){var a=i[e];o[a.id]&&0===a.id.indexOf("N"+t+"-")&&n.push(a)}return n},m.prototype.getCompleteTaskAddFurnitures=function(){var t=this,e={};return u.DataMgr.User.Milestone.complete_tasks.forEach(function(n){(n=t.getTaskById(n))&&n.add_furnitures.forEach(function(t){return e[t]=1})}),e},m.prototype.getCompleteTaskDelFurnitures=function(){var t=this,e={};return u.DataMgr.User.Milestone.complete_tasks.forEach(function(n){(n=t.getTaskById(n))&&n.del_furnitures.forEach(function(t){return e[t]=1})}),e},m.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(m,"I",{get:function(){return this.instance||(this.instance=new m)},enumerable:!0,configurable:!0}),m.instance=null,a=m,o.default=a,(a=o.FurnitureType||(o.FurnitureType={}))[a.Anchor=-1]="Anchor",a[a.Old=0]="Old",a[a.New=1]="New",(o=o.SwitchEffect||(o.SwitchEffect={}))[o.None=0]="None",o[o.Light=1]="Light",o[o.DownAndLight=2]="DownAndLight",cc._RF.pop()},{}],MissionItem:[function(t,e,n){"use strict";cc._RF.push(e,"58d87ScFDpL+784pHUqc4QX","MissionItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("ExtScrollView"),u=i("DataMgr"),d=i("BattleMgr"),p=i("MissionModel"),h=i("Action"),f=i("AudioMgr"),m=i("Display"),g=i("ViewMgr"),_=i("ServicePopwin"),y=i("InvitePopwin"),v=i("Enum"),b=i("CollectPopwin"),w=i("FloatingPopwin"),S=i("ShopPopwin"),M=i("MissionPopwin"),C=i("SDKAnalytics"),P=i("SDKEnums"),A=i("ImageLabelNew");function T(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_labcoin=null,t.m_labProgress=null,t.m_labName=null,t.m_labActNum=null,t.m_sprIndex=null,t.m_sprSlider=null,t.m_indexicons=[],t.m_icons=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(T,c=l.ExtScrollItem),T.prototype.updateCell=function(t,e,n){var i=this;(n=void 0!==n&&n)&&this.node.parent.parent.parent.getComponent(l.default).stopAutoScroll(),this.m_MissionID=t.id;var o=u.DataMgr.Missions.getMissionDBById(t.id);o.time_type==p.MissionType.Daily?(h.default.playAnim(this.node,"anim_list_dailytask"),this.m_labActNum.setValue(o.actdegree_num_add,"+",!1)):(h.default.playAnim(this.node,"anim_list_lifetask"),this.m_labcoin.setValue(o.coins_num_add,"+",!1),this.m_sprIndex.spriteFrame=this.m_indexicons[Math.min(t.index,o.count_need_num.length-1)],(a=this.getIcon(t.id))&&(this.m_sprIndex.node.parent.getComponent(cc.Sprite).spriteFrame=a));var a=o.count_need_num[Math.min(t.index,o.count_need_num.length-1)];switch(0<(o=o.mission_name).indexOf("n")&&(o=o.split("n")[0]+a+o.split("n")[1]),this.m_labName.string=o,o=Math.min(t.value/a,1),n?cc.tween(this.m_sprSlider).to(.2,{fillRange:o}).start():this.m_sprSlider.fillRange=o,this.m_labProgress.setText(Math.min(t.value,a)+"/"+a),u.DataMgr.Missions.getMissionState(t.id)){case p.MissionState.Doing:n?h.default.playAnim(this.node.getChildByName("task"),"anim_task_claim_light").then(function(){h.default.playAnim(i.node.getChildByName("task"),"anim_task_todo")}):h.default.playAnim(this.node.getChildByName("task"),"anim_task_todo");break;case p.MissionState.Finished:h.default.playAnim(this.node.getChildByName("task"),"anim_task_done");break;case p.MissionState.Reward:n?h.default.playAnim(this.node.getChildByName("task"),"anim_task_claim_light").then(function(){h.default.playAnim(i.node.getChildByName("task"),"anim_task_claim")}):h.default.playAnim(this.node.getChildByName("task"),"anim_task_claim")}},T.prototype.onJump=function(){f.AudioMgr.button(),this.dojump()},T.prototype.dojump=function(){var t=u.DataMgr.Missions.getMissionDBById(this.m_MissionID);t.main_page_words&&""!=t.main_page_words&&m.default.showTip(t.main_page_words),t.count_type==p.MissionCheckType.Service?g.ViewMgr.openPopwin(_.default):t.count_type==p.MissionCheckType.Invite?g.ViewMgr.openPopwin(y.default,{data:{type:v.InviteType.Star}}):t.count_type==p.MissionCheckType.CollectGame?g.ViewMgr.openPopwin(b.default):t.count_type==p.MissionCheckType.Float?g.ViewMgr.openPopwin(w.default):t.count_type==p.MissionCheckType.BuyCoin?g.ViewMgr.openPopwin(S.default):t.count_type==p.MissionCheckType.FinishHomeTask&&d.default.I.ongohome(),g.ViewMgr.closePopwin(M.default)},T.prototype.getIcon=function(t){switch(t){case 2001:return this.m_icons[0];case 2002:return this.m_icons[1];case 2003:return this.m_icons[2];case 2004:return this.m_icons[3];case 2005:return this.m_icons[4];case 2006:return this.m_icons[5];case 2007:return this.m_icons[6];case 2008:return this.m_icons[7];case 2009:return this.m_icons[8];case 2010:return this.m_icons[9];case 2011:return this.m_icons[10];case 2012:return this.m_icons[11]}return null},T.prototype.onReward=function(){var t=this;f.AudioMgr.button(),u.DataMgr.Missions.getMissionState(this.m_MissionID)==p.MissionState.Reward&&(u.DataMgr.Missions.reqGetMissionReward(this.m_MissionID,function(e){t.updateCell(e,0,!0),u.DataMgr.Missions.getMissionState(e.id)==p.MissionState.Finished||h.default.playAnim(t.node.getChildByName("task"),"anim_task_claim_light").then(function(){}),t.updateCell(e,0,!0)}),1==u.DataMgr.Missions.getMissionDBById(this.m_MissionID).time_type?C.default.event(P.EventKeys.task_panel_daily_get_reward,""):C.default.event(P.EventKeys.task_panel_history_get_reward,""))},s([o(A.default)],T.prototype,"m_labcoin",void 0),s([o(A.default)],T.prototype,"m_labProgress",void 0),s([o(cc.Label)],T.prototype,"m_labName",void 0),s([o(A.default)],T.prototype,"m_labActNum",void 0),s([o(cc.Sprite)],T.prototype,"m_sprIndex",void 0),s([o(cc.Sprite)],T.prototype,"m_sprSlider",void 0),s([o(cc.SpriteFrame)],T.prototype,"m_indexicons",void 0),s([o(cc.SpriteFrame)],T.prototype,"m_icons",void 0),i=s([i],T),a.default=i,cc._RF.pop()},{}],MissionModel:[function(t,e,n){"use strict";cc._RF.push(e,"264a3XDEf1B5YrM3oFQjeJI","MissionModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s,c,l,u=i("BaseModel"),d=i("DataMgr"),p=i("UserModel"),h=i("EventMgr"),f=i("EventEnum");function m(){var t=l.call(this)||this;return t.init(),t}a(m,l=u.default),m.prototype.init=function(){this._cfgData=Object.create(null),this._actcfg=Object.create(null)},m.prototype.setActCfg=function(t){this._actcfg=t},m.prototype.getActCfg=function(){return this._actcfg},m.prototype.setCfg=function(t){this._cfgData=t},m.prototype.getCfg=function(){return this._cfgData},m.prototype.clearData=function(){this.init()},Object.defineProperty(m.prototype,"ActCfgs",{get:function(){return this.getActCfg()},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"Missions",{get:function(){return this.getCfg()},enumerable:!0,configurable:!0}),m.prototype.getMissionDBById=function(t){return this.Missions.filter(function(e){return e.id===t})[0]},m.prototype.getMissionActDBById=function(t){return this.ActCfgs.filter(function(e){return e.id===t})[0]},m.prototype.getAllDailyMissions=function(){return this.Missions.filter(function(t){return t.time_type===r.Daily})},m.prototype.getAllMainMissions=function(){return this.Missions.filter(function(t){return t.time_type===r.Main})},m.prototype.getUserMainMissions=function(){return p.default.I.UserMissions},m.prototype.getUserMainMissionData=function(t){for(var e=this.getUserMainMissions(),n=0;n<e.length;n++){var i=e[n];if(i.id==t)return i}return{id:t,index:0,value:0}},m.prototype.getUserDailyMissions=function(){return p.default.I.UserDailyMissions},m.prototype.getUserDailyMissionData=function(t){for(var e=this.getUserDailyMissions(),n=0;n<e.dailymissions.length;n++){var i=e.dailymissions[n];if(i.id==t)return i}return{id:t,index:0,value:0}},m.prototype.saveMission=function(t,e,n){return this.getMissionDBById(t).time_type==r.Daily?p.default.I.reqSaveDailyMission(t,e,n):p.default.I.reqSaveMission(t,e,n)},m.prototype.getMissionState=function(t){var e=this.getMissionDBById(t);return(t=e.time_type==r.Daily?this.getUserDailyMissionData(t):this.getUserMainMissionData(t)).index>=e.count_need_num.length?c.Finished:t.value>=e.count_need_num[t.index]?c.Reward:c.Doing},m.prototype.getMissionProgress=function(t){t=(e=this.getMissionDBById(t)).time_type==r.Daily?this.getUserDailyMissionData(t):this.getUserMainMissionData(t);var e=e.count_need_num[Math.min(t.index,e.count_need_num.length-1)];return t.value/e},m.prototype.getMissionsByCheckType=function(t){return this.Missions.filter(function(e){return e.count_type===t})},m.prototype.addMissionProgress=function(t,e){var n=this;d.DataMgr.User.CurLevel<2||this.getMissionsByCheckType(t).forEach(function(i){var o=i.time_type==r.Daily?n.getUserDailyMissionData(i.id):n.getUserMainMissionData(i.id),a=i.id;n.saveMission(o.id,o.value+e,o.index).then(function(){n.getMissionState(a)==c.Reward&&1==n.getMissionProgress(a)&&(t==s.Invite||h.EventMgr.emit(f.EventEnum.MissionComplete,a))})})},m.prototype.setMissionProgress=function(t,e){var n=this;d.DataMgr.User.CurLevel<2||this.getMissionsByCheckType(t).forEach(function(i){var o=i.time_type==r.Daily?n.getUserDailyMissionData(i.id):n.getUserMainMissionData(i.id),a=i.id;n.saveMission(o.id,e,o.index).then(function(){n.getMissionState(a)==c.Reward&&1==n.getMissionProgress(a)&&(t==s.Invite||h.EventMgr.emit(f.EventEnum.MissionComplete,a))})})},m.prototype.checkisFinishDaily=function(){var t=this.getUserDailyMissions();return 100<=t.activenum&&t.rewarded.length>=this.ActCfgs.length},m.prototype.reqGetMissionReward=function(t,e){var n,i=this,o=this.getMissionDBById(t);return o.time_type==r.Daily?(n=this.getUserDailyMissionData(o.id),p.default.I.reqAddDailyAct(o.actdegree_num_add)):(n=this.getUserMainMissionData(o.id),p.default.I.reqDiamond(o.coins_num_add)),n.index++,this.saveMission(n.id,n.value,n.index).then(function(){h.EventMgr.emit(f.EventEnum.UpdateMissionData,o.time_type==r.Daily),e&&e.call(i,n)})},m.prototype.isHadRewardMission=function(){for(var t=this.Missions,e=0;e<t.length;e++){var n=t[e];if(this.getMissionState(n.id)==c.Reward)return n.id}return-1},m.prototype.getHadRewardMission=function(){for(var t=0,e=this.Missions,n=0;n<e.length;n++){var i=e[n];this.getMissionState(i.id)==c.Reward&&t++}return t},m.prototype.getHadDailyChestRewardnum=function(){for(var t=d.DataMgr.Missions.getUserDailyMissions(),e=d.DataMgr.Missions.ActCfgs,n=e.length,i=0,o=0;o<n;o++){var a=e[o];0<=t.rewarded.indexOf(a.id)||t.activenum>=a.actdegree_num_need&&i++}return i},m.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(m,"I",{get:function(){return this.instance||(this.instance=new m)},enumerable:!0,configurable:!0}),m.instance=null,a=m,o.default=a,(a=r=o.MissionType||(o.MissionType={}))[a.Daily=1]="Daily",a[a.Main=2]="Main",(a=s=o.MissionCheckType||(o.MissionCheckType={}))[a.CombineBall=1001]="CombineBall",a[a.UseItem=1002]="UseItem",a[a.Service=1003]="Service",a[a.LevelPass=1004]="LevelPass",a[a.Invite=1005]="Invite",a[a.CollectGame=2001]="CollectGame",a[a.Float=2002]="Float",a[a.UseSkill=2003]="UseSkill",a[a.SkillUp=2004]="SkillUp",a[a.BuyCoin=2005]="BuyCoin",a[a.FinishHomeTask=2006]="FinishHomeTask",a[a.GetItem=2007]="GetItem",a[a.ChangeBall=2008]="ChangeBall",a[a.UseJokerBall=2009]="UseJokerBall",a[a.UseRefresh=2010]="UseRefresh",a[a.UseHammer=2011]="UseHammer",a[a.Lvup=1006]="Lvup",(o=c=o.MissionState||(o.MissionState={}))[o.Reward=0]="Reward",o[o.Doing=1]="Doing",o[o.Finished=2]="Finished",cc._RF.pop()},{}],MissionPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"f264fBoxNVCmaMeFoRMtYC7","MissionPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("Api"),h=i("AudioMgr"),f=i("SDKTools"),m=i("SDKEnums"),g=i("ViewMgr"),_=i("EventMgr"),y=i("EventEnum"),v=i("Display"),b=i("ExtScrollView"),w=i("Enum"),S=i("Action"),M=i("SDKAnalytics"),C=i("BattleMgr"),P=i("OnlineMgr"),A=i("BaseAnimPopwin"),T=i("DataMgr"),E=i("DateUtils"),B=i("ChestPopwin"),D=i("CheckTools"),I=i("MissionModel"),k=i("UserModel"),O=i("Water"),R=i("Const"),N=i("ImageLabelNew");function L(){var t=null!==u&&u.apply(this,arguments)||this;return t.ItemPrefab=null,t.tabGroup=null,t.dailyActObj=null,t.mainScorllView=null,t.dailyScorllView=null,t.m_labTime=null,t.m_labcurAct=null,t.m_sprSlider=null,t.coinBar=null,t.icons=[],t.m_arrow=null,t.issubscribe=!0,t}i=(o=cc._decorator).ccclass,o=o.property,r(L,u=A.default),(d=L).prototype.onLoad=function(){var t=this;this.dailyActObj.getChildByName("active").getChildByName("pro").getChildByName("chests").children.forEach(function(e){e.on("click",function(){var n=+e.name;t.openActBox(n)})})},L.prototype.onOpen=function(t){var e=this;u.prototype.onOpen.call(this,t),this.coinBar.getComponent(cc.Animation).stop(),this.dailyActObj.getChildByName("active").getChildByName("icon_active").getComponent(cc.Animation).stop(),M.default.event(m.EventKeys.task_panel_show,""),this.InitDiamond(),this.coinBar.y=747,C.default.I.comTopWrap.getDiamondNode().then(function(t){e.coinBar.y=v.default.getTargetPos(t,e.node).y}),t.data?this.tabIndex=t.data.tab:this.tabIndex=0,this.dataList=[],p.default.getinviteNum({}).then(function(t){var n=t.realtime_data.daily_invite_num;(t=T.DataMgr.User.getDayDataWithKey(w.DayKeys.InviteCount,0))<n&&(T.DataMgr.User.reqDayDataWithKey(w.DayKeys.InviteCount,n),T.DataMgr.Missions.addMissionProgress(I.MissionCheckType.Invite,n-t)),e.focusTab(e.tabIndex,!0)}).catch(function(){e.focusTab(e.tabIndex,!0)}),D.default.checkCollect(w.DayKeys.CollectState),D.default.checkFloating(),D.default.checkService(),this.setActInfo(),this.issubscribe=v.default.s_issubscribeDailyReward,this.m_arrow.active=v.default.s_issubscribeDailyReward},L.prototype.addEvent=function(){u.prototype.removeEvent.call(this),_.EventMgr.on(y.EventEnum.UpdateMissionData,this.onhandleUpdate,this),_.EventMgr.on(y.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this)},L.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),_.EventMgr.off(y.EventEnum.UpdateMissionData,this.onhandleUpdate,this),_.EventMgr.off(y.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this)},L.prototype.setsubscribe=function(){this.issubscribe=!this.issubscribe,this.m_arrow.active=this.issubscribe,v.default.s_issubscribeDailyReward=this.issubscribe},L.prototype.setActInfo=function(t){void 0===t&&(t=!1);var e=T.DataMgr.Missions.getUserDailyMissions(),n=T.DataMgr.Missions.ActCfgs;this.m_labcurAct.setValue(e.activenum);var i=n.length;this.dailyActObj.getChildByName("active").getChildByName("pro").getChildByName("chests").children.forEach(function(t,o){var a;o<i?(t.active=!0,a=n[o],t.name=a.id.toString(),t.x=(o+1)*(465/i),t.getChildByName("num").getComponent(N.default).setValue(a.actdegree_num_need),0<=e.rewarded.indexOf(a.id)?S.default.playAnim(t,"anim_task_chestopened"):e.activenum>=a.actdegree_num_need?S.default.playAnim(t,"anim_task_chestopen"):S.default.playAnim(t,"anim_task_chestnormal")):t.active=!1}),t?(this.dailyActObj.getChildByName("active").getChildByName("icon_active").getComponent(cc.Animation).play(),cc.tween(this.m_sprSlider.node).to(1,{}).to(1,{width:e.activenum/n[i-1].actdegree_num_need*450}).start()):this.m_sprSlider.node.width=e.activenum/n[i-1].actdegree_num_need*450},L.prototype.openActBox=function(t){var e=this,n=T.DataMgr.Missions.getMissionActDBById(t),i=T.DataMgr.Missions.getUserDailyMissions();0<=i.rewarded.indexOf(n.id)?v.default.showTip("\u8fd9\u4e2a\u5b9d\u7bb1\u4f60\u5df2\u7ecf\u9886\u8fc7\u5566~"):i.activenum>=n.actdegree_num_need?(g.ViewMgr.openPopwin(B.default,{anim:!1,data:{id:t}}),T.DataMgr.User.reqGetDailyActReward(t).then(function(){e.setActInfo()}),M.default.event(m.EventKeys.task_panel_daily_chest_open,"")):v.default.showTip("\u6d3b\u8dc3\u5ea6\u8fd8\u4e0d\u591f\u5462~\u5feb\u53bb\u505a\u4efb\u52a1\u5427")},L.prototype.onhandleUpdate=function(t){this.setActInfo(t.detail)},L.prototype.focusTab=function(t,e){switch(void 0===e&&(e=!1),t){case 0:this.forcusDaily(e);break;case 1:this.forcusMainRank(e)}},L.prototype.forcusDaily=function(t){void 0===t&&(t=!1),this.mainScorllView.node.active=!1,this.dailyScorllView.node.active=!0,this.dailyActObj.active=!0,S.default.playAnim(this.tabGroup,"state_task_btndaily");var e=[];T.DataMgr.Missions.getAllDailyMissions().forEach(function(t){e.push(T.DataMgr.Missions.getUserDailyMissionData(t.id))}),e.sort(function(t,e){var n=T.DataMgr.Missions.getMissionState(t.id),i=T.DataMgr.Missions.getMissionState(e.id);return n!=i?n-i:(t=Math.min(T.DataMgr.Missions.getMissionProgress(t.id),1))!=(e=Math.min(T.DataMgr.Missions.getMissionProgress(e.id),1))?e-t:void 0}),this.dataList=e,this.dailyScorllView.content.childrenCount<=0&&this.dailyScorllView.loadData(e,0,.1)},L.prototype.removeView=function(){u.prototype.onRelease.call(this),this.node.destroy()},L.prototype.forcusMainRank=function(t){void 0===t&&(t=!1),this.mainScorllView.node.active=!0,this.dailyScorllView.node.active=!1,this.dailyActObj.active=!1,S.default.playAnim(this.tabGroup,"state_task_btnlife");var e=[];T.DataMgr.Missions.getAllMainMissions().forEach(function(t){e.push(T.DataMgr.Missions.getUserMainMissionData(t.id))}),e.sort(function(t,e){var n=T.DataMgr.Missions.getMissionState(t.id),i=T.DataMgr.Missions.getMissionState(e.id);return n!=i?n-i:(t=Math.min(T.DataMgr.Missions.getMissionProgress(t.id),1))!=(e=Math.min(T.DataMgr.Missions.getMissionProgress(e.id),1))?e-t:void 0}),this.dataList=e,this.mainScorllView.content.childrenCount<=0&&this.mainScorllView.loadData(e,0,.1)},Object.defineProperty(L.prototype,"BannerOpen",{get:function(){return P.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),L.prototype.handleClose=function(t){return void 0===t&&(t=!0),c(this,void 0,Promise,function(){return l(this,function(){return[2,g.ViewMgr.closePopwin(d,{anim:t}).then(function(){T.DataMgr.Point.updatePoint(w.ModuleType.TaskList)})]})})},L.prototype.onClose=function(){u.prototype.onClose.call(this),this.issubscribe&&f.default.subScribe([R.default.SubscribeIds.Sign,R.default.SubscribeIds.Mission,R.default.SubscribeIds.Activity],!0).then(function(){v.default.s_issubscribeDailyReward=!1}).catch(function(){v.default.s_issubscribeDailyReward=!1}),v.default.s_issubscribeDailyReward=!1,C.default.I.removePopwinList(),this.coinBar.getComponent(cc.Animation).stop()},L.prototype.onTab=function(t,e){h.AudioMgr.button(),this.tabIndex!==+e&&(this.tabIndex=+e,this.focusTab(this.tabIndex,!1))},L.prototype.onShare=function(t){t.stopPropagation(),h.AudioMgr.button(),f.default.share(m.ShareKeys.Challenge)},L.prototype.onBack=function(){h.AudioMgr.button(),this.handleClose(!0)},L.prototype.handleUpdateDimamond=function(t){t.detail?this.playDiamondAnim():this.InitDiamond()},L.prototype.playDiamondAnim=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,O.default.wait(1e3)];case 1:return t.sent(),S.default.playAnim(this.coinBar,"anim_game_daimond"),this.InitDiamond(),[2]}})})},L.prototype.InitDiamond=function(){var t;cc.isValid(this.coinBar)&&(t=this.coinBar.getChildByName("diamond_group"),cc.isValid(t)&&(t=t.getChildByName("diamondlab"),cc.isValid(t))&&(t=t.getComponent(N.default),cc.isValid(t)&&t.setValue(k.default.I.Diamond)))},L.prototype.getIcon=function(){},L.prototype.update=function(){var t,e;this.m_labTime&&(t=E.default.nowTime,e=(new Date).setHours(0,0,0,0)+864e5,this.m_labTime.string=E.default.getFormatBySecond((e-t)/1e3,1))},L.PREFAB_PATH="prefab/popwin/popwin_task",s([o(cc.Prefab)],L.prototype,"ItemPrefab",void 0),s([o(cc.Node)],L.prototype,"tabGroup",void 0),s([o(cc.Node)],L.prototype,"dailyActObj",void 0),s([o(b.default)],L.prototype,"mainScorllView",void 0),s([o(b.default)],L.prototype,"dailyScorllView",void 0),s([o(cc.Label)],L.prototype,"m_labTime",void 0),s([o(N.default)],L.prototype,"m_labcurAct",void 0),s([o(cc.Sprite)],L.prototype,"m_sprSlider",void 0),s([o(cc.Node)],L.prototype,"coinBar",void 0),s([o(cc.SpriteFrame)],L.prototype,"icons",void 0),s([o(cc.Node)],L.prototype,"m_arrow",void 0),i=d=s([i],L),a.default=i,cc._RF.pop()},{}],MoneyCfg:[function(t,e,n){"use strict";cc._RF.push(e,"c7c0bfevdVAl7Ll1AfLcMNJ","MoneyCfg");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){},cc._RF.pop()},{}],NumberAddScore:[function(t,e,n){"use strict";cc._RF.push(e,"29c6bCg6glA+Y48i1hm4hKd","NumberAddScore");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("RandomUtils");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.stepTime=.05,t.stepRate=.2,t._step=0,t._value=0,t._offset=0,t}i=(o=cc._decorator).ccclass,o=o.property,r(u,c=cc.Component),Object.defineProperty(u.prototype,"value",{get:function(){return this._value},set:function(t){t!=this._value?(this._offset=t-this._value,this._step=Math.abs(Math.floor(this._offset*this.stepRate)),this._value=t,this.unschedule(this.updateNumber),this.schedule(this.updateNumber,this.stepTime)):this.valueLabel.string=this.value+""},enumerable:!0,configurable:!0}),u.prototype.resetValue=function(t){this._value=t,this._offset=0,this._step=0},u.prototype.onLoad=function(){this.valueLabel=this.node.getComponent(cc.Label)},u.prototype.updateNumber=function(t){0==this._offset?this.unschedule(this.updateNumber):(t=Math.floor(this._step*(1+t)),t=l.default.range(Math.floor(.8*t),t),0!=this._offset&&0==t&&(t=1),0<this._offset?(this._offset-=t,this._offset=Math.max(this._offset,0)):this._offset<0&&(this._offset+=t,this._offset=Math.min(this._offset,0)),t=this._value-this._offset,this.valueLabel.string=t+"")},u.prototype.onTest=function(){this.value=this.value+l.default.range(100,5e3)},s([o({tooltip:"\u95f4\u9694\u591a\u957f\u65f6\u95f4\u66f4\u65b0\uff0c\u5355\u4f4d\uff1a\u79d2"})],u.prototype,"stepTime",void 0),s([o({tooltip:"\u6bcf\u79d2\u504f\u79fb\u6570\u503c"})],u.prototype,"stepRate",void 0),i=s([i],u),a.default=i,cc._RF.pop()},{}],OnlineGiftPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"793carPVxJNHIsreZ/m0/Hj","OnlineGiftPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("AudioEnum"),h=i("AudioMgr"),f=i("BattleMgr"),m=i("CheckTools"),g=i("Display"),_=i("DataMgr"),y=i("UserModel"),v=i("EventEnum"),b=i("OnlineMgr"),w=i("SDKEnums"),S=i("SDKTools"),M=i("WXApi"),C=i("BaseAnimPopwin"),P=i("ShareVideo"),A=i("ViewMgr"),T=i("GetRewardPopWin");function E(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_Sharevideo=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(E,u=C.default),(d=E).prototype.addEvent=function(){u.prototype.addEvent.call(this),S.default.bindEvent(v.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},E.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),S.default.removeEvent(v.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},E.prototype.onupdatesharestate=function(){u.prototype.onupdatesharestate.call(this),this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?this.m_Sharevideo.update2shareforce():this.initui()},E.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),h.AudioMgr.playSound(p.AudioEnum.gift_notice),this.initui(),this.callback=t.data.callback,M.default.I.showsideAD()},E.prototype.initui=function(){this.m_Sharevideo.updateWithKey(w.ShareKeys.onlinegift)},E.prototype.onOpend=function(){u.prototype.onOpend.call(this)},E.prototype.onOnlinegiftReward=function(){var t=this;h.AudioMgr.button(),0<y.default.I.OnlineGiftNowTime?g.default.showTip("\u518d\u591a\u73a9\u4e00\u4f1a\u5427\uff0c\u5728\u7ebf\u65f6\u95f4\u8fd8\u4e0d\u591f\u54e6"):this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?S.default.dispatchType(w.ShareVideoType.Share,w.ShareKeys.onlinegift,{success:function(){m.default.s_sharefailforcetimes<S.default.getParamsInt(w.OnlineKeys.share_force_fail_times,2)?(m.default.s_sharefailforcetimes++,g.default.showTip("\u5206\u4eab\u5931\u8d25\uff0c\u6c42\u52a9\u7fa4\u53cb\u8bd5\u8bd5\u5427\uff5e")):t.handlegetgiftreward()},fail:function(){},context:this}):S.default.dispatch(w.ShareKeys.onlinegift,{success:this.handlegetgiftreward,fail:function(){},context:this})},E.prototype.handlegetgiftreward=function(){var t=[(e=_.DataMgr.Config.getRandomPackReward())[0],e[1]],e=e[2];A.ViewMgr.openPopwin(T.default,{data:{diamond:e,props:t}}),y.default.I.reqOnlineReward(),A.ViewMgr.closePopwin(d,{anim:!0}).then(function(){f.default.I.removePopwinList()})},Object.defineProperty(E.prototype,"BannerOpen",{get:function(){return b.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),E.prototype.onBack=function(){return c(this,void 0,void 0,function(){return l(this,function(){return h.AudioMgr.button(),g.default.s_isCloseOnlineGift=!0,A.ViewMgr.closePopwin(d,{anim:!0}).then(function(){f.default.I.removePopwinList()}),[2]})})},E.prototype.onClose=function(){u.prototype.onClose.call(this),this.callback&&this.callback.call(this),M.default.I.hidesideAD(),f.default.I.comTopWrap.setOpenOnlineGift(!1)},E.PREFAB_PATH="prefab/popwin/popwin_onlinegift",s([o(P.default)],E.prototype,"m_Sharevideo",void 0),i=d=s([i],E),a.default=i,cc._RF.pop()},{}],OnlineMgr:[function(t,e,n){"use strict";cc._RF.push(e,"a392cDF345HkafcysTB/Soq","OnlineMgr");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("SDKTools"),r=i("SDKEnums"),s=i("StarConfig"),c=i("DataMgr"),l=i("UserBaseModel");function u(){this.bannerOpen={fail:1,shop:1,game:1,rank:0,chest:1,invite:1,record:0,reward:1,revive:1,service:1,history:1,collect:1,floating:1,chest_tip:0,reward_hint:1,random:1,lvup:1,gift:1,itemtip:1,skill:1,getreward:1,skinshop:1,home:1,game_activity:1,game_addcoin:1,game_addfive:1,game_addthree:1,game_buyitem:1,game_energy:1,game_fail:1,"game_fit-up":1,"game_fit-task":1,"game_fit-up-gift":1,game_win:1,game_gift:1,game_newgift:1,game_invite:1,game_like:1,game_load:1,game_mail:1,game_maildetail:1,game_mailset:1,game_nostar:1,game_notice:1,game_overtarget:1,game_videostep:1,game_quit:1,game_reward:1,game_start:1,game_story:1,game_win_pig:1,game_balloom_gift:1},this.adIds={banner_game:"adunit-21e0dbb6d3c7c1e4",banner_melon:"adunit-208f6d85929b70fa",banner_common:"adunit-51e680c54945a69b",custom_left:"adunit-88fb4e1ecb8087a3",custom_right:"adunit-e86c983d7712b1ce",custom_bottom:"adunit-a65db2237f1b9475",custom_single:"adunit-34b308c52eebdd52",custom_matrix_inter:"adunit-b92ed91be45f91e9",custom_single_melon:"adunit-229ecd455ca1fd2b",custom_single_forwx1:"adunit-8ab8756e2b5d3279",custom_single_forwx2:"adunit-cf0830e42f52eb02",custom_banner_error:"adunit-1bc2ca9bd4b87e99",custom_matrix:"adunit-4723810cc357a878",interstitial:"adunit-af6d85b604d3e0ad"}}(i=o.AdType||(o.AdType={})).BannerGame="banner_game",i.BannerMelon="banner_melon",i.BannerCommon="banner_common",i.CustomLeft="custom_left",i.CustomRight="custom_right",i.CustomBottom="custom_bottom",i.CustomSingle="custom_single",i.CustomMatrixInter="custom_matrix_inter",i.CustomSingleMelon="custom_single_melon",i.CustomSingleWx1="custom_single_forwx1",i.CustomSingleWx2="custom_single_forwx2",i.CustomBannerError="custom_banner_error",i.CustomMatrix="custom_matrix",i.Interstitial="interstitial",u.prototype.init=function(){},u.prototype.getAdByType=function(t){return this.getObject(r.OnlineKeys.SDKADList,this.adIds)[t]},Object.defineProperty(u.prototype,"GameBanerRefresh",{get:function(){return a.default.getParamsInt(r.OnlineKeys.GameBannerRefresh,10)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"ChestMax",{get:function(){return a.default.getParamsInt(r.OnlineKeys.ChestMax,s.StarConfig.ChestMax)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"ChestLv",{get:function(){return a.default.getParamsInt(r.OnlineKeys.ChestLv,s.StarConfig.ChestLv)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"ChestRewards",{get:function(){return a.default.getParamsObj(r.OnlineKeys.ChestRewards,s.StarConfig.ChestRewards)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"SkinVideo",{get:function(){return a.default.getParamsObj(r.OnlineKeys.SkinVideo,s.StarConfig.SkinVideo)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"BlockRewards",{get:function(){var t=a.default.getParamsInt(r.OnlineKeys.BlockRewardLimit_abtest,0);return 2==t||1==t&&l.default.I.ID%2==0?a.default.getParamsObj(r.OnlineKeys.BlockRewardLimit_B,s.StarConfig.BlockRewardLimitB):a.default.getParamsObj(r.OnlineKeys.BlockRewardLimit,s.StarConfig.BlockRewardLimit)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"TeachBall",{get:function(){return a.default.getParamsObj(r.OnlineKeys.teachball,s.StarConfig.Teachball)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"wTeachBall",{get:function(){return[1,1,1,2,3,3,4]},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"TeachBall2",{get:function(){return a.default.getParamsObj(r.OnlineKeys.teachball2,s.StarConfig.Teachball)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"RedPacket",{get:function(){return a.default.getParamsObj(r.OnlineKeys.RedPacketLimit,[100,1.2,20])},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"SkillPower",{get:function(){return a.default.getParamsObj(r.OnlineKeys.skillpower,[100,1.2,10])},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"getLvParam",{get:function(){return a.default.getParamsObj(r.OnlineKeys.LvupP,s.StarConfig.LvupP)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"InviteRewards",{get:function(){return a.default.getParamsObj(r.OnlineKeys.InviteRewards,s.StarConfig.InviteRewards)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"SkillBalls",{get:function(){return a.default.getParamsObj(r.OnlineKeys.skill_ball_limit,[200,1.2,40])},enumerable:!0,configurable:!0}),u.prototype.getSkillCost=function(t){return t=c.DataMgr.User.getSkillLv(t),a.default.getParamsObj(r.OnlineKeys.skillcost,[100,200,300,400,500])[t]},Object.defineProperty(u.prototype,"NewYearData",{get:function(){return a.default.getParamsObj(r.OnlineKeys.NewYearData,[])},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"NewYearBtnAct",{get:function(){return!(!this.NewYearData||this.NewYearData.length<=0)&&1==a.default.getParamsInt(r.OnlineKeys.NewYearBtn,0)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"NewYearPopWin",{get:function(){return!(!this.NewYearData||this.NewYearData.length<=0)&&1==a.default.getParamsInt(r.OnlineKeys.NewYearPopwin,0)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"ABtestOpen",{get:function(){return 1==a.default.getParamsInt(r.OnlineKeys.ABTest,0)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"LvRewardABtestOpen",{get:function(){return 1==a.default.getParamsInt(r.OnlineKeys.LvRewardABtest,0)},enumerable:!0,configurable:!0}),u.prototype.getInt=function(t,e){return a.default.getParamsInt(t,e=void 0===e?0:e)},u.prototype.getBool=function(t,e){return 1===a.default.getParamsInt(t,e=void 0===e?0:e)},u.prototype.getString=function(t,e){return a.default.getParamsString(t,e=void 0===e?"":e)},u.prototype.getObject=function(t,e){return a.default.getParamsObj(t,e)},u.prototype.getBanner=function(t){if(!t)return!0;var e,n=this.getObject(r.OnlineKeys.BannerModulesOpen,this.bannerOpen);return!!n&&(n[e=t.replace(/prefab\/game\//,"")]?n[e]:!!n[e=t.replace(/prefab\/(popwin|panel)\/(popwin|panel)_/,"")])},Object.defineProperty(u.prototype,"BottomSkipOffset",{get:function(){return a.default.getParamsInt(r.OnlineKeys.BottomSkipOffset,20)},enumerable:!0,configurable:!0}),Object.defineProperty(u,"I",{get:function(){return this._instance||(this._instance=new u)},enumerable:!0,configurable:!0}),o.default=i=u,o.OnlineMgr=i.I,cc._RF.pop()},{}],OpenContext:[function(t,e,n){"use strict";cc._RF.push(e,"bb625FKKxVP+r81YO+bkjnl","OpenContext");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var r=i("DataMgr"),s=i("BattleMgr"),c=i("RankEnum");function l(){}Object.defineProperty(l.prototype,"ShareCanvas",{get:function(){return this.sharedCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"OpenId",{get:function(){return r.DataMgr.UserBase.UserOpenId},enumerable:!0,configurable:!0}),l.prototype.post=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=c.RankType.None),"object"==typeof wx&&wx.getOpenDataContext().postMessage(a({type:n,event:c.RankEvent[t]},e))},l.prototype.save=function(t,e,n){void 0===n&&(n=!1),s.default.I&&s.default.I.node?0==s.default.I.m_Type?this.post(c.RankEvent.Update1,{keys:["score","honor1"],values:[t,e],isForceUpdate:n,openid:this.OpenId}):this.post(c.RankEvent.Update2,{keys:["score2","honor1"],values:[t,e],isForceUpdate:n,openid:this.OpenId}):this.post(c.RankEvent.Update2,{keys:["score3","honor1"],values:[t,e],isForceUpdate:n,openid:this.OpenId})},l.prototype.setSize=function(t,e){var n;"object"==typeof wx&&(n=wx.getOpenDataContext(),this.sharedCanvas=n.canvas,this.sharedCanvas&&(this.sharedCanvas.width=t,this.sharedCanvas.height=e))},Object.defineProperty(l,"I",{get:function(){return this._instance||(this._instance=new l)},enumerable:!0,configurable:!0}),i=l,o.default=i,cc._RF.pop()},{}],PersistNode:[function(t,e,n){"use strict";cc._RF.push(e,"d9fe2pnjDFDyIjDox9bbvzn","PersistNode");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("TopBar"),u=i("ViewMgr"),d=i("LoadGame"),p=i("LoadHome"),h=i("Action"),f=i("Display"),m=i("Enum"),g=i("EventMgr"),_=i("EventEnum"),y=i("PlatformUtils"),v=i("LoadWatermelon");function b(){var t=null!==c&&c.apply(this,arguments)||this;return t.loading=null,t.nodeBlack=null,t.livingroom=null,t.loadingBone=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(b,c=cc.Component),Object.defineProperty(b.prototype,"TopBar",{get:function(){return this.topBar&&this.topBar.getComponent(l.default)},enumerable:!0,configurable:!0}),b.prototype.showBlack=function(){this.nodeBlack.active=!0},b.prototype.hideBlack=function(){this.nodeBlack.active=!1},b.prototype.install=function(t){this.topBar||(this.topBar=t,this.topBar.parent=this.loading.parent,f.default.adjustIphoneX(this.topBar),y.default.isH5&&(window.PersistNode=this))},b.prototype.addLivingRoom=function(t){if(t&&t.length)for(var e=this.livingroom,n=(t=t.reverse()).length-1;0<=n;n--)t[n].parent=e;this.livingroom.active=!1},b.prototype.getLivingRoom=function(){return 0===this.livingroom.children.length?null:this.livingroom.children},b.prototype.loadToGame=function(){var t=this;this.loading.active=!0,f.default.topShow(m.TopBarType.None),h.default.playAddAnim(this.loading,"anim_enter");var e=this.loadingBone;e.playAnimation("run_1",1),e.timeScale=2,e.once(dragonBones.EventObject.COMPLETE,function(){t.loading.getComponent(d.default).action({before:function(){u.ViewMgr.closeAllPopwin()},after:t.handleLoadSuccess,context:t})},this)},b.prototype.loadToGamewatermelon=function(){var t=this;this.loading.active=!0,f.default.topShow(m.TopBarType.None),h.default.playAddAnim(this.loading,"anim_enter");var e=this.loadingBone;e.playAnimation("run_1",1),e.timeScale=2,e.once(dragonBones.EventObject.COMPLETE,function(){t.loading.getComponent(v.default).action({before:function(){u.ViewMgr.closeAllPopwin()},after:t.handleLoadSuccess,context:t})},this)},b.prototype.loadToHome=function(){var t=this;this.loading.active=!0,f.default.topShow(m.TopBarType.None),h.default.playAddAnim(this.loading,"anim_enter");var e=this.loadingBone;e.playAnimation("run_1",1),e.timeScale=2,e.once(dragonBones.EventObject.COMPLETE,function(){t.loading.getComponent(p.default).action({before:function(){u.ViewMgr.closeAllPopwin()},after:t.handleLoadSuccess,context:t})},this)},b.prototype.handleLoadSuccess=function(){var t=this,e=this.loadingBone;e.playAnimation("run_2",1),e.once(dragonBones.EventObject.COMPLETE,function(){h.default.playAddAnim(t.loading,"anim_out").then(function(){t.loading.active=!1,g.EventMgr.emit(_.EventEnum.LoadHomeSuccess)}).catch(function(){t.loading.active=!1,g.EventMgr.emit(_.EventEnum.LoadHomeSuccess)})},this)},s([o(cc.Node)],b.prototype,"loading",void 0),s([o(cc.Node)],b.prototype,"nodeBlack",void 0),s([o(cc.Node)],b.prototype,"livingroom",void 0),s([o(dragonBones.ArmatureDisplay)],b.prototype,"loadingBone",void 0),i=s([i],b),a.default=i,cc._RF.pop()},{}],PlatformAd:[function(t,e,n){"use strict";cc._RF.push(e,"d6f52uyrjFKirkp/8fAZQLf","PlatformAd");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var r=i("SDKTools"),s=i("Display"),c=i("DataMgr"),l=i("Enum"),u=i("SDKEnums"),d=i("StarConfig"),p=i("AppDataMgr"),h=i("OnlineMgr");function f(){}f.interstitialWithOnshow=function(){h.OnlineMgr.getInt(u.OnlineKeys.InterstitialAdOnshow,0)&&r.default.interstitialShow(h.OnlineMgr.getAdByType(h.AdType.Interstitial))},f.interstitialWithFail=function(){f.showInterstitial(l.AppDataKey.FailCount,u.OnlineKeys.InterstitialFailCd,d.StarConfig.InterstitialAdCd)},f.interstitialWithHome=function(){c.DataMgr.User.CurLevel>=h.OnlineMgr.getInt(u.OnlineKeys.InterstitialHomeLv,d.StarConfig.InterstitialAdCd)&&f.showInterstitial(l.AppDataKey.HomeCount,u.OnlineKeys.InterstitialHomeCd,d.StarConfig.InterstitialAdCd)},f.interstitialWithGame=function(){c.DataMgr.User.MaxLevel>=h.OnlineMgr.getInt(u.OnlineKeys.InterstitialGameLv,d.StarConfig.InterstitialAdCd)&&f.showInterstitial(l.AppDataKey.GameCount,u.OnlineKeys.InterstitialGameCd,d.StarConfig.InterstitialAdCd)},f.showInterstitial=function(t,e,n){var i=p.AppDataMgr.get(t,0);i+1>=h.OnlineMgr.getInt(e,n)?(p.AppDataMgr.set(t,0),r.default.interstitialShow(h.OnlineMgr.getAdByType(h.AdType.Interstitial))):p.AppDataMgr.set(t,i+1)},f.createAuthBtn=function(t,e,n,i){void 0===i&&(i={}),n=s.default.getRectSize(n),e={isDebug:!(n={type:"text",text:"",style:a({},n,{borderRadius:4})}),msg:e=e||"\u67e5\u770b\u4e16\u754c\u6392\u884c\u699c\u9700\u6388\u6743\r\n\u662f\u5426\u524d\u5f80\u8bbe\u7f6e\u754c\u9762\u5f00\u542f?",callback:function(t){1===t?(r.default.login(!0),i.callback&&i.callback.call(i.context,1)):0===t?i.callback&&i.callback.call(i.context,0):i.callback&&i.callback.call(i.context,-1)},context:this},r.default.createUserBtns(t,n,e)},i=f,o.default=i,cc._RF.pop()},{}],PlatformUtils:[function(t,e,n){"use strict";cc._RF.push(e,"24e30SiCMZOLrMgfXy5i0Rm","PlatformUtils");var i=t,o=n,a=__AWAITER__,r=__GENERATOR__;Object.defineProperty(o,"__esModule",{value:!0});var s,c=i("Const");function l(){}Object.defineProperty(l,"Platform",{get:function(){var t=c.default.GameEnName;return-1!==t.indexOf("_qq")?s.QQ:"object"==typeof wx?s.WX:-1!==t.indexOf("_oppo")?s.Oppo:s.H5},enumerable:!0,configurable:!0}),Object.defineProperty(l,"isH5",{get:function(){return l.Platform===s.H5},enumerable:!0,configurable:!0}),Object.defineProperty(l,"isWx",{get:function(){return l.Platform===s.WX},enumerable:!0,configurable:!0}),Object.defineProperty(l,"isQQ",{get:function(){return l.Platform===s.QQ},enumerable:!0,configurable:!0}),Object.defineProperty(l,"isTecent",{get:function(){return l.Platform===s.WX||l.Platform===s.QQ},enumerable:!0,configurable:!0}),l.loadSubpackage=function(t){return a(this,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(e,n){CC_WECHATGAME?cc.loader.downloader.loadSubpackage(t,function(t){t?n(t):e()}):e()})]})})},i=l,o.default=i,(o=s=o.Platform||(o.Platform={}))[o.WX=0]="WX",o[o.QQ=1]="QQ",o[o.H5=2]="H5",o[o.Oppo=3]="Oppo",cc._RF.pop()},{}],PlotMgr:[function(t,e,n){"use strict";cc._RF.push(e,"301915I1RVC2KTVTboUSI53","PlotMgr");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)},r=__AWAITER__,s=__GENERATOR__;Object.defineProperty(o,"__esModule",{value:!0});var c,l,u=i("Debug"),d=i("Display"),p=i("ViewMgr"),h=i("DataMgr"),f=i("SDKEnums"),m=i("EventMgr"),g=i("CommonMgr"),_=i("EventEnum"),y=i("GameStory"),v=i("GameFitTask"),b=i("Enum");function w(){this.context=null,this.mStep={},this.mData=null,this.mPloting=!1,this.mUIState=b.PlotUIState.None}w.prototype.getById=function(t){return h.DataMgr.Plot.getPlotById(t)},Object.defineProperty(w.prototype,"StepIndex",{get:function(){var t=this.mData.id;return this.mStep[t]||0},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"isPloting",{get:function(){return this.mPloting},enumerable:!0,configurable:!0}),w.prototype.setIsPloting=function(t){this.mPloting=t},w.prototype.setStep=function(t,e){this.mStep[t]=e},w.prototype.addStep=function(t){this.mStep[t]+=1},w.prototype.clear=function(){this.mStep={}},w.prototype.isStepOver=function(t){var e=this.getById(t);return!e||this.mStep[t]>=e.contents.length},w.prototype.isPlotStart=function(){return!h.DataMgr.User.isOverPlot(c.Start1)&&!this.isStepOver(c.Start1)},w.prototype.begin=function(t){this.context=t,(t=h.DataMgr.User.getCurrPlot())&&(this.resetTask(),this.execute(t.id))},w.prototype.clearPlot=function(){var t=h.DataMgr.User.getCurrPlot();t&&t.id===c.Start1&&(this.mStep[c.Start1]=b.PlotState.None,this.mStep[c.Start2]=b.PlotState.None,this.mStep[c.Start3]=b.PlotState.None)},w.prototype.getStatus=function(t){if(!t)return{code:-1,msg:"\u3010\u5267\u60c5"+t+"\u4e0d\u5b58\u5728\uff01\u3011"};var e=this.getById(t);return e?h.DataMgr.User.isOverPlot(t)?{code:-1,msg:"\u3010\u5267\u60c5"+t+"\u5df2\u7ecf\u7ed3\u675f\uff01\u3011",data:e}:h.DataMgr.User.isPlanPlot(t)?{code:0,msg:"",data:e}:{code:-1,msg:"\u3010\u5267\u60c5"+t+"\u6ca1\u6709\u88ab\u5b89\u6392\uff01\u3011",data:e}:{code:-1,msg:"\u3010\u5267\u60c5"+t+"\u6570\u636e\u627e\u4e0d\u5230\uff01\u3011",data:e}},w.prototype.resetTask=function(){this.taskData=null},w.prototype.execute=function(t){var e=this,n=this.getStatus(t);if(-1===n.code)return Promise.reject(n.msg);var i=n.data;return this.mData=i,this.mPloting=!0,this.mStep[t]=this.mStep[t]||0,u.default.error("PlotMgr begin\u3011\u5f00\u59cb\u5267\u60c5",t,i),m.EventMgr.emit(_.EventEnum.SwitchLockBg,1),new Promise(function(t){var n=h.DataMgr.Milestone.getTaskByPlotId(i.id),o=i.focus[0];n=n&&n.add_furnitures[0]||null,e.context.actionMoveMap(o,n).then(function(){e.actionStep(),e.setState(b.PlotUIState.Entering),t(null)}).catch(function(){e.actionStep(),e.setState(b.PlotUIState.Entering),t(null)})})},w.prototype.getSkipIndex=function(){var t=this.mData.contents,e=this.StepIndex,n=t.length;if(e===n-1)return n;for(;e<n;e++)if(-1===t[e].indexOf("dialog_"))return e;return n},w.prototype.skip=function(){var t,e=this.mData.id,n=this.getSkipIndex();this.setStep(e,n),this.handleStep(n),120===e?t=2:130===e?t=3:140===e&&(t=4),t&&g.default.I.sdkEventWithStr("Plot"+t+"_plotsFin")},w.prototype.actionStep=function(){var t=this.StepIndex;this.handleStep(t)},w.prototype.handleStep=function(t){var e=this.mData,n=e.id;t=e.contents[t],this.addStep(n),t?0===t.indexOf(l.Dialog)?this.handlePlotDialog(n,t):0===t.indexOf(l.Task)?this.handlePlotTask(n,t.replace(l.Task,"")):0===t.indexOf(l.Anim)&&this.handlePlotAnim(n,t):this.handlePlotEnd()},w.prototype.handlePlotEnd=function(){return r(this,void 0,void 0,function(){var t,e,n,i=this;return s(this,function(o){switch(o.label){case 0:return n=this.mData,t=n.id,n=n.end_action,this.asyncTask(),120===t?e=2:130===t?e=3:140===t&&(e=4),e&&g.default.I.sdkEventWithStr("Plot"+e+"_plotsFin"),[4,p.ViewMgr.closePopwin(y.default)];case 1:return o.sent(),(n=+(e=n.replace("enter_","")))?(this.mPloting=!1,h.DataMgr.User.reqAysncPlot(n,b.PlotState.Plan),this.execute(n)):"game"===e?(this.mPloting=!1,d.default.PersistNode.loadToGame()):"task"===e&&p.ViewMgr.openPopwin(v.default,{data:{uiHome:b.HomeUIState.TopMenu,isAuto:!0}}).then(function(){return i.mPloting=!1}).catch(function(){return i.mPloting=!1}),m.EventMgr.emit(_.EventEnum.SwitchLockBg,0),[2]}})})},w.prototype.handlePlotDialog=function(t,e){e=h.DataMgr.Plot.getDialogById(e),p.ViewMgr.openPopwin(y.default,{data:a({},e,{plotId:t,uiHome:b.HomeUIState.HideAll})})},w.prototype.handlePlotTask=function(t,e){return r(this,void 0,void 0,function(){var n,i=this;return s(this,function(o){switch(o.label){case 0:return[4,p.ViewMgr.closePopwin(y.default)];case 1:return o.sent(),n=h.DataMgr.Milestone.getTaskById(+e),m.EventMgr.emit(_.EventEnum.ActionPlanTask,{data:n,isMove:!1,callback:function(e,n){return i.onPlotEnd(t,{skin:e,furnitures:n})},context:this}),[2]}})})},w.prototype.handlePlotAnim=function(t,e){return r(this,void 0,void 0,function(){var n=this;return s(this,function(i){switch(i.label){case 0:return[4,p.ViewMgr.closePopwin(y.default)];case 1:return i.sent(),m.EventMgr.emit(_.EventEnum.ActionPlotAnim,{data:e,callback:function(){return n.onPlotEnd(t,null)},context:this}),[2]}})})},w.prototype.onPlotEnd=function(t,e){e&&(this.taskData=e,t===c.Task02&&g.default.I.sdkEventWithKey(f.EventKeys.Task2_decorAniFin)),this.isStepOver(t)?this.handlePlotEnd():this.actionStep()},w.prototype.asyncTask=function(){var t,e=(i=this.mData).id,n=i.contents,i=i.end_action;(n=n.filter(function(t){return 0<=t.indexOf(l.Task)}).map(function(t){return+t.replace(l.Task,"")})).length?(t=h.DataMgr.Milestone.getTaskById(n[0]).cost_star,t=h.DataMgr.Milestone.getTaskCostStar(n[0]),n.forEach(function(t){var e=h.DataMgr.Milestone.getTaskById(t);e&&(h.DataMgr.User.reqUpdateTaskState(t,{to:b.ActionFitTask.Out},!0),h.DataMgr.User.reqNextAppearTask(),h.DataMgr.User.reqAsyncNextTask(e))}),h.DataMgr.User.reqStar(-t,{isSync:!0})):!isNaN(+i.replace("enter_",""))||(n=h.DataMgr.Milestone.getTaskByPlotId(e))&&(i=n.id,t=n.cost_star,t=h.DataMgr.Milestone.getTaskCostStar(n.id),h.DataMgr.User.reqUpdateTaskState(i,{to:b.ActionFitTask.Out},!0),h.DataMgr.User.reqNextAppearTask(),h.DataMgr.User.reqAsyncNextTask(n),h.DataMgr.User.reqStar(-t,{isSync:!0})),h.DataMgr.User.reqAysncPlot(e,b.PlotState.Over),this.taskData&&(e=(t=this.taskData).skin,t=t.furnitures,e&&t.length&&h.DataMgr.User.reqOpenFurnitureSkin(e,t,!0,!0))},w.prototype.isState=function(t){return this.mUIState===t},w.prototype.setState=function(t){this.isState(t)||(this.mUIState=t)},Object.defineProperty(w,"I",{get:function(){return this.__instance||(this.__instance=new w)},enumerable:!0,configurable:!0}),i=w,o.default=i,(i=c=o.PlotID||(o.PlotID={}))[i.None=0]="None",i[i.Start1=100]="Start1",i[i.Start2=101]="Start2",i[i.Start3=102]="Start3",i[i.Task01=110]="Task01",i[i.Task02=120]="Task02",i[i.Task03=130]="Task03",i[i.Task04=140]="Task04",i[i.Task05=150]="Task05",i[i.Task06=160]="Task06",i[i.Task07=170]="Task07",i[i.Task08=180]="Task08",i[i.Finish=1e6]="Finish",(o=l=o.PlotPrefix||(o.PlotPrefix={})).Anim="anim_",o.Dialog="dialog_",o.Task="decortask_",cc._RF.pop()},{}],PlotModel:[function(t,e,n){"use strict";cc._RF.push(e,"ce5601lODtDIrJ1fZK61Ox3","PlotModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s,c=i("BaseModel");function l(){var t=s.call(this)||this;return t.init(),t}(i=r=o.PlotKey||(o.PlotKey={})).Plots="Plots",i.Dialogs="Dialogs",a(l,s=c.default),l.prototype.init=function(){this._cfgData=Object.create(null)},l.prototype.setCfg=function(t){this._cfgData=t},l.prototype.getCfg=function(t){return this._cfgData[t]},l.prototype.clearData=function(){this.init()},Object.defineProperty(l.prototype,"Dialogs",{get:function(){return this.getCfg(r.Dialogs)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Plots",{get:function(){return this.getCfg(r.Plots)},enumerable:!0,configurable:!0}),l.prototype.getPlotById=function(t){return this.Plots.filter(function(e){return e.id===t})[0]},l.prototype.getDialogById=function(t){return this.Dialogs[t]},l.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(l,"I",{get:function(){return this.instance||(this.instance=new l)},enumerable:!0,configurable:!0}),l.instance=null,a=l,o.default=a,cc._RF.pop()},{}],PointData:[function(t,e,n){"use strict";cc._RF.push(e,"64a64XBFcxGirWxJCU7Kq3A","PointData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){this.comps=[],this.tips=[]},cc._RF.pop()},{}],PointMgr:[function(t,e,n){"use strict";cc._RF.push(e,"28fe7HhA7BNK4Ap/KH6ArsD","PointMgr");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("DataMgr"),r=i("ArrayUtils");function s(){this.isDebug=!1,this.pointDatas={}}s.prototype.register=function(t){if(t&&t.length){for(var e,n=0,i=t.length;n<i;n++){var o,a=(e=t[n]).type;this.pointDatas[a]?(o=this.pointDatas[a],this.pointDatas[a]={type:o.type,comps:o.comps.concat(e.comps)}):this.pointDatas[a]=e,this.initPoint(e)}this.isDebug}},s.prototype.unregister=function(t){var e=this;if(t&&t.length){for(var n,i=0,o=t.length;i<o;i++){var a,s=(n=t[i]).type;this.pointDatas[s]&&(0===(a=(a=this.pointDatas[s].comps).filter(function(t){return-1===r.default.indexOf(n.comps,function(e){return t===e},e)})).length?(this.pointDatas[s]=null,delete this.pointDatas[s]):this.pointDatas[s].comps=a,this.isDebug)}this.isDebug}},s.prototype.refresh=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t=t||this.ModuleTypes;for(var n=0;n<t.length;n++){var i=t[n];this.updatePoint(i)}},s.prototype.getSingleTipNum=function(t){return a.DataMgr.Point.getPointNum(t)},s.prototype.getMultipleTipNum=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=0;i<t.length;i++)0<this.getSingleTipNum(t[i])&&(n+=1);return n},s.prototype.initPoint=function(t){this.renderPointUI(t,!1)},s.prototype.updatePoint=function(t){t=this.pointDatas[t],this.renderPointUI(t,!0)},s.prototype.renderPointUI=function(t){var e,n,i=this;t&&(e=t.type,n=t.tips,t.comps.forEach(function(t){var o;cc.isValid(t,!0)&&(o=n&&n.length?i.getMultipleTipNum.apply(i,n):i.getSingleTipNum(e),t.refresh(o),i.isDebug)}))},Object.defineProperty(s.prototype,"ModuleTypes",{get:function(){var t,e=[];for(t in this.pointDatas)this.pointDatas.hasOwnProperty(t)&&e.push(this.pointDatas[t].type);return e},enumerable:!0,configurable:!0}),Object.defineProperty(s,"I",{get:function(){return this._instance||(this._instance=new s)},enumerable:!0,configurable:!0}),s._instance=null,i=s,o.default=i,o.PointMgr=i.I,cc._RF.pop()},{}],PointModel:[function(t,e,n){"use strict";cc._RF.push(e,"16655IB8PdLM78dgzOCTh7K","PointModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("BaseModel"),c=i("DataMgr"),l=i("SDKTools"),u=i("SDKEnums"),d=i("CheckTools"),p=i("PointMgr"),h=i("StarConfig"),f=i("Enum");function m(){var t=r.call(this)||this;return t.data={temp_menu:1,temp_invite:1,temp_activity:1},t.isInit=!1,t}a(m,r=s.default),m.prototype.setData=function(t){var e=!1;this.isInit||(e=this.isInit=!0),t&&t.hasOwnProperty("invite_num")&&(e?this.setInviteNum(t.invite_num,!0):this.updatePoint(f.ModuleType.InviteNum))},Object.defineProperty(m.prototype,"Menu",{get:function(){return this.MenuTemp||this.MenuInvite},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"MenuTemp",{get:function(){return this.data&&this.data.temp_menu||0},enumerable:!0,configurable:!0}),m.prototype.setMenuTemp=function(t){return!!this.data&&this.MenuTemp!==t&&(this.data.temp_menu=t,!0)},Object.defineProperty(m.prototype,"ActivityTemp",{get:function(){return this.data&&this.data.temp_activity||0},enumerable:!0,configurable:!0}),m.prototype.setActivityTemp=function(t){return!!this.data&&this.ActivityTemp!==t&&(this.data.temp_activity=t,!0)},Object.defineProperty(m.prototype,"TaskList",{get:function(){return c.DataMgr.Missions.getHadRewardMission()+c.DataMgr.Missions.getHadDailyChestRewardnum()},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"MenuInvite",{get:function(){return this.TempInvite||this.InviteNum},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"TempInvite",{get:function(){return this.data&&this.data.temp_invite||0},enumerable:!0,configurable:!0}),m.prototype.setTempInvite=function(t){return!!this.data&&this.TempInvite!==t&&(this.data.temp_invite=t,!0)},Object.defineProperty(m.prototype,"InviteNum",{get:function(){return this.data&&this.data.invite_num||0},enumerable:!0,configurable:!0}),m.prototype.setInviteNum=function(t,e){return!!this.data&&(t=(e=void 0!==e&&e)?t:Math.max(this.InviteNum+t,0),this.InviteNum!==t&&(this.data.invite_num=t,!0))},Object.defineProperty(m.prototype,"Shop",{get:function(){return this.ShopInvite||this.Service||this.Collect||this.Floating},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"ShopInvite",{get:function(){return this.TempInvite||this.InviteNum},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"Service",{get:function(){return d.default.checkService()===f.RewardState.Received?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"Floating",{get:function(){return d.default.checkFloating()===f.RewardState.Received?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"Collect",{get:function(){return d.default.checkCollect(f.DayKeys.CollectState)===f.RewardState.Received?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"ShopVideo",{get:function(){return c.DataMgr.User.getDayDataWithKey(f.DayKeys.ShopFreeStar,0)>=l.default.getParamsInt(u.OnlineKeys.ShopFreeStar,h.StarConfig.ShopFreeStar)?0:1},enumerable:!0,configurable:!0}),m.prototype.updatePoint=function(t,e){void 0===e&&(e=0);var n=[t];switch(t){case f.ModuleType.Activity:this.setActivityTemp(e),n=[f.ModuleType.Activity];break;case f.ModuleType.TaskList:n=[f.ModuleType.TaskList];break;case f.ModuleType.Menu:this.setMenuTemp(e),n=[f.ModuleType.Menu];break;case f.ModuleType.Service:n=[f.ModuleType.Shop,f.ModuleType.Service];break;case f.ModuleType.Collect:n=[f.ModuleType.Shop,f.ModuleType.Collect];break;case f.ModuleType.Floating:n=[f.ModuleType.Shop,f.ModuleType.Floating];break;case f.ModuleType.TempInvite:if(!this.setTempInvite(e))return;n=[f.ModuleType.Shop,f.ModuleType.ShopInvite,f.ModuleType.Menu,f.ModuleType.MenuInvite];break;case f.ModuleType.InviteNum:if(!this.setInviteNum(e))return;n=[f.ModuleType.Shop,f.ModuleType.ShopInvite,f.ModuleType.Menu,f.ModuleType.MenuInvite]}p.PointMgr.refresh.apply(p.PointMgr,n)},m.prototype.getPointNum=function(t){switch(t){case f.ModuleType.Activity:return this.ActivityTemp;case f.ModuleType.TaskList:return this.TaskList;case f.ModuleType.MenuInvite:return this.MenuInvite;case f.ModuleType.ShopInvite:return this.ShopInvite;case f.ModuleType.Menu:return this.Menu;case f.ModuleType.Shop:return this.Shop;case f.ModuleType.Service:return this.Service;case f.ModuleType.Collect:return this.Collect;case f.ModuleType.Floating:return this.Floating;default:return 0}},m.prototype.clearData=function(){this.clear()},m.prototype.clear=function(){this.data=null,this.setData(null)},Object.defineProperty(m,"I",{get:function(){return this._instance||(this._instance=new m)},enumerable:!0,configurable:!0}),m._instance=null,a=m,o.default=a,cc._RF.pop()},{}],PoolMgr:[function(t,e,n){"use strict";cc._RF.push(e,"1065aDooc9ElJZioJ1u6O29","PoolMgr");var i,o=n;function a(){this.dictPools={}}Object.defineProperty(o,"__esModule",{value:!0}),a.prototype.getNode=function(t){var e,n=t.__name;return this.dictPools.hasOwnProperty(n)?0<(e=this.dictPools[n]).size()?e.get():new t:(e=new cc.NodePool(n),this.dictPools[n]=e,new t)},a.prototype.getPrefab=function(t,e){var n,i=t.data.name,o=null;return o=this.dictPools.hasOwnProperty(i)?0<(n=this.dictPools[i]).size()?n.get():cc.instantiate(t):(n=new cc.NodePool(i),this.dictPools[i]=n,cc.instantiate(t)),cc.isValid(e)&&(o.parent=e),o},a.prototype.putNode=function(t){var e,n;cc.isValid(t)&&(e=t.name,n=null,this.dictPools.hasOwnProperty(e)?n=this.dictPools[e]:(n=new cc.NodePool(e),this.dictPools[e]=n),n.put(t))},a.prototype.clearPool=function(t){(t=this.dictPools[t])&&t.clear()},Object.defineProperty(a,"I",{get:function(){return this._instance||(this._instance=new a)},enumerable:!0,configurable:!0}),a._instance=null,o.default=i=a,o.PoolMgr=i.I,cc._RF.pop()},{}],QueuePopMgr:[function(t,e,n){"use strict";cc._RF.push(e,"82ddfvsNYZHzqX/Vk84SXiB","QueuePopMgr");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("ViewMgr");function r(){this.queuePopArr=[]}r.prototype.addShow=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queuePopArr.unshift({cls:t,data:e,type:2}),this.show()},r.prototype.addEnd=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queuePopArr.push({cls:t,data:e,type:1}),this},r.prototype.addTop=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queuePopArr.unshift({cls:t,data:e,type:1}),this},r.prototype.show=function(){var t=this;return new Promise(function(e){t.resolveEnd=e,t.handleOpen()})},r.prototype.clear=function(){this.currShow=null},r.prototype.next=function(t){void 0===t&&(t=!0),this.currShow&&!this.currShow.cls.isAutoPop||(this.currShow=null,t&&this.handleOpen())},r.prototype.handleOpen=function(){var t=this;this.doOpen().then(function(e){return e.isEnd&&t.resolveEnd&&(t.resolveEnd(),t.resolveEnd=null)})},r.prototype.doOpen=function(){if(this.currShow)return Promise.reject();if(!(e=this.filterCanshowArr()).length)return this.queuePopArr=[],this.currShow=null,Promise.resolve({isEnd:!0});this.currShow=e.shift();var t=(n=this.currShow).cls,e=n.data,n=n.index;return t.isAutoPop=!0,this.queuePopArr.splice(n,1),a.ViewMgr.openPopwin.apply(a.ViewMgr,[t].concat(e)),Promise.resolve({isEnd:!1})},r.prototype.filterCanshowArr=function(){for(var t=[],e=0;e<this.queuePopArr.length;e++){var n=this.queuePopArr[e],i=n.cls,o=n.data;1===n.type?(n="function"==typeof i.canShow&&i.canShow())&&t.push({cls:i,index:e,data:n}):t.push({cls:i,index:e,data:o})}return t},Object.defineProperty(r,"I",{get:function(){return this.instance||(this.instance=new r)},enumerable:!0,configurable:!0}),i=r,o.default=i,o.QueuePopMgr=i.I,cc._RF.pop()},{}],RandomUtils:[function(t,e,n){"use strict";cc._RF.push(e,"11f18/4iuFE0LfEtbt31iql","RandomUtils");var i=n;function o(){}Object.defineProperty(i,"__esModule",{value:!0}),o.range=function(t,e){return Math.round(Math.random()*(e-t)+t)},o.random=function(t,e){return Math.floor(Math.random()*(e-t)+t)},o.randomF=function(t,e){return Math.random()*(e-t)+t},o.randomArray=function(t){return t[Math.floor(Math.random()*t.length)]},o.arrayShuffle=function(t,e){for(var n,i,o=t.slice(0),a=t.length,r=a-e;a-- >r;)n=o[i=Math.floor((a+1)*Math.random())],o[i]=o[a],o[a]=n;return o.slice(r)},o.sortArray=function(t){return t.sort(function(){return.5<Math.random()?-1:1})},i.default=o,cc._RF.pop()},{}],RankEnum:[function(t,e,n){"use strict";cc._RF.push(e,"74194/dbhhBv41McOmeGMKS","RankEnum");var i=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),(i=o.RankEvent||(o.RankEvent={}))[i.Show=0]="Show",i[i.Clear=1]="Clear",i[i.Update=2]="Update",i[i.Update1=3]="Update1",i[i.Update2=4]="Update2",i[i.Loading=5]="Loading",i[i.Potential=6]="Potential",i[i.Invite=7]="Invite",(o=o.RankType||(o.RankType={}))[o.None=0]="None",o[o.Game=1]="Game",o[o.Over=2]="Over",o[o.Friend=3]="Friend",o[o.Coupon=4]="Coupon",cc._RF.pop()},{}],RankItem:[function(t,e,n){"use strict";cc._RF.push(e,"717470fvipOCapwbAAdfRfE","RankItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("ExtScrollView"),u=i("DataMgr"),d=i("BattleMgr"),p=i("ImageLabel");function h(){var t=null!==c&&c.apply(this,arguments)||this;return t.itemBgSelf=null,t.itemBgOther=null,t.number=null,t.numberBg=null,t.head=null,t.nickName=null,t.score=null,t.iconSpriteFrame=[],t.title=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(h,c=l.ExtScrollItem),h.prototype.updateCell=function(t){var e=this,n=t.rank,i=t.value,o=t.nickname,a=t.avatar_url,r=t.openid;this.nickName.string=o,this.score.string=i+"",u.DataMgr.UserBase.UserOpenId===r?(this.itemBgSelf.active=!0,this.itemBgOther.active=!1):(this.itemBgSelf.active=!1,this.itemBgOther.active=!0,this.nickName.node.color=cc.color(55,105,156)),n<=3?(this.numberBg.node.active=!0,this.numberBg.spriteFrame=this.iconSpriteFrame[n-1],this.number.node.parent.active=!1):(this.numberBg.node.active=!1,this.number.node.parent.active=!0,this.number.string=0==n?"100+":n+""),""!==a&&(cc.loader.load({url:a,type:"png"},function(t,n){cc.isValid(e.head)&&!t&&(e.head.spriteFrame=new cc.SpriteFrame(n))}),a=this.node.getChildByName("ball"),t=t.balllv,d.default.I&&d.default.I.node&&t&&0<t?(a.active=!0,a.getComponent(cc.Sprite).spriteFrame=d.default.I.getSkin(t),t=d.default.I.getTarBallNum(t),a.getChildByName("num").getComponent(p.default).setText(t)):a.active=!1)},s([o(cc.Node)],h.prototype,"itemBgSelf",void 0),s([o(cc.Node)],h.prototype,"itemBgOther",void 0),s([o(cc.Label)],h.prototype,"number",void 0),s([o(cc.Sprite)],h.prototype,"numberBg",void 0),s([o(cc.Sprite)],h.prototype,"head",void 0),s([o(cc.Label)],h.prototype,"nickName",void 0),s([o(cc.Label)],h.prototype,"score",void 0),s([o(cc.SpriteFrame)],h.prototype,"iconSpriteFrame",void 0),s([o(cc.Sprite)],h.prototype,"title",void 0),i=s([i],h),a.default=i,cc._RF.pop()},{}],RankPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"23e6bfjon9Glqqg0pjM82nA","RankPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("Api"),h=i("AudioMgr"),f=i("SDKTools"),m=i("SDKEnums"),g=i("ViewMgr"),_=i("EventMgr"),y=i("EventEnum"),v=i("Display"),b=i("ExtScrollView"),w=i("Enum"),S=i("Action"),M=i("SDKAnalytics"),C=i("BattleMgr"),P=i("OnlineMgr"),A=i("ImageLabel"),T=i("BaseAnimPopwin"),E=i("OpenContext"),B=i("RankEnum");function D(){var t=null!==u&&u.apply(this,arguments)||this;return t.wordRank=null,t.wordRankContent=null,t.rankItemPrefab=null,t.tabGroup=null,t.self=null,t.rankPrefab=null,t.worldScorllView=null,t.firstnode=null,t.ranknode=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(D,u=T.default),(d=D).prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.type=t.data.type||w.ModuleType.Menu,this.tabIndex=1,this.dataList=[],this.isShowFriend=!1,this.initAuthBtn(this.ranknode),this.focusTab(this.tabIndex,!0)},D.prototype.onOpend=function(){u.prototype.onOpend.call(this)},D.prototype.onHide=function(){f.default.hideUserBtn("rank")},D.prototype.onShow=function(){f.default.showUserBtn("rank")},D.prototype.onClose=function(){u.prototype.onClose.call(this),f.default.destoryUserBtn("rank")},D.prototype.setSelfInfo=function(){var t=this.selfdata,e=this.self.getChildByName("rank").getComponent(cc.Label);t.rank<=0?e.string="1000+":e.string=t.rank.toString(),this.self.getChildByName("name").getComponent(cc.Label).string=t.nickname,this.self.getChildByName("score").getComponent(cc.Label).string=t.value.toString();var n=this.self.getChildByName("ball"),i=(e=t.balllv,this.self.getChildByName("head").getChildByName("image").getComponent(cc.Sprite));C.default.I&&C.default.I.node&&e&&0<e?(n.active=!0,n.getComponent(cc.Sprite).spriteFrame=C.default.I.getSkin(e),e=C.default.I.getTarBallNum(e),n.getChildByName("num").getComponent(A.default).setText(e)):n.active=!1,""!==t.avatar_url&&cc.loader.load({url:t.avatar_url,type:"png"},function(t,e){cc.isValid(i)&&!t&&(i.spriteFrame=new cc.SpriteFrame(e))})},D.prototype.focusTab=function(t,e){switch(void 0===e&&(e=!1),t){case 0:this.forcusFriendRank(e);break;case 1:this.forcusWorldRank()}},D.prototype.forcusFriendRank=function(t){void 0===t&&(t=!1),f.default.hideUserBtn("rank"),this.firstnode.active=!1,this.self.active=!1,this.wordRank.active=!1,this.actionShowRank(),t||E.default.I.post(B.RankEvent.Loading,{offset:80}),this.isShowFriend=!0,S.default.playAnim(this.tabGroup,w.AnimNames.RankFriend),M.default.event(m.EventKeys.RankFriend,m.EventFrom.Rank)},D.prototype.actionShowRank=function(){cc.isValid(this.wxrank)&&this.wxrank.destroy();var t=cc.instantiate(this.rankPrefab);this.wxrank=t,this.node.getChildByName("content").addChild(t),t.y=0;var e=C.default.I&&C.default.I.node?0==C.default.I.m_Type?["score","honor1"]:["score2"]:["score3"];E.default.I.post(B.RankEvent.Show,{keys:e,box:t.getBoundingBoxToWorld(),winSize:cc.winSize},B.RankType.Friend)},D.prototype.actionHideRank=function(){E.default.I.post(B.RankEvent.Clear)},D.prototype.removeView=function(){u.prototype.onRelease.call(this),this.node.destroy()},D.prototype.forcusWorldRank=function(){var t,e=this;this.actionHideRank(),S.default.playAnim(this.tabGroup,w.AnimNames.RankWorld),f.default.Authorize?(this.self.active=!0,this.wordRank.active=!0,this.firstnode.active=!1,(t=this.dataList)&&t.length||(wx.showLoading({title:"\u8f7d\u5165\u4e2d\uff0c\u8bf7\u7a0d\u540e",mask:!0}),t=C.default.I&&C.default.I.node?0==C.default.I.m_Type?10:20:30,p.default.worldRank({type:t}).then(function(t){wx.hideLoading(),e.dataList=t.user_rank_list||[],e.selfdata=t.user_rank_data,e.worldScorllView.loadData(e.dataList,0),e.setSelfInfo()}).catch(function(){wx.hideLoading(),v.default.showTip("\u6392\u884c\u699c\u52a0\u8f7d\u5931\u8d25")}))):(this.firstnode.active=!0,f.default.showUserBtn("rank")),M.default.event(m.EventKeys.RankWorld,m.EventFrom.Rank)},D.prototype.refreshworld=function(){var t=this;this.self.active=!0,this.wordRank.active=!0,this.firstnode.active=!1;var e=this.dataList;e&&e.length||(wx.showLoading({title:"\u8f7d\u5165\u4e2d\uff0c\u8bf7\u7a0d\u540e",mask:!0}),e=C.default.I&&C.default.I.node?0==C.default.I.m_Type?10:20:30,p.default.worldRank({type:e}).then(function(e){wx.hideLoading(),t.dataList=e.user_rank_list||[],t.selfdata=e.user_rank_data,t.worldScorllView.loadData(t.dataList,0,.3),t.setSelfInfo()}).catch(function(){wx.hideLoading(),v.default.showTip("\u6392\u884c\u699c\u52a0\u8f7d\u5931\u8d25")}))},D.prototype.initAuthBtn=function(t){var e=this;v.default.createAuthBtn("rank","",t,{callback:function(t){0===t?v.default.showTip("\u67e5\u770b\u6392\u884c\u699c\u9700\u6388\u6743\u54e6~"):1===t&&e.refreshworld()},context:this})},Object.defineProperty(D.prototype,"BannerOpen",{get:function(){return P.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),D.prototype.handleClose=function(t){return void 0===t&&(t=!0),c(this,void 0,Promise,function(){return l(this,function(){return[2,g.ViewMgr.closePopwin(d,{anim:t})]})})},D.prototype.onTab=function(t,e){h.AudioMgr.button(),this.tabIndex!==+e&&(this.tabIndex=+e,this.focusTab(this.tabIndex,!1))},D.prototype.onShare=function(t){t.stopPropagation(),h.AudioMgr.button(),f.default.share(m.ShareKeys.Challenge)},D.prototype.onBack=function(){this.isShowFriend&&this.actionHideRank(),h.AudioMgr.button(),this.handleClose(!0).then(function(){return _.EventMgr.emit(y.EventEnum.UpdateFriendRank)})},D.PREFAB_PATH="prefab/popwin/popwin_rank",s([o(cc.Node)],D.prototype,"wordRank",void 0),s([o(cc.Node)],D.prototype,"wordRankContent",void 0),s([o(cc.Prefab)],D.prototype,"rankItemPrefab",void 0),s([o(cc.Node)],D.prototype,"tabGroup",void 0),s([o(cc.Node)],D.prototype,"self",void 0),s([o(cc.Prefab)],D.prototype,"rankPrefab",void 0),s([o(b.default)],D.prototype,"worldScorllView",void 0),s([o(cc.Node)],D.prototype,"firstnode",void 0),s([o(cc.Node)],D.prototype,"ranknode",void 0),i=d=s([i],D),a.default=i,cc._RF.pop()},{}],RecordData:[function(t,e,n){"use strict";cc._RF.push(e,"16f12apdN9Ncq3EXMRzFO4t","RecordData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e,n,i){this.level=0,this.score=0,this.timeProps={0:0,1:0,2:0},this.score=t,this.balls=e,this.timeProps=i,this.reviveTimes=n,this.tarballlv=0},cc._RF.pop()},{}],RecordItem:[function(t,e,n){"use strict";cc._RF.push(e,"edb07mr3WBITK+UxNgQfRcR","RecordItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("SDKTools"),p=i("Display"),h=i("Enum"),f=i("DataMgr"),m=i("AudioMgr"),g=i("EventMgr"),_=i("EventEnum"),y=i("SDKAnalytics"),v=i("SDKEnums"),b=i("BattleMgr"),w=i("ImageLabel"),S=i("UserBaseModel");function M(){var t=null!==u&&u.apply(this,arguments)||this;return t.txtLevel=null,t.txtScore=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(M,u=cc.Component),M.prototype.initWithData=function(t){this.data=t,this.initUI()},M.prototype.initUI=function(){this.node.active=!0;var t=this.data,e=(t.level,t.score);this.txtScore.string=""+e,t=this.node.getChildByName("ball"),0<(e=this.getMaxBall())?(t.active=!0,t.getComponent(cc.Sprite).spriteFrame=b.default.I.getSkin(e),e=b.default.I.getTarBallNum(e),t.getChildByName("num").getComponent(w.default).setText(e)):t.active=!1},M.prototype.getMaxBall=function(){var t=this.data.balls;if(null==t||t.length<=0)return-1;for(var e=0,n=0;n<t.length;n++){var i=t[n];i.lv>e&&(e=i.lv)}return e},M.prototype.onViedo=function(t,e){var n=this;m.AudioMgr.button(),y.default.event(v.EventKeys.RecordResume,v.EventFrom.Record);var i=f.DataMgr.User.getDayDataWithKey(h.DayKeys.RecordNum,0),o=d.default.getParamsInt(v.OnlineKeys.record_continue_limit_abtest,0);if(i>=(0==o||1==o&&S.default.I.ID%2==1?d.default.getParamsInt(v.OnlineKeys.record_continue_limit_a,100):d.default.getParamsInt(v.OnlineKeys.record_continue_limit_b,3)))return p.default.showTip("\u4eca\u65e5\u7684\u7eed\u73a9\u6b21\u6570\u5df2\u7ecf\u7528\u5b8c\uff0c\u8bf7\u660e\u5929\u518d\u6765");d.default.dispatch(v.ShareKeys.RecordContinue,{success:function(){return n.handleSuccess(+e)},context:this})},M.prototype.handleSuccess=function(t){return c(this,void 0,void 0,function(){return l(this,function(){return f.DataMgr.User.reqAddDayReward(h.DayKeys.RecordNum,1),b.default.I.toOldGame(f.DataMgr.User.getMaxRecordDatas(b.default.I.m_Type)[t]),g.EventMgr.emit(_.EventEnum.RecordItemClick,this.data),[2]})})},s([o(cc.Label)],M.prototype,"txtLevel",void 0),s([o(cc.Label)],M.prototype,"txtScore",void 0),i=s([i],M),a.default=i,cc._RF.pop()},{}],RecordPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"d2f60BAhJxJFY4KhA9PZz6N","RecordPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("RecordItem"),h=i("ViewMgr"),f=i("SDKTools"),m=i("DataMgr"),g=i("QueuePopMgr"),_=i("ShareVideo"),y=i("AudioMgr"),v=i("EventMgr"),b=i("EventEnum"),w=i("SDKAnalytics"),S=i("AppDataMgr"),M=i("Enum"),C=i("SDKEnums"),P=i("OnlineMgr"),A=i("BattleMgr"),T=i("BaseAnimPopwin"),E=i("WXApi"),B=i("UserBaseModel");function D(){var t=null!==u&&u.apply(this,arguments)||this;return t.isShowBg=!1,t.nodeNoneTip=null,t.items=[],t.timeslab=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(D,u=T.default),(d=D).canShow=function(){var t=S.AppDataMgr.get(M.AppDataKey.EnterGameState,M.EnterGameState.EnterMaxRecord);return t===M.EnterGameState.EnterMaxRecord&&0<m.DataMgr.User.MaxRecordDatas.length&&t},D.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.initUI(),this.initRewardUI(),this.isFromState=t.data.type,this.timeslab.string=this.gethavetimes().toString(),10<this.gethavetimes()?this.timeslab.node.parent.getComponent(cc.Animation).play("anim_record_none"):this.timeslab.node.parent.getComponent(cc.Animation).play("anim_record_have"),E.default.I.showgrideadBottom()},D.prototype.getismax=function(){var t=m.DataMgr.User.getDayDataWithKey(M.DayKeys.RecordNum,0),e=f.default.getParamsInt(C.OnlineKeys.record_continue_limit_abtest,0);return t>=(0==e||1==e&&B.default.I.ID%2==1?f.default.getParamsInt(C.OnlineKeys.record_continue_limit_a,100):f.default.getParamsInt(C.OnlineKeys.record_continue_limit_b,3))},D.prototype.gethavetimes=function(){var t=m.DataMgr.User.getDayDataWithKey(M.DayKeys.RecordNum,0),e=0==(e=f.default.getParamsInt(C.OnlineKeys.record_continue_limit_abtest,0))||1==e&&B.default.I.ID%2==1?f.default.getParamsInt(C.OnlineKeys.record_continue_limit_a,100):f.default.getParamsInt(C.OnlineKeys.record_continue_limit_b,3);return Math.max(0,e-t)},D.prototype.onClose=function(){u.prototype.onClose.call(this),E.default.I.hidegrideadBottom()},Object.defineProperty(D.prototype,"BannerOpen",{get:function(){return P.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),D.prototype.addEvent=function(){u.prototype.addEvent.call(this),v.EventMgr.on(b.EventEnum.RecordItemClick,this.handleRecord,this),f.default.bindEvent(b.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},D.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),v.EventMgr.off(b.EventEnum.RecordItemClick,this.handleRecord,this),f.default.removeEvent(b.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},D.prototype.initUI=function(){var t=this,e=m.DataMgr.User.getMaxRecordDatas(A.default.I.m_Type)||[];this.nodeNoneTip.active=e&&0===e.length,e.forEach(function(e,n){return t.items[n].initWithData(e)})},D.prototype.initRewardUI=function(){var t=this,e=m.DataMgr.User.getMaxRecordDatas(A.default.I.m_Type)||[];this.items[0].node.active=!1,this.items[1].node.active=!1,this.items[2].node.active=!1,e.forEach(function(e,n){t.items[n].node.active=!0,t.items[n].node.getChildByName("btn").getChildByName("btn_challenge").getComponent(_.default).updateWith(C.ShareKeys.RecordContinue)})},D.prototype.handleClose=function(t){return h.ViewMgr.closePopwin(d,{anim:t})},D.prototype.onBack=function(){y.AudioMgr.button(),w.default.event(C.EventKeys.RecordClose,C.EventFrom.Record),this.isFromState===M.EnterGameState.MenuMaxRecord?this.handleClose(!0):this.isFromState===M.EnterGameState.FailMaxRecord?(this.handleClose(!0),this.handleClose(!1).then(function(){return v.EventMgr.emit(b.EventEnum.GameWithChapter)})):(S.AppDataMgr.set(M.AppDataKey.EnterGameState,M.EnterGameState.First),this.handleClose(!1).then(function(){return g.QueuePopMgr.next()}))},D.prototype.handleTacticUpdate=function(){this.initRewardUI()},D.prototype.handleRecord=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return S.AppDataMgr.set(M.AppDataKey.EnterGameState,M.EnterGameState.MaxRecordClick),[4,this.handleClose(!1)];case 1:return t.sent(),g.QueuePopMgr.next(),v.EventMgr.emit(b.EventEnum.GameWithChapter),[2]}})})},D.PREFAB_PATH="prefab/popwin/popwin_record",s([o(cc.Node)],D.prototype,"nodeNoneTip",void 0),s([o(p.default)],D.prototype,"items",void 0),s([o(cc.Label)],D.prototype,"timeslab",void 0),i=d=s([i],D),a.default=i,cc._RF.pop()},{}],RedPacketPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"92beftjE7JM17Q7jGO1bmQa","RedPacketPopwin");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=o("BasePopwin"),d=o("SDKEnums"),p=o("BattleMgr"),h=o("AudioMgr"),f=o("SDKAnalytics"),m=o("OnlineMgr");function g(){var t=null!==c&&c.apply(this,arguments)||this;return t.time=5,t}o=(i=cc._decorator).ccclass,i.property,r(g,c=u.default),l=g,Object.defineProperty(g.prototype,"BannerOpen",{get:function(){return m.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),g.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.time=5,f.default.event(d.EventKeys.red_packet_newbie_show,"")},g.prototype.onBack=function(){h.AudioMgr.button(),this.doClose(l,!1).then(function(){p.default.I.removePopwinList(),p.default.I.comTopWrap.addFirstRedPacket()}),f.default.event(d.EventKeys.red_packet_newbie_close,"")},g.prototype.update=function(t){0<this.time&&(this.time-=t,this.time<=0&&(this.doClose(l,!1).then(function(){p.default.I.removePopwinList(),p.default.I.comTopWrap.addFirstRedPacket()}),f.default.event(d.EventKeys.red_packet_newbie_close,"")))},g.PREFAB_PATH="prefab/popwin/popwin_redpacket",g.isshow=!1,o=l=s([o],g),a.default=o,cc._RF.pop()},{}],ResLoader:[function(t,e,n){"use strict";cc._RF.push(e,"93799cbMyFCEqgifYKtL+4r","ResLoader");var i=n;Object.defineProperty(i,"__esModule",{value:!0});var o=(o=cc.js.isChildClassOf)||cc.isChildClassOf,a=(r.destroy=function(){this._resLoader&&(this._resLoader=null)},r.prototype._getResItem=function(t,e){var n=cc.loader,i=n._cache[t];return i||(e=n._getResUuid(t,e,!1))&&(e=n._getReferenceKey(e),i=n._cache[e]),i},r.prototype._makeLoadResArgs=function(){if(arguments.length<1||"string"!=typeof arguments[0])return null;for(var t={url:arguments[0]},e=1;e<arguments.length;++e)1==e&&o(arguments[e],cc.RawAsset)?t.type=arguments[e]:e==arguments.length-1&&"string"==typeof arguments[e]?t.use=arguments[e]:"function"==typeof arguments[e]&&(e+1<arguments.length&&"function"==typeof arguments[e+1]?t.onProgess=arguments[e]:t.onCompleted=arguments[e]);return t},r.prototype._makeReleaseResArgs=function(){if(arguments.length<1||"string"!=typeof arguments[0])return null;for(var t={url:arguments[0]},e=1;e<arguments.length;++e)"string"==typeof arguments[e]?t.use=arguments[e]:t.type=arguments[e];return t},r.prototype.makeUseKey=function(t,e,n){return"use_"+t+"_by_"+(e=void 0===e?"none":e)+"_for_"+(void 0===n?"":n)},r.prototype.getCacheInfo=function(t){return this._resMap.has(t)||this._resMap.set(t,{refs:new Set,uses:new Set}),this._resMap.get(t)},r.prototype.loadRes=function(){function t(t,i){var o,a=e._getResItem(n.url,n.type);a&&a.id?function t(n,i){if(n&&n.dependKeys&&Array.isArray(n.dependKeys))for(var o=0,a=n.dependKeys;o<a.length;o++){var r=a[o];e.getCacheInfo(r).refs.add(i),cc.log(r+" ref by "+i),t(r=cc.loader._cache[r],i)}}(a,a.id):cc.warn("addDependKey item error1! for "+n.url),a&&((o=e.getCacheInfo(a.id)).refs.add(a.id),n.use&&o.uses.add(n.use)),n.onCompleted&&n.onCompleted(t,i)}var e=this,n=this._makeLoadResArgs.apply(this,arguments),i=cc.loader.getRes(n.url,n.type);i?t(null,i):cc.loader.loadRes(n.url,n.type,n.onProgess,t)},r.prototype.releaseRes=function(){var t,e=this._makeReleaseResArgs.apply(this,arguments),n=this._getResItem(e.url,e.type);n&&(cc.log("resloader release item"),t=this.getCacheInfo(n.id),e.use&&t.uses.delete(e.use),this._release(n,n.id))},r.prototype._release=function(t,e){var n,i=this;t&&((n=this.getCacheInfo(t.id)).refs.delete(e),function(t,e){if(t&&t.dependKeys&&Array.isArray(t.dependKeys))for(var n=0,o=t.dependKeys;n<o.length;n++){var a=o[n];a=cc.loader._cache[a],i._release(a,e)}}(t,e),0==n.uses.size&&0==n.refs.size&&(t.uuid?(cc.loader.release(t.uuid),cc.log("resloader release item by uuid :"+t.id)):(cc.loader.release(t.id),cc.log("resloader release item by url:"+t.id)),this._resMap.delete(t.id)))},r.prototype.checkReleaseUse=function(){var t=this._makeReleaseResArgs.apply(this,arguments),e=this._getResItem(t.url,t.type);if(!e)return!0;var n=this.getCacheInfo(e.id);return t=!(t.use&&0<n.uses.size&&(1!=n.uses.size||!n.uses.has(t.use))),n=!!(1==n.refs.size&&n.refs.has(e.id)||0==n.refs.size),t&&n},Object.defineProperty(r,"I",{get:function(){return this._resLoader||(this._resLoader=new r)},enumerable:!0,configurable:!0}),r._resLoader=null,r);function r(){this._resMap=new Map}i.default=a,i.ResLoader=a.I,cc._RF.pop()},{}],RewardCfg:[function(t,e,n){"use strict";cc._RF.push(e,"8298eVLykBGLYMXYjCZ1UP2","RewardCfg");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){},cc._RF.pop()},{}],RocketCtr:[function(t,e,n){"use strict";cc._RF.push(e,"db580Zsda1GRYoY72qmthIL","RocketCtr");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c=cc._decorator;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.pos=null,t}i=c.ccclass,c.property,a(l,s=cc.Component),l.prototype.start=function(){},l.prototype.update=function(){var t;this.pos&&(t=this.pos.sub(this.node.position),t=180*cc.Vec2.UP.angle(t)/Math.PI,this.node.angle=t)},i=r([i],l),o.default=i,cc._RF.pop()},{}],RoomItem:[function(t,e,n){"use strict";cc._RF.push(e,"e20d5jnVBVGKZmq1OAbI6v8","RoomItem");var i,o=t,a=e,r=n,s=__EXTENDS__(),c=__DECORATE__,l=__AWAITER__,u=__GENERATOR__;function d(){var t=null!==i&&i.apply(this,arguments)||this;return t.txtRoom=null,t.nodeMission=null,t.prefabFurniture=null,t}Object.defineProperty(r,"__esModule",{value:!0}),o("FurnitureItem"),o("Action"),o("DataMgr"),o("AudioMgr"),o("CommonMgr"),o=(a=cc._decorator).ccclass,a=a.property,s(d,i=cc.Component),d.prototype.initWith=function(){},d.prototype.initMissions=function(){},d.prototype.onTouch=function(){return l(this,void 0,void 0,function(){return u(this,function(){return[2]})})},c([a(cc.Label)],d.prototype,"txtRoom",void 0),c([a(cc.Node)],d.prototype,"nodeMission",void 0),c([a(cc.Prefab)],d.prototype,"prefabFurniture",void 0),o=c([o],d),r.default=o,(o={})[o.Expand=0]="Expand",o[o.Expanding=1]="Expanding",o[o.Reduce=2]="Reduce",o[o.Reduceing=3]="Reduceing",cc._RF.pop()},{}],RotationForever:[function(t,e,n){"use strict";cc._RF.push(e,"6ce77jQ9MtOcIN1Nt31a0qB","RotationForever");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c=cc._decorator;function l(){return null!==s&&s.apply(this,arguments)||this}i=c.ccclass,c.property,a(l,s=cc.Component),l.prototype.stopRotation=function(){this.node.stopAllActions(),this.node.rotation=0},l.prototype.onEnable=function(){this.rotation()},l.prototype.onDisable=function(){this.node.stopAllActions()},l.prototype.rotation=function(){var t=cc.rotateBy(.4,180);this.node.runAction(cc.repeatForever(t))},i=r([i],l),o.default=i,cc._RF.pop()},{}],RulePopwin:[function(t,e,n){"use strict";cc._RF.push(e,"e369dU005REiJAs5H/Umbms","RulePopwin");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=o("BasePopwin"),h=o("AudioMgr"),f=o("OnlineMgr"),m=o("SDKEnums"),g=o("SDKAnalytics"),_=o("SDKTools"),y=o("Water"),v=o("BattleMgr");function b(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_time=3,t}o=(i=cc._decorator).ccclass,i.property,r(b,u=p.default),(d=b).prototype.onLoad=function(){},b.prototype.addEvent=function(){u.prototype.addEvent.call(this)},b.prototype.removeEvent=function(){u.prototype.removeEvent.call(this)},Object.defineProperty(b.prototype,"BannerOpen",{get:function(){return f.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),b.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),t=_.default.getParamsInt(m.OnlineKeys.tutorial_panel_skip_time,5),this.m_time=t,g.default.event(m.EventKeys.tutorial_panel_show,"")},b.prototype.playani2=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,y.default.wait(6333)];case 1:return t.sent(),this.node.getChildByName("bg").getChildByName("anim_2").getComponent(cc.Animation).play(),[2]}})})},b.prototype.onBack=function(){h.AudioMgr.button(),this.doClose(d,!1).then(function(){v.default.I.removePopwinList()}),g.default.event(m.EventKeys.tutorial_panel_close,"")},b.prototype.update=function(t){0<this.m_time?this.m_time-=t:(this.doClose(d,!1).then(function(){v.default.I.removePopwinList()}),g.default.event(m.EventKeys.tutorial_panel_close,""),this.m_time=-1)},b.PREFAB_PATH="prefab/popwin/popwin_rule",o=d=s([o],b),a.default=o,cc._RF.pop()},{}],SDKAnalytics:[function(t,e,n){"use strict";cc._RF.push(e,"6a4a3Z8w4NI2JX53m/mbcoH","SDKAnalytics");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("SDKTools");function r(){}r.setLogind=function(t){return a.default.checkNormal(function(){return PCSDK.stat.setLogind(t)})},r.addLogRes=function(t){return a.default.checkNormal(function(){return PCSDK.stat.addLogRes(t)},null)},r.addLogLevel=function(t){return a.default.checkNormal(function(){return PCSDK.stat.addLogLevel(t)},null)},r.logLevelRelive=function(t,e){return a.default.checkNormal(function(){return PCSDK.stat.logLevelRelive(t,e)},null)},r.logLevelHide=function(t,e){return a.default.checkNormal(function(){return PCSDK.stat.logLevelHide(t,e)},null)},r.logLevelFail=function(t,e){return a.default.checkNormal(function(){return PCSDK.stat.logLevelFail(t,e)},null)},r.logLevelWin=function(t,e){return a.default.checkNormal(function(){return PCSDK.stat.logLevelWin(t,e)},null)},r.logMerge=function(t){return a.default.checkNormal(function(){return PCSDK.stat.logMerge(t)},null)},r.addExposures=function(t,e){return a.default.checkNormal(function(){return PCSDK.stat.addExposure(t,e)},null)},r.loadingFinish=function(){return a.default.checkPromise(function(){return PCSDK.stat.loadingFinish()})},r.newLoadingFinish=function(t){return a.default.checkPromise(function(){return PCSDK.stat.newLoadingFinish(t)})},r.agreeAuth=function(t,e){return a.default.checkPromise(function(){return PCSDK.stat.authorize(t,e)})},r.refuseAuth=function(){return a.default.checkPromise(function(){return PCSDK.stat.refuseAuth()})},r.active=function(){return a.default.checkPromise(function(){return PCSDK.stat.active()})},r.dot=function(t,e){return void 0===e&&(e={}),a.default.checkPromise(function(){return PCSDK.stat.dot(t,e)})},r.event=function(t,e,n){return a.default.checkPromise(function(){return PCSDK.stat.event(t.toString(),e,n)})},r.reqBannerList=function(t){return a.default.checkPromise(function(){return PCSDK.stat.bannerList(t)},Promise.reject(null))},r.reqBannerClick=function(t,e){return a.default.checkPromise(function(){return PCSDK.stat.bannerNavigateTo(t,e)})},i=r,o.default=i,cc._RF.pop()},{}],SDKBanner:[function(t,e,n){"use strict";cc._RF.push(e,"f25b6YRbK5Og5Loy7Vbnfxd","SDKBanner");var i=t,o=n,a=__AWAITER__,r=__GENERATOR__;Object.defineProperty(o,"__esModule",{value:!0});var s=i("SDKTools"),c=i("EventMgr"),l=i("EventEnum"),u=i("SDKAnalytics"),d=i("SDKEnums");function p(){this.isDebug=!1,this.activeBanners={},this.styles={}}Object.defineProperty(p.prototype,"SystemData",{get:function(){return s.default.SystemData},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"CanShow",{get:function(){return"undefined"!=typeof wx&&wx.hasOwnProperty("createBannerAd")},enumerable:!0,configurable:!0}),p.prototype.show=function(t,e){var n,i,o,a,r=this;void 0===e&&(e=0),this.isDebug,this.CanShow&&(this.activeBanners[t]&&!this.activeBanners[t]._destroyed||(n=this.SystemData,i=n.screenWidth,o=n.screenHeight,e=e?Math.max(i/750*e,300):i,u.default.event(d.EventKeys.banner_ad_create,""),a=wx.createBannerAd({adUnitId:t,style:{left:0,top:o-148,width:e}}),e=n.platform,n.statusBarHeight,!e||"ios"!==e.toLocaleLowerCase()&&e.toLocaleLowerCase(),a.onResize(function(e){r.styles[t]=e,a&&(a.style.left=i/2-e.width/2,a.style.top=o-e.height)}),a.onError(function(){r.isDebug,c.EventMgr.emit(l.EventEnum.BannerFailure),r.destory(t)}),this.activeBanners[t]=a,this.isDebug),this.display(t,this.activeBanners[t]))},p.prototype.display=function(t,e){return a(this,void 0,void 0,function(){var n=this;return r(this,function(){return this.isDebug,e&&(u.default.event(d.EventKeys.banner_ad_show,""),e.show().then(function(){n.isDebug,c.EventMgr.emit(l.EventEnum.BannerSuccess,{style:n.styles,adUnitId:t}),u.default.event(d.EventKeys.banner_ad_show_suc,"")}).catch(function(){n.isDebug,c.EventMgr.emit(l.EventEnum.BannerFailure),n.destory(t),u.default.event(d.EventKeys.banner_ad_show_fail,"")})),[2]})})},p.prototype.hide=function(t){this.isDebug,!(t=this.activeBanners[t])||t._destroyed?this.isDebug:t.hide()},p.prototype.destory=function(t){this.isDebug;var e=this.activeBanners[t];if(e&&!e._destroyed)return e.destroy(),void(this.activeBanners[t]=null);this.isDebug},p.prototype.destroyAll=function(){for(var t in this.activeBanners)this.destory(t)},Object.defineProperty(p,"I",{get:function(){return this.instance||(this.instance=new p)},enumerable:!0,configurable:!0}),i=p,o.default=i,cc._RF.pop()},{}],SDKEnums:[function(t,e,n){"use strict";cc._RF.push(e,"dbca0oIfrBIm578DXRCfzlB","SDKEnums");var i=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),(i=o.OnlineKeys||(o.OnlineKeys={})).SDKADList="sdk_ad_objs",i.GmFlag="gm_flag",i.GmGameOpen="gm_game_open",i.ADToufangShenHe="toufang_shenhe",i.SignDataList="sign_data_list",i.ClientTestFunction="client_test_function",i.SwitchLayaStat="switch_laya_stat",i.InterstitialAdOnshow="isshow_interstitial",i.GiftDropRules="gift_drop_rules",i.TreasureDropRules="treasure_drop_rules",i.InterstitialAdMergeLimit="interstitialAd_merge_limit",i.ShopCoinRecommendNum="shop_coin_recommend",i.DisplayTextureAnim="display_texture_anim",i.MaxAddPowerTimes="one_day_limit_energy",i.AddPowerTime="renew_energy",i.MaxPower="limit_energy",i.InterstitialShow="InterstitialShow",i.OlduserLv="user_new_with_level",i.UserOpen="user_state_open",i.BannerPcGamesOpen="pc_games_open",i.PlotAutoNext="plot_auto_next",i.BannerModulesOpen="banner_modules_open",i.ChestMax="chest_max",i.ChestLv="chest_lv",i.GameBannerRefresh="game_banner_refresh",i.ReliveNum="relive_num",i.ShopFreeStar="shop_free_star",i.RecordNum="relive_num",i.ChestRewards="chest_rewards",i.InviteRewards="invite_rewards",i.SwitchDebugFlag="switch_debug_flag",i.ServiceRewardNum="service_reward_num",i.CollectRewardNum="collect_reward_num",i.FloatingRewardNum="floating_reward_num",i.InterstitialFailCd="interstitialAd_cd2",i.InterstitialHomeCd="interstitialAd_cdhome",i.InterstitialGameCd="interstitialAd_cdgame",i.InterstitialHomeLv="interstitialAd_cdhomelv",i.InterstitialGameLv="interstitialAd_cdgamelv",i.InterstitialLvCd="interstitialAd_cd3",i.InterstitialLvUpCd="interstitialAd_cd4",i.InterstitialHintCd="interstitialAd_cd1",i.BlockRewardLimit="block_reward_limit",i.SuperRewardLimit="super_reward_limit",i.HintTipLimit="hint_tip_limit",i.ExchangeOpen="network_gold_open",i.LvupP="lvup_p",i.NewYearBtn="newyear_btn",i.NewYearPopwin="newyear_popwin",i.ABTest="ab_test",i.NewYearData="newyear_datas",i.LvRewardABtest="lvreward_abtest",i.MinTarBallLv="min_tarball",i.ScaleRotio="scale_rotio",i.ScaleRotioA="scale_rotio_a",i.BallscABtest="ballsc_abtest",i.SkinVideo="skin_video",i.skillcost="skillcost",i.skillpower="skill_power",i.BottomSkipOffset="bottom_skip_offset",i.RedPacketLimit="RedPacketLimit",i.LoadingHomeRatios="loading_home_ratios",i.matrix_inter_abtest="matrix_inter_abtest",i.DebugFlag="debug_flag",i.teachball="teachball",i.teachball2="teachball_b",i.powerNum="powernum",i.itemgiftminlv="itemgift_minlv",i.itemgift_minlv_b="itemgift_minlv_b",i.NewGuide="guide_first_word_abtest",i.sign_min_lv="sign_min_lv",i.lightminlv="skill_energy_minlv",i.task_unlock_minlv_abtest="task_unlock_minlv_abtest",i.invite_event_minlv="invite_event_minlv",i.former_balls_abtest="former_balls_abtest",i.teach_balls_abtest="teach_balls_abtest",i.energy_popup_abtest="energy_popup_abtest",i.coins_gift_abtest="coins_gift_abtest",i.first_ball_lv_abtest="first_ball_lv_abtest",i.min_tarball_b="min_tarball_b",i.task_no_build_tip="task_no_build_tip",i.lottery_abtest="lottery_abtest",i.lottery_min_lv="lottery_min_lv",i.force_build_tutorial_abtest="force_build_tutorial_abtest",i.ballsc_abtest_newbie="ballsc_abtest_newbie",i.scale_rotio_newbie="scale_rotio_newbie",i.build_scene_module_ad="build_scene_module_ad",i.banner_min_lv="banner_min_lv",i.guide_line_max_lv="guide_line_max_lv",i.grid_replace_banner_show="grid_replace_banner_show",i.scale_rotio_newbie_abtest="scale_rotio_newbie_abtest",i.scale_rotio_newbie_b="scale_rotio_newbie_b",i.words_before_video_ad_abtest="words_before_video_ad_abtest",i.fail_back_1_level_abtest="fail_back_1_level_abtest",i.double_star_unshow_abtest="double_star_unshow_abtest",i.later_ballsc_abtest="later_ballsc_abtest",i.later_ballsc_b="later_ballsc_b",i.online_gift_show_abtest="online_gift_show_abtest",i.online_gift_show_lv="online_gift_show_lv",i.lottery_type_abtest="lottery_type_abtest",i.game_collect_min_lv="game_collect_min_lv",i.game_collect_pop_times="game_collect_pop_times",i.claim_show_abtest="claim_show_abtest",i.claim_show_version="claim_show_version",i.claim_cont="claim_cont",i.game_collect_force_show_abtest="game_collect_force_show_abtest",i.insert_ad_old_lv="insert_ad_old_lv",i.insert_ad_old_user="insert_ad_old_user",i.insert_ad_new_user="insert_ad_new_user",i.grid_ad_all_abtest="grid_ad_all_abtest",i.BlockRewardLimit_B="BlockRewardLimit_B",i.BlockRewardLimit_abtest="BlockRewardLimit_abtest",i.lottery_unlock_pop_abtest="lottery_unlock_pop_abtest",i.lottery_old_user_pop_abtest="lottery_old_user_pop_abtest",i.double_star_unshow_insert_ad="double_star_unshow_insert_ad",i.itemgift_minlv_abtest="itemgift_minlv_abtest",i.revive_time_limit_abtest="revive_time_limit_abtest",i.revive_time_limit_a="revive_time_limit_a",i.revive_time_limit_b="revive_time_limit_b",i.skill_charge_time_limit_abtest="skill_charge_time_limit_abtest",i.skill_charge_time_limit_a="skill_charge_time_limit_a",i.skill_charge_time_limit_b="skill_charge_time_limit_b",i.super_ball_min_lv="super_ball_min_lv",i.super_ball_open_abtest="super_ball_open_abtest",i.record_continue_limit_abtest="record_continue_limit_abtest",i.record_continue_limit_a="record_continue_limit_a",i.record_continue_limit_b="record_continue_limit_b",i.interstitialAd_cd3_abtest="interstitialAd_cd3_abtest",i.interstitialAd_cd3_b="interstitialAd_cd3_b",i.interstitialAd_cd4_abtest="interstitialAd_cd4_abtest",i.interstitialAd_cd4_b="interstitialAd_cd4_b",i.gift_help_abtest="gift_help_abtest",i.lucky_coins_abtest="lucky_coins_abtest",i.youxuan_ad_abtest="youxuan_ad_abtest",i.game_center_auto_show_abtest="game_center_auto_show_abtest",i.game_center_auto_show_minlv="game_center_auto_show_minlv",i.cross_promotion_abtest="cross_promotion_abtest",i.guess_promotion_abtest="guess_promotion_abtest",i.single_gride_promotion_abtest="single_gride_promotion_abtest",i.lucky_gift_share_abtest="lucky_gift_share_abtest",i.help_gift_share_abtest="help_gift_share_abtest",i.double_star_share_abtest="double_star_share_abtest",i.online_gift_share_abtest="online_gift_share_abtest",i.revive_share_abtest="revive_share_abtest",i.invite_p2p_abtest="invite_p2p_abtest",i.invite_pop_minlv="invite_pop_minlv",i.red_packet_abtest="red_packet_abtest",i.share_force_fail_times="share_force_fail_times",i.blast_force_abtest="blast_force_abtest",i.UI_style_abtest="UI_style_abtest",i.task_popup_min_lv_abtest="task_popup_min_lv_abtest",i.tutorial_panel_skip_time="tutorial_panel_skip_time",i.tutorial_panel_abtest="tutorial_panel_abtest",i.red_packet_welcome_abtest="red_packet_welcome_abtest",i.blast_force_ratio="blast_force_ratio",i.skill_rocket_num="skill_rocket_num",i.skill_magnet_num="skill_magnet_num",i.sign_pop_timing_abtest="sign_pop_timing_abtest",i.task_panel_show_times_abtest="task_panel_show_times_abtest",i.skill_fadeout_abtest="skill_fadeout_abtest",i.skill_fadeout_time="skill_fadeout_time",i.click_wrong_protect_1_abtest="click_wrong_protect_1_abtest",i.click_wrong_protect_2_abtest="click_wrong_protect_2_abtest",i.click_wrong_protect_min_num="click_wrong_protect_min_num",i.skill_ball_scope="skill_ball_scope",i.skill_ball_abtest="skill_ball_abtest",i.skill_weights="skill_weights",i.refresh_abtest="refresh_abtest",i.skill_ball_limit="skill_ball_limit",i.refresh_times="refresh_times",i.gameplay_melon_abtest="gameplay_melon_abtest",i.gameplay_melon_post_abtest="gameplay_melon_post_abtest",i.gameplay_melon_icon_abtest="gameplay_melon_icon_abtest",i.gameplay_melon_post_time="gameplay_melon_post_time",i.gameplay_melon_min_lv_abtest="gameplay_melon_min_lv_abtest",i.cps_unlock_lv="cps_unlock_lv",i.cps_open_abtest="cps_open_abtest",i.cps_show_lvs_require="cps_show_lvs_require",i.cps_show_distrub_protect_abtest="cps_show_distrub_protect_abtest",(i=o.ShareKeys||(o.ShareKeys={})).Relive="resurgence",i.DayReward="day_reward",i.ChestReward="chest_reward",i.ChestReward2="chest_reward2",i.ShopReward="shop_reward",i.SuperReward="super_reward",i.BlockReward="block_reward",i.UseItem="use_item",i.Friends="Friends_challenge",i.Invite="Invite_rewards",i.RecordContinue="record_continue",i.Challenge="challenge",i.MissionVideo="mission_video",i.DoubleExchange="double_exchage",i.DoubleBubble="double_bubble",i.BigBubble="big_bubble",i.Changeball="change_ball",i.DoubleReward="double_reward",i.getskin="get_skin",i.levelupReward="levelup_reward",i.ItemTipUse="itemtip_use",i.GiftHelp="gift_help",i.FurnitureSkin="furniture_skin",i.Sign="sign",i.InviteAct="invite_act",i.full_power_in_game="full_power_in_game",i.block_gold="block_gold",i.lottery="lottery",i.lotterypack="lotterypack",i.onlinegift="online_gift",i.bigball="bigball",i.UseItemShare="use_item_share",i.ChangeTimes="change_times",i.resurgence_melon="resurgence_melon",i.use_item_share_melon="use_item_share_melon",i.use_ball_item_melon="use_ball_item_melon",i.use_ball_item="use_ball_item",(i=o.EventKeys||(o.EventKeys={})).Task2_decorAniFin="[task_2]decor_ani_fin",i.Task2_choosePanelShow="[task_2]choose_panel_show",i.Task2_choosePanelSelect2nd="[task_2]choose_panel_select_2nd",i.ChestDouble="chest_double",i.ChestOpen="chest_open",i.ChestNormal="chest_normal",i.OpenChest="open_chest",i.OverRank="over_rank",i.OverAgain="over_again",i.OverShare="over_share",i.ReviveSkip="revive_skip",i.ReviveShare="revive_share",i.PropSkip="prop_skip",i.PropGet="prop_get",i.HintsSkip="hints_skip",i.HintsGet="hints_get",i.SuperSkip="super_skip",i.SuperGet="super_get",i.InviteClose="invite_close",i.InviteReward="invite_reward",i.InviteShare="invite_share",i.RankClose="rank_close",i.RankWorld="rank_world",i.RankFriend="rank_friend",i.RecordClose="record_close",i.RecordResume="record_resume",i.MenuVibrate="menu_vibrate",i.MenuAudio="menu_audio",i.MenuDebug="menu_debug",i.MenuShare="menu_share",i.MenuNewGame="menu_newGame",i.MenuInvite="menu_invite",i.MenuRank="menu_rank",i.MenuRecord="menu_record",i.ShopClose="shop_close",i.ShopInvite="shop_invite",i.ShopFree="shop_free",i.OpenMenu="open_menu",i.OpenShop="open_shop",i.SginShare="sgin_share",i.SginNormal="sgin_normal",i.SginDouble="sgin_double",i.Load="load",i.Start="start",i.ServiceNumber1="serviceNumber1",i.serviceNumber2="serviceNumber2",i.CollectNumber1="collectNumber1",i.CollectNumber2="collectNumber2",i.WindowNumber1="windowNumber1",i.WindowNumber2="windowNumber2",i.Joker="prop_joker",i.Refresh="prop_refresh",i.Hammer="prop_hammer",i.Clear2="prop_clear2",i.Clear4="prop_clear4",i.Lvup="level_up",i.TestPropA="prop_pop_a",i.TestPropB="prop_pop_b",i.TestvbA="prop_video_begin_a",i.TestvbB="prop_video_begin_b",i.TestveA="prop_video_end_a",i.TestveB="prop_video_end_b",i.ChallengeBtn="click_challenge",i.lvBtn="click_classic",i.LoadError="load_error",i.TouchMove="new_user_slip",i.giftBox_free_show="giftBox_free_show",i.giftBox_pay_show="giftBox_pay_show",i.avatarShop_click="avatarShop_click",i.buyLogo="avatar_pattern_buy",i.buyMainSkin="avatar_scene_buy",i.bonus_magnet_lvup="bonus_magnet_lvup",i.bonus_use="bonus_use",i.bonus_open="bonus_open",i.native_singleGridAd_show="native_singleGridAd_show",i.native_singleGridAd_close="native_singleGridAd_close",i.drawer_click="drawer_click",i.hidewxad="hide_wxad",i.showwxad="show_wxad",i.inter_ad_request="inter_ad_request",i.Level7_num4096Merged="[level_7]num_4096_merged",i.Level7_num1st2048Merged="[level_7]num_1st_2048_merged",i.Level6_num2048Merged="[level_6]num_2048_merged",i.Level6_num1st1024Merged="[level_6]num_1st_1024_merged",i.Level5_num1024Merged="[level_5]num_1024_merged",i.Level5_num1st512Merged="[level_5]num_1st_512_merged",i.Level4_num512Merged="[level_4]num_512_merged",i.Level4_num1st256Merged="[level_4]num_1st_256_merged",i.Exp6_starsChestOpenClose="[exp_6]stars_chest_open_close",i.Exp6_starsChestOpenShow="[exp_6]stars_chest_open_show",i.Exp6_starsChestReadyShow="[exp_6]stars_chest_ready_show",i.Exp6_exp6Got="[exp_6]exp_6_got",i.Level3_num256Merged="[level_3]num_256_merged",i.Level3_num128Merged="[level_3]num_128_merged",i.Exp5_classicModeAniFin="[exp_5]classic_mode_ani_fin",i.Exp5_panel3to1ChestClose="[exp_5]panel_3to1_chest_close",i.Exp5_panel3to1ChestTap="[exp_5]panel_3to1_chest_tap",i.Exp5_exp5Got="[exp_5]exp_5_got",i.Exp4_panel3to1ChestClose="[exp_4]panel_3to1_chest_close",i.Exp4_panel3to1ChestTap="[exp_4]panel_3to1_chest_tap",i.Exp4_exp4Got="[exp_4]exp_4_got",i.Exp3_panel3to1ChestClose="[exp_3]panel_3to1_chest_close",i.Exp3_panel3to1ChestTap="[exp_3]panel_3to1_chest_tap",i.Exp3_exp3Got="[exp_3]exp_3_got",i.Level3_giftHelpClose="[level_3]gift_help_close",i.Level3_giftHelpShow="[level_3]gift_help_show",i.Level3_levelEnter="[level_3]level_enter",i.Level2_num128Merged="[level_2]num_128_merged",i.Level2_num64Merged="[level_2]num_64_merged",i.Exp2_1stLuckyChestClose="[exp_2]1st_lucky_chest_close",i.Exp2_1stLuckyChestShow="[exp_2]1st_lucky_chest_show",i.Exp2_allUIShow="[exp_2]all_UI_show",i.Exp2_panel3to1ChestClose="[exp_2]panel_3to1_chest_close",i.Exp2_panel3to1ChestTap="[exp_2]panel_3to1_chest_tap",i.Exp2_exp2Got="[exp_2]exp_2_got",i.Level2_levelEnter="[level_2]level_enter",i.Level1_num64Merged="[level_1]num_64_merged",i.Level1_num32Merged="[level_1]num_32_merged",i.Level1_num16Merged="[level_1]num_16_merged",i.Level1_ball5Drop="[level_1]ball_5_drop",i.Level1_ball2Drop="[level_1]ball_2_drop",i.Level1_ball1Drop="[level_1]ball_1_drop",i.Level1_touchScreenFirstTime="[level_1]touch_screen_first_time",i.Level1_touchmoveScreenFirstTime="[first_login]fist_slide_move_ball",i.FirstLogin_gameSceneEnter="[first_login]game_scene_enter",i.FirstLogin_OnHide="[first_login]unhide_before_first_tap",i.FirstLogin_gameSceneEnterend="[first_login]game_scene_enter_end",i.FirstLogin_Loading100Reach="[first_login]Loading_100_reach",i.FirstLogin_LoadingStart="[first_login]Loading_start",i.button_show="[tutorial_build]button_show",i.button_tap="[tutorial_build]button_tap",i.scene_enter="[tutorial_build]scene_enter",i.dialog_01_00_001_show="[tutorial_build]dialog_01_00_001_show",i.dialog_01_00_001_tap="[tutorial_build]dialog_01_00_001_tap",i.dialog_01_00_002_show="[tutorial_build]dialog_01_00_002_show",i.dialog_01_00_003_show="[tutorial_build]dialog_01_00_003_show",i.dialog_01_00_004_show="[tutorial_build]dialog_01_00_004_show",i.dialog_01_01_002_show="[tutorial_build]dialog_01_01_002_show",i.panel_task_show="[tutorial_build]panel_task_show",i.panel_task_tap="[tutorial_build]panel_task_tap",i.taks_do_success="taks_do_success",i.panel_not_enough_stars_tap="[tutorial_build]panel_not_enough_stars_tap",i.first_tutorial_show="first_tutorial_show",i.first_tutorial_end="first_tutorial_end",i.task_panel_show="task_panel_show",i.task_panel_daily_get_reward="task_panel_daily_get_reward",i.task_panel_daily_chest_open="task_panel_daily_chest_open",i.task_panel_history_get_reward="task_panel_history_get_reward",i.task_fin_top_tip_show="task_fin_top_tip_show",i.task_fin_top_tip_tap="task_fin_top_tip_tap",i.sign_panel_close="sign_panel_close",i.sign_panel_tap_button="sign_panel_tap_button",i.sign_panel_show="sign_panel_show",i.resource_redown_panel_show="resource_redown_panel_show",i.resource_redown_retry="resource_redown_retry",i.mission_button_tap="mission_button_tap",i.invite_event_show="invite_event_show",i.invite_event_invite_tap="invite_event_invite_tap",i.invite_event_1st_active="invite_event_1st_active",i.invite_event_2nd_active="invite_event_2nd_active",i.invite_event_3rd_active="invite_event_3rd_active",i.invite_event_prize_get="invite_event_prize_get",i.exp_7_got="[exp_7]exp_7_got",i.exp_8_got="[exp_8]exp_8_got",i.exp_9_got="[exp_9]exp_9_got",i.exp_10_got="[exp_10]exp_10_got",i.lottery_panel_show="lottery_panel_show",i.lottery_panel_draw_tap="lottery_panel_draw_tap",i.lottery_panel_2nd_draw_tap="lottery_panel_2nd_draw_tap",i.lottery_panel_7th_draw_tap="lottery_panel_7th_draw_tap",i.lottery_panel_12th_draw_tap="lottery_panel_12th_draw_tap",i.mainpage_lottery_button_tap="mainpage_lottery_button_tap",i.banner_ad_load_fail="banner_ad_load_fail",i.grid_ad_load_try="grid_ad_load_try",i.grid_ad_show_suc="grid_ad_show_suc",i.grid_ad_show_fail="grid_ad_show_fail",i.banner_ad_create="banner_ad_create",i.banner_ad_show="banner_ad_show",i.banner_ad_show_suc="banner_ad_show_suc",i.banner_ad_show_fail="banner_ad_show_fail",i.state_task_none="state_task_none",i.negative_score="negative_score",i.red_packet_panel_show="red_packet_panel_show",i.red_packet_newbie_show="red_packet_newbie_show",i.red_packet_newbie_close="red_packet_newbie_close",i.red_packet_cash_panel_show="red_packet_cash_panel_show",i.tutorial_panel_show="tutorial_panel_show",i.tutorial_panel_close="tutorial_panel_close",i.melon_post_show="melon_post_show",i.melon_post_tap="melon_post_tap",i.melon_activity_show="melon_activity_show",i.melon_activity_tap="melon_activity_tap",i.scene_melon_enter="scene_melon_enter",i.melon_drop_1="melon_drop_1",i.melon_drop_2="melon_drop_2",i.melon_drop_5="melon_drop_5",i.melon_game_end="melon_game_end",i.melon_game_retry="melon_game_retry",(i=o.DotType||(o.DotType={}))[i.Share=1e3]="Share",(i=o.EventFrom||(o.EventFrom={})).Sign="\u6bcf\u65e5\u5956\u52b1",i.Over="\u7ed3\u7b97\u9875\u9762",i.Menu="\u4fa7\u8fb9\u680f\u83dc\u5355",i.Chest="\u5b9d\u7bb1\u9875\u9762",i.Reward="\u5956\u52b1\u9875\u9762",i.Revive="\u590d\u6d3b\u9875\u9762",i.Record="\u6700\u9ad8\u7eaa\u5f55",i.Shop="\u5546\u5e97",i.Invite="\u9080\u8bf7\u5956\u52b1",i.Rank="\u6392\u884c\u699c",i.Exchange="\u91d1\u5e01\u5151\u6362",i.load="\u52a0\u8f7d\u9875\u9762",i.game="\u6e38\u620f\u9875\u9762",i.teach="\u65b0\u624b\u5f15\u5bfc",i.sgin="\u6bcf\u65e5\u5956\u52b1",i.hints="\u840c\u65b0\u63d0\u793a",i.prop="\u9053\u5177\u5757\u5956\u52b1\u9875\u9762",i.super="\u8d85\u7ea7\u6d88\u9664\u5956\u52b1",(i=o.SDKBannerType||(o.SDKBannerType={}))[i.TYPE_WX_GAME_RESULT=0]="TYPE_WX_GAME_RESULT",i[i.TYPE_WX_GAME_ING=1]="TYPE_WX_GAME_ING",i[i.TYPE_BIG=10]="TYPE_BIG",i[i.TYPE_HEADER=20]="TYPE_HEADER",i[i.TYPE_CLICK_ME=30]="TYPE_CLICK_ME",i[i.TYPE_CROSS=40]="TYPE_CROSS",i[i.TYPE_LIKE=50]="TYPE_LIKE",i[i.TYPE_LIST=70]="TYPE_LIST",i[i.TYPE_WELFARE=80]="TYPE_WELFARE",i[i.TYPE_ACCOUNT=90]="TYPE_ACCOUNT",i[i.TYPE_GAMECENTER=100]="TYPE_GAMECENTER",(i=o.SDKBannerLocation||(o.SDKBannerLocation={}))[i.LOCATION_PAGE_RESULT=100]="LOCATION_PAGE_RESULT",i[i.LOCATION_PAGE_GAME=110]="LOCATION_PAGE_GAME",i[i.LOCATION_LEVEL_BOTTOM=120]="LOCATION_LEVEL_BOTTOM",i[i.LOCATION_PAGE_HOME=130]="LOCATION_PAGE_HOME",i[i.LOCATION_PAGE_SIGN=140]="LOCATION_PAGE_SIGN",i[i.LOCATION_PAGE_RELIVE=150]="LOCATION_PAGE_RELIVE",i[i.LOCATION_PAGE_LOTTERY=170]="LOCATION_PAGE_LOTTERY",(i=o.ShareVideoType||(o.ShareVideoType={}))[i.None=-1]="None",i[i.Share=0]="Share",i[i.ShareAysnc=1]="ShareAysnc",i[i.ShareIntegral=5]="ShareIntegral",i[i.Video=2]="Video",i[i.VideoToShare=3]="VideoToShare",i[i.VideoAndShare=4]="VideoAndShare",i[i.IntegralVideoToShare=6]="IntegralVideoToShare",i[i.Skip=999]="Skip",(i=o.ShareVideoFrom||(o.ShareVideoFrom={}))[i.None=0]="None",i[i.Share=1]="Share",i[i.ShareAysnc=2]="ShareAysnc",i[i.Video=3]="Video",(o=o.ShareVideoError||(o.ShareVideoError={}))[o.VideoQuit=1e3]="VideoQuit",o[o.VideoFail=1001]="VideoFail",o[o.VideoNotOpen=1002]="VideoNotOpen",o[o.VideoPlaying=1003]="VideoPlaying",o[o.VideoInvalid=999]="VideoInvalid",o[o.ShareFail=1004]="ShareFail",o[o.ShareSame=1005]="ShareSame",o[o.ShareNotGroup=1006]="ShareNotGroup",o[o.ShareAsyncNotGroup=1007]="ShareAsyncNotGroup",cc._RF.pop()},{}],SDKShareVideo:[function(t,e,n){"use strict";cc._RF.push(e,"681ddsF2mlIuJj27QAmM0Td","SDKShareVideo");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var r=i("SDKTools"),s=i("Display"),c=i("AudioMgr"),l=i("BattleMgr2"),u=i("UserBaseModel"),d=i("SDKEnums");function p(){}Object.defineProperty(p,"IsShareIng",{get:function(){return this.isShareIng},enumerable:!0,configurable:!0}),p.getType=function(t){return PCSDK.shareVideo.getType(t.toString())},p.share=function(t,e,n){var i=this;this.isShareIng=!0,PCSDK.shareVideo.share(t.toString(),e,n).then(function(t){i.handleSuccess(d.ShareVideoFrom.Share,t),i.isShareIng=!1}).catch(function(){return i.isShareIng=!1})},p.dispatch=function(t,e,n){void 0===n&&(n={}),this.isShareIng=!0;var i=r.default.getParamsInt(d.OnlineKeys.words_before_video_ad_abtest,0);if(2==i||1==i&&u.default.I.ID%2==0)switch(r.default.getType(t)){case d.ShareVideoType.Share:case d.ShareVideoType.ShareAysnc:case d.ShareVideoType.ShareIntegral:break;case d.ShareVideoType.Video:case d.ShareVideoType.VideoToShare:case d.ShareVideoType.IntegralVideoToShare:s.default.showTip("\u770b\u5b8c\u6574\u89c6\u9891\uff0c\u5f97\u4e30\u539a\u5956\u52b1\uff5e")}PCSDK.shareVideo.dispatch(t.toString(),this.buildParams(e,{shareKey:t}),n)},p.dispatchType=function(t,e,n,i){void 0===i&&(i={}),this.isShareIng=!0,PCSDK.shareVideo.dispatchType(t,e.toString(),this.buildParams(n,{shareKey:e}),i)},p.buildParams=function(t,e){var n=this;void 0===e&&(e={});var i=(t=void 0===t?{}:t).success,o=t.fail,r=t.context,s=t.isOveride;return t=a({},t,{success:function(t,e){i&&i.call(r,t,e),n.isShareIng=!1,n.handleSuccess(t,e)}}),a({},t,s?{fail:function(t,e){o&&o.call(r,t,e),n.isShareIng=!1,n.doOpenMusic(t)}}:{fail:function(i,s){n.handleError(i,s,a({},t,e)),o&&o.call(r,i,s),n.isShareIng=!1}})},p.handleSuccess=function(t){switch(t){case d.ShareVideoFrom.Share:case d.ShareVideoFrom.ShareAysnc:case d.ShareVideoFrom.Video:}this.doOpenMusic(t)},p.handleError=function(t,e,n){var i=this;if(void 0===n&&(n={}),this.doOpenMusic(t),e)switch(e.code){case 0:break;default:if(t!=d.ShareVideoFrom.Video){var o,c=n.success,l=n.fail,u=n.context,p=n.shareKey,h=(h=e.msg)||(o=["\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u4e0d\u8981\u6253\u6270\u540c\u4e00\u4e2a\u7fa4!","\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u65b0\u7684\u7fa4!","\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u523030\u4eba\u7fa4!"])[Math.floor(Math.random()*o.length)];r.default.showModal({title:"\u63d0\u793a",content:h,cancelText:"\u53d6\u6d88",confirmText:"\u53bb\u5206\u4eab",showCancel:!0,success:function(n){n.confirm?r.default.dispatchType(d.ShareVideoType.Share,p,a({},{success:function(t,e){i.handleSuccess(t,e),c&&c.call(u,t,e)},fail:function(t){l&&l.call(u,t,e)},context:u})):n.cancel&&l&&l.call(u,t,e)}});break}s.default.showTip(e.msg||"\u5206\u4eab\u5931\u8d25")}},p.doOpenMusic=function(t){try{t!==d.ShareVideoFrom.Video||null!=l.default.I&&null!=l.default.I.node||c.AudioMgr.resumeMusic()}catch(t){cc.error(t)}},p.isShareIng=!1,i=p,o.default=i,cc._RF.pop()},{}],SDKTools:[function(t,e,n){"use strict";cc._RF.push(e,"5bc77nZaCZI76JJ8sNwhir7","SDKTools");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("SDKBanner"),r=i("SDKShareVideo"),s=i("SDKEnums"),c=i("SDKAnalytics"),l=i("CheckTools"),u=i("WXApi");function d(){}Object.defineProperty(d,"isSupported",{get:function(){return"object"==typeof PCSDK},enumerable:!0,configurable:!0}),d.checkNormal=function(t,e){return this.isSupported?t():e},d.checkPromise=function(t,e){return void 0===e&&(e=Promise.resolve()),this.checkNormal(t,e)},d.env=function(t){return this.checkPromise(function(){return PCSDK.game.env(t)})},d.login=function(t){return this.checkPromise(function(){return PCSDK.game.login(t)})},d.setBaseData=function(t){return this.checkNormal(function(){return PCSDK.game.setBaseData(t)},null)},d.hexSha1=function(t){return this.checkNormal(function(){return PCSDK.sha1Utils.hex_sha1(t)},t)},d.getAllData=function(){return this.checkPromise(function(){return PCSDK.game.getAllData()})},d.getGoldPool=function(){return this.checkPromise(function(){return PCSDK.game.getGoldPool()})},d.setInviteFriend=function(t){return this.checkPromise(function(){return PCSDK.game.setInviteFriend(t)})},d.setLookVideoToGold=function(){return this.checkPromise(function(){return PCSDK.game.setLookVideoToGold()})},d.getPoolGoldByType=function(t){return this.checkPromise(function(){return PCSDK.game.getPoolGoldByType(t)})},d.pay=function(t){return this.checkPromise(function(){return PCSDK.platform.pay(t)})},d.logPay=function(t){return this.checkPromise(function(){return PCSDK.platform.logPay(t)})},Object.defineProperty(d,"isVideoPlaying",{get:function(){return this.checkNormal(function(){return PCSDK.platform.isVideoPlaying()},!1)},enumerable:!0,configurable:!0}),d.updateShareMenu=function(t){return this.checkNormal(function(){return PCSDK.platform.updateShareMenu(t)},null)},d.showModal=function(t){return this.checkNormal(function(){return PCSDK.platform.showModal(t)},null)},d.vibrateShort=function(){return this.checkNormal(function(){return PCSDK.platform.vibrateShort()},null)},d.vibrateLong=function(){return this.checkNormal(function(){return PCSDK.platform.vibrateLong()},null)},d.subScribe=function(t,e){return void 0===e&&(e=!1),this.checkPromise(function(){return PCSDK.platform.subScribe(t,e)})},d.checkUpdate=function(t){this.checkNormal(function(){return PCSDK.platform.checkUpdate(t)})},Object.defineProperty(d,"SystemData",{get:function(){return this.checkNormal(function(){return PCSDK.platform.getSystemData()},null)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"SystemModel",{get:function(){return this.SystemData&&this.SystemData.model,""},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Token",{get:function(){return this.checkNormal(function(){return PCSDK.data.Token},"opQ8ktNNvsVFYx9jbLcCVCGjk3QFw0JLNo0")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"EnvEnum",{get:function(){return this.checkNormal(function(){return PCSDK.data.EnvEnum},100)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"ChannelId",{get:function(){return this.checkNormal(function(){return PCSDK.data.ChannelId},"")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Scene",{get:function(){return this.checkNormal(function(){return PCSDK.data.Scene},"")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"UserId",{get:function(){return this.checkNormal(function(){return PCSDK.data.UserId},"")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Platform",{get:function(){return this.checkNormal(function(){return PCSDK.data.SystemId},0)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"CdnUrl",{get:function(){return this.checkNormal(function(){return PCSDK.data.CdnUrl},"")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"GameApi",{get:function(){return this.checkNormal(function(){return PCSDK.data.GameApi},"https://pre-wxstar.quzzgames.com/v1.0")},enumerable:!0,configurable:!0}),Object.defineProperty(d,"IsCross",{get:function(){return this.checkNormal(function(){return PCSDK.data.IsCross},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"IsDrawer",{get:function(){return this.checkNormal(function(){return PCSDK.data.IsDrawer},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"IsGuessLike",{get:function(){return this.checkNormal(function(){return PCSDK.data.IsGuessLike},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(d,"Authorize",{get:function(){return this.checkNormal(function(){return PCSDK.data.Authorize},!1)},enumerable:!0,configurable:!0}),d.setBannerWidth=function(){},d.show=function(t,e){return this.checkNormal(function(){return a.default.I.show(t,e)},null)},d.hide=function(t){return this.checkNormal(function(){return a.default.I.hide(t)},null)},d.destory=function(t){return this.checkNormal(function(){return a.default.I.destory(t)},null)},Object.defineProperty(d,"IsShareIng",{get:function(){return r.default.IsShareIng},enumerable:!0,configurable:!0}),d.getType=function(t){return this.checkNormal(function(){return r.default.getType(t)},s.ShareVideoType.Share)},d.share=function(t,e,n){return this.checkNormal(function(){return r.default.share(t,e,n)},null)},d.dispatch=function(t,e,n){return void 0===n&&(n={}),this.isSupported?this.checkNormal(function(){return r.default.dispatch(t,e,n)},null):e&&e.success&&e.success.call(e.context||this)},d.dispatchType=function(t,e,n,i){return void 0===i&&(i={}),this.isSupported?this.checkNormal(function(){return r.default.dispatchType(t,e,n,i)},null):n&&n.success&&n.success.call(n.context||this)},d.updateOnlineParams=function(){return this.checkPromise(function(){return PCSDK.online.updateOnlineConfig()})},d.getParamsInt=function(t,e){return void 0===e&&(e=0),this.checkNormal(function(){return PCSDK.online.getParamsInt(t.toString(),e)},e)},d.getParamsObj=function(t,e){return this.checkNormal(function(){return PCSDK.online.getParamsObj(t.toString(),e)},e)},d.getParamsString=function(t,e){return void 0===e&&(e=""),this.checkNormal(function(){return PCSDK.online.getParamsString(t.toString(),e)},e)},d.bindEvent=function(t,e,n){return this.checkNormal(function(){return PCSDK.event.add(t,e,n)},null)},d.removeEvent=function(t,e,n){return this.checkNormal(function(){return PCSDK.event.remove(t,e,n)},null)},d.createUserBtns=function(t,e,n){return this.checkNormal(function(){return PCSDK.platform.createUserBtn(t,e,n)},null)},d.showUserBtn=function(t){return this.checkNormal(function(){return PCSDK.platform.showUserBtn(t)},null)},d.hideUserBtn=function(t){return this.checkNormal(function(){return PCSDK.platform.hideUserBtn(t)},null)},d.destoryUserBtn=function(t){return this.checkNormal(function(){return PCSDK.platform.destoryUserBtn(t)},null)},d.destoryAllUserBtn=function(){return this.checkNormal(function(){return PCSDK.platform.destoryAllUserBtn()},null)},d.interstitialShow=function(t,e){return this.checkPromise(function(){c.default.event(s.EventKeys.inter_ad_request,""),l.default.ShowInterstialCustomAd?PCSDK.platform.interstitialShow(t,e).catch(function(){u.default.I.showGridadIntertial()}):u.default.I.showGridadIntertial().catch(function(){PCSDK.platform.interstitialShow(t,e)})})},Object.defineProperty(d,"isInterstitialPlaying",{get:function(){return this.checkNormal(function(){return PCSDK.platform.isInterstitialPlaying()},!1)},enumerable:!0,configurable:!0}),d.gameIconShow=function(t,e){return this.checkPromise(function(){return PCSDK.platform.gameIconShow(t,e)})},d.gameIconDestroy=function(){return this.checkNormal(function(){return PCSDK.platform.gameIconDestroy()})},d.gamePortalShow=function(t,e){return this.checkPromise(function(){return PCSDK.platform.gamePortalShow(t,e)})},Object.defineProperty(d,"isGamePortalPlaying",{get:function(){return this.checkNormal(function(){return PCSDK.platform.isGamePortalPlaying()},!1)},enumerable:!0,configurable:!0}),d.openCustomerServiceConversation=function(t){return void 0===t&&(t={}),this.checkPromise(function(){return PCSDK.platform.openCustomerServiceConversation(t)})},d.storgeGet=function(t){return this.checkNormal(function(){return PCSDK.storage.get(t)},null)},d.storgeSet=function(t,e){return this.checkNormal(function(){return PCSDK.storage.set(t,e)})},d.createFeedbackButton=function(t){return this.checkNormal(function(){return PCSDK.wxApi.createFeedbackButton(t)},null)},i=d,o.default=i,cc._RF.pop()},{}],SafeActionClick:[function(t,e,n){"use strict";cc._RF.push(e,"359bdn2c1dAJZ4Vkga/nLJu","SafeActionClick");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0}),i=(c=cc._decorator).ccclass;var s,c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.safeTime=.5,t}a(l,s=cc.Component),l.prototype.start=function(){var t=this,e=this.node.getComponent(cc.Button);e&&(this.clickEvents=e.clickEvents,this.node.on("click",function(){e.clickEvents=[],t.scheduleOnce(function(){e.clickEvents=t.clickEvents},t.safeTime)},this))},r([c],l.prototype,"safeTime",void 0),i=r([i],l),o.default=i,cc._RF.pop()},{}],ScaleAnimation:[function(t,e,n){"use strict";cc._RF.push(e,"268d62AQmBESJ7fSxeI9VpH","ScaleAnimation");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0}),i=(c=cc._decorator).ccclass;var s,c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.from=1.1,t.to=.9,t}a(l,s=cc.Component),l.prototype.start=function(){this.playAnim(),this.node.on(cc.Node.EventType.TOUCH_START,this.stop,this),this.node.on(cc.Node.EventType.TOUCH_END,this.playAnim,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.playAnim,this)},l.prototype.stop=function(){this.node.stopAllActions()},l.prototype.playAnim=function(){this.stop(),this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,this.from),cc.scaleTo(.3,this.to))))},r([c(cc.Float)],l.prototype,"from",void 0),r([c(cc.Float)],l.prototype,"to",void 0),i=r([i],l),o.default=i,cc._RF.pop()},{}],ServicePopwin:[function(t,e,n){"use strict";cc._RF.push(e,"349d2jZ2PpO/bsH5jRYdq/9","ServicePopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("SDKTools"),p=i("Display"),h=i("AudioMgr"),f=i("SDKEnums"),m=i("CheckTools"),g=i("OnlineMgr"),_=i("BaseAnimPopwin"),y=i("StarConfig"),v=i("AppDataMgr"),b=i("Enum");function w(){var t=null!==c&&c.apply(this,arguments)||this;return t.txtStar=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(w,c=_.default),(l=w).prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.initUI()},Object.defineProperty(w.prototype,"BannerOpen",{get:function(){return g.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),w.prototype.initUI=function(){var t=d.default.getParamsInt(f.OnlineKeys.ServiceRewardNum,y.StarConfig.ServiceRewardNum);this.txtStar.string=""+t},w.prototype.handleClose=function(t){u.ViewMgr.closePopwin(l,{anim:t})},w.prototype.onService=function(){var t=this;h.AudioMgr.button(),d.default.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u9886\u53d6\u94bb\u77f3\u5956\u52b1",sendMessagePath:"type=90&uid="+d.default.UserId+"&pf="+d.default.Platform,sendMessageImg:d.default.CdnUrl+"res_commons/kf_messages/2048_reward.png",success:function(){m.default.checkService()===b.RewardState.Not&&v.AppDataMgr.set(b.AppDataKey.ServiceState,1),t.handleClose(!0)},fail:function(){return p.default.showTip("\u9700\u8981\u8fdb\u5165\u5ba2\u670d\uff0c\u5e76\u53d1\u9001\u4fe1\u606f\u54e6~",1.5)}})},w.prototype.onBack=function(){h.AudioMgr.button(),this.handleClose(!0)},w.PREFAB_PATH="prefab/popwin/popwin_service",s([o(cc.Label)],w.prototype,"txtStar",void 0),i=l=s([i],w),a.default=i,cc._RF.pop()},{}],"ShareVideoBtn.ts":[function(t,e,n){"use strict";cc._RF.push(e,"366d9bzR4tIC4cdFFJoI+fy","ShareVideoBtn.ts");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=o("SDKTools"),u=o("SDKEnums");function d(){return null!==c&&c.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(d,c=cc.Component),d.prototype.onLoad=function(){this.node.getChildByName("free").on("click",this.onfree,this),this.node.getChildByName("share").on("click",this.onshare,this),this.node.getChildByName("video").on("click",this.onvideo,this)},d.prototype.onfree=function(){this.m_callback.call(this.tar)},d.prototype.onshare=function(){this.m_callback.call(this.tar)},d.prototype.onvideo=function(){this.m_callback.call(this.tar)},d.prototype.Init=function(t,e,n){this.m_shareKey=t,this.m_callback=e,this.tar=n,this.initUI()},d.prototype.initUI=function(){switch(l.default.getType(this.m_shareKey)){case u.ShareVideoType.Share:case u.ShareVideoType.ShareAysnc:case u.ShareVideoType.ShareIntegral:this.node.getChildByName("free").active=!1,this.node.getChildByName("share").active=!0,this.node.getChildByName("video").active=!1;break;case u.ShareVideoType.Video:case u.ShareVideoType.VideoToShare:this.node.getChildByName("free").active=!1,this.node.getChildByName("share").active=!1,this.node.getChildByName("video").active=!0;break;default:this.node.getChildByName("free").active=!0,this.node.getChildByName("share").active=!1,this.node.getChildByName("video").active=!1}},o=s([o],d),a.default=o,cc._RF.pop()},{}],ShareVideo:[function(t,e,n){"use strict";cc._RF.push(e,"4b42bdLqxtCX40ZaIV5r57c","ShareVideo");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Action"),u=i("SDKTools"),d=i("SDKEnums");function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.moduleName="common",t}i=(o=cc._decorator).ccclass,o=o.property,r(p,c=cc.Component),p.prototype.updateWith=function(t){this.init(t)},p.prototype.updateWithKey=function(t){this.initWithKey(t)},p.prototype.initWithKey=function(t){t=u.default.getType(t),this.initWithType(t)},p.prototype.updateWithType=function(t){this.initWithType(t)},p.prototype.init=function(t){this.shareKey=t,this.initUI()},p.prototype.update2shareforce=function(){l.default.playAnim(this.node,"state_"+this.moduleName+"_share")},p.prototype.initUI=function(){switch(u.default.getType(this.shareKey)){case d.ShareVideoType.Share:case d.ShareVideoType.ShareAysnc:case d.ShareVideoType.ShareIntegral:l.default.playAnim(this.node,"state_"+this.moduleName+"_share");break;case d.ShareVideoType.Video:case d.ShareVideoType.VideoToShare:l.default.playAnim(this.node,"state_"+this.moduleName+"_video");break;default:l.default.playAnim(this.node,"state_"+this.moduleName+"_free")}},p.prototype.initWithType=function(t){switch(t){case d.ShareVideoType.Share:case d.ShareVideoType.ShareAysnc:case d.ShareVideoType.ShareIntegral:l.default.playAnim(this.node,"state_"+this.moduleName+"_share");break;case d.ShareVideoType.Video:case d.ShareVideoType.VideoToShare:l.default.playAnim(this.node,"state_"+this.moduleName+"_video");break;default:l.default.playAnim(this.node,"state_"+this.moduleName+"_free")}},s([o(cc.String)],p.prototype,"moduleName",void 0),i=s([i],p),a.default=i,cc._RF.pop()},{}],Sharetoggle:[function(t,e,n){"use strict";cc._RF.push(e,"b15a5YXmrBF9oeVBz5OWW/d","Sharetoggle");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("AudioMgr");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.arrow=null,t.isshare=!0,t}i=(o=cc._decorator).ccclass,o=o.property,r(u,c=cc.Component),u.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},u.prototype.start=function(){},u.prototype.init=function(t){this.callback=t,this.initUI()},u.prototype.initUI=function(){this.arrow.active=this.isshare,this.callback&&this.callback.call(this)},u.prototype.onClick=function(){l.AudioMgr.button(),this.isshare=!this.isshare,this.initUI()},s([o(cc.Node)],u.prototype,"arrow",void 0),i=s([i],u),a.default=i,cc._RF.pop()},{}],ShopPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"3444a34szBF57YA4Vj5oUoS","ShopPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=function(){return(s=Object.assign||__ASSIGN__).apply(this,arguments)},c=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var l,u,d=i("ViewMgr"),p=i("Const"),h=i("SDKTools"),f=i("Display"),m=i("CollectPopwin"),g=i("ServicePopwin"),_=i("DataMgr"),y=i("ShareVideo"),v=i("FloatingPopwin"),b=i("EventMgr"),w=i("AudioMgr"),S=i("ComPointTip"),M=i("InvitePopwin"),C=i("CheckTools"),P=i("EventEnum"),A=i("SDKAnalytics"),T=i("StarConfig"),E=i("Enum"),B=i("SDKEnums"),D=i("OnlineMgr"),I=i("BaseAnimPopwin"),k=i("MissionModel"),O=i("Api"),R=i("UserModel"),N=i("WXApi");function L(){var t=null!==l&&l.apply(this,arguments)||this;return t.freeGetNum=null,t.nodeCollect=null,t.nodeFloating=null,t.nodeService=null,t.shareVideo=null,t.pointTipArr=[],t.inviteNum=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(L,l=I.default),(u=L).prototype.onOpen=function(t){l.prototype.onOpen.call(this,t),this.initData(),this.initUI(),this.initRewardUI(),this.initStarFreeUI(),this.addPoint(),N.default.I.showgrideadBottom()},L.prototype.onClose=function(){this.removePoint(),l.prototype.onClose.call(this),N.default.I.hidegrideadBottom()},Object.defineProperty(L.prototype,"BannerOpen",{get:function(){return D.OnlineMgr.getBanner(u.PREFAB_PATH)},enumerable:!0,configurable:!0}),L.prototype.addEvent=function(){b.EventMgr.on(P.EventEnum.ServiceRewardSuc,this.handleServiceRewardSuc,this),h.default.bindEvent(P.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},L.prototype.removeEvent=function(){b.EventMgr.off(P.EventEnum.ServiceRewardSuc,this.handleServiceRewardSuc,this),h.default.removeEvent(P.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},L.prototype.addPoint=function(){},L.prototype.removePoint=function(){},L.prototype.initData=function(){var t=T.StarConfig.ServiceRewardNum,e=T.StarConfig.CollectRewardNum,n=T.StarConfig.FloatingRewardNum;this.numLimitArr=[h.default.getParamsInt(B.OnlineKeys.ServiceRewardNum,t),h.default.getParamsInt(B.OnlineKeys.CollectRewardNum,e),h.default.getParamsInt(B.OnlineKeys.FloatingRewardNum,n)]},L.prototype.initUI=function(){var t=this;this.initServiceUI(),this.initFloatingUI(),this.initCollectUI(),O.default.getListByInvite({invite_type:E.InviteType.Star}).then(function(e){var n=0;(e.invite_list||[]).forEach(function(t){0!=t.invite_uid&&n++}),t.inviteNum.string=n.toString()})},L.prototype.initServiceUI=function(){var t=C.default.checkService();t===E.RewardState.Received?(this.nodeService.getChildByName("get_video").active=!1,this.nodeService.getChildByName("btn_getted").active=!1,this.nodeService.getChildByName("getted").active=!0):(t==E.RewardState.Receive?(this.nodeService.getChildByName("get_video").active=!1,this.nodeService.getChildByName("btn_getted").active=!0):(this.nodeService.getChildByName("get_video").active=!0,this.nodeService.getChildByName("btn_getted").active=!1),this.nodeService.getChildByName("getted").active=!1)},L.prototype.initCollectUI=function(){this.nodeCollect.active=!R.default.I.IsCollectShowed;var t=C.default.checkCollect(E.DayKeys.CollectState);t===E.RewardState.Received?(this.nodeCollect.getChildByName("get_video").active=!1,this.nodeCollect.getChildByName("btn_getted").active=!1,this.nodeCollect.getChildByName("getted").active=!0):(t==E.RewardState.Receive?(this.nodeCollect.getChildByName("get_video").active=!1,this.nodeCollect.getChildByName("btn_getted").active=!0):(this.nodeCollect.getChildByName("get_video").active=!0,this.nodeCollect.getChildByName("btn_getted").active=!1),this.nodeCollect.getChildByName("getted").active=!1)},L.prototype.initFloatingUI=function(){var t=C.default.checkFloating();t===E.RewardState.Received?(this.nodeFloating.getChildByName("get_video").active=!1,this.nodeFloating.getChildByName("btn_getted").active=!1,this.nodeFloating.getChildByName("getted").active=!0):(t==E.RewardState.Receive?(this.nodeFloating.getChildByName("get_video").active=!1,this.nodeFloating.getChildByName("btn_getted").active=!0):(this.nodeFloating.getChildByName("get_video").active=!0,this.nodeFloating.getChildByName("btn_getted").active=!1),this.nodeFloating.getChildByName("getted").active=!1)},L.prototype.initRewardUI=function(){this.shareVideo.updateWith(B.ShareKeys.ShopReward)},L.prototype.initStarFreeUI=function(){var t=_.DataMgr.User.getDayDataWithKey(E.DayKeys.ShopFreeStar,0),e=h.default.getParamsInt(B.OnlineKeys.ShopFreeStar,T.StarConfig.ShopFreeStar);this.freeGetNum.string="\uff08"+Math.max(0,e-t)+"/"+e+"\uff09"},L.prototype.handleClose=function(t){d.ViewMgr.closePopwin(u,{anim:t})},L.prototype.onReward=function(){w.AudioMgr.button(),A.default.event(B.EventKeys.ShopFree,B.EventFrom.Shop),_.DataMgr.User.getDayDataWithKey(E.DayKeys.ShopFreeStar,0)>=h.default.getParamsInt(B.OnlineKeys.ShopFreeStar,T.StarConfig.ShopFreeStar)?f.default.showTip("\u4eca\u65e5\u6b21\u6570\u5df2\u7528\u5b8c"):h.default.dispatch(B.ShareKeys.ShopReward,{success:this.handleStarSuccess,context:this})},L.prototype.onInvite=function(){w.AudioMgr.button(),d.ViewMgr.openPopwin(M.default,{data:{type:E.InviteType.Star}})},L.prototype.onService=function(){switch(w.AudioMgr.button(),A.default.event(B.EventKeys.ServiceNumber1,B.EventFrom.Shop),C.default.checkService()){case E.RewardState.Received:f.default.showTip("\u4eca\u65e5\u5956\u52b1\u5df2\u9886\u53d6\uff0c\u660e\u5929\u518d\u6765");break;case E.RewardState.Not:d.ViewMgr.openPopwin(g.default)}},L.prototype.onCollect=function(){w.AudioMgr.button(),A.default.event(B.EventKeys.CollectNumber1,B.EventFrom.Shop),d.ViewMgr.openPopwin(m.default),this.doClose(u,!1)},L.prototype.onFloating=function(){switch(w.AudioMgr.button(),A.default.event(B.EventKeys.WindowNumber1,B.EventFrom.Shop),C.default.checkFloating()){case E.RewardState.Received:f.default.showTip("\u4eca\u65e5\u6d6e\u7a97\u5956\u52b1\u5df2\u9886\u53d6\uff0c\u660e\u5929\u518d\u6765");break;case E.RewardState.Not:d.ViewMgr.openPopwin(v.default);break;case E.RewardState.Receive:A.default.event(B.EventKeys.WindowNumber2,B.EventFrom.Shop);var t=this.numLimitArr[2];_.DataMgr.User.reqDiamond(t,100),_.DataMgr.User.reqFloatingReward(),_.DataMgr.Point.updatePoint(E.ModuleType.Floating),A.default.addLogRes(s({},p.default.LogRes.Diamond,{type:1,cnum:t,onum:_.DataMgr.User.Diamond,reason:"\u9886\u53d6\u5956\u52b1",levelid:0})),this.handleClose(!1)}},L.prototype.onBack=function(){w.AudioMgr.button(),this.handleClose(!0),A.default.event(B.EventKeys.ShopClose,B.EventFrom.Shop)},L.prototype.handleTacticUpdate=function(){this.initRewardUI()},L.prototype.handleServiceRewardSuc=function(){this.initServiceUI()},L.prototype.handleStarSuccess=function(){_.DataMgr.Missions.addMissionProgress(k.MissionCheckType.BuyCoin,1),_.DataMgr.User.reqDiamond(150,100),_.DataMgr.User.reqAddDayReward(E.DayKeys.ShopFreeStar,1),this.initStarFreeUI(),A.default.addLogRes(s({},p.default.LogRes.Diamond,{type:1,cnum:150,onum:_.DataMgr.User.Diamond,reason:"\u9886\u53d6\u5956\u52b1",levelid:0})),this.handleClose(!1)},L.PREFAB_PATH="prefab/popwin/popwin_shop",c([o(cc.Label)],L.prototype,"freeGetNum",void 0),c([o(cc.Node)],L.prototype,"nodeCollect",void 0),c([o(cc.Node)],L.prototype,"nodeFloating",void 0),c([o(cc.Node)],L.prototype,"nodeService",void 0),c([o(y.default)],L.prototype,"shareVideo",void 0),c([o(S.default)],L.prototype,"pointTipArr",void 0),c([o(cc.Label)],L.prototype,"inviteNum",void 0),i=u=c([i],L),a.default=i,cc._RF.pop()},{}],SignPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"369f0rG9KFE/L8afG/V6aEY","SignPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("ViewMgr"),h=i("SDKTools"),f=i("DataMgr"),m=i("ShareVideo"),g=i("AudioMgr"),_=i("EventEnum"),y=i("SDKAnalytics"),v=i("OnlineMgr"),b=i("SDKEnums"),w=i("Enum"),S=i("Display"),M=i("Const"),C=i("UserModel"),P=i("BaseAnimPopwin"),A=i("BattleMgr"),T=i("RandomUtils"),E=i("GetSignPopwin"),B=i("ImageLabelNew");function D(){var t=null!==u&&u.apply(this,arguments)||this;return t.shareVideo=null,t.m_DayObjs=[],t.m_ItemsIcon=[],t.m_CoinIcon=null,t.m_LogoIcon=null,t.m_SkinIcon=null,t.m_done=null,t.m_arrow=null,t.issubscribe=!0,t}i=(o=cc._decorator).ccclass,o=o.property,r(D,u=P.default),(d=D).canShow=function(){return f.DataMgr.User.CurLevel>=h.default.getParamsInt(b.OnlineKeys.sign_min_lv,6)&&0==f.DataMgr.User.getDayDataWithKey(w.DayKeys.TodaySign,0)&&0==f.DataMgr.User.getDayDataWithKey(w.DayKeys.TodaySignShowed,0)},D.openSign=function(){0<f.DataMgr.User.getDayDataWithKey(w.DayKeys.SevenDaySign,0)||p.ViewMgr.openPopwin(d,{})},D.prototype.onLoad=function(){var t=this;this.m_DayObjs.forEach(function(e,n){e.on(cc.Node.EventType.TOUCH_END,function(){n==C.default.I.SignDay&&0==f.DataMgr.User.getDayDataWithKey(w.DayKeys.TodaySign,0)&&t.onDayReward()},t)})},D.prototype.onOpen=function(t){return c(this,void 0,void 0,function(){return l(this,function(){return u.prototype.onOpen.call(this,t),S.default.s_isShowedReward=!0,this.issubscribe=S.default.s_issubscribeDailyReward,this.m_arrow.active=S.default.s_issubscribeDailyReward,1==f.DataMgr.User.getDayDataWithKey(w.DayKeys.TodaySign,0)?(this.m_done.active=!0,this.shareVideo.node.active=!1):(this.m_done.active=!1,this.shareVideo.node.active=!0),this.initUI(),this.initRewardUI(),y.default.event(b.EventKeys.sign_panel_show,""),[2]})})},D.prototype.initUI=function(){var t=this;this.m_DayObjs.forEach(function(e,n){n<C.default.I.SignDay?e.getComponent(cc.Animation).play("anim_daily_getted"):n==C.default.I.SignDay&&0==f.DataMgr.User.getDayDataWithKey(w.DayKeys.TodaySign,0)?e.getComponent(cc.Animation).play("anim_daily_on"):e.getComponent(cc.Animation).play("anim_daily_no");var i=n+1;n=t.getSignCfg(i),7==i?(e.getChildByName("star1").getChildByName("num").getComponent(B.default).setValue(n.props_reward[1],"+",!1),e.getChildByName("star2").getChildByName("num").getComponent(B.default).setValue(n.props_reward[1],"+",!1),e.getChildByName("star3").getChildByName("num").getComponent(B.default).setValue(n.props_reward[1],"+",!1)):(201==n.props_reward[0]?(e.getChildByName("star").getComponent(cc.Animation).play("anim_reward_imgpattern"),e.getChildByName("star").getChildByName("icon_star").getComponent(cc.Sprite).spriteFrame=t.m_LogoIcon):301==n.props_reward[0]?(e.getChildByName("star").getComponent(cc.Animation).play("anim_reward_skin"),e.getChildByName("star").getChildByName("icon_star").getComponent(cc.Sprite).spriteFrame=t.m_SkinIcon):e.getChildByName("star").getComponent(cc.Animation).play("anim_reward_num"),e.getChildByName("star").getChildByName("num").getComponent(B.default).setValue(n.props_reward[1],"+",!1),n.props_reward[0]<=2?e.getChildByName("star").getChildByName("icon_star").getComponent(cc.Sprite).spriteFrame=t.m_ItemsIcon[n.props_reward[0]]:101==n.props_reward[0]&&(e.getChildByName("star").getChildByName("icon_star").getComponent(cc.Sprite).spriteFrame=t.m_CoinIcon))})},D.prototype.setsubscribe=function(){this.issubscribe=!this.issubscribe,this.m_arrow.active=this.issubscribe,S.default.s_issubscribeDailyReward=this.issubscribe},D.prototype.getSignCfg=function(t){return f.DataMgr.Config.getSignDBById(t)},D.prototype.onOpend=function(){u.prototype.onOpend.call(this)},D.prototype.onBannerSuccess=function(t){u.prototype.onBannerSuccess.call(this,t)},D.prototype.onBannerFailure=function(t){u.prototype.onBannerFailure.call(this,t)},Object.defineProperty(D.prototype,"BannerOpen",{get:function(){return v.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),D.prototype.addEvent=function(){u.prototype.addEvent.call(this),h.default.bindEvent(_.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},D.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),h.default.removeEvent(_.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this)},D.prototype.initRewardUI=function(){var t=this.ShareKey;this.shareVideo.updateWith(t)},Object.defineProperty(D.prototype,"ShareKey",{get:function(){return b.ShareKeys.DayReward},enumerable:!0,configurable:!0}),D.prototype.onDayReward=function(){g.AudioMgr.button(),h.default.dispatch(this.ShareKey,{success:this.handleDayReward,context:this}),y.default.event(b.EventKeys.sign_panel_tap_button,"")},D.prototype.handleDayReward=function(){this.handleReward(),f.DataMgr.User.reqDayDataWithKey(w.DayKeys.TodaySign,1,!0),this.m_done.active=!0,this.shareVideo.node.active=!1},D.prototype.handleTacticUpdate=function(){this.initRewardUI()},D.prototype.onback=function(){g.AudioMgr.button(),this.ondoClose(!1)},D.prototype.handleReward=function(){var t=this,e=C.default.I.SignDay+1;C.default.I.reqSign(e).then(function(){t.initUI()});var n=this.getSignCfg(e);101==n.props_reward[0]?C.default.I.reqDiamond(n.props_reward[1]):n.props_reward[0]<=2?A.default.I.doAddOneItem(n.props_reward):301==n.props_reward[0]?0<=(e=this.getSkin())?p.ViewMgr.openPopwin(E.default,{data:{type:E.SignRewardType.Skin,id:e}}):p.ViewMgr.openPopwin(E.default,{data:{type:E.SignRewardType.Skin2Coin,id:0}}):(n=n.props_reward[1],A.default.I.doAddThreeItem([0,n],[1,n],[2,n]))},D.prototype.getSkin=function(){var t=[],e=C.default.I.HadSkins;if([1,2,3,4,5].forEach(function(n){e.indexOf(n)<0&&t.push(n)}),t.length<=0)return-1;var n=T.default.random(0,t.length);return t[n]},D.prototype.ondoClose=function(t){return void 0===t&&(t=!0),c(this,void 0,Promise,function(){return l(this,function(){return this.issubscribe&&h.default.subScribe([M.default.SubscribeIds.Sign,M.default.SubscribeIds.Mission,M.default.SubscribeIds.Activity],!0).then(function(){S.default.s_issubscribeDailyReward=!1}).catch(function(){S.default.s_issubscribeDailyReward=!1}),S.default.s_issubscribeDailyReward=!1,u.prototype.doClose.call(this,d,t).then(function(){A.default.I.removePopwinList()}),y.default.event(b.EventKeys.sign_panel_close,""),[2]})})},D.PREFAB_PATH="prefab/popwin/popwin_daily",s([o(m.default)],D.prototype,"shareVideo",void 0),s([o(cc.Node)],D.prototype,"m_DayObjs",void 0),s([o(cc.SpriteFrame)],D.prototype,"m_ItemsIcon",void 0),s([o(cc.SpriteFrame)],D.prototype,"m_CoinIcon",void 0),s([o(cc.SpriteFrame)],D.prototype,"m_LogoIcon",void 0),s([o(cc.SpriteFrame)],D.prototype,"m_SkinIcon",void 0),s([o(cc.Node)],D.prototype,"m_done",void 0),s([o(cc.Node)],D.prototype,"m_arrow",void 0),i=d=s([i],D),a.default=i,cc._RF.pop()},{}],SkillPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"81d89orngBNUIYwrsnFzg8k","SkillPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("Display"),p=i("DataMgr"),h=i("AudioMgr"),f=i("OnlineMgr"),m=i("UserModel"),g=i("SDKAnalytics"),_=i("SDKEnums"),y=i("BattleMgr"),v=i("BaseAnimPopwin"),b=i("ShopPopwin"),w=i("MissionModel"),S=i("WXApi");function M(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_items=[],t.txtProgressTip2=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(M,c=v.default),(l=M).prototype.onLoad=function(){for(var t=this,e=this,n=0;n<3;n++)!function(n){e.m_items[n].getChildByName("btn_diamond").on("click",function(){t.Lvup(n)})}(n)},M.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.initUI(),S.default.I.showgrideadBottom()},Object.defineProperty(M.prototype,"BannerOpen",{get:function(){return f.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),M.prototype.initUI=function(){for(var t=this,e=0;e<3;e++)!function(e){var n=p.DataMgr.User.getSkillLv(e);0<=n?(t.m_items[e].getComponent(cc.Animation).play("anim_skilllvup_on"),t.m_items[e].getChildByName("pro").children.forEach(function(t,e){t.children[0].active=e<n}),n<5?(t.m_items[e].getChildByName("btn_diamond").active=!0,t.m_items[e].getChildByName("btn_diamond").getChildByName("num").getComponent(cc.Label).string=f.OnlineMgr.getSkillCost(e).toString()):t.m_items[e].getChildByName("btn_diamond").active=!1):t.m_items[e].getComponent(cc.Animation).play("anim_skilllvup_off")}(e)},M.prototype.Lvup=function(t){var e=this,n=f.OnlineMgr.getSkillCost(t);if(m.default.I.Diamond<n)return d.default.showTip("\u91d1\u5e01\u4e0d\u8db3~"),void u.ViewMgr.openPopwin(b.default);m.default.I.reqDiamond(-n),d.default.showTip("\u6280\u80fd\u5347\u7ea7\u6210\u529f~"),this.m_items[t].getChildByName("lvuplight").getComponent(cc.Animation).play(),p.DataMgr.Missions.addMissionProgress(w.MissionCheckType.SkillUp,1),m.default.I.reqAddSkillLv(t).then(function(){e.initUI()}),g.default.event(_.EventKeys.bonus_magnet_lvup,"\u6280\u80fd\u754c\u9762")},M.prototype.onClose=function(){c.prototype.onClose.call(this),S.default.I.hidegrideadBottom(),y.default.I.updateSkillUI()},M.prototype.onBack=function(){h.AudioMgr.button(),u.ViewMgr.closePopwin(l,{anim:!0})},M.PREFAB_PATH="prefab/popwin/popwin_skill",s([o(cc.Node)],M.prototype,"m_items",void 0),s([o(cc.Label)],M.prototype,"txtProgressTip2",void 0),i=l=s([i],M),a.default=i,cc._RF.pop()},{}],SkinShopPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"40a41cGKO1AT5e/XE8CkhKN","SkinShopPopwin");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("ViewMgr"),h=i("SDKTools"),f=i("Display"),m=i("AudioMgr"),g=i("SDKEnums"),_=i("Enum"),y=i("OnlineMgr"),v=i("UserModel"),b=i("ShareVideo"),w=i("EventEnum"),S=i("RandomUtils"),M=i("Water"),C=i("BattleMgr"),P=i("GetRewardPopWin"),A=i("ShopPopwin"),T=i("LoaderMgr"),E=i("Action"),B=i("PoolMgr"),D=i("EventMgr"),I=i("SDKAnalytics"),k=i("BaseAnimPopwin");function O(){var t=null!==u&&u.apply(this,arguments)||this;return t.skinobjs=[],t.m_LabCost=null,t.sharevideo=null,t.btnbuy=null,t.mainpage=null,t.m_Type=_.SkinShopType.Main,t}i=(o=cc._decorator).ccclass,o=o.property,r(O,u=k.default),(d=O).prototype.onLoad=function(){var t=this;this.skinobjs.forEach(function(e,n){e.on("click",function(){0<=v.default.I.HadSkins.indexOf(n)&&(v.default.I.reqChangSkin(n),t.setchoose(),C.default.I.setSkin(!1))})})},O.prototype.addEvent=function(){u.prototype.addEvent.call(this),h.default.bindEvent(w.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this),D.EventMgr.on(w.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this)},O.prototype.removeEvent=function(){u.prototype.removeEvent.call(this),h.default.removeEvent(w.EventEnum.TacticUpdate.toString(),this.handleTacticUpdate,this),D.EventMgr.off(w.EventEnum.UpdateDiamond,this.handleUpdateDimamond,this)},O.prototype.handleTacticUpdate=function(){this.initRewardUI()},O.prototype.initRewardUI=function(){this.sharevideo.updateWith(g.ShareKeys.getskin)},O.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),this.initUI(),this.initRewardUI()},O.prototype.setchoose=function(){this.skinobjs.forEach(function(t,e){var n=0<=v.default.I.HadSkins.indexOf(e);e==v.default.I.CurSkin?t.getComponent(cc.Animation).play("state_skin_selection"):n?t.getComponent(cc.Animation).play("state_skin_normal"):t.getComponent(cc.Animation).play("state_skin_unlocked")})},Object.defineProperty(O.prototype,"BannerOpen",{get:function(){return y.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),O.prototype.handleUpdateDimamond=function(t){t.detail&&this.playDiamondAnim()},O.prototype.playDiamondAnim=function(){var t=this;return new Promise(function(e){T.LoaderMgr.loadPrefabWithUrl("prefab/common/diamond_fly").then(function(n){var i=B.PoolMgr.getPrefab(n,t.node);E.default.playAnim(i).then(function(){B.PoolMgr.putNode(i),e(0)})})})},O.prototype.initUI=function(){this.initSkinShop()},O.prototype.initSkinShop=function(){var t=v.default.I.HadSkins.length;6<=t?(this.btnbuy.active=!1,this.sharevideo.node.active=!1):(this.btnbuy.active=!0,this.sharevideo.node.active=!0),this.m_LabCost.string=(t=300+500*(t-1)).toString(),this.skinobjs.forEach(function(t,e){var n=0<=v.default.I.HadSkins.indexOf(e);e==v.default.I.CurSkin?t.getComponent(cc.Animation).play("state_skin_selection"):n?t.getComponent(cc.Animation).play("state_skin_normal"):t.getComponent(cc.Animation).play("state_skin_unlocked"),t.getChildByName("light").active=!1})},O.prototype.handleClose=function(t){p.ViewMgr.closePopwin(d,{anim:t})},O.prototype.onGet=function(){m.AudioMgr.button(),h.default.dispatch(g.ShareKeys.getskin,{success:this.handleReward,context:this,fail:this.onFail})},O.prototype.onFail=function(){p.ViewMgr.openPopwin(A.default)},O.prototype.onBuy=function(){m.AudioMgr.button(),this.buyskin(),I.default.event(g.EventKeys.buyMainSkin,"\u76ae\u80a4\u5546\u5e97")},O.prototype.buyskin=function(){var t=300+500*(v.default.I.HadSkins.length-1);v.default.I.Diamond<t?f.default.showTip("\u91d1\u5e01\u4e0d\u8db3~"):(v.default.I.reqDiamond(-t),t=this.getSkin(),v.default.I.reqAddSkin(t),v.default.I.reqChangSkin(t),v.default.I.reqInitdSkinVideoTimes(),this.playAniskin(t))},O.prototype.handleReward=function(){p.ViewMgr.openPopwin(P.default,{data:{diamond:150,props:[]}})},O.prototype.getSkin=function(){var t=[],e=v.default.I.HadSkins;[1,2,3,4,5].forEach(function(n){e.indexOf(n)<0&&t.push(n)});var n=S.default.random(0,t.length);return t[n]},O.prototype.playAniskin=function(t){return c(this,void 0,void 0,function(){var e,n,i,o,a;return l(this,function(r){switch(r.label){case 0:if(i=[1,2,3,4,5],e=[],n=v.default.I.HadSkins,i.forEach(function(t){n.indexOf(t)<0&&e.push(t)}),!(2<=e.length))return[3,7];i=0,r.label=1;case 1:if(!(i<2))return[3,6];o=0,r.label=2;case 2:return o<e.length?(a=e[o],this.skinobjs[a].getChildByName("light").active=!0,[4,M.default.wait(100)]):[3,5];case 3:r.sent(),this.skinobjs[a].getChildByName("light").active=!1,r.label=4;case 4:return o++,[3,2];case 5:return i++,[3,1];case 6:this.skinobjs[t].getChildByName("light").active=!0,r.label=7;case 7:return[4,M.default.wait(200)];case 8:return r.sent(),cc.tween(this.skinobjs[t]).to(.2,{scale:1.3}).to(.1,{scale:1}).start(),this.initUI(),C.default.I.setSkin(!1),[2]}})})},O.prototype.onBack=function(){m.AudioMgr.button(),this.handleClose(!1)},O.PREFAB_PATH="prefab/popwin/popwin_skinshop",s([o(cc.Node)],O.prototype,"skinobjs",void 0),s([o(cc.Label)],O.prototype,"m_LabCost",void 0),s([o(b.default)],O.prototype,"sharevideo",void 0),s([o(cc.Node)],O.prototype,"btnbuy",void 0),s([o(cc.Node)],O.prototype,"mainpage",void 0),i=d=s([i],O),a.default=i,cc._RF.pop()},{}],StarConfig:[function(t,e,n){"use strict";cc._RF.push(e,"4ba5ecM7XBKT6kz+uE4wocm","StarConfig");var i,o=t,a=n;Object.defineProperty(a,"__esModule",{value:!0}),i=o("Enum"),a.StarConfig={Row:10,Col:10,Width:74,Gap:0,StarColors:((o={})[i.ColorType.Red]=cc.color(246,32,15),o[i.ColorType.Yellow]=cc.color(245,255,79),o[i.ColorType.Blue]=cc.color(69,255,253),o[i.ColorType.Green]=cc.color(69,255,97),o[i.ColorType.Violet]=cc.color(238,69,255),o),LightColors:((o={})[i.ColorType.Red]=cc.color(255,94,94),o[i.ColorType.Yellow]=cc.color(255,248,105),o[i.ColorType.Blue]=cc.color(44,181,255),o[i.ColorType.Green]=cc.color(166,255,66),o[i.ColorType.Violet]=cc.color(240,82,255),o),Dir:[{x:0,y:1},{x:1,y:0},{x:0,y:-1},{x:-1,y:0}],Score:{Init:5,Inc:10,Ratio:8},ScoreRewardMax:10,BlockRewardLimit:[13,1.2,25],BlockRewardLimitB:[50,1,100],SuperRewardLimit:[6,13,2],ChestMax:5,ChestLv:20,ChestRewards:[[1,3],[1,1]],ReliveNumLimit:3,RecordNumLimit:10,InterstitialAdCd:1,CollectRewardNum:200,FloatingRewardNum:200,ServiceRewardNum:200,ShopFreeStar:105,InviteRewards:[30,30,30,40,40,40,50,50,50,60,60,60,70,70,70],LvupP:[60,130,3],InterstitialLvCd:[2,2],InterstitialLvUpCd:[3,3],SkinVideo:[1,2,3,4,5],Teachball:[1,1,2,3,3,3,3,4,3,4],JsonPath:{Zip:"configs.bin",Plot:"Plot.json",Map:"Mapdata.json",ABTest:"ABTest.json",Milestone:"Milestone.json"},FurnitureRelated:[["N1-SofaS1","N1-Sofa2S1"],["N1-Plant1","N1-Plant2","N1-Plant3"]],OverAddCoin:10,CostAddFive:200},a.RuleCfg={isOpenMoney:!0,isForceShare:!0,showCancel:!0,property_probability1:.2,property_probability2:2,eliminate_award:3,hint:5,wand:[4,8],free_star:2,eliminate_award2:1,redbag:20,extra_award:2e3,hint_cd:3,award_cd:2,dayShareTotal:5,interstitialAdRewardChapter:1,onShowInterstitial:!0,internal_ad:!0,banner_time:6e4},cc._RF.pop()},{}],StarModel:[function(t,e,n){"use strict";cc._RF.push(e,"ffaeb//cZNEx7+Zg9NZt3KC","StarModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("BaseModel"),c=i("DataMgr"),l=i("Const"),u=i("SDKTools"),d=i("CoordData"),p=i("SDKEnums"),h=i("RandomUtils"),f=i("OnlineMgr"),m=i("StarConfig"),g=i("Enum"),_=i("EventMgr"),y=i("EventEnum"),v=i("Api");function b(){var t,e=r.call(this)||this;return e._level=1,e._score=0,e._addScore=0,e._residueNum=0,e._superRewardCd=0,e._chapterStars=[],e._isChapterAnimPlayed=!1,e._reliveData={chapter:0,count:0},e._propUseState=g.PropUseState.NotUse,e._propTensesState=g.PropTensesState.Do,e._timeProps=((t={})[g.PropsType.Hammer]=0,t[g.PropsType.Brush]=0,t[g.PropsType.Reset]=0,t[g.PropsType.Boom]=0,t),e._usePropNum=0,e._chestReward=null,e}a(b,r=s.default),Object.defineProperty(b.prototype,"Level",{get:function(){return this._level},enumerable:!0,configurable:!0}),b.prototype.setLevel=function(t){this._level=t},Object.defineProperty(b.prototype,"Score",{get:function(){return this._score},enumerable:!0,configurable:!0}),b.prototype.setScore=function(t){this._score=t},Object.defineProperty(b.prototype,"AddScore",{get:function(){return this._addScore},enumerable:!0,configurable:!0}),b.prototype.setAddScore=function(t){this._addScore+=t=t||0,this.setScore(this.Score+t)},b.prototype.resetAddScore=function(){this._addScore=0},Object.defineProperty(b.prototype,"IsChapterAnimPlayed",{get:function(){return this._isChapterAnimPlayed},enumerable:!0,configurable:!0}),b.prototype.setIsChapterAnimPlayed=function(t){this._isChapterAnimPlayed=t},Object.defineProperty(b.prototype,"SuperRewardCD",{get:function(){return this._superRewardCd},enumerable:!0,configurable:!0}),b.prototype.setSuperRewardCD=function(t){this._superRewardCd=t},Object.defineProperty(b.prototype,"TimeProps",{get:function(){return this._timeProps},enumerable:!0,configurable:!0}),b.prototype.getTimePropNum=function(t){return this.TimeProps[t]||0},b.prototype.setTimeProps=function(t,e){var n=this.TimeProps[t];this.TimeProps[t]=0<e?n+e:e<0?Math.max(0,n+e):e},Object.defineProperty(b.prototype,"UsePropNum",{get:function(){return this._usePropNum},enumerable:!0,configurable:!0}),b.prototype.setUsePropNum=function(t){this._usePropNum=t},b.prototype.addUsePropNum=function(){this._usePropNum+=1},Object.defineProperty(b.prototype,"ChestReward",{get:function(){var t,e,n,i;return this._chestReward||(t=(i=(n=f.OnlineMgr.ChestRewards)[0])[0],e=i[1],n=(i=n[1])[0],i=i[1],i={diamond:100*h.default.range(t,e),propNum:h.default.range(n,i),propType:h.default.randomArray(l.default.PropTypes.slice())},this.setChestReward(i)),this._chestReward},enumerable:!0,configurable:!0}),b.prototype.setChestReward=function(t){this._chestReward=t},b.prototype.resetChestReward=function(){this._chestReward=null},Object.defineProperty(b.prototype,"PropUseState",{get:function(){return this._propUseState},enumerable:!0,configurable:!0}),b.prototype.setPropUseState=function(t){this._propUseState=t},Object.defineProperty(b.prototype,"PropTensesState",{get:function(){return this._propTensesState},enumerable:!0,configurable:!0}),b.prototype.setPropTensesState=function(t){this._propTensesState=t},Object.defineProperty(b.prototype,"ResidueNum",{get:function(){return this._residueNum},enumerable:!0,configurable:!0}),b.prototype.setResidueNum=function(t){this._residueNum=t},Object.defineProperty(b.prototype,"ReliveData",{get:function(){return this._reliveData},enumerable:!0,configurable:!0}),b.prototype.setReliveData=function(t){this._reliveData=t},b.prototype.addReliveData=function(){var t;this.ReliveData.chapter==this.Level?(t=this.ReliveData.count||0,this.setReliveData({chapter:this.Level,count:++t})):this.setReliveData({chapter:this.Level,count:1})},Object.defineProperty(b.prototype,"ChapterCfg",{get:function(){return this._chapterCfg},enumerable:!0,configurable:!0}),b.prototype.setChapterCfg=function(t){this._chapterCfg=t},Object.defineProperty(b.prototype,"ChapterStars",{get:function(){return this._chapterStars},enumerable:!0,configurable:!0}),b.prototype.setChapterStars=function(t){this._chapterStars=t},b.prototype.setChapterStarsWith=function(t,e,n){this._chapterStars[t][e]=n},Object.defineProperty(b.prototype,"TargetScore",{get:function(){return this.ChapterCfg.grade*l.default.TestGrade},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"IsChapterReward",{get:function(){return c.DataMgr.User.getChapterTypeById(this.Level)===g.ChapterType.Reward},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"IsOverTeach",{get:function(){return c.DataMgr.User.IsOverTeach},enumerable:!0,configurable:!0}),b.prototype.initData=function(){this.setChapterCfg(c.DataMgr.Maps.getChapterByLv(this.Level));var t=this.getColorTypeArr();this.setChapterStars(this.convert(t)),this.setResidueNum(t.length)},b.prototype.nextChapter=function(){var t=this.Level;this.IsChapterReward?c.DataMgr.User.reqRewardLevel(t):(this.setSuperRewardCD(this.SuperRewardCD-1),this.setLevel(t+1)),this.reqMaxRecord(this.Score,!1),this.reqSaveScore(this.Score),this.resetAddScore(),this.setUsePropNum(0),this.setIsChapterAnimPlayed(!1),this.initData()},b.prototype.gameFail=function(){var t=this.Score===this.AddScore?this.Score:this.Score-this.AddScore;this.reqMaxRecord(t,!1),this.reqHistoryData(null),this.reqSaveScore(this.Score-this.AddScore),this.setScore(this.Score-this.AddScore),this.resetAddScore(),this.setUsePropNum(0),this.initData()},b.prototype.recordGame=function(t){var e=t.level;t=t.score,this.setAddScore(0),this.setLevel(e),this.setScore(t),this.reqRecordNum(),this.initData(),this.IsOverTeach||c.DataMgr.User.reqOverTeach(!0)},b.prototype.historyGame=function(t){var e,n=t.level,i=t.score,o=t.stars,a=t.timeProps;for(e in this.setAddScore(0),this.setLevel(n),this.setScore(i),this.setChapterCfg(c.DataMgr.Maps.getChapterByLv(n)),this.setChapterStars(o),this.setResidueNum(o.length),a)this.setTimeProps(+e,a[e]);this.reqHistoryData(null)},b.prototype.restartGame=function(){this.setAddScore(0),this.setLevel(1),this.setScore(0),this.initData()},b.prototype.useBrush=function(t,e,n){this.setChapterStarsWith(t,e,n),this.setPropUseState(g.PropUseState.CanUse),n=g.PropsType.Brush,this.usePropWithType(n)},b.prototype.useHammer=function(t,e){this.setChapterStarsWith(t,e,g.ColorType.None),this.setPropUseState(g.PropUseState.CanUse),e=g.PropsType.Hammer,this.usePropWithType(e)},b.prototype.useReset=function(){this.setPropUseState(g.PropUseState.CanUse);var t=g.PropsType.Reset;this.usePropWithType(t)},b.prototype.usePropWithType=function(t){return 0<this.getTimePropNum(t)?(this.addUsePropNum(),this.setTimeProps(t,-1),void _.EventMgr.emit(y.EventEnum.UpdateProps,{type:t,from:0,val:-1})):0<c.DataMgr.User.getPropNum(t)?(this.addUsePropNum(),void c.DataMgr.User.reqProps(t,-1)):(this.addUsePropNum(),void c.DataMgr.User.reqDiamond(-10,110,{isUpdate:!0}))},b.prototype.reqSaveScore=function(t){t={score:t,addScore:this.AddScore},c.DataMgr.User.reqLevel(this.Level,t,!0),v.default.saveScore({add_score:this.AddScore,item_num:this.UsePropNum})},b.prototype.reqMaxRecord=function(){},b.prototype.reqHistoryData=function(t){c.DataMgr.User.reqHistory(t,!0)},b.prototype.reqRecordNum=function(){c.DataMgr.User.reqAddDayReward(g.DayKeys.RecordNum)},b.prototype.findAllHints=function(){for(var t,e,n=m.StarConfig.Row,i=m.StarConfig.Col,o=this.ChapterStars,a=[],r=-1,s=-1,c=0;c<n;c++){for(t=0;t<i;t++)if((e=o[c][t])!==g.ColorType.None&&(t+1<i&&e===o[c][t+1]||c+1<n&&e===o[c+1][t])){r=c,s=t;break}-1!==r&&a.push({r:r,c:s})}return a},b.prototype.findHits=function(t,e){var n,i=[],o=this.ChapterStars,a=m.StarConfig.Row,r=m.StarConfig.Col,s=m.StarConfig.Dir,c=this.convert(Array.from({length:a*r}).map(function(){return!1})),l=[{r:t,c:e}];for(c[t][e]=!0;0<l.length;){n=l.shift(),i.push(n);for(var u=0,p=s.length;u<p;u++){var h=new d.default(0,0);h.r=n.r+s[u].x,h.c=n.c+s[u].y,this.inside(h)&&o[h.r][h.c]===o[t][e]&&!c[h.r][h.c]&&(c[h.r][h.c]=!0,l.push(h))}}return i},b.prototype.getMixinHits=function(){for(var t,e=[],n=[],i=m.StarConfig.Row,o=m.StarConfig.Col,a=0;a<i;a++)for(var r=0;r<o;r++)this.ChapterStars[a][r]!==g.ColorType.None&&e.push({r:a,c:r,color:this.ChapterStars[a][r]});for(a=0;a<i;a++)for(r=0;r<o;r++)this.ChapterStars[a][r]!==g.ColorType.None&&(t=h.default.range(0,e.length-1),this.ChapterStars[a][r]=e[t].color,n.push({src:{r:a,c:r},dest:{r:e[t].r,c:e[t].c}}),e.splice(t,1));return n},b.prototype.clearHits=function(t){var e=this;t&&t instanceof Array&&t.forEach(function(t){e.inside(t)&&(e.ChapterStars[t.r][t.c]=g.ColorType.None,e.setResidueNum(e.ResidueNum-1))})},b.prototype.getMoveDownStars=function(){for(var t=[],e=m.StarConfig.Row,n=m.StarConfig.Col,i=0;i<e;i++)t[i]=[];for(var o=0;o<n;o++)for(var a=i=0;i<e;i++)this.ChapterStars[i][o]!==g.ColorType.None&&(a!==i&&(t[i][o]=new d.default(a,o),this.swap(i,o,a,o)),a++);return t},b.prototype.getMoveLeftStars=function(){for(var t=[],e=m.StarConfig.Row,n=m.StarConfig.Col,i=0;i<e;i++)t[i]=[];for(var o=0,a=0;o<n;o++)if(this.ChapterStars[0][o]!==g.ColorType.None){if(a!==o)for(i=0;i<e;i++)this.ChapterStars[i][o]!==g.ColorType.None&&(t[i][o]={r:i,c:a},this.swap(i,o,i,a));a++}return t},b.prototype.getEndLessStars=function(){for(var t=[],e=m.StarConfig.Row,n=m.StarConfig.Col,i=0;i<n;i++)for(var o=e-1;0<=o;o--)this.ChapterStars[o][i]!==g.ColorType.None&&t.push({r:o,c:i});return t},b.prototype.getEveryAddScore=function(t){return t=t*m.StarConfig.Score.Inc+m.StarConfig.Score.Init,this.IsOverTeach?t:Math.ceil(t/m.StarConfig.Score.Ratio)},b.prototype.isGameOver=function(){return this.Score<this.TargetScore},b.prototype.checkUpdateOverTeach=function(){return!this.IsOverTeach&&3===this.Level&&!this.IsChapterReward&&!this.isGameOver()},b.prototype.checkPlayNextChapter=function(){return!!this.IsChapterReward||!this.isGameOver()},b.prototype.checkHasGuide=function(){return 1==this.Level&&!this.IsOverTeach},b.prototype.checkRoundOver=function(){for(var t,e,n=m.StarConfig.Row,i=m.StarConfig.Col,o=this.ChapterStars,a=-1,r=-1,s=0;s<n;s++){for(t=0;t<i;t++)if((e=o[s][t])!==g.ColorType.None&&(t+1<i&&e===o[s][t+1]||s+1<n&&e===o[s+1][t])){a=s,r=t;break}if(-1!==a)break}return{r:a,c:r}},b.prototype.checkRandomProp=function(){if(this.IsChapterReward||!this.IsOverTeach)return null;var t=m.StarConfig.Row,e=m.StarConfig.Col,n=(i=f.OnlineMgr.BlockRewards)[0],i=i[1];return c.DataMgr.User.getDayDataWithKey(g.DayKeys.BlockRewardNum,0)<n&&Math.random()<i?{r:h.default.random(0,t),c:h.default.random(0,e)}:null},b.prototype.checkReliveOver=function(){var t=m.StarConfig.ReliveNumLimit;return t=u.default.getParamsInt(p.OnlineKeys.ReliveNum,t),c.DataMgr.User.getDayDataWithKey(g.DayKeys.ReliveNum,0)>=t},b.prototype.isTriggerSuperReward=function(t){if(this.IsChapterReward||!this.IsOverTeach)return!1;if(0<this.SuperRewardCD)return!1;var e=m.StarConfig.SuperRewardLimit,n=(i=u.default.getParamsObj(p.OnlineKeys.SuperRewardLimit,e))[0],i=(e=i[1],i[2]);return!(t<n)&&((e=c.DataMgr.User.getDayDataWithKey(g.DayKeys.SuperRewardNum,0)<e)&&this.setSuperRewardCD(i),e)},b.prototype.checkPlayChapterPass=function(){return!this.IsChapterReward&&!this.IsChapterAnimPlayed&&this.Score>=this.TargetScore},b.prototype.swap=function(t,e,n,i){this.ChapterStars[t][e]^=this.ChapterStars[n][i],this.ChapterStars[n][i]^=this.ChapterStars[t][e],this.ChapterStars[t][e]^=this.ChapterStars[n][i]},b.prototype.convert=function(t){for(var e=m.StarConfig.Col,n=t.length/e,i=[],o=0;o<n;o++)i[o]=t.slice(o*e,o*e+e);return i},b.prototype.getColorTypeArr=function(){if(!this.IsOverTeach&&this.Level<=3)return l.default.TeachDatas[this.Level-1];if(this.IsChapterReward){var t=c.DataMgr.Maps.RewardList;return t[h.default.range(0,t.length-1)].value}var e=[0,0,0,0,0],n=this.ReliveData.chapter===this.Level&&0<this.ReliveData.count?(t=Math.min(this.ReliveData.count,3),h.default.range(30+3*t,35+3*t)):(n=this.ChapterCfg.HPWeight,h.default.range(n[0],n[1]));return e[h.default.range(0,4)]=n,this.buildNormalColorTypes(e)},b.prototype.buildNormalColorTypes=function(t){var e=[];if(t.forEach(function(t,n){for(var i=0;i<t;i++)e.push(n)}),e.length<100)for(var n=100-e.length-1;0<=n;n--){for(var i=void 0;0!==t[i=h.default.range(0,4)];);e.push(i)}return e=h.default.sortArray(e)},b.prototype.inside=function(t){var e=t.r;return t=t.c,0<=e&&e<m.StarConfig.Row&&0<=t&&t<m.StarConfig.Col},b.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(b,"I",{get:function(){return this.instance||(this.instance=new b)},enumerable:!0,configurable:!0}),b.instance=null,a=b,o.default=a,cc._RF.pop()},{}],StringUtils:[function(t,e,n){"use strict";cc._RF.push(e,"f8714F7VlpB9q6ElC03eLNK","StringUtils");var i=n;function o(){}Object.defineProperty(i,"__esModule",{value:!0}),o.trim=function(t){return t.replace(/^\s+/g,"").replace(/\s+$/g,"")},o.isEmpty=function(t){return!t||void 0===t||null==t||"string"==typeof t&&""===this.trim(t)||"null"===t},o.strCut=function(t,e){if(2*t.length<=e)return t;for(var n=0,i="",o=0;o<t.length;o++)if(i+=t.charAt(o),128<t.charCodeAt(o)){if((n+=2)>=e)return i.substring(0,i.length-1)+"..."}else if((n+=1)>=e)return i.substring(0,i.length-2)+"...";return i},o.toQueryPair=function(t,e,n){return t+"="+((n=void 0!==n&&n)?encodeURIComponent(e):e)},o.stringFormat=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(0===arguments.length)throw new Error("please give arg at least one !");if(2===arguments.length&&"object"==typeof arguments[1])for(var i in arguments[1]){var o=new RegExp("({"+i+"})","g");t=t.replace(o,arguments[1][i])}else for(var a=0;a<e.length;a++){if(null==e[a])return t;o=new RegExp("({["+a+"]})","g"),t=t.replace(o,e[a])}return t},o.parseJson2String=function(t,e){var n=null,i="",o=0;return(e=e||{}).newlineAfterColonIfBeforeBraceOrBracket=!0===e.newlineAfterColonIfBeforeBraceOrBracket,e.spaceAfterColon=!1!==e.spaceAfterColon,n=/([\{\}])/g,"string"!=typeof t||(t=JSON.parse(t)),t=(t=(t=(t=(t=(t=JSON.stringify(t)).replace(n,"\r\n$1\r\n")).replace(n=/([\[\]])/g,"\r\n$1\r\n")).replace(n=/(\,)/g,"$1\r\n")).replace(n=/(\r\n\r\n)/g,"\r\n")).replace(n=/\r\n\,/g,","),e.newlineAfterColonIfBeforeBraceOrBracket||(t=(t=t.replace(n=/\:\r\n\{/g,":{")).replace(n=/\:\r\n\[/g,":[")),(t=e.spaceAfterColon?t.replace(n=/\:/g,":"):t).split("\r\n").forEach(function(t){var e=0,n=0,a="";for(t.match(/\{$/)||t.match(/\[$/)?n=1:t.match(/\}/)||t.match(/\]/)?0!==o&&--o:n=0,e=0;e<o;e++)a+="    ";i+=a+t+"\r\n",o+=n}),i},o.compareVersion=function(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var i=0;i<n;i++){var o=parseInt(t[i]),a=parseInt(e[i]);if(a<o)return 1;if(o<a)return-1}return 0},o.buildRandomCode=function(t,e){void 0===t&&(t=26),void 0===e&&(e=!0);for(var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i=n.length,o="",a=0;a<t;a++){var r=Math.floor(Math.random()*i);o+=n.charAt(r)}return e?(new Date).getTime()+"-"+o:o},o.UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},o.changeMoney=function(t){return 1e6<t?+JSON.stringify(t).slice(0,JSON.stringify(t).length-4)/100+"\u4e07":(t/100).toFixed(2).replace(/(?:\.0*|(\.\d+?)0+)$/,"$1")},o.toDecimal2=function(t){var e=parseFloat(t);if(isNaN(e))return!1;var n=(e=Math.round(100*t)/100).toString(),i=n.indexOf(".");for(i<0&&(i=n.length,n+=".");n.length<=i+2;)n+="0";return n},i.default=o,cc._RF.pop()},{}],TipsMgr:[function(t,e,n){"use strict";cc._RF.push(e,"955a5hSlYVEZ54HbLH8eBUt","TipsMgr");var i=t,o=e,a=n;o=__DECORATE__,Object.defineProperty(a,"__esModule",{value:!0});var r,s=i("Action"),c=i("PoolMgr"),l=i("LoaderMgr");function u(){}i=cc._decorator.ccclass,(r=u).prototype.show=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];l.LoaderMgr.loadResWithUrl(r.PREFAB_PATH,cc.Prefab,{success:function(n){(n=c.PoolMgr.getPrefab(n,cc.director.getScene())).zIndex=1e3,t.doOpen.apply(t,[n].concat(e))},context:this})},u.prototype.doOpen=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],o=e[1],a=e[2],r=e[3]||{type:0};i.height=1===r.type?100:60;var s=i.children[0].getChildByName("msg"),c=i.getChildByName("tip_txt");"string"==typeof o?((r=s.getComponent(cc.Label)).string=o,300<=s.width?r.overflow=cc.Label.Overflow.RESIZE_HEIGHT:r.overflow=cc.Label.Overflow.NONE,s.active=!0,c.active=!1,this.doTxtAnim(s,a).then(function(){return t.doclose(i)})):(s.active=!1,c.active=!0,this.doImgAnim(c,o,a).then(function(){return t.doclose(i)}))},u.prototype.doTxtAnim=function(t,e){return void 0===e&&(e=1),new Promise(function(e){s.default.playAddAnim(t.parent).then(function(){return e()})})},u.prototype.doImgAnim=function(t,e,n){void 0===n&&(n=1);var i=t.children[0];return new Promise(function(n){e&&s.default.playAddAnim(i,"state_tip_txt_"+e),s.default.playAddAnim(t).then(function(){return n()})})},u.prototype.doclose=function(t){c.PoolMgr.putNode(t)},Object.defineProperty(u,"I",{get:function(){return this.__instance||(this.__instance=new r)},enumerable:!0,configurable:!0}),u.PREFAB_PATH="prefab/common/tip",i=r=o([i],u),a.default=i,a.TipsMgr=i.I,(a=a.TipType||(a.TipType={}))[a.Coin=1]="Coin",a[a.VideoCd=2]="VideoCd",a[a.HpFull=3]="HpFull",a[a.MissionLock=4]="MissionLock",a[a.AddMaxHp=5]="AddMaxHp",cc._RF.pop()},{}],TopBar:[function(t,e,n){"use strict";cc._RF.push(e,"6c250oSHOpFJbl+rbB4QMdE","TopBar");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("ViewMgr"),u=i("Action"),d=i("SDKTools"),p=i("Display"),h=i("DataMgr"),f=i("Enum"),m=i("PoolMgr"),g=i("AudioMgr"),_=i("EventMgr"),y=i("ImageLabelNew"),v=i("EventEnum"),b=i("GameAddCoin");function w(){var t=c.call(this)||this;return t.nodeHp=null,t.nodeCoin=null,t.nodeStar=null,t.nodeHpFull=null,t.iconCoin=null,t.iconStar=null,t.txtHp=null,t.txtHpTime=null,t.txtCoin=null,t.txtStar=null,t.particleLight=null,t.isInitial=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(w,c=cc.Component),Object.defineProperty(w.prototype,"IconCoin",{get:function(){return this.iconCoin},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"IconStar",{get:function(){return this.iconStar},enumerable:!0,configurable:!0}),w.prototype.onLoad=function(){_.EventMgr.on(v.EventEnum.UpdateStar,this.handleUpdateStar,this),_.EventMgr.on(v.EventEnum.UpdateDiamond,this.handleUpdateCoin,this),_.EventMgr.on(v.EventEnum.UpdateReduceStar,this.handleReduceStar,this)},w.prototype.onDestroy=function(){_.EventMgr.off(v.EventEnum.UpdateStar,this.handleUpdateStar,this),_.EventMgr.off(v.EventEnum.UpdateDiamond,this.handleUpdateCoin,this),_.EventMgr.off(v.EventEnum.UpdateReduceStar,this.handleReduceStar,this)},w.prototype.initWith=function(t){var e="anim_top_in",n="anim_top_out";this.data||this.initData();var i=this.data,o=this.getData(t),a=i.hp,r=(t=i.coin,i=i.star,o.hp),s=o.coin,c=o.star;switch(this.isInitial||(this.initCoin(),this.initStar(),this.isInitial=!0),a){case-1:case 0:1===r&&u.default.playAddAnim(this.nodeHp,e);break;case 1:0===r&&u.default.playAddAnim(this.nodeHp,n),r<0&&u.default.playAddAnim(this.nodeHp,n)}switch(t){case-2:1<=s&&u.default.playAddAnim(this.nodeCoin,e),1==s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin2-1");break;case-1:1<=s&&u.default.playAddAnim(this.nodeCoin,e),2==s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin1-2");break;case 0:1<=s&&u.default.playAddAnim(this.nodeCoin,e),1==s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin2-1"),2==s&&u.default.playAddAnim(this.nodeCoin,"state_top_coin"),3==s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin2-3");break;case 1:0===s?(o.coin=-1,u.default.playAddAnim(this.nodeCoin,n)):s<0&&u.default.playAddAnim(this.nodeCoin,n),2===s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin1-2");break;case 2:0===s?(o.coin=-2,u.default.playAddAnim(this.nodeCoin,n)):s<0&&u.default.playAddAnim(this.nodeCoin,n),1===s&&u.default.playAddAnim(this.nodeCoin,"anim_top_coin2-1")}switch(i){case-3:1<=c&&u.default.playAddAnim(this.nodeStar,e),1==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-1"),2==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-2");break;case-2:1<=c&&u.default.playAddAnim(this.nodeStar,e),1==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star2-1"),3==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star2-3");break;case-1:1<=c&&u.default.playAddAnim(this.nodeStar,e),2==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star1-2"),3==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star1-3");break;case 0:1<=c&&u.default.playAddAnim(this.nodeStar,e),1==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-1"),2==c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-2"),3==c&&u.default.playAddAnim(this.nodeStar,"state_top_star");break;case 1:0===c?(o.star=-1,u.default.playAddAnim(this.nodeStar,n)):c<0&&u.default.playAddAnim(this.nodeStar,n),2===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star1-2"),3===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star1-3");break;case 2:0===c?(o.star=-2,u.default.playAddAnim(this.nodeStar,n)):c<0&&u.default.playAddAnim(this.nodeStar,n),1===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star2-1"),3===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star2-3");break;case 3:0===c?(o.star=-3,u.default.playAddAnim(this.nodeStar,n)):c<0&&u.default.playAddAnim(this.nodeStar,n),1===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-1"),2===c&&u.default.playAddAnim(this.nodeStar,"anim_top_star3-2")}this.data=o},w.prototype.animAddStar=function(){u.default.playAddAnim(this.nodeStar,"anim_top_staradd")},w.prototype.initData=function(){this.data={hp:0,coin:0,star:0}},w.prototype.initCoin=function(){this.nodeCoin.active=!0,this.coin=h.DataMgr.User.Diamond,this.txtCoin.setValue(this.coin)},w.prototype.initStar=function(){this.nodeStar.active=!0,this.txtStar.setValue(h.DataMgr.User.Star)},w.prototype.getData=function(t){var e=this.data?-Math.abs(this.data.hp):0,n=this.data?-Math.abs(this.data.coin):0,i=this.data?-Math.abs(this.data.star):0;switch(t){case f.TopBarType.Hp:return{hp:1,coin:0,star:i};case f.TopBarType.Coin:return{hp:e,coin:1,star:i};case f.TopBarType.Star:return{hp:e,coin:n,star:1};case f.TopBarType.HpAndCoin:return{hp:1,coin:2,star:i};case f.TopBarType.HpAndStar:return{hp:1,coin:n,star:2};case f.TopBarType.CoinAndStar:return{hp:e,coin:1,star:2};case f.TopBarType.Whole:return{hp:1,coin:2,star:3};default:return f.TopBarType.None,{hp:e,coin:n,star:i}}},w.prototype.synchCoin=function(){var t=h.DataMgr.User.Diamond;this.coin!==t&&(this.coin=t,this.txtCoin.setText(t+""))},w.prototype.actionCoinFly=function(t){var e=this;this.coin+=t,this.txtCoin.setText(this.coin+""),cc.tween(this.nodeCoin.children[0]).to(2/60,{scale:.85}).to(5/60,{scale:1}).start();var n=m.PoolMgr.getPrefab(this.particleLight,this.nodeCoin.children[1]);n.children[0].getComponent(cc.ParticleSystem).resetSystem(),n.children[1].getComponent(cc.ParticleSystem).resetSystem(),this.scheduleOnce(function(){cc.isValid(n)&&m.PoolMgr.putNode(n),e.initWith(f.TopBarType.Star)},1),d.default.vibrateShort()},w.prototype.handleUpdateCoin=function(){this.initCoin()},w.prototype.handleUpdateStar=function(){this.initStar()},w.prototype.handleReduceStar=function(t){t=+t.detail||1,t=Math.max(h.DataMgr.User.Star-t,0),this.txtStar.setValue(t)},w.prototype.onCoin=function(){g.AudioMgr.button(),l.default.I.openPopwin(b.default,{data:{type:1}})},w.prototype.onStar=function(){0!=this.nodeStar.opacity&&(g.AudioMgr.button(),p.default.showTip("\u656c\u8bf7\u671f\u5f85"))},s([o(cc.Node)],w.prototype,"nodeHp",void 0),s([o(cc.Node)],w.prototype,"nodeCoin",void 0),s([o(cc.Node)],w.prototype,"nodeStar",void 0),s([o(cc.Node)],w.prototype,"nodeHpFull",void 0),s([o(cc.Node)],w.prototype,"iconCoin",void 0),s([o(cc.Node)],w.prototype,"iconStar",void 0),s([o(y.default)],w.prototype,"txtHp",void 0),s([o(y.default)],w.prototype,"txtHpTime",void 0),s([o(y.default)],w.prototype,"txtCoin",void 0),s([o(y.default)],w.prototype,"txtStar",void 0),s([o(cc.Prefab)],w.prototype,"particleLight",void 0),i=s([i],w),a.default=i,cc._RF.pop()},{}],TopCPSEntry:[function(t,e,n){"use strict";cc._RF.push(e,"8fb54W9IflDsrtwO0tCVjK8","TopCPSEntry");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=o("Action"),u=o("BattleMgr"),d=o("AudioMgr"),p=o("CPSCouponListPopwin"),h=o("DataMgr");function f(){return null!==c&&c.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(f,c=cc.Component),f.prototype.actionOpen=function(){var t=this;return new Promise(function(e){t.node.active=!0;var n=t.node.children[0],i=t.node.children[1];h.DataMgr.User.IsOpenCpsQuan||(n.active=!1),h.DataMgr.User.reqOpenCpsQuan(),l.default.playAddAnim(i,"anim_function_open").then(function(){t.actionTime(),e(1)}).catch(function(){t.actionTime(),e(1)})})},f.prototype.initInfo=function(){this.node.active=!0,this.node.children[0].active=!0},f.prototype.actionTime=function(){var t=this.node.children[0];t.active=!0,l.default.playAddAnim(t,"anim_btn_cps_in")},f.prototype.hideCps=function(){var t=this.node.children[0];cc.isValid(t)&&l.default.stopAnim(t,"anim_coupon_time"),cc.isValid(this.node)&&(this.node.active=!1)},f.prototype.onGo=function(){d.AudioMgr.button(),u.default.I.addPopwinList(p.default,{})},o=s([o],f),a.default=o,cc._RF.pop()},{}],TopCombon:[function(t,e,n){"use strict";cc._RF.push(e,"7f25e25supB3bTjdutjPkl8","TopCombon");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=o("Action"),p=o("BattleMgr");function h(){return null!==u&&u.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(h,u=cc.Component),h.prototype.animCombon=function(){return c(this,void 0,Promise,function(){var t=this;return l(this,function(){return this.node.active=!0,this.node.children[0].children[0].getComponent(cc.Label).string=p.default.I.m_ComboNum.toString(),[2,d.default.playAnim(this.node.children[0],"anim_comboxn").then(function(){cc.isValid(t.node)&&(t.node.active=!1)})]})})},o=s([o],h),a.default=o,cc._RF.pop()},{}],TopDiamond:[function(t,e,n){"use strict";cc._RF.push(e,"ef69bsy0wVA/J3iX3MHqviB","TopDiamond");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("ViewMgr"),u=i("Action"),d=i("DataMgr"),p=i("ShopPopwin"),h=i("AudioMgr"),f=i("ImageLabelNew");function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_Diamond=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(m,c=cc.Component),m.prototype.getNode=function(){return this.node},m.prototype.initInfo=function(){this.renderDiamond()},m.prototype.animAdd=function(){return u.default.playAnim(this.node)},m.prototype.renderDiamond=function(){this.m_Diamond.setValue(d.DataMgr.User.Diamond)},m.prototype.onShop=function(){h.AudioMgr.button(),l.ViewMgr.openPopwin(p.default)},s([o(f.default)],m.prototype,"m_Diamond",void 0),i=s([i],m),a.default=i,cc._RF.pop()},{}],TopLeftBtns:[function(t,e,n){"use strict";cc._RF.push(e,"fb61aPSGVhD35CZWWUEyfFs","TopLeftBtns");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("ViewMgr"),u=i("Action"),d=i("TopOnlineGift"),p=i("DataMgr"),h=i("BattleMgr"),f=i("AudioMgr"),m=i("MenuPopwin"),g=i("RankPopwin"),_=i("Enum");function y(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_OnlineGiftCtr=null,t.m_HeadIcon=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(y,c=cc.Component),y.prototype.initInfo=function(){this.renderMenuHead()},y.prototype.refeshHead=function(){this.renderMenuHead()},y.prototype.animLvUp=function(){return u.default.playAnim(this.node.getChildByName("checkpoint"),"anim_game_lvup")},y.prototype.checkGift=function(){this.m_OnlineGiftCtr.checkOpen()},y.prototype.unlockGift=function(){this.m_OnlineGiftCtr.unlock()},y.prototype.setOnlineGift=function(t){this.m_OnlineGiftCtr.setIsOpenOnlineGift(t)},y.prototype.renderMenuHead=function(){var t=this,e=p.DataMgr.UserBase.Data.avatar_url;e&&cc.loader.load({url:e,type:"png"},function(e,n){!e&&cc.isValid(t.m_HeadIcon)&&(t.m_HeadIcon.spriteFrame=new cc.SpriteFrame(n))})},y.prototype.onJumpRank=function(){f.AudioMgr.button(),h.default.I.m_IsPassing||l.ViewMgr.openPopwin(g.default,{data:{type:_.ModuleType.Menu}})},y.prototype.onJumpMenu=function(){f.AudioMgr.button(),h.default.I.m_IsPassing||l.ViewMgr.openPopwin(m.default,{data:{type:_.MenuType.Menu},anim:!0})},s([o(d.default)],y.prototype,"m_OnlineGiftCtr",void 0),s([o(cc.Sprite)],y.prototype,"m_HeadIcon",void 0),i=s([i],y),a.default=i,cc._RF.pop()},{}],TopLvBar:[function(t,e,n){"use strict";cc._RF.push(e,"9c4218A5dxPVpDChAqvm4wI","TopLvBar");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Action"),u=i("BattleMgr"),d=i("ImageLabelNew");function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_lvprogress=null,t.m_labcurlv=null,t.m_CurTitle=null,t.m_Titles=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(p,c=cc.Component),p.prototype.initInfo=function(){this.renderLv(),this.renderProgress()},p.prototype.animLvUp=function(){return l.default.playAnim(this.node.getChildByName("checkpoint"),"anim_game_lvup")},p.prototype.renderLv=function(){var t=u.default.I.m_curlevel;this.m_labcurlv.setValue(t),this.m_CurTitle.spriteFrame=this.m_Titles[u.default.I.getTitle(t)]},p.prototype.renderProgress=function(){var t=u.default.I.m_exp/u.default.I.getNextLvScore()*250;this.m_lvprogress.getComponent(cc.Sprite).fillRange=t/250},s([o(cc.Node)],p.prototype,"m_lvprogress",void 0),s([o(d.default)],p.prototype,"m_labcurlv",void 0),s([o(cc.Sprite)],p.prototype,"m_CurTitle",void 0),s([o(cc.SpriteFrame)],p.prototype,"m_Titles",void 0),i=s([i],p),a.default=i,cc._RF.pop()},{}],TopMelon:[function(t,e,n){"use strict";cc._RF.push(e,"a6b54C+dcNJzJVwRSK/gann","TopMelon");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=o("Action"),u=o("Display"),d=o("AudioMgr"),p=o("CheckTools"),h=o("RandomUtils");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.time=5,t}o=(i=cc._decorator).ccclass,i.property,r(f,c=cc.Component),f.prototype.initInfo=function(){},f.prototype.onLoad=function(){this.node.active=p.default.IsShopWmIcon},f.prototype.onGo=function(){d.AudioMgr.button(),u.default.PersistNode.loadToGamewatermelon()},f.prototype.update=function(t){0<this.time?this.time-=t:(l.default.playAnim(this.node,"anim_melon_btn_idle"),this.time=h.default.random(3,8))},o=s([o],f),a.default=o,cc._RF.pop()},{}],TopMenu:[function(t,e,n){"use strict";cc._RF.push(e,"a72f08KjP5Eoohk6GsrAsED","TopMenu");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Action"),u=i("AudioMgr"),d=i("Enum");function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.nMail=null,t.nInvite=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(p,c=cc.Component),p.prototype.init=function(){this.animWith(d.ComAction.Init)},p.prototype.animWith=function(t){var e;switch(l.default.stopAnim(this.node),t){case d.ComAction.Init:e="init";break;case d.ComAction.Enter:e="in";break;case d.ComAction.Out:e="out"}return l.default.playAddAnim(this.node,"anim_btn_menu_"+e)},p.prototype.refreshWith=function(){},p.prototype.onMail=function(){u.AudioMgr.button()},s([o(cc.Node)],p.prototype,"nMail",void 0),s([o(cc.Node)],p.prototype,"nInvite",void 0),i=s([i],p),a.default=i,(a=a.TopMenuUI||(a.TopMenuUI={}))[a.Invite=0]="Invite",a[a.Mail=1]="Mail",cc._RF.pop()},{}],TopOnlineGift:[function(t,e,n){"use strict";cc._RF.push(e,"72310LpKcJMXKVAwOqPWClo","TopOnlineGift");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("AudioEnum"),p=i("AudioMgr"),h=i("ActBtnAni"),f=i("BattleMgr"),m=i("Action"),g=i("CheckTools"),_=i("Display"),y=i("Water"),v=i("Const"),b=i("DataMgr"),w=i("SDKEnums"),S=i("SDKTools"),M=i("DateUtils"),C=i("GetRewardPopWin"),P=i("OnlineGiftPopwin"),A=i("ViewMgr");function T(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_labOnlineGifttime=null,t.isOpenOnlineGift=!1,t.iscangetreward=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(T,u=cc.Component),T.prototype.onLoad=function(){this.node.active=g.default.IsRedPacketOpen},T.prototype.setIsOpenOnlineGift=function(t){this.isOpenOnlineGift=t},T.prototype.update=function(t){var e,n;this.m_labOnlineGifttime&&cc.isValid(this.m_labOnlineGifttime)&&(n=S.default.getParamsInt(w.OnlineKeys.online_gift_show_lv,v.default.baseMinOnlineGiftlv),_.default.isOnlineGift&&f.default.I.m_curlevel>=n&&0<b.DataMgr.User.CurOnlinegiftNeedTime?(this.updategiftstate(),0<b.DataMgr.User.OnlineGiftNowTime?(this.m_labOnlineGifttime.node.parent.active=!0,(e=this.m_labOnlineGifttime.node.parent.getChildByName("get")).active&&(e.active=!1),this.m_labOnlineGifttime.node.active=!0,this.m_labOnlineGifttime.string=M.default.getFormatBySecond(Math.floor(b.DataMgr.User.OnlineGiftNowTime),3),b.DataMgr.User.onlinetime+=t):((e=this.m_labOnlineGifttime.node.parent.getChildByName("get")).active||(e.active=!0),this.m_labOnlineGifttime.node.active=!1)):this.m_labOnlineGifttime.node.parent.active&&(this.m_labOnlineGifttime.node.parent.active=!1))},T.prototype.checkOpen=function(){var t=S.default.getParamsInt(w.OnlineKeys.online_gift_show_lv,v.default.baseMinOnlineGiftlv);_.default.isOnlineGift&&b.DataMgr.User.CurLevel>=t&&0<b.DataMgr.User.CurOnlinegiftNeedTime&&b.DataMgr.User.OnlineGiftNowTime<=0&&(_.default.s_isCloseOnlineGift||this.isOpenOnlineGift||(this.isOpenOnlineGift=!0,f.default.I.addPopwinList(P.default,{})))},T.prototype.unlock=function(){var t=this;p.AudioMgr.playSound(d.AudioEnum.function_unlock),b.DataMgr.User.onlinetime=60,this.isOpenOnlineGift||(this.isOpenOnlineGift=!0,f.default.I.addPopwinList(P.default,{callback:function(){t.m_labOnlineGifttime.node.parent.active=!0,m.default.playAnim(t.m_labOnlineGifttime.node.parent,"anim_reward_unlock")}}))},T.prototype.updategiftstate=function(){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return t=!(0<b.DataMgr.User.OnlineGiftNowTime),this.iscangetreward==t?[3,3]:(this.iscangetreward=t)?(this.m_labOnlineGifttime.node.parent.getChildByName("invite_light").active=!0,this.m_labOnlineGifttime.node.parent.getChildByName("light").active=!0,[this.m_labOnlineGifttime.node.parent.getChildByName("gift1").getChildByName("gift").getComponent(h.default).max=4,y.default.wait(6e4)]):[3,2];case 1:return e.sent(),cc.isValid(this.m_labOnlineGifttime)?(this.m_labOnlineGifttime.node.parent.getChildByName("invite_light").active=!1,this.m_labOnlineGifttime.node.parent.getChildByName("light").active=!1,[3,3]):[2];case 2:this.m_labOnlineGifttime.node.parent.getChildByName("invite_light").active=!1,this.m_labOnlineGifttime.node.parent.getChildByName("light").active=!1,this.m_labOnlineGifttime.node.parent.getChildByName("gift1").getChildByName("gift").getComponent(h.default).max=30,e.label=3;case 3:return[2]}})})},T.prototype.onOnlinegiftReward=function(){p.AudioMgr.button(),0<b.DataMgr.User.OnlineGiftNowTime?_.default.showTip("\u518d\u591a\u73a9\u4e00\u4f1a\u5427\uff0c\u5728\u7ebf\u65f6\u95f4\u8fd8\u4e0d\u591f\u54e6"):S.default.dispatch(w.ShareKeys.onlinegift,{success:this.handlegetgiftreward,fail:function(){},context:this})},T.prototype.handlegetgiftreward=function(){var t=[(e=b.DataMgr.Config.getRandomPackReward())[0],e[1]],e=e[2];A.ViewMgr.openPopwin(C.default,{data:{diamond:e,props:t}}),b.DataMgr.User.reqOnlineReward()},s([o(cc.Label)],T.prototype,"m_labOnlineGifttime",void 0),i=s([i],T),a.default=i,cc._RF.pop()},{}],TopPropTip:[function(t,e,n){"use strict";cc._RF.push(e,"51dd2IjkzlJ+Kf3XG+m0/n8","TopPropTip");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("AudioMgr"),u=i("BattleMgr"),d=i("Action"),p=i("Enum");function h(){var t=null!==c&&c.apply(this,arguments)||this;return t.nPropTip=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(h,c=cc.Component),h.prototype.initInfo=function(){},h.prototype.hideTip=function(){var t=this;cc.isValid(this.node)&&d.default.playAddAnim(this.node,"anim_prop_out").then(function(){return t.node.active=!1})},h.prototype.showTip=function(t){this.node.active=!0,d.default.playAddAnim(this.node,"anim_prop_enter"),t===p.PropsType.Hammer?d.default.playAddAnim(this.nPropTip,"anim_prop_hammer"):d.default.playAddAnim(this.nPropTip,"anim_prop_colorball")},h.prototype.onPropCancel=function(){l.AudioMgr.button(),u.default.I.oncancelItem()},s([o(cc.Node)],h.prototype,"nPropTip",void 0),i=s([i],h),a.default=i,cc._RF.pop()},{}],TopRedPacket:[function(t,e,n){"use strict";cc._RF.push(e,"37879LEZCxH+ZRlqs04trlN","TopRedPacket");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("ViewMgr"),p=i("Water"),h=i("Action"),f=i("Display"),m=i("DataMgr"),g=i("DateUtils"),_=i("BattleMgr"),y=i("AudioMgr"),v=i("PoolMgr"),b=i("CheckTools"),w=i("RandomUtils"),S=i("LoaderMgr"),M=i("ExchangePopwin"),C=i("RedPacketPopwin");function P(){var t=null!==u&&u.apply(this,arguments)||this;return t.spriteBarBg=null,t.spriteBarRange=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(P,u=cc.Component),P.prototype.onLoad=function(){this.node.active=b.default.IsRedPacketOpen},P.prototype.initInfo=function(t,e){var n=this;void 0===t&&(t=!1),void 0===e&&(e=!1);var i=m.DataMgr.User.RedPocketData.integral+this.getAllTempintegrals(),o=Math.min(1,i/5e5);cc.tween(this.spriteBarBg).to(.3,{fillRange:o}).call(function(){var e;t&&((e=n.spriteBarRange).fillRange=0,e.node.parent.active=!0,e.node.parent.getComponent(cc.Animation).play("anim_redlight"),cc.tween(e).to(25/60,{fillRange:o}).start())}).start(),e&&this.checkOpenFirst()},P.prototype.addAction=function(t){return c(this,void 0,void 0,function(){var e,n=this;return l(this,function(i){switch(i.label){case 0:if(!b.default.IsRedPacketOpen)return[2];if(!(0<(e=m.DataMgr.Config.getRedPacketRandomintegral())))return[3,4];m.DataMgr.User.reqAddRedPacket([{v:e,t:g.default.now}]).then(function(){return n.initInfo(!1,!1)}),e=0,i.label=1;case 1:return e<5?(this.playRedPacketAnim(t,e),[4,p.default.wait(5/60*1e3)]):[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},P.prototype.addFirst=function(){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:if(!b.default.IsRedPacketOpen)return[2];if(3e5<=(t=m.DataMgr.User).RedPocketData.integral)return[2];t.reqAddRedPacket([{v:3e5,t:g.default.now}]),t=0,e.label=1;case 1:return t<5?(this.playRedPacketAnim(null,t),[4,p.default.wait(5/60*1e3)]):[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},P.prototype.checkOpenFirst=function(){b.default.IsRedPacketOpen&&(3e5<=m.DataMgr.User.RedPocketData.integral||(b.default.IsNewRedPacketUIOpen?_.default.I.addPopwinList(C.default,{},!1):this.addFirst()))},P.prototype.getAllTempintegrals=function(){return 0},P.prototype.playRedPacketAnim=function(t,e){var n=this;return new Promise(function(i){S.LoaderMgr.loadPrefabWithUrl("prefab/common/redpacket_fly").then(function(o){var a=v.PoolMgr.getPrefab(o),r=_.default.I.node;a.active=!0,a.parent=r,a.position=t||cc.v2(0,0);var s=a.position,c=f.default.getTargetPos(n.node,r).sub(a.position).mag()/1e3;o=f.default.getTargetPos(n.node,r),r=f.default.getEndPointByTrigonometric(w.default.random(-90,100),s,o),h.default.bezierwitheasing(a,1,s,r,o,c).then(function(){v.PoolMgr.putNode(a),n.node.getComponent(cc.Animation).play(),0==e&&n.initInfo(!0,!1)}),h.default.playAnim(a,"anim_redpacket_fly").then(function(){return i(null)})})})},P.prototype.onRedPacket=function(){y.AudioMgr.button(),d.ViewMgr.openPopwin(M.default)},s([o(cc.Sprite)],P.prototype,"spriteBarBg",void 0),s([o(cc.Sprite)],P.prototype,"spriteBarRange",void 0),i=s([i],P),a.default=i,cc._RF.pop()},{}],TopRightBtns:[function(t,e,n){"use strict";cc._RF.push(e,"895fbgasolIpaSwP1ZkxUsT","TopRightBtns");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=i("ViewMgr"),p=i("Water"),h=i("Action"),f=i("DataMgr"),m=i("BattleMgr"),g=i("SDKEnums"),_=i("Enum"),y=i("AudioMgr"),v=i("ComPointTip"),b=i("PointMgr"),w=i("SDKAnalytics"),S=i("ActivePopwin"),M=i("MissionPopwin");function C(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_BtnChallenge=null,t.m_Unlockbg=null,t.comPointTipArr=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(C,u=cc.Component),C.prototype.start=function(){this.addPoint()},C.prototype.onDestroy=function(){this.removePoint()},C.prototype.initInfo=function(){},C.prototype.animLvUp=function(){return h.default.playAnim(this.node.getChildByName("checkpoint"),"anim_game_lvup")},C.prototype.unlockChanllenge=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(e){switch(e.label){case 0:return this.m_Unlockbg.active=!0,h.default.playAnim(this.m_BtnChallenge,"anim_game_challengeUp5").then(function(){h.default.playAnim(t.node.getChildByName("active"),"anim_btn_active_in")}),[4,p.default.wait(4400)];case 1:return e.sent(),this.m_Unlockbg.active=!1,[4,p.default.wait(500)];case 2:return e.sent(),m.default.I.sdkEventWithKey(g.EventKeys.Exp5_classicModeAniFin),[2]}})})},C.prototype.addPoint=function(){b.PointMgr.register([{type:_.ModuleType.TaskList,comps:[this.comPointTipArr[0]]},{type:_.ModuleType.Activity,comps:[this.comPointTipArr[1]]}])},C.prototype.removePoint=function(){b.PointMgr.unregister([{type:_.ModuleType.TaskList,comps:[this.comPointTipArr[0]]},{type:_.ModuleType.Activity,comps:[this.comPointTipArr[1]]}])},C.prototype.onJumpActive=function(){y.AudioMgr.button(),m.default.I.m_IsPassing||(f.DataMgr.Point.updatePoint(_.ModuleType.Activity),d.ViewMgr.openPopwin(S.default))},C.prototype.onJumpTask=function(){var t;y.AudioMgr.button(),m.default.I.m_IsPassing||(w.default.event(g.EventKeys.mission_button_tap,""),0<(t=f.DataMgr.Missions.isHadRewardMission())?(t=f.DataMgr.Missions.getMissionDBById(t).time_type,m.default.I.addPopwinListForceOpen(M.default,{tab:t-1})):f.DataMgr.Missions.checkisFinishDaily()?m.default.I.addPopwinListForceOpen(M.default,{tab:1}):m.default.I.addPopwinListForceOpen(M.default,{tab:0}))},s([o(cc.Node)],C.prototype,"m_BtnChallenge",void 0),s([o(cc.Node)],C.prototype,"m_Unlockbg",void 0),s([o(v.default)],C.prototype,"comPointTipArr",void 0),i=s([i],C),a.default=i,cc._RF.pop()},{}],TopRightGifts:[function(t,e,n){"use strict";cc._RF.push(e,"04ed2MvsxdPKb6Q83LXMwSY","TopRightGifts");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d=o("Action"),p=o("Display"),h=o("BallBuff"),f=o("BattleMgr"),m=o("UIchooseItem"),g=o("CoinGiftPopwin");function _(){return null!==u&&u.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(_,u=cc.Component),_.prototype.onLoad=function(){var t=this;this.node.children.forEach(function(e){e.active=!1,e.on("click",function(){e.active=!1,t.hidegift(e),p.default.isCoinBuff?f.default.I.addPopwinListForceOpen(g.default,!0):f.default.I.addPopwinList(m.default,{items:t.getRandomItem()})})})},_.prototype.fly=function(t,e,n){return c(this,void 0,void 0,function(){var i,o,a,r,s=this;return l(this,function(){return n.parent=f.default.I.node,n.active=!1,n.position=t,n.getComponent(cc.Animation).enabled=!1,d.default.playAnim(n,"anim_ball_buff0"),e.parent=f.default.I.node,e.active=!0,e.position=t,e.getComponent(cc.Animation).enabled=!1,d.default.playAnim(e,"anim_ball_buff0"),i=this.getgiftpos(),o=p.default.getTargetPos(i,f.default.I.node),a=p.default.getEndPointByTrigonometric(90,t,o),r=o.sub(t).mag()/500,!f.default.I.isNewPlayer()&&p.default.isCoinBuff&&6==p.default.s_CoinGiftFlagtimes?(n.active=!1,e.active=!1,f.default.I.addPopwinList(g.default,{isforce:!0,callback:function(){n.active=!0,e.destroy(),d.default.bezier(n,1,t,a,o,r).then(function(){n.destroy(),s.addGift()})}},!0)):f.default.I.isNewPlayer()||0!=p.default.s_isclosegift?!f.default.I.isNewPlayer()&&0==p.default.s_iscloseCoingift&&p.default.isCoinBuff?(n.active=!1,e.active=!1,f.default.I.addPopwinList(g.default,{isforce:!1,callback:function(){n.active=!0,e.destroy(),d.default.bezier(n,1,t,a,o,r).then(function(){n.destroy(),s.addGift()})}},!0)):(n.destroy(),d.default.bezier(e,1,t,a,o,r).then(function(){e.destroy(),s.addGift()})):(n.active=!1,e.active=!1,f.default.I.addPopwinList(m.default,{items:this.getRandomItem(),callback:function(){p.default.isCoinBuff?(n.active=!0,e.destroy(),d.default.bezier(n,1,t,a,o,r).then(function(){n.destroy(),s.addGift()})):(e.active=!0,n.destroy(),d.default.bezier(e,1,t,a,o,r).then(function(){e.destroy(),s.addGift()}))}})),[2]})})},_.prototype.hideAll=function(){this.node.children.forEach(function(t,e){0!=e&&(t.active=!1,t.getComponent(cc.Animation).stop(),t.y=51.5-115*(e-1),(e=t.getChildByName("gift_img").getComponent(h.default))&&e.stopAnim(),(t=t.getChildByName("coin_img").getComponent(h.default))&&t.stopAnim())})},_.prototype.getRandomItem=function(){var t=[0,1,2];return t.sort(function(){return.5<Math.random()?-1:1}),t},_.prototype.getgiftpos=function(){if(0!=this.node.children[1].active&&0!=this.node.children[2].active&&0!=this.node.children[3].active)return this.hidegift(this.node.children[1]),this.node.children[3].active=!1,this.node.children[3];var t=null;return this.node.children.forEach(function(e,n){0!=n&&(t?0==e.active&&t.y<e.y&&(t=e):0==e.active&&(t=e))}),t},_.prototype.hidegift=function(t){this.node.children[0].active=!1,t.active=!1,t.parent=f.default.I.node,this.node.children.forEach(function(t,e){0!=e&&cc.tween(t).to(.2,{y:53+-117*(e-1)}).start()}),t.parent=this.node,t.y=-182},_.prototype.addGift=function(){return c(this,void 0,void 0,function(){var t,e,n=this;return l(this,function(){return 0==(t=this.getgiftpos()).active&&(t.getChildByName("hand").active=f.default.I.isNewPlayer(),this.node.children[0].active=f.default.I.isNewPlayer(),t.active=!0,t.children[0].children[0].getComponent(cc.Sprite).fillRange=1,t.getComponent(cc.Animation).stop(),e=void 0,(e=p.default.isCoinBuff?(d.default.playAnim(t,"anim_gift_time1").then(function(){n.hidegift(t)}),t.getChildByName("coin_img").getComponent(h.default)):(d.default.playAnim(t,"anim_gift_time").then(function(){n.hidegift(t)}),t.getChildByName("gift_img").getComponent(h.default)))&&e.playAnim()),[2]})})},o=s([o],_),a.default=o,cc._RF.pop()},{}],TopTaskTip:[function(t,e,n){"use strict";cc._RF.push(e,"9aee6Y2gq1EDKip6A2Hw5SU","TopTaskTip");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=i("Action"),u=i("DataMgr"),d=i("BattleMgr"),p=i("Enum"),h=i("SDKEnums"),f=i("SDKAnalytics"),m=i("MissionPopwin"),g=i("MissionModel"),_=i("ImageLabelNew");function y(){var t=null!==c&&c.apply(this,arguments)||this;return t.nTaskNode=null,t.txtDailyNum=null,t.txtCoinNum=null,t.txtWord=null,t}i=(o=cc._decorator).ccclass,o=o.property,r(y,c=cc.Component),y.prototype.start=function(){var t=d.default.I.node.getChildByName("top").getComponent(cc.Widget).top;this.node.getComponent(cc.Widget).top=t},y.prototype.initInfo=function(){},y.prototype.hideTip=function(){cc.isValid(this.node)&&(this.node.active=!1)},y.prototype.showTip=function(t){var e=this;u.DataMgr.Point.updatePoint(p.ModuleType.TaskList);var n=u.DataMgr.Missions,i=t.detail,o=n.getMissionDBById(i);this.jumpTask=o,t=this.nTaskNode.getComponent(cc.Animation),o.time_type==g.MissionType.Daily?(a=n.getUserDailyMissionData(i),t.play("anim_gametask_daily"),this.txtDailyNum.setText("+"+o.actdegree_num_add)):(a=n.getUserMainMissionData(i),t.play("anim_gametask_life"),this.txtCoinNum.setText("+"+o.coins_num_add));var a=o.count_need_num[Math.min(a.index,o.count_need_num.length-1)];0<(o=o.mission_name).indexOf("n")&&(o=o.split("n")[0]+a+o.split("n")[1]),this.txtWord.string=o,this.node.active=!0,l.default.playAnim(this.node,"anim_task_tip").then(function(){cc.isValid(e.node)&&(e.node.active=!1)}),f.default.event(h.EventKeys.task_fin_top_tip_show,"")},y.prototype.onJumpTask=function(){var t=d.default.I;t.m_IsPassing||(this.node.active=!1,t.addPopwinList(m.default,{tab:this.jumpTask.time_type-1}),f.default.event(h.EventKeys.task_fin_top_tip_tap,""))},s([o(cc.Node)],y.prototype,"nTaskNode",void 0),s([o(_.default)],y.prototype,"txtDailyNum",void 0),s([o(_.default)],y.prototype,"txtCoinNum",void 0),s([o(cc.Label)],y.prototype,"txtWord",void 0),i=s([i],y),a.default=i,cc._RF.pop()},{}],TopWrap:[function(t,e,n){"use strict";cc._RF.push(e,"54ead3WWgBK9qUcvLh5YBHz","TopWrap");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p,h=i("TopLvBar"),f=i("TopCombon"),m=i("TopTaskTip"),g=i("TopDiamond"),_=i("TopLeftBtns"),y=i("TopRightBtns"),v=i("TopRedPacket"),b=i("PoolMgr"),w=i("LoaderMgr"),S=i("TopPropTip"),M=i("TopRightGifts"),C=i("TopMelon"),P=i("CheckTools"),A=i("TopCPSEntry"),T=cc._decorator;function E(){var t,e=p.call(this)||this;return e.nTopBar=null,e.nCombon=null,e.nDiamond=null,e.nLeftBtns=null,e.nRightBtns=null,e.nRedpacket=null,e.nAllGifts=null,e.nMelon=null,e.comLvBar=null,e.comCombon=null,e.comTaskTip=null,e.comPropTip=null,e.comDiamond=null,e.comAllGits=null,e.comLeftBtns=null,e.comCpsEntry=null,e.comRightBtns=null,e.comRedpacket=null,e.comMelon=null,e.loadState=((t={})[u.LvBar]=d.Default,t[u.Combon]=d.Default,t[u.TaskTip]=d.Default,t[u.Diamond]=d.Default,t[u.AllGifts]=d.Default,t[u.LeftBtns]=d.Default,t[u.CPSEntry]=d.Default,t[u.RightBtns]=d.Default,t[u.Redpacket]=d.Default,t[u.Melon]=d.Default,t),e}o=T.ccclass,i=T.property,(T=u=u||{})[T.LvBar=0]="LvBar",T[T.Combon=1]="Combon",T[T.Diamond=2]="Diamond",T[T.TaskTip=3]="TaskTip",T[T.PropTip=4]="PropTip",T[T.AllGifts=5]="AllGifts",T[T.LeftBtns=6]="LeftBtns",T[T.CPSEntry=7]="CPSEntry",T[T.RightBtns=8]="RightBtns",T[T.Redpacket=9]="Redpacket",T[T.Melon=10]="Melon",(T=d=d||{})[T.Default=0]="Default",T[T.Failure=1]="Failure",T[T.Loading=1]="Loading",T[T.Success=2]="Success",r(E,p=cc.Component),E.prototype.start=function(){window.TopWrap=this},E.prototype.actionAnimLvup=function(){var t=this;return new Promise(function(e,n){t.checkTopLvBar().then(function(){t.comLvBar.animLvUp().then(function(){return e(1)}).catch(function(){return n()})})})},E.prototype.initTopLvBar=function(){var t=this;this.checkTopLvBar().then(function(){return t.comLvBar.initInfo()})},E.prototype.checkTopLvBar=function(){var t=this;return cc.isValid(this.comLvBar)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.LvBar).then(function(n){t.comLvBar||(n=b.PoolMgr.getPrefab(n,t.nTopBar),t.comLvBar=n.getComponent(h.default)),e(1)}).catch(function(){return n()})})},E.prototype.acionAnimCombon=function(){var t=this;this.checkCombon().then(function(){return t.comCombon.animCombon()})},E.prototype.initTopCombon=function(){this.checkCombon()},E.prototype.checkCombon=function(){var t=this;return cc.isValid(this.comCombon)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.Combon).then(function(n){t.comCombon||(n=b.PoolMgr.getPrefab(n,t.nCombon),t.comCombon=n.getComponent(f.default)),e(1)}).catch(function(){return n()})})},E.prototype.showTaskTip=function(t){var e=this;this.checkTaskTip().then(function(){return e.comTaskTip.showTip(t)})},E.prototype.hideTaskTip=function(){cc.isValid(this.comTaskTip)&&this.comTaskTip.hideTip()},E.prototype.checkTaskTip=function(){var t=this;return cc.isValid(this.comTaskTip)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.TaskTip).then(function(n){t.comTaskTip||(n=b.PoolMgr.getPrefab(n,t.node.parent),t.comTaskTip=n.getComponent(m.default)),e(1)}).catch(function(){return n()})})},E.prototype.showPropTip=function(t){var e=this;return new Promise(function(n){e.checkPropTip().then(function(){e.comPropTip.showTip(t),n(1)}).catch(function(){return n(0)})})},E.prototype.hidePropTip=function(){cc.isValid(this.comPropTip)&&this.comPropTip.hideTip()},E.prototype.checkPropTip=function(){var t=this;return cc.isValid(this.comPropTip)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.PropTip,!1).then(function(n){t.comPropTip||(n=b.PoolMgr.getPrefab(n,t.node.parent),t.comPropTip=n.getComponent(S.default)),e(1)}).catch(function(){return n()})})},E.prototype.getDiamondNode=function(){var t=this;return new Promise(function(e,n){t.checkDiamond().then(function(){return e(t.comDiamond.node)}).catch(function(){return n()})})},E.prototype.actionAddDiamond=function(){var t=this;return new Promise(function(e,n){t.checkDiamond().then(function(){t.comDiamond.animAdd().then(function(){return e(1)}).catch(function(){return n()})})})},E.prototype.initTopDiamond=function(){var t=this;this.checkDiamond().then(function(){return t.comDiamond.initInfo()})},E.prototype.checkDiamond=function(){var t=this;return cc.isValid(this.comDiamond)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.Diamond).then(function(n){t.comDiamond||(n=b.PoolMgr.getPrefab(n,t.nDiamond),t.comDiamond=n.getComponent(g.default)),e(1)}).catch(function(){return n()})})},E.prototype.hideAllGifts=function(){var t=this;this.checkAllGifts().then(function(){return t.comAllGits.hideAll()})},E.prototype.flyGift=function(t,e,n){var i=this;this.checkAllGifts().then(function(){return i.comAllGits.fly(t,e,n)})},E.prototype.checkAllGifts=function(){var t=this;return cc.isValid(this.comAllGits)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.AllGifts).then(function(n){t.comAllGits||(n=b.PoolMgr.getPrefab(n,t.nAllGifts),t.comAllGits=n.getComponent(M.default)),e(1)}).catch(function(){return n()})})},E.prototype.checkOnlineGift=function(){var t=this;this.checkLeftBtns().then(function(){return t.comLeftBtns.checkGift()})},E.prototype.unlockOnlineGift=function(){var t=this;this.checkLeftBtns().then(function(){return t.comLeftBtns.unlockGift()})},E.prototype.setOpenOnlineGift=function(t){this.comLeftBtns&&this.comLeftBtns.setOnlineGift(t)},E.prototype.refreshMenuHead=function(){this.comLeftBtns&&this.checkLeftBtns()},E.prototype.initLeftBtns=function(){var t=this;this.checkLeftBtns().then(function(){return t.comLeftBtns.initInfo()})},E.prototype.checkLeftBtns=function(){var t=this;return cc.isValid(this.comLeftBtns)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.LeftBtns).then(function(n){t.comLeftBtns||(n=b.PoolMgr.getPrefab(n,t.nLeftBtns),t.comLeftBtns=n.getComponent(_.default)),e(1)}).catch(function(){return n()})})},E.prototype.acionAddRedPacket=function(t){return c(this,void 0,void 0,function(){var e=this;return l(this,function(){return[2,this.checkRedPacket().then(function(){return e.comRedpacket.addAction(t)})]})})},E.prototype.addFirstRedPacket=function(){return c(this,void 0,void 0,function(){var t=this;return l(this,function(){return[2,this.checkRedPacket().then(function(){return t.comRedpacket.addFirst()})]})})},E.prototype.initRedpacket=function(){var t=this;this.checkRedPacket().then(function(){return t.comRedpacket.initInfo(!1,!0)})},E.prototype.checkRedPacket=function(){var t=this;return cc.isValid(this.comRedpacket)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.Redpacket).then(function(n){t.comRedpacket||(n=b.PoolMgr.getPrefab(n,t.nRedpacket),t.comRedpacket=n.getComponent(v.default)),e(1)}).catch(function(){return n()})})},E.prototype.initRightBtns=function(){var t=this;this.checkRightBtns().then(function(){return t.comRightBtns.initInfo()})},E.prototype.unlockChanllenge=function(){var t=this;this.checkRightBtns().then(function(){return t.comRightBtns.unlockChanllenge()})},E.prototype.checkRightBtns=function(){var t=this;return cc.isValid(this.comRightBtns)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.RightBtns).then(function(n){t.comRightBtns||(n=b.PoolMgr.getPrefab(n,t.nRightBtns),t.comRightBtns=n.getComponent(y.default)),e(1)}).catch(function(){return n()})})},E.prototype.initMelonBtns=function(){var t=this;P.default.IswatermelonOpen&&this.checkMelonBtn().then(function(){return t.comMelon.initInfo()})},E.prototype.checkMelonBtn=function(){var t=this;return cc.isValid(this.comMelon)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.Melon).then(function(n){t.comMelon||(n=b.PoolMgr.getPrefab(n,t.nMelon),t.comMelon=n.getComponent(C.default)),e(1)}).catch(function(){return n()})})},E.prototype.initCpsEntry=function(){var t=this;this.checkCpsEntry().then(function(){return t.comCpsEntry.initInfo()})},E.prototype.actionOpenCps=function(){var t=this;return new Promise(function(e){t.checkCpsEntry().then(function(){return t.comCpsEntry.actionOpen().then(function(){return e(1)}).catch(function(){return e(1)})}).catch(function(){return e(1)})})},E.prototype.checkCpsEntry=function(){var t=this;return cc.isValid(this.comCpsEntry)?Promise.resolve(1):new Promise(function(e,n){t.loadPrefab(u.CPSEntry).then(function(n){t.comCpsEntry||(n=b.PoolMgr.getPrefab(n,t.nMelon),t.comCpsEntry=n.getComponent(A.default)),e(1)}).catch(function(){return n()})})},E.prototype.loadPrefab=function(t,e){var n,i=this;switch(void 0===e&&(e=!0),t){case u.LvBar:n="TopLvBar";break;case u.Melon:n="TopMelon";break;case u.Combon:n="TopCombon";break;case u.TaskTip:n="TopTaskTip";break;case u.PropTip:n="TopPropTip";break;case u.Diamond:n="TopDiamond";break;case u.AllGifts:n="TopRightGifts";break;case u.LeftBtns:n="TopLeftBtns";break;case u.CPSEntry:n="TopCpsEntry";break;case u.RightBtns:n="TopRightBtns";break;case u.Redpacket:n="TopRedpacket"}return this.loadState[t]=d.Loading,new Promise(function(o,a){w.LoaderMgr.loadPrefabWithUrl("prefab/2048/"+n).then(function(e){cc.isValid(i.node)?(i.loadState[t]=d.Success,o(e)):(i.loadState[t]=d.Failure,a())}).catch(function(){i.loadState[t]=d.Failure,e?i.loadPrefab(t):a()})})},s([i(cc.Node)],E.prototype,"nTopBar",void 0),s([i(cc.Node)],E.prototype,"nCombon",void 0),s([i(cc.Node)],E.prototype,"nDiamond",void 0),s([i(cc.Node)],E.prototype,"nLeftBtns",void 0),s([i(cc.Node)],E.prototype,"nRightBtns",void 0),s([i(cc.Node)],E.prototype,"nRedpacket",void 0),s([i(cc.Node)],E.prototype,"nAllGifts",void 0),s([i(cc.Node)],E.prototype,"nMelon",void 0),o=s([o],E),a.default=o,cc._RF.pop()},{}],TouchBlock:[function(t,e,n){"use strict";cc._RF.push(e,"73dbevPH19KxYqwnoQHsDxz","TouchBlock");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0}),i=(c=cc._decorator).ccclass;var s,c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.loadingNode=null,t.txtDesc=null,t}a(l,s=cc.Component),l.prototype.onload=function(){this.loadingNode.active=!1,this.txtDesc.string=""},l.prototype.showLoading=function(t){this.loadingNode.active=t},l.prototype.showDesc=function(t){this.txtDesc.string=t},r([c(cc.Node)],l.prototype,"loadingNode",void 0),r([c(cc.Label)],l.prototype,"txtDesc",void 0),i=r([i],l),o.default=i,cc._RF.pop()},{}],UIRevive2:[function(t,e,n){"use strict";cc._RF.push(e,"298e0XFkSRGT7But2SS66ZH","UIRevive2");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("BattleMgr2"),p=i("ShareVideo"),h=i("SDKEnums"),f=i("SDKTools"),m=i("BasePopwin"),g=i("OnlineMgr"),_=i("EventEnum"),y=i("WXApi"),v=i("AudioMgr"),b=i("Display");function w(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_labtime=null,t.m_time=10,t.m_isstop=!1,t.m_btnback=null,t.m_sharebtn=null,t.maxttime=10,t.isShowBg=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(w,c=m.default),(l=w).OpenUIRevive=function(){d.default.I.m_IsPassing=!0,u.ViewMgr.openPopwin(l)},Object.defineProperty(w.prototype,"BannerOpen",{get:function(){return g.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),w.prototype.initvideoBtn=function(){this.m_sharebtn.updateWith(h.ShareKeys.Relive)},w.prototype.onupdatesharestate=function(){c.prototype.onupdatesharestate.call(this),this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?this.m_sharebtn.update2shareforce():this.initvideoBtn()},w.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.initvideoBtn(),this.m_time=10,this.m_isstop=!1,this.m_progress.fillRange=1,this.m_sharebtn.node.active=!d.default.I.IsCanReviveTimesMax(),d.default.I.IsCanReviveTimesMax()?(this.node.getComponent(cc.Animation).play("anim_revive_none"),this.m_time=5,this.maxttime=5):(this.node.getComponent(cc.Animation).play("anim_revive_have"),this.m_time=10,this.maxttime=10),y.default.I.showsideAD()},w.prototype.onclickgraybtn=function(){v.AudioMgr.button(),b.default.showTip("\u91cd\u65b0\u6311\u6218\uff0c\u518d\u63a5\u518d\u5389~")},w.prototype.onLoad=function(){var t=this;this.m_btnback=this.node.getChildByName("bottom_skip"),this.m_btnback.active=!1,this.m_btnRevive=this.node.getChildByName("btn").getChildByName("btn_y_big").getComponent(cc.Button),this.m_progress=this.node.getChildByName("bar").getComponent(cc.Sprite),this.m_btnRevive.node.on("click",function(){t.m_isstop=!0,f.default.dispatch(h.ShareKeys.resurgence_melon,{success:function(){d.default.I.revive(),u.ViewMgr.closePopwin(l)},fail:function(){t.m_isstop=!1},context:t})},this)},w.prototype.addEvent=function(){c.prototype.addEvent.call(this),f.default.bindEvent(_.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},w.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),f.default.removeEvent(_.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},w.prototype.setTime=function(){this.m_labtime&&(this.m_labtime.string=Math.round(this.m_time).toString()),this.m_progress&&(this.m_progress.fillRange=this.m_time/this.maxttime)},w.prototype.start=function(){},w.prototype.back=function(){u.ViewMgr.closePopwin(l,{anim:!1}).then(function(){d.default.I.GameOver()})},w.prototype.onClose=function(){c.prototype.onClose.call(this),d.default.I.m_IsPassing=!1,y.default.I.hidesideAD()},w.prototype.update=function(t){this.m_isstop||(this.m_time-=t,this.m_time<=0?this.m_isstop=!0:(this.m_time<=5&&(this.m_btnback.active=!0),this.setTime()))},w.PREFAB_PATH="prefab/panel/panel_revive2",s([o(cc.Label)],w.prototype,"m_labtime",void 0),s([o(p.default)],w.prototype,"m_sharebtn",void 0),i=l=s([i],w),a.default=i,cc._RF.pop()},{}],UIRevive:[function(t,e,n){"use strict";cc._RF.push(e,"3dd48ITf91FF51cQRFUSomR","UIRevive");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("BattleMgr"),p=i("ShareVideo"),h=i("SDKEnums"),f=i("SDKTools"),m=i("BasePopwin"),g=i("OnlineMgr"),_=i("EventEnum"),y=i("WXApi"),v=i("AudioMgr"),b=i("Display"),w=i("CheckTools");function S(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_labtime=null,t.m_time=10,t.m_isstop=!1,t.m_btnback=null,t.m_btnback2=null,t.m_sharebtn=null,t.m_graybtn=null,t.m_times=null,t.maxttime=10,t.isShowBg=!1,t}i=(o=cc._decorator).ccclass,o=o.property,r(S,c=m.default),(l=S).OpenUIRevive=function(){d.default.I.m_IsPassing=!0,u.ViewMgr.openPopwin(l)},Object.defineProperty(S.prototype,"BannerOpen",{get:function(){return g.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),S.prototype.initvideoBtn=function(){this.m_sharebtn.updateWith(h.ShareKeys.Relive)},S.prototype.onupdatesharestate=function(){c.prototype.onupdatesharestate.call(this),this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?this.m_sharebtn.update2shareforce():this.initvideoBtn()},S.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.initvideoBtn(),this.m_time=10,this.m_isstop=!1,this.m_btnback.active=d.default.I.IsCanReviveTimesMax(),this.m_progress.progress=1,this.m_graybtn.active=d.default.I.IsCanReviveTimesMax(),this.m_sharebtn.node.active=!d.default.I.IsCanReviveTimesMax(),this.m_btnback2.active=d.default.I.IsCanReviveTimesMax(),this.m_times.string=d.default.I.gethadReviveTimes().toString(),d.default.I.IsCanReviveTimesMax()?(this.node.getComponent(cc.Animation).play("anim_revive_none"),this.m_time=5,this.maxttime=5):(this.node.getComponent(cc.Animation).play("anim_revive_have"),this.m_time=10,this.maxttime=10),this.m_times.node.parent.active=d.default.I.gethadReviveTimes()<10,y.default.I.showsideAD()},S.prototype.onclickgraybtn=function(){v.AudioMgr.button(),b.default.showTip("\u91cd\u65b0\u6311\u6218\uff0c\u518d\u63a5\u518d\u5389~")},S.prototype.onLoad=function(){var t=this;this.m_btnback2=this.node.getChildByName("btn_popup_close"),this.m_btnback=this.node.getChildByName("bottom_skip"),this.m_btnback.active=!1,this.m_btnRevive=this.node.getChildByName("btn").getChildByName("btn_y_big").getComponent(cc.Button),this.m_progress=this.node.getChildByName("progress").getComponent(cc.ProgressBar),this.m_btnRevive.node.on("click",function(){t.m_isstop=!0,t.comShareToggle&&t.comShareToggle.node.active&&t.comShareToggle.isshare?f.default.dispatchType(h.ShareVideoType.Share,h.ShareKeys.Relive,{success:function(){w.default.s_sharefailforcetimes<f.default.getParamsInt(h.OnlineKeys.share_force_fail_times,2)?(w.default.s_sharefailforcetimes++,b.default.showTip("\u5206\u4eab\u5931\u8d25\uff0c\u6c42\u52a9\u7fa4\u53cb\u8bd5\u8bd5\u5427\uff5e")):(d.default.I.revive(),u.ViewMgr.closePopwin(l))},fail:function(){t.m_isstop=!1},context:t}):f.default.dispatch(h.ShareKeys.Relive,{success:function(){d.default.I.revive(),u.ViewMgr.closePopwin(l)},fail:function(){t.m_isstop=!1},context:t,branchId:"BCBgAAoXHx5d0z-m2Fkmoo"},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmop"})},this)},S.prototype.addEvent=function(){c.prototype.addEvent.call(this),f.default.bindEvent(_.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},S.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),f.default.removeEvent(_.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},S.prototype.setTime=function(){this.m_labtime&&(this.m_labtime.string=Math.round(this.m_time).toString()),this.m_progress&&(this.m_progress.progress=this.m_time/this.maxttime)},S.prototype.start=function(){},S.prototype.back=function(){u.ViewMgr.closePopwin(l,{anim:!1}).then(function(){d.default.I.doFailAni()})},S.prototype.onClose=function(){c.prototype.onClose.call(this),d.default.I.m_IsPassing=!1,y.default.I.hidesideAD()},S.prototype.update=function(t){this.m_isstop||(this.m_time-=t,this.m_time<=0?this.m_isstop=!0:(this.m_time<=5&&(this.m_btnback.active=!0,this.m_btnback2.active=!0),this.setTime()))},S.PREFAB_PATH="prefab/panel/panel_revive",s([o(cc.Label)],S.prototype,"m_labtime",void 0),s([o(p.default)],S.prototype,"m_sharebtn",void 0),s([o(cc.Node)],S.prototype,"m_graybtn",void 0),s([o(cc.Label)],S.prototype,"m_times",void 0),i=l=s([i],S),a.default=i,cc._RF.pop()},{}],UITips:[function(t,e,n){"use strict";cc._RF.push(e,"9ecb2aDKS9Fm6BaccOFcxK8","UITips");var i=t,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0});var s,c,l=i("ViewMgr"),u=i("BaseView"),d=i("LayerMgr");function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.isShowBg=!1,t.isModal=!0,t}i=cc._decorator.ccclass,a(p,s=u.default),(c=p).Show=function(t,e){l.ViewMgr.openPopwin(c,{data:{msg:t,delay:e=void 0===e?1:e},anim:!1})},p.prototype.onOpen=function(t){var e=this,n=t.data,i=n.msg;t=n.delay,(n=this.node.children[0].getChildByName("msg").getComponent(cc.Label)).string=i,300<=n.node.width?n.overflow=cc.Label.Overflow.RESIZE_HEIGHT:n.overflow=cc.Label.Overflow.NONE,this.doAnim(t).then(function(){return e.doclose()})},p.prototype.getLayer=function(){return d.Layer.Tips},p.prototype.doAnim=function(t){var e=this;return void 0===t&&(t=1),new Promise(function(n){var i=e.node;i.opacity=0,cc.tween(i).stop(),cc.tween(i).to(.2,{opacity:255},{easing:cc.easing.smooth}).delay(t).to(.2,{opacity:0},{easing:cc.easing.fade}).call(function(){return n()}).start()})},p.prototype.doclose=function(){l.ViewMgr.closePopwin(c)},p.PREFAB_PATH="prefab/common/tip",i=c=r([i],p),o.default=i,cc._RF.pop()},{}],UIchooseItem:[function(t,e,n){"use strict";cc._RF.push(e,"f9d1064VQ1CyovoKIRkSS/Q","UIchooseItem");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("ShareVideo"),p=i("SDKEnums"),h=i("SDKTools"),f=i("EventEnum"),m=i("BattleMgr"),g=i("OnlineMgr"),_=i("AudioMgr"),y=i("AudioEnum"),v=i("SDKAnalytics"),b=i("GetRewardPopWin"),w=i("Display"),S=i("BaseAnimPopwin"),M=i("DataMgr"),C=i("MissionModel"),P=i("WXApi"),A=i("CheckTools");function T(){var t=null!==c&&c.apply(this,arguments)||this;return t.m_Items=[],t.m_Icons=[],t.m_Names=[],t.m_sharebtns=[],t.time=0,t.testAB=0,t.m_ItemIds=[],t}i=(o=cc._decorator).ccclass,o=o.property,r(T,c=S.default),(l=T).prototype.onLoad=function(){var t=this;this.m_Items[0].getChildByName("btn").getChildByName("btn_challenge").on("click",function(){t.getItem(t.m_ItemIds[0],t.m_Items[0])},this)},T.prototype.start=function(){},Object.defineProperty(T.prototype,"BannerOpen",{get:function(){return g.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),T.prototype.update=function(t){0<=this.time&&(this.time+=t),2<=this.time&&(this.time=-1)},T.prototype.onupdatesharestate=function(){c.prototype.onupdatesharestate.call(this),this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?this.m_sharebtns.forEach(function(t){t.update2shareforce()}):this.m_sharebtns.forEach(function(t){t.updateWith(p.ShareKeys.BlockReward)})},T.prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.m_ItemIds=t.data.items,this.callback=t.data.callback,this.InitUI(),this.initReward(),P.default.I.showsideAD(),w.default.getViewOffset(),_.AudioMgr.playSound(y.AudioEnum.gift_notice),m.default.I.sdkEventWithKey(p.EventKeys.Exp2_1stLuckyChestShow)},T.prototype.addEvent=function(){c.prototype.addEvent.call(this),h.default.bindEvent(f.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},T.prototype.removeEvent=function(){c.prototype.removeEvent.call(this),h.default.removeEvent(f.EventEnum.TacticUpdate.toString(),this.onupdatesharestate,this)},T.prototype.InitUI=function(){this.testAB=1,v.default.event(p.EventKeys.TestPropB,p.EventFrom.prop);for(var t,e,n=0;n<this.m_Items.length;n++)1!=n&&2!=n&&(t=this.m_Items[n],e=this.m_ItemIds[n],t.getChildByName("img_hammer").getComponent(cc.Sprite).spriteFrame=this.m_Icons[e],e<=2?(t.getChildByName("lab").getChildByName("name").active=!0,t.getChildByName("lab").getChildByName("name").getComponent(cc.Sprite).spriteFrame=this.m_Names[e]):t.getChildByName("lab").getChildByName("name").active=!1,t.getChildByName("lab").getChildByName("des").getComponent(cc.Label).string=this.getDes(e))},T.prototype.initReward=function(){this.m_sharebtns.forEach(function(t){t.updateWith(p.ShareKeys.BlockReward)})},T.prototype.getItem=function(t,e){var n=this;0==this.testAB?v.default.event(p.EventKeys.TestvbA,p.EventFrom.prop):v.default.event(p.EventKeys.TestvbB,p.EventFrom.prop),this.comShareToggle&&this.comShareToggle.node.active&&this.comShareToggle.isshare?h.default.dispatchType(p.ShareVideoType.Share,p.ShareKeys.BlockReward,{success:function(){A.default.s_sharefailforcetimes<h.default.getParamsInt(p.OnlineKeys.share_force_fail_times,2)?(A.default.s_sharefailforcetimes++,w.default.showTip("\u5206\u4eab\u5931\u8d25\uff0c\u6c42\u52a9\u7fa4\u53cb\u8bd5\u8bd5\u5427\uff5e")):n.onSuccess(t,e)},context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmo-",branchDim:t.toString()},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmo_",wxgamebranchdim:t.toString()}):h.default.dispatch(p.ShareKeys.BlockReward,{success:function(){n.onSuccess(t,e)},context:this,branchId:"BCBgAAoXHx5d0z-m2Fkmo-",branchDim:t.toString()},{wxgamebranchid:"BCBgAAoXHx5d0z-m2Fkmo_",wxgamebranchdim:t.toString()})},T.prototype.onSuccess=function(t,e){M.DataMgr.Missions.addMissionProgress(C.MissionCheckType.GetItem,1),0==this.testAB?v.default.event(p.EventKeys.TestveA,p.EventFrom.prop):v.default.event(p.EventKeys.TestveB,p.EventFrom.prop),e.getChildByName("img_hammer"),3==t?v.default.event(p.EventKeys.Clear2,p.EventFrom.prop):4==t&&v.default.event(p.EventKeys.Clear4,p.EventFrom.prop),w.default.s_isclosegift=!1;var n=[0,[t,1]];u.ViewMgr.closePopwin(l).then(function(){m.default.I.removePopwinList(b.default,{diamond:n[0],props:n[1]})}).then(function(){})},T.prototype.getDes=function(t){return 0==t?"\u5408\u6210256\u4ee5\u5185\u4efb\u610f\u7403":1==t?"\u6253\u4e71\u6240\u6709\u7403\u7403\u5e76\u91cd\u65b0\u7ec4\u5408":2==t?"\u51fb\u788e\u4efb\u610f\u7403":3==t?"\u6d88\u9664\u6240\u6709\u76842":4==t?"\u6d88\u9664\u6240\u6709\u76844":""},T.prototype.onBack=function(){var t=this;u.ViewMgr.closePopwin(l).then(function(){w.default.s_isclosegift||(w.default.s_isclosegift=!0,t.callback&&t.callback.call(t)),m.default.I.removePopwinList()})},T.prototype.onClose=function(){c.prototype.onClose.call(this),P.default.I.hidesideAD(),m.default.I.sdkEventWithKey(p.EventKeys.Exp2_1stLuckyChestClose)},T.PREFAB_PATH="prefab/panel/panel_random",s([o(cc.Node)],T.prototype,"m_Items",void 0),s([o(cc.SpriteFrame)],T.prototype,"m_Icons",void 0),s([o(cc.SpriteFrame)],T.prototype,"m_Names",void 0),s([o(d.default)],T.prototype,"m_sharebtns",void 0),i=l=s([i],T),a.default=i,cc._RF.pop()},{}],UserBaseData:[function(t,e,n){"use strict";cc._RF.push(e,"4f11bsrTXBHjbtKpkL18hQH","UserBaseData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){this.id=0,this.gender=0,this.token="",this.openid="",this.uniqueid="",this.nickname="",this.sharecode="",this.avatar_url="",this.wxacode_img=""},cc._RF.pop()},{}],UserBaseModel:[function(t,e,n){"use strict";cc._RF.push(e,"bfdacOQs5BDAJOcETM81b4K","UserBaseModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("BaseModel"),c=i("LogUtils\u200b\u200b"),l=i("UserBaseData"),u=i("EventMgr"),d=i("EventEnum");function p(){return null!==r&&r.apply(this,arguments)||this}a(p,r=s.default),Object.defineProperty(p.prototype,"Data",{get:function(){return this.data||new l.default},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"ID",{get:function(){return this.Data.id},enumerable:!0,configurable:!0}),p.prototype.setData=function(t){this.data||(this.data=new l.default);try{var e="string"==typeof t?JSON.stringify(t):t;e.hasOwnProperty("user_id")&&(this.data.id=e.user_id),e.hasOwnProperty("user_gender")&&(this.data.gender=e.user_gender),e.hasOwnProperty("user_uniqueid")&&(this.data.uniqueid=e.user_uniqueid),e.hasOwnProperty("user_nickname")&&(this.data.nickname=e.user_nickname,u.EventMgr.emit(d.EventEnum.UpdateAvatar,"name")),e.hasOwnProperty("user_openid")&&(this.data.openid=e.user_openid),e.hasOwnProperty("user_avatar_url")&&(this.data.avatar_url=e.user_avatar_url,u.EventMgr.emit(d.EventEnum.UpdateAvatar,"avatar")),e.hasOwnProperty("user_wxacode_img")&&(this.data.wxacode_img=e.user_wxacode_img),e.hasOwnProperty("user_token")&&(this.data.token=e.user_token)}catch(t){c.default.warn(JSON.stringify(t))}},Object.defineProperty(p.prototype,"UserOpenId",{get:function(){return this.Data.openid},enumerable:!0,configurable:!0}),p.prototype.clearData=function(){this.data=new l.default},p.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(p,"I",{get:function(){return this._instance||(this._instance=new p)},enumerable:!0,configurable:!0}),p._instance=null,a=p,o.default=a,cc._RF.pop()},{}],UserData:[function(t,e,n){"use strict";cc._RF.push(e,"880c23tFlREdbLaaFMUDQtn","UserData");var i=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var a=i("Const");i=function(){this.dataVersion=0,this.battleType=1,this.curskin=0,this.hadskins=[],this.hadLogos=[],this.skills=[],this.skinvideotimes=0,this.fixDiamondflag=!1,this.eventkeys=[],this.homeguide=!1,this.power=0,this.usermissions=[],this.open_cps_quan=0,this.w_historyData=null,this.w_teachball=0,this.w_bestscore=0,this.w_curscore=0,this.changetimes=0,this.watermelonnum=0,this.isshowedmission=!1,this.redpacketdata={log:[],integral:0},this.iscollectshowed=!1,this.noticeversion=0,this.showcollecttiptimes=0,this.actinvitetime=0,this.signday=0,this.usermissions=[],this.power=0,this.homeguide=!1,this.homestar=0,this.eventkeys=[],this.giftProgress=0,this.lastTime=0,this.maxScore=0,this.maxLevel=1,this.rewardLevel={},this.historyData=null,this.maxRecordDatas=[],this.mute=!1,this.vibrate=!0,this.overTeach=!1,this.diamond=0,this.money=0,this.moneyIndex=0,this.hasMoney=!1,this.dayGetMoney=0,this.grade=0,this.props={0:0,1:0,2:0},this.freeprops={0:0,1:0,2:0},this.dayFreeDiamondCount=0,this.dayShareRuleIndex={maxRecord:0,propBrick:0,revive:0,freeStar:0,wipeReward:0,share:0},this.dayShareTotal=0,this.chestNum=0,this.dayMoneyTip=!1,this.collect=!1,this.dayData={},this.wheel={ticket:a.default.MaxTicket,turn:0},this.vitality={hp:a.default.MaxHp,start:0,end:0},this.bestScore=0,this.level=1,this.exp=0,this.curScore=0,this.teachball=0,this.chestbaselv=0,this.battleType=1,this.isunlocklvModel=!1,this.isTouch=!1,this.newyearPopTimes=0,this.curskin=0,this.hadskins=[0],this.skinvideotimes=0,this.fixDiamondflag=!1,this.hadLogos=[],this.skills=[0,-1,-1],this.guides=[0],this.plots=[]},o.default=i,cc._RF.pop()},{}],UserExtData:[function(t,e,n){"use strict";cc._RF.push(e,"88140cBUiBH8JNgsvjMRiZG","UserExtData");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){this.id=0,this.level_count=0,this.gold=0,this.guide=0,this.channel=0,this.invite_uid=0,this.login_days=0,this.sign_days=0,this.sign_reward_num=0,this.reg_time=0,this.turn_reward_endtime=0,this.rich_profit_multiple=0,this.invite_counter=0,this.share_num=0,this.resurgence_button=0,this.user_rank=0,this.is_new=0,this.wxyx_icon_show=0},cc._RF.pop()},{}],UserExtModel:[function(t,e,n){"use strict";cc._RF.push(e,"954d2p9efxCerjAQXYj6B5i","UserExtModel");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("BaseModel"),c=i("LogUtils\u200b\u200b"),l=i("UserExtData");function u(){return null!==r&&r.apply(this,arguments)||this}a(u,r=s.default),Object.defineProperty(u.prototype,"Data",{get:function(){return this.data||new l.default},enumerable:!0,configurable:!0}),u.prototype.setData=function(t){this.data||(this.data=new l.default);try{var e="string"==typeof t?JSON.stringify(t):t;e.hasOwnProperty("user_id")&&(this.data.id=e.user_id),e.hasOwnProperty("user_gold")&&(e.user_gold,this.data.gold,this.data.gold=+e.user_gold),e.hasOwnProperty("user_guide")&&(this.data.guide=+e.user_guide),e.hasOwnProperty("user_channel")&&(this.data.channel=+e.user_channel),e.hasOwnProperty("user_invite_uid")&&(this.data.invite_uid=e.user_invite_uid),e.hasOwnProperty("user_sign_days")&&(this.data.sign_days=+e.user_sign_days),e.hasOwnProperty("user_share_num")&&(this.data.share_num=+e.user_share_num),e.hasOwnProperty("user_rank")&&(this.data.user_rank=+e.user_rank),e.hasOwnProperty("is_new")&&(this.data.is_new=+e.is_new)}catch(t){c.default.warn(JSON.stringify(t))}},u.prototype.clearData=function(){this.data=new l.default},u.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(u,"I",{get:function(){return this._instance||(this._instance=new u)},enumerable:!0,configurable:!0}),u._instance=null,a=u,o.default=a,cc._RF.pop()},{}],UserModel:[function(t,e,n){"use strict";cc._RF.push(e,"fbed8n070VBo4pk3LF8+KIE","UserModel");var i=t,o=n,a=__EXTENDS__(),r=function(){return(r=Object.assign||__ASSIGN__).apply(this,arguments)},s=__AWAITER__,c=__GENERATOR__;Object.defineProperty(o,"__esModule",{value:!0});var l,u=i("BaseModel"),d=i("DataMgr"),p=i("UserData"),h=i("Enum"),f=i("DateUtils"),m=i("EventEnum"),g=i("EventMgr"),_=i("RecordData"),y=i("Const"),v=i("SDKAnalytics"),b=i("OnlineMgr"),w=i("MapConfig"),S=i("ArrayUtils"),M=i("UserExtModel"),C=i("AudioMgr"),P=i("AudioEnum"),A=i("Display"),T=i("SDKEnums");function E(){var t=l.call(this)||this;return t.onlinegiftindex=0,t.onlinegiftstime=[60,90,120,120,120,300,300,300,300,300],t.onlinetime=0,t.isinit=!1,t.init(),t}a(E,l=u.default),E.prototype.init=function(){this.onlinegiftindex=0,this.isFixed=!1,this.data=new p.default},E.prototype.loadDataFromLocalStorage=function(){},Object.defineProperty(E.prototype,"Data",{get:function(){return this.data},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"UserPlot",{get:function(){return this.data.plots||[]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"UserGuide",{get:function(){return this.data.guides||[]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"IsTouch",{get:function(){return this.data.isTouch||!1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"IsUnlockLvModel",{get:function(){return this.data.isunlocklvModel||!1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"BattleType",{get:function(){return void 0===this.data.battleType?1:this.data.battleType},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"MaxLevel",{get:function(){return this.data.maxLevel||1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"MaxScore",{get:function(){return this.data.maxScore||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"HistoryData",{get:function(){return this.data.historyData||null},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Lv_HistoryData",{get:function(){return this.data.lvmodel_historyData||null},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"BestScore",{get:function(){return this.data.bestScore||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Lv_BestScore",{get:function(){return this.data.lvModel_bestScore||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"CurScore",{get:function(){return this.data.curScore||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Lv_CurScore",{get:function(){return this.data.lvModel_curSore||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Lv_CurTarBallLv",{get:function(){return this.data.lvModel_tarBalllv||y.default.MinTarBallLv},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"CurLevel",{get:function(){return this.data.level||1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Exp",{get:function(){return void 0!==this.data.exp?Math.max(this.data.exp,0):0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"MaxRecordDatas",{get:function(){return this.data.maxRecordDatas||[]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Lv_MaxRecordDatas",{get:function(){return this.data.lvmodel_maxRecordDatas||[]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"RewardLevel",{get:function(){return this.data.rewardLevel||{}},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Diamond",{get:function(){return this.data.diamond||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Star",{get:function(){return this.data.homestar||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"ChestNum",{get:function(){return this.data.chestNum||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Vibrate",{get:function(){return this.data.vibrate},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Furnitures",{get:function(){return this.data.furnitures},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Milestone",{get:function(){return this.data.milestones_new},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"IsOverTeach",{get:function(){return this.data.overTeach||!1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"IsOpenCpsQuan",{get:function(){return!!this.data.open_cps_quan},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"TeachBall",{get:function(){return this.data.teachball||y.default.InitTeachBall},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"ChestBaselv",{get:function(){return null==this.data.chestbaselv||this.data.chestbaselv<=0?(this.reqChestbaseLv(this.CurLevel,!0),this.CurLevel):(this.data.chestbaselv+5<this.CurLevel&&(t=(this.CurLevel-this.data.chestbaselv)%5,this.data.chestbaselv=this.CurLevel-t,this.reqChestbaseLv(this.CurLevel-t,!0)),this.data.chestbaselv);var t},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"NewYearPopTimes",{get:function(){return this.data.newyearPopTimes||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"DataVersion",{get:function(){return this.data.dataVersion||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"CurSkin",{get:function(){return this.data.curskin||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"HadSkins",{get:function(){return this.data.hadskins||[0]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"HadLogos",{get:function(){return this.data.hadLogos||[]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"SkinVideoTimes",{get:function(){return this.data.skinvideotimes||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Skills",{get:function(){return this.data.skills||[0,-1,-1]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"StateTasks",{get:function(){var t=this.Milestone.state_tasks||[],e=(e=d.DataMgr.Milestone.Milestones)[e.length-1].scene_id,n=(e=(e=d.DataMgr.Milestone.getMilestoneById(e).taskgroup_ids)[e.length-1],(e=d.DataMgr.Milestone.getTaskListById(e))[e.length-1].id);return this.Milestone.state_tasks=t.map(function(t){return t.id===+n&&t.to===h.ActionFitTask.Out&&(t.to=0),t}),this.Milestone.state_tasks},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"CompleteTasks",{get:function(){return this.Milestone.complete_tasks||[]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"TaskTreasures",{get:function(){return this.Milestone.treasures||{}},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"GiftProgress",{get:function(){return this.data.giftProgress||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"EventKeys",{get:function(){return this.data.eventkeys||[]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"IsFinishHomeGuid",{get:function(){return this.data.homeguide||!1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"Power",{get:function(){return this.data.power||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"UserMissions",{get:function(){return this.data.usermissions||[]},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"UserDailyMissions",{get:function(){var t=this.getDayDataWithKey(h.DayKeys.DailyMission,null);return null==t?{dailymissions:[],activenum:0,rewarded:[]}:t},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"SignDay",{get:function(){return this.data.signday||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"ActInviteTime",{get:function(){var t=this.data.actinvitetime||0;return 0<=t&&f.default.nowTime>t&&(t=f.default.nowTime+2592e5,d.DataMgr.syncBaseUserData({actinvitetime:t},!1)),t},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"CurOnlinegiftNeedTime",{get:function(){return this.onlinegiftindex<this.onlinegiftstime.length?this.onlinegiftstime[this.onlinegiftindex]:-1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"OnlineGiftNowTime",{get:function(){return this.CurOnlinegiftNeedTime-this.onlinetime},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"ShowCollectTimes",{get:function(){return this.data.showcollecttiptimes||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"NoticeVersion",{get:function(){return this.data.noticeversion||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"IsCollectShowed",{get:function(){return this.data.iscollectshowed||!1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"IsMissionShowed",{get:function(){return this.data.isshowedmission||!1},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"RedPocketData",{get:function(){return this.data.redpacketdata||{integral:0,log:[]}},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"WatermelonNum",{get:function(){return this.data.watermelonnum||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"ChangeTimes",{get:function(){return this.data.changetimes||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"WatermelonCurScore",{get:function(){return this.data.w_curscore||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"WatermelonBestScore",{get:function(){return this.data.w_bestscore||0},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"WatermelonTeachBall",{get:function(){return this.data.w_teachball||y.default.InitTeachBall},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"WatermelonHistory",{get:function(){return this.data.w_historyData||null},enumerable:!0,configurable:!0}),E.prototype.getRuningTasks=function(){var t=h.ActionFitTask.Out,e=this.StateTasks.filter(function(e){var n=e.from;return e=e.to,n!==t||e!==t});return 0===e.length&&(A.default.sdkEventWithKey(T.EventKeys.state_task_none),this.fixMilestonList(this.data),e=this.StateTasks.filter(function(e){var n=e.from;return e=e.to,n!==t||e!==t})),e},E.prototype.getFurnitureSkinById=function(t){return this.data.furnitures.skins[t]},E.prototype.getDayDataWithKey=function(t,e){var n=f.default.today,i=this.data.dayData;return i&&i[t]&&i[t][n]?i[t][n]:1===arguments.length?null:e},E.prototype.getMaxRecordDatas=function(t){var e;if(0==(t=void 0===t?0:t)){if((e=this.MaxRecordDatas).length)return e}else if((e=this.Lv_MaxRecordDatas).length)return e;return null},E.prototype.getPropNum=function(t){return this.getIsHadFreeProp(t)?this.data.freeprops[t]:this.data.props[t]||0},E.prototype.getIsHadFreeProp=function(t){return this.isinit||(d.DataMgr.syncBaseUserData({freeprops:r({},this.data.freeprops)},!0),this.isinit=!0),this.data.freeprops[t]&&0<this.data.freeprops[t]},E.prototype.getChapterTypeById=function(t){return this.RewardLevel[t]||t<5||(t-1)%5!=0?h.ChapterType.Normal:h.ChapterType.Reward},E.prototype.clearData=function(){this.init()},E.prototype.setData=function(t){this.data=r({},this.data,this.fixData(t))},E.prototype.reqSwitchMute=function(t){var e=!this.Data.mute;return d.DataMgr.syncBaseUserData({mute:e},t=void 0!==t&&t)},E.prototype.reqSwitchVibrate=function(t){var e=!this.Data.vibrate;return d.DataMgr.syncBaseUserData({vibrate:e},t=void 0!==t&&t)},E.prototype.reqGold=function(t,e){return void 0===e&&(e={}),s(this,void 0,Promise,function(){var n,i,o,a,r;return c(this,function(){return n=!e.hasOwnProperty("isAdd")||e.isAdd,i=!!e.hasOwnProperty("isSync")&&e.isSync,o=!e.hasOwnProperty("isUpdate")||e.isUpdate,a=this.data.money+(+t||0),n?r={money:a}:(r={money:a,spend_gold:t},i=!0),[2,d.DataMgr.syncBaseUserData(r,i).then(function(){return o&&g.EventMgr.emit(m.EventEnum.UpdateCoin)})]})})},E.prototype.reqStar=function(t,e){return void 0===e&&(e={}),s(this,void 0,Promise,function(){var n,i,o;return c(this,function(){return i=this.data.homestar||0,(n=i+t)<0?[2,Promise.reject(0)]:(i=!!e.hasOwnProperty("isSync")&&e.isSync,o=!e.hasOwnProperty("isUpdate")||e.isUpdate,[2,d.DataMgr.syncBaseUserData({homestar:n},i).then(function(){return o&&g.EventMgr.emit(m.EventEnum.UpdateStar)})])})})},E.prototype.reqDiamond=function(t,e,n){return void 0===e&&(e=110),void 0===n&&(n={}),s(this,void 0,Promise,function(){var e,i,o;return c(this,function(){return i=this.data.diamond,(e=i+t)<0?[2,Promise.reject(0)]:(i=!!n.hasOwnProperty("isSync")&&n.isSync,(o=!n.hasOwnProperty("isUpdate")||n.isUpdate)&&0<t&&C.AudioMgr.playSound(P.AudioEnum.coins_get),[2,d.DataMgr.syncBaseUserData({diamond:e},i).then(function(){return o&&g.EventMgr.emit(m.EventEnum.UpdateDiamond,0<t)})])})})},E.prototype.reqChest=function(t,e){return void 0===e&&(e=!1),s(this,void 0,Promise,function(){var n;return c(this,function(){return n=this.ChestNum||0,n=0<t?n+t:t<0?Math.max(0,n+t):t,[2,d.DataMgr.syncBaseUserData({chestNum:n},e).then(function(){return g.EventMgr.emit(m.EventEnum.UpdateChest,0<t)})]})})},E.prototype.reqOverTeach=function(t){return d.DataMgr.syncBaseUserData({overTeach:!0},t=void 0!==t&&t)},E.prototype.reqaddTeachBall=function(t){void 0===t&&(t=!1);var e=this.TeachBall;return 0==e&&v.default.addLogLevel({id:1,ptype:0}),d.DataMgr.syncBaseUserData({teachball:e+1},t)},E.prototype.reqaddwTeachBall=function(t){void 0===t&&(t=!1);var e=this.WatermelonTeachBall;return 0==e&&v.default.addLogLevel({id:1,ptype:0}),d.DataMgr.syncBaseUserData({w_teachball:e+1},t)},E.prototype.reqLevel=function(t,e,n){return d.DataMgr.syncBaseUserData({maxLevel:t,maxScore:e.score,addScore:e.addScore},n=void 0!==n&&n)},E.prototype.reqChestbaseLv=function(t,e){return d.DataMgr.syncBaseUserData({chestbaselv:t},e=void 0!==e&&e)},E.prototype.reqRewardLevel=function(t,e){void 0===e&&(e=!1);var n=this.RewardLevel;return n[t]=1,d.DataMgr.syncBaseUserData({rewardLevel:n},e)},E.prototype.reqProps=function(t,e,n,i){return void 0===n&&(n=!1),void 0===i&&(i={}),s(this,void 0,Promise,function(){var o,a,s,l;return c(this,function(){return!this.getIsHadFreeProp(t)||0<e?(a=this.data.props[t]||0,s=void 0,s=0<=e?a+e:Math.max(0,a+e),this.data.props[t]=s,o=!i.hasOwnProperty("isUpdate")||i.isUpdate,[2,d.DataMgr.syncBaseUserData({props:r({},this.data.props)},n).then(function(){return o&&g.EventMgr.emit(m.EventEnum.UpdateProps,{type:t,from:1,val:e})})]):(a=this.data.freeprops[t]||0,s=void 0,s=0<=e?a+e:Math.max(0,a+e),this.data.freeprops[t]=s,l=!i.hasOwnProperty("isUpdate")||i.isUpdate,[2,d.DataMgr.syncBaseUserData({freeprops:r({},this.data.freeprops)},n).then(function(){return l&&g.EventMgr.emit(m.EventEnum.UpdateProps,{type:t,from:1,val:e})})])})})},E.prototype.reqAddDayReward=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var i=this.getDayDataWithKey(t,0);this.reqDayDataWithKey(t,i+=e,n)},E.prototype.reqServiceReward=function(t,e){return void 0===t&&(t=h.RewardState.Received),void 0===e&&(e=!1),s(this,void 0,void 0,function(){return c(this,function(){return[2,this.reqDayDataWithKey(h.DayKeys.ServiceState,t,e).then(function(){return g.EventMgr.emit(m.EventEnum.ServiceRewardSuc)})]})})},E.prototype.reqCollectReward=function(t,e,n){return void 0===e&&(e=h.RewardState.Received),this.reqDayDataWithKey(t,e,n=void 0!==n&&n)},E.prototype.reqFloatingReward=function(t,e){return void 0===t&&(t=h.RewardState.Received),this.reqDayDataWithKey(h.DayKeys.FloatingState,t,e=void 0!==e&&e)},E.prototype.reqDayDataWithKey=function(t,e,n){void 0===n&&(n=!1);var i=f.default.today,o=this.data;return o.dayData=o.dayData||{},o.dayData[t]=o.dayData[t]||{},o.dayData[t]=((t={})[i]=e,t),d.DataMgr.syncBaseUserData(o,n)},E.prototype.reqMaxRecord=function(t,e){void 0===e&&(e=!1);var n=!0,i=t.score,o=this.MaxRecordDatas;if(o.forEach(function(t){t.score===i&&(n=!1)}),n)return o.length<3?(o.push(new _.default(i,t.balls,t.reviveTimes,t.props)),o.sort(function(t,e){return e.score-t.score})):(o.sort(function(t,e){return e.score-t.score}),o[2].score<i&&(o[2]=new _.default(i,t.balls,t.reviveTimes,t.props)),o.sort(function(t,e){return e.score-t.score})),d.DataMgr.syncBaseUserData({maxRecordDatas:o},e)},E.prototype.reqLvMaxRecord=function(t,e){void 0===e&&(e=!1);var n=!0,i=t.score,o=this.Lv_MaxRecordDatas;if(o.forEach(function(t){t.score===i&&(n=!1)}),n){var a=new _.default(i,t.balls,t.reviveTimes,t.props);return a.tarballlv=t.tarball,o.length<3?(o.push(a),o.sort(function(t,e){return e.score-t.score})):(o.sort(function(t,e){return e.score-t.score}),o[2].score<i&&(o[2]=a),o.sort(function(t,e){return e.score-t.score})),d.DataMgr.syncBaseUserData({lvmodel_maxRecordDatas:o},e)}},E.prototype.reqHistory=function(t,e,n){return void 0===n&&(n=!1),0==e?d.DataMgr.syncBaseUserData({historyData:t},n):d.DataMgr.syncBaseUserData({lvmodel_historyData:t},n)},E.prototype.reqPlayerData=function(t,e,n,i,o,a,r){if(void 0===r&&(r=!1),!(e<this.CurLevel))return this.reqSavePower(a),0==t?d.DataMgr.syncBaseUserData({bestScore:i,level:e,exp:n,curScore:o},r):d.DataMgr.syncBaseUserData({lvModel_bestScore:i,level:e,exp:n,lvModel_curSore:o},r)},E.prototype.reqPlayerData2=function(t,e,n){return d.DataMgr.syncBaseUserData({w_bestscore:t,w_curscore:e},n=void 0!==n&&n)},E.prototype.reqHistory2=function(t,e){return d.DataMgr.syncBaseUserData({w_historyData:t},e=void 0!==e&&e)},E.prototype.reqLvCurTarBall=function(t,e){return d.DataMgr.syncBaseUserData({lvModel_tarBalllv:t},e=void 0!==e&&e)},E.prototype.reqDataVersion=function(){return d.DataMgr.syncBaseUserData({dataVersion:1},!0)},E.prototype.reqBattleType=function(t,e){return d.DataMgr.syncBaseUserData({battleType:t},e=void 0!==e&&e)},E.prototype.reqUnlockLvModel=function(){return d.DataMgr.syncBaseUserData({isunlocklvModel:!0},!0)},E.prototype.reqTouch=function(){return d.DataMgr.syncBaseUserData({isTouch:!0},!0)},E.prototype.reqNewYearPop=function(){var t=this.NewYearPopTimes;return d.DataMgr.syncBaseUserData({newyearPopTimes:t+1},!0)},E.prototype.reqAddSkin=function(t){var e=this.HadSkins;return e.indexOf(t)<=0&&e.push(t),d.DataMgr.syncBaseUserData({hadskins:e},!1)},E.prototype.reqAddLogo=function(t){var e=this.HadLogos;return e.indexOf(t)<=0&&e.push(t),d.DataMgr.syncBaseUserData({hadLogos:e},!1)},E.prototype.reqChangSkin=function(t){return d.DataMgr.syncBaseUserData({curskin:t},!1)},E.prototype.reqChangLogo=function(t){return d.DataMgr.syncBaseUserData({curLogo:t},!1)},E.prototype.reqAddSkinVideoTimes=function(){var t=this.SkinVideoTimes;return d.DataMgr.syncBaseUserData({skinvideotimes:t+1},!0)},E.prototype.reqInitdSkinVideoTimes=function(){return d.DataMgr.syncBaseUserData({skinvideotimes:0},!0)},E.prototype.reqfixDiamond=function(){var t;return 0==this.data.fixDiamondflag&&(t=this.Diamond,d.DataMgr.syncBaseUserData({diamond:5*t},!1)),d.DataMgr.syncBaseUserData({fixDiamondflag:!0},!0)},E.prototype.fixBallData=function(){var t=this.data;if(t&&this.DataVersion<1){if(t.historyData&&t.historyData.balls&&t.historyData.balls.forEach(function(t){t.y+=84.5}),t.maxRecordDatas&&0<t.maxRecordDatas.length)for(var e=0;e<t.maxRecordDatas.length;e++)t.maxRecordDatas[e].balls.forEach(function(t){t.y+=84.5});this.reqDataVersion()}},E.prototype.fixData=function(t){return t&&(this.isFixed||(this.isFixed=!0,1==M.default.I.Data.is_new&&(t.freeprops={0:1,1:1,2:1}),isNaN(+t.homestar)&&(t.homestar=0),isNaN(+t.money)&&(t.money=0),this.fixMilestoneData(t),this.fixFurnitureData(t),this.fixPlotData(t)),t)},E.prototype.fixFurnitureData=function(t){t.furnitures||(t.furnitures=Object.create(null)),t.furnitures.skins||(t.furnitures.skins=Object.create(null));var e,n=t.milestones_new.complete_tasks||[],i=d.DataMgr.Milestone.Tasks,o=t.furnitures.skins;for(e in i)!function(t){var e,a;i.hasOwnProperty(t)&&(t=(e=i[t]).id,e=e.add_furnitures,a=0<=n.indexOf(t),e.forEach(function(t){o[t]?a&&0===o[t].opens.length&&(o[t].opens=[o[t].select]):o[t]=a?{select:1,opens:[1]}:{select:1,opens:[]}}))}(e)},E.prototype.fixMilestoneData=function(t){var e,n,i,o=h.ActionFitTask.Out;if(t.milestones&&!t.milestones_new){var a,s,c,l=(y=t.milestones).through_scenes,u=y.complete_tasks,p=y.curr_scene,f=d.DataMgr.Milestone.getMilestoneById(p),m=f.id,g=f.start_taskgroup,_=f.next_milestone,y=d.DataMgr.Milestone.getTaskGroupById(g).task_ids;1===p?(i={curr_scene:m,next_scene:_,curr_group:g,state_tasks:(s=y.slice(0,3).map(function(t,e){return{id:t,from:h.ActionFitTask.Out,to:e}})).slice(),treasures:{},complete_tasks:[],through_scenes:[]},(a=t.plots)&&a.length&&(t.plots=a=[])):(f=d.DataMgr.Milestone.getMilestoneById(p).start_taskgroup,s=y.slice(0,3).map(function(t,e){return{id:t,from:h.ActionFitTask.Out,to:e}}),c=[],(l=Array.from({length:p-1}).map(function(t,e){return e+1})).forEach(function(t){d.DataMgr.Milestone.getGroupTaskListById(t).forEach(function(t){c.push(t.id)})}),i={curr_scene:p,next_scene:_,curr_group:f,state_tasks:s.slice(),treasures:{},complete_tasks:c.slice(),through_scenes:l.slice()},(a=t.plots)&&a.length&&(a=a.map(function(t){return 120<t.id&&(t.state=h.PlotState.None),t}),t.plots=a));for(var v=d.DataMgr.Milestone.getTaskOldBySceneId(p),b={},w=0,S=0;S<v.length;S++){var M=v[S].id;b[M]=r({},v[S])}u.filter(function(t){return!(t=b[t])||(w+=t.cost_star,!1)}),t.homestar+=w,delete t.milestones}else i=t.milestones_new&&Object.keys(t.milestones_new).length?(n=(u=t.milestones_new).treasures||{},s=u.state_tasks,e=u.complete_tasks||[],(s=s||[]).filter(function(t){return t.to===o}).forEach(function(t){-1===e.indexOf(t.id)&&e.push(t.id)}),this.fixMilestonList(t),r({},t.milestones_new,{treasures:n,complete_tasks:e})):(m=(n=d.DataMgr.Milestone.Milestones[0]).id,g=n.start_taskgroup,{curr_scene:m,next_scene:_=n.next_milestone,curr_group:g,state_tasks:(s=(y=d.DataMgr.Milestone.getTaskGroupById(g).task_ids).slice(0,3).map(function(t,e){return{id:t,from:h.ActionFitTask.Out,to:e}})).slice(),treasures:{},complete_tasks:[],through_scenes:[]});t.milestones_new=i},E.prototype.fixMilestonList=function(t){var e,n,i,o,a,s,c;t.milestones_new&&Object.keys(t.milestones_new).length&&(e=h.ActionFitTask.Out,n=(o=t.milestones_new).state_tasks,i=o.complete_tasks,s=o.curr_group,0===n.filter(function(t){var n=t.from;return t=t.to,n!==e||t!==e}).length&&((a=d.DataMgr.Milestone.getTaskGroupById(s).task_ids).map(function(t){return 0<=i.indexOf(t)}).length!==a.length||(c=d.DataMgr.Milestone.getNextTaskGroupById(s))&&(o=c.curr_group,a=c.curr_scene,s=c.next_scene,c=c.task_list,t.milestones_new=r({},t.milestones_new,{curr_scene:a,next_scene:s,curr_group:o,state_tasks:n.concat(c.slice(0,3).map(function(t,n){return{id:t.id,from:e,to:n}}))}))))},E.prototype.fixPlotData=function(t){var e=d.DataMgr.Plot.Plots.slice(0,2).map(function(t){return t.id}),n=t.plots&&0!==t.plots.length?t.plots.map(function(t){var n=t.id;return t=t.state,0<=e.indexOf(n)?t===h.PlotState.None&&(t=h.PlotState.Plan):t===h.PlotState.Plan&&(t=h.PlotState.None),{id:n,state:t}}):[{id:e[0],state:h.PlotState.Plan}];t.plots=n},E.prototype.getCurrPlot=function(){return this.UserPlot.filter(function(t){return(t=t.state)===h.PlotState.None||t===h.PlotState.Plan})[0]},E.prototype.isOverPlot=function(t){return!!this.UserPlot.filter(function(e){var n=e.id;return e=e.state,n===t&&e===h.PlotState.Over}).length},E.prototype.isPlanPlot=function(t){return!!this.UserPlot.filter(function(e){var n=e.id;return e=e.state,n===t&&e===h.PlotState.Plan}).length},E.prototype.isHadGuide=function(t){return!!this.UserGuide.filter(function(e){return e===t}).length},E.prototype.reqAysncGuide=function(t,e){return void 0===e&&(e=!1),this.isHadGuide(t)?Promise.resolve():(t={guides:this.UserGuide.concat([t])},d.DataMgr.syncBaseUserData(t,e))},E.prototype.reqTaskTreasure=function(t,e){void 0===e&&(e=!1);var n=this.Milestone,i=n.treasures||{};return i[t]=!0,d.DataMgr.syncBaseUserData({milestones_new:r({},n,{treasures:i})},e)},E.prototype.reqTaskComplete=function(t,e){return void 0===e&&(e=!1),s(this,void 0,void 0,function(){var n,i;return c(this,function(){return n=this.Milestone,0<=(i=n.complete_tasks||[]).indexOf(t)?[2,Promise.resolve()]:(i.push(t),[2,d.DataMgr.syncBaseUserData({milestones_new:r({},n,{complete_tasks:i})},e)])})})},E.prototype.reqUpdateTaskState=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=!1),s(this,void 0,void 0,function(){var i,o,a;return c(this,function(){return i=this.Milestone,o=i.state_tasks,a=-1,o=o.map(function(i,o){return i.id===t&&(a=o,e.hasOwnProperty("from")&&(i.from=e.from),e.hasOwnProperty("to")&&(i.to=e.to)),n&&-1!==a&&i.to!==h.ActionFitTask.Out&&a<o&&--i.to,i}),[2,d.DataMgr.syncBaseUserData({milestones_new:r({},i,{state_tasks:o})},!1)]})})},E.prototype.reqNextAppearTask=function(t){return void 0===t&&(t=!1),s(this,void 0,Promise,function(){var e,n,i,o,a,s;return c(this,function(){return e=this.Milestone,o=e.curr_group,n=e.state_tasks||[],a=d.DataMgr.Milestone.getTaskGroupById(o).task_ids,(o=a.length)<=3||n.length===o?[2,Promise.resolve(null)]:(i=h.ActionFitTask.Out,o=a[n.length],a=n.filter(function(t){var e=t.from;return t=t.to,e!==i&&t!==i}).length,s={id:o,from:i,to:a},n.push(s),[2,new Promise(function(i){d.DataMgr.syncBaseUserData({milestones_new:r({},e,{state_tasks:n})},t).then(function(){return i(s)})})])})})},E.prototype.reqAsyncNextTask=function(t,e){void 0===e&&(e=!1);var n=t.id,i=this.Milestone,o=i.curr_group,a=i.curr_scene,s=i.complete_tasks||[];-1===s.indexOf(n)&&s.push(n);var c=d.DataMgr.Milestone.getMilestoneById(a),l=c.taskgroup_ids,u=(t=c.next_milestone,[]);return l.forEach(function(t){t=d.DataMgr.Milestone.getTaskGroupById(t),u=u.concat(t.task_ids)}),n=d.DataMgr.Milestone.getTaskGroupById(o).task_ids,c=S.default.isContained(s,n),S.default.isContained(s,u)||c&&o===l[l.length-1]?(l=(c=d.DataMgr.Milestone.getMilestoneById(t)).scene_id,t=c.start_taskgroup,c=c.next_milestone,i.curr_scene=l,i.next_scene=c,i.curr_group=t,-1===i.through_scenes.indexOf(a)&&i.through_scenes.push(a),a=d.DataMgr.Milestone.getTaskGroupById(i.curr_group).task_ids,i.state_tasks=a.map(function(t,e){return{id:t,from:h.ActionFitTask.Out,to:e}})):S.default.isContained(s,n)&&(i.curr_group=o+1,o=d.DataMgr.Milestone.getTaskGroupById(i.curr_group).task_ids,i.state_tasks=i.state_tasks.concat(o.map(function(t,e){return{id:t,from:h.ActionFitTask.Out,to:e}}))),new Promise(function(t){d.DataMgr.syncBaseUserData({milestones_new:r({},i,{complete_tasks:s})},e).then(function(e){return t(e)})})},E.prototype.getRelatedFurniture=function(t){for(var e=w.MapConfig.FurnitureRelated,n=e.length,i=0;i<n;i++)if(0<=e[i].indexOf(t))return e[i];return[]},E.prototype.reqOpenFurnitureSkin=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);for(var o=e.slice(),a=o.length,r=o.slice(),s=0;s<a;s++)r=r.concat(this.getRelatedFurniture(o[s]));return r=1===r.length?r:Array.from(new Set(r)),this.reqSelectFurnitureSkin(t,r,n,i)},E.prototype.reqSelectFurnitureSkin=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var o=this.Furnitures.skins;return e.slice().forEach(function(e){var i=o[e].opens;-1===i.indexOf(1)&&o[e].opens.push(1),-1===i.indexOf(t)&&o[e].opens.push(t),n&&(o[e].select=t)}),d.DataMgr.syncBaseUserData({furnitures:r({},this.Furnitures,{skins:o})},i)},E.prototype.reqAysncPlot=function(t,e,n,i){return void 0===n&&(n=!1),!(i=void 0!==i&&i)&&this.isOverPlot(t)&&e===h.PlotState.Over?Promise.resolve():(i={plots:i=(i=this.UserPlot).filter(function(e){return e.id===t}).length?i.map(function(n){return n.id===t&&(n.state=e),n}):i.concat([{id:t,state:e}])},d.DataMgr.syncBaseUserData(i,n))},E.prototype.reqAddSkillLv=function(t){var e=this.Skills;return e[t]<5&&e[t]++,d.DataMgr.syncBaseUserData({skills:e},!1)},E.prototype.getSkillLv=function(t){return this.Skills[t]},E.prototype.reqGiftProgress=function(t,e){return void 0===e&&(e=!1),t=Math.min(3,t),d.DataMgr.syncBaseUserData({giftProgress:t},e)},E.prototype.reqaddEventKey=function(t,e){void 0===e&&(e=!1);var n=this.EventKeys;return n.indexOf(t)<0&&n.push(t),d.DataMgr.syncBaseUserData({eventkeys:this.data.eventkeys},e)},E.prototype.reqFinishHomeGuid=function(){return d.DataMgr.syncBaseUserData({homeguide:!0},!0)},E.prototype.isHadEventKey=function(t){return 0<this.EventKeys.indexOf(t)},E.prototype.reqSavePower=function(t){return d.DataMgr.syncBaseUserData({power:t},!1)},E.prototype.reqSaveMission=function(t,e,n){for(var i=null,o=this.data.usermissions,a=0;a<o.length;a++)t==o[a].id&&(i=o[a]);return null==i?o.push(i={id:t,value:e,index:n}):(i.id=t,i.value=e,i.index=n),d.DataMgr.syncBaseUserData({usermissions:o},!1)},E.prototype.reqSaveDailyMission=function(t,e,n){var i=this.getDayDataWithKey(h.DayKeys.DailyMission,null);null==i&&(i={dailymissions:[],activenum:0,rewarded:[]});for(var o=null,a=0;a<i.dailymissions.length;a++)t==i.dailymissions[a].id&&(o=i.dailymissions[a]);return null==o?i.dailymissions.push(o={id:t,value:e,index:n}):(o.id=t,o.value=e,o.index=n),this.reqDayDataWithKey(h.DayKeys.DailyMission,i)},E.prototype.reqAddDailyAct=function(t){var e=this.getDayDataWithKey(h.DayKeys.DailyMission,null);return(e=null==e?{dailymissions:[],activenum:0,rewarded:[]}:e).activenum+=t,this.reqDayDataWithKey(h.DayKeys.DailyMission,e)},E.prototype.reqGetDailyActReward=function(t){var e=this.getDayDataWithKey(h.DayKeys.DailyMission,null);return(e=null==e?{dailymissions:[],activenum:0,rewarded:[]}:e).rewarded.push(t),this.reqDayDataWithKey(h.DayKeys.DailyMission,e)},E.prototype.reqSign=function(t,e){return d.DataMgr.syncBaseUserData({signday:t=7<=t?0:t},e=void 0!==e&&e),this.reqDayDataWithKey(h.DayKeys.SevenDaySign,1,e)},E.prototype.reqFinishInviteAct=function(){return d.DataMgr.syncBaseUserData({actinvitetime:-1},!0)},E.prototype.reqOnlineReward=function(){this.onlinetime=0,this.onlinegiftindex++},E.prototype.reqAddShowCollectTip=function(){return d.DataMgr.syncBaseUserData({showcollecttiptimes:this.ShowCollectTimes+1},!1)},E.prototype.reqNoticeVersion=function(t){return d.DataMgr.syncBaseUserData({noticeversion:t},!1)},E.prototype.reqShowCollect=function(){return d.DataMgr.syncBaseUserData({iscollectshowed:!0},!0)},E.prototype.reqShowMission=function(){return d.DataMgr.syncBaseUserData({isshowedmission:!0},!1)},E.prototype.fixUserData=function(t){return t&&(isNaN(+t.money)&&(t.money=0),t)},E.prototype.reqAddRedPacket=function(t){this.reqAddDayReward(h.DayKeys.RedPacketNum,1,!1);for(var e=this.RedPocketData.integral,n=this.RedPocketData.log,i=t.length-1;0<=i;i--){var o=t[i];e+=o.v,n.length<10||n.splice(0,1),n.push({t:o.t,v:o.v})}return e<=0?Promise.resolve():d.DataMgr.syncBaseUserData({redpacketdata:{integral:e,log:n}},!1)},E.prototype.reqAddwatermelonnum=function(){return d.DataMgr.syncBaseUserData({watermelonnum:this.WatermelonNum+1},!1)},E.prototype.reqOpenCpsQuan=function(){return d.DataMgr.syncBaseUserData({open_cps_quan:1},!1)},E.prototype.reqAddChange=function(){var t=b.OnlineMgr.getInt(T.OnlineKeys.refresh_times,3);return d.DataMgr.syncBaseUserData({changetimes:t},!1).then(function(){})},E.prototype.reqUseChange=function(){var t=this.ChangeTimes;return d.DataMgr.syncBaseUserData({changetimes:Math.max(t-1,0)},!1).then(function(){})},Object.defineProperty(E,"I",{get:function(){return this._instance||(this._instance=new E)},enumerable:!0,configurable:!0}),E._instance=null,a=E,o.default=a,cc._RF.pop()},{}],Vector3Utils:[function(t,e,n){"use strict";cc._RF.push(e,"15745HDgU1JLL/b82aCHvai","Vector3Utils");var i=n;function o(){}Object.defineProperty(i,"__esModule",{value:!0}),o.Add=function(t,e){return t.add(e)},o.Subtract=function(t,e){return t.sub(e)},o.Cross=function(t,e){return t.cross(e)},o.Dot=function(t,e){return t.dot(e)},o.Distance=function(t,e){return this.Subtract(t,e).mag()},o.Lerp=function(t,e,n){return t.lerp(e,n)},o.getAngle=function(t,e){return t.angle(e)},o.Normalize=function(t){return t.normalize()},o.Get=function(){return null},i.default=o,cc._RF.pop()},{}],Vector3:[function(t,e,n){"use strict";cc._RF.push(e,"9727bKul4hCzYy34n0EGhII","Vector3");var i,o=e,a=n;function r(t,e,n){return i.call(this,t,e,n)||this}o=__EXTENDS__(),Object.defineProperty(a,"__esModule",{value:!0}),o(r,i=cc.Vec3),o=r,a.default=o,cc._RF.pop()},{}],ViewBack:[function(t,e,n){"use strict";cc._RF.push(e,"610efwC4bJLxLZqjOnDy1KH","ViewBack");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l=o("Action"),u=o("AudioMgr"),d=o("EventMgr"),p=o("EventEnum");function h(){return null!==c&&c.apply(this,arguments)||this}o=(i=cc._decorator).ccclass,i.property,r(h,c=cc.Component),Object.defineProperty(h.prototype,"Data",{get:function(){return this.data},enumerable:!0,configurable:!0}),h.prototype.animIn=function(t){return this.data=t,this.node.active=!0,l.default.playAddAnim(this.node,"anim_back_in")},h.prototype.animOut=function(){return this.data=null,this.node.active=!1,l.default.playAddAnim(this.node,"anim_back_out")},h.prototype.onBack=function(){u.AudioMgr.button(),d.EventMgr.emit(p.EventEnum.ActionViewTemp,{type:3,data:null})},o=s([o],h),a.default=o,cc._RF.pop()},{}],ViewDelayShow:[function(t,e,n){"use strict";cc._RF.push(e,"155f9qqMo5J1q2OjALlT/5N","ViewDelayShow");var i,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;function c(){return null!==i&&i.apply(this,arguments)||this}Object.defineProperty(a,"__esModule",{value:!0}),o=cc._decorator.ccclass,r(c,i=cc.Component),c.prototype.onLoad=function(){this.init()},c.prototype.onEnable=function(){this.init()},c.prototype.init=function(){var t=this;this.node.opacity=0,this.node.getComponent(cc.Button)&&(this.node.getComponent(cc.Button).enabled=!1),this.node.runAction(cc.sequence(cc.delayTime(3),cc.fadeTo(.2,255),cc.callFunc(function(){t.node.getComponent(cc.Button)&&(t.node.getComponent(cc.Button).enabled=!0)})))},o=s([o],c),a.default=o,cc._RF.pop()},{}],ViewMgr:[function(t,e,n){"use strict";cc._RF.push(e,"0f341BQ1yREKLaserAfhpsS","ViewMgr");var i=t,o=n,a=function(){return(a=Object.assign||__ASSIGN__).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var r=i("Debug"),s=i("SDKTools"),c=i("TouchBlock"),l=i("ArrayUtils"),u=i("LayerMgr"),d=i("EventMgr"),p=i("PoolMgr"),h=i("EventEnum"),f=i("LoaderMgr");function m(){this.touchLoading=null,this.clsList=[],this.viewList=[],this.maskNodes={}}m.prototype.init=function(){this.initTouchLoading()},m.prototype.initTouchLoading=function(){var t=this;f.LoaderMgr.loadPrefabWithUrl("prefab/common/black_bg").then(function(t){t=cc.instantiate(t),u.default.I.addTo(u.Layer.Guide,t),t.setPosition(cc.Vec2.ZERO),t.active=!1}),f.LoaderMgr.loadPrefabWithUrl("prefab/common/touch_loading").then(function(e){e=cc.instantiate(e),u.default.I.addTo(u.Layer.Mask,e),e.setPosition(cc.Vec2.ZERO),e.active=!1,t.touchLoading=e})},m.prototype.turnOffScreenClick=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=""),this.touchLoading&&(this.touchLoading.active=!0,this.touchLoading.getComponent(c.default).showLoading(t),this.touchLoading.getComponent(c.default).showDesc(e))},m.prototype.turnOnScreenClick=function(){null!=this.touchLoading&&(this.touchLoading.active=!1)},m.prototype.refreshTurnOffScreenClickTip=function(t){null!=this.touchLoading&&this.touchLoading.getComponent(c.default).showDesc(t)},m.prototype.sendMessage=function(t,e){for(var n=0,i=this.viewList;n<i.length;n++){var o=i[n];if(o instanceof t)return o.sendMessage(e),!0}return!1},m.prototype.getView=function(t){for(var e=0,n=this.viewList;e<n.length;e++){var i=n[e];if(i instanceof t)return i}return null},m.prototype.openPopwin=function(t,e){var n=this;e=a({mask:!0,anim:!0},e=void 0===e?{}:e);var i=this.getPopwin(t);if(i)return i.onRefresh(e),Promise.resolve();var o=t.PREFAB_PATH;return this.clsList.push(o),new Promise(function(i,a){f.LoaderMgr.loadResWithUrl(o,cc.Prefab,{prefix:function(){n.turnOffScreenClick(!0)},failure:function(){n.turnOnScreenClick(),l.default.removeFromArr(n.clsList,o),a(),s.default.showModal({title:"\u53cb\u60c5\u63d0\u793a",content:"\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u8bf7\u6c42\u8fde\u63a5",showCancel:!1,confirmText:"\u91cd\u8bd5",success:function(){n.openPopwin(t,e)}})},success:function(s){n.turnOnScreenClick(),l.default.removeFromArr(n.clsList,o);for(var c=(s=p.PoolMgr.getPrefab(s)).getComponent(t),u=(c=null==c?s.addComponent(t):c).isFullScreen,f=0,m=n.viewList;f<m.length;f++){var g=m[f];g.isPaused||(g.pause(),r.default.warn(g.name+" onPause")),u&&(g.isHide||(g.hide(),r.default.warn(g.name+" onHide")))}n.viewList.push(c),1===n.viewList.length&&d.EventMgr.emit(h.EventEnum.SceneToHide,e.data),u||!e.mask?(r.default.warn(c.name+" onOpen -> onOpend"),c.open(e,o).then(function(){return i(c)}).catch(function(){return a(c)})):n.showMask(c).then(function(){r.default.warn(c.name+" onOpen -> onOpend"),c.open(e,o).then(function(){return i(c)}).catch(function(){return a(c)})})},context:n})})},m.prototype.getPopwin=function(t){var e=this.viewList.filter(function(e){return e instanceof t});return 0<e.length?e[0]:null},m.prototype.closePopwin=function(t,e){var n=this;return void 0===e&&(e={}),r.default.warn("\u3010ViewMgr closePopwin\u3011",t),r.default.warn("\u3010ViewMgr closePopwin\u3011",e),r.default.warn("\u3010ViewMgr closePopwin\u3011",this.viewList),new Promise(function(i){for(var o=!1,a=n.viewList.length-1;0<=a;a--)!function(a){var s,c=n.viewList[a];c instanceof t&&(r.default.warn(c.name+" onClose"),s=n.getMaskNode(c.name),n.setMaskNode(c.name,null),c.close(e).then(function(){n.hideMask(c,s),n.showPrev(e),i(null)}).catch(function(){n.hideMask(c,s),i(null)}),n.viewList.splice(a,1),o=!0,0===n.viewList.length&&d.EventMgr.emit(h.EventEnum.SceneToShow,e.data))}(a);o||i(null)})},m.prototype.closeAllPopwin=function(t){var e=this;void 0===t&&(t={}),this.viewList.forEach(function(n){n.close(t);var i=e.getMaskNode(n.name);e.hideMask(n,i)}),this.viewList=[]},m.prototype.clearViewList=function(){this.viewList=[]},m.prototype.showPrev=function(){for(var t,e=this.viewList.length-1;0<=e;e--)if((t=this.viewList[e]).isPaused){t.resume(),r.default.warn(t.name+" onResume");break}},m.prototype.getMaskNode=function(t){return this.maskNodes[t]},m.prototype.setMaskNode=function(t,e){(this.maskNodes[t]=e)||delete this.maskNodes[t],r.default.warn("\u3010ViewMgr setMaskNode\u3011",t),r.default.warn("\u3010ViewMgr setMaskNode\u3011",e),r.default.warn("\u3010ViewMgr setMaskNode\u3011",this.maskNodes)},m.prototype.showMask=function(t){var e=this,n=t.isMaskShow,i=t.isMaskAnim,o=t.isMaskTransparent,a=u.default.I.getLayer(u.Layer.Popwin);return n&&cc.isValid(a)?new Promise(function(n){f.LoaderMgr.loadPrefabWithUrl("prefab/common/black_bg").then(function(r){return!cc.isValid(a)||e.getMaskNode(t.name)?n(null):(r=cc.instantiate(r),i?(r.opacity=100,r.runAction(cc.fadeTo(.25,220))):o&&(r.opacity=0),r.setPosition(cc.Vec2.ZERO),a.addChild(r),r.children[0].on(cc.Node.EventType.TOUCH_START,t.onTouchMask,t),e.setMaskNode(t.name,r),void n(null))}).catch(function(){return n(null)})}):Promise.resolve()},m.prototype.hideMask=function(t,e){t.name,cc.isValid(e)&&(e.children[0].off(cc.Node.EventType.TOUCH_START,t.onTouchMask,t),e.runAction(cc.sequence(cc.fadeTo(.125,0),cc.callFunc(function(){cc.isValid(e)&&e.removeFromParent()}))))},m.prototype.showTip=function(t,e){void 0===e&&(e=2)},Object.defineProperty(m,"I",{get:function(){return this._instance||(this._instance=new m)},enumerable:!0,configurable:!0}),i=m,o.default=i,o.ViewMgr=i.I,cc._RF.pop()},{}],WXApi:[function(t,e,n){"use strict";cc._RF.push(e,"b597ejPe5BDgIr2YnNGXUFM","WXApi");var i,o=t,a=n,r=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var s,c=o("SDKAnalytics"),l=o("SDKEnums"),u=o("SDKTools"),d=o("BattleMgr"),p=o("PlatformUtils"),h=o("LogUtils\u200b\u200b"),f=o("BasePopwin"),m=o("UserBaseModel"),g=o("Api"),_=o("EventMgr"),y=o("EventEnum"),v=o("GridADPopwin"),b=o("BattleMgr2"),w=o("OnlineMgr"),S=o("Display");function M(){this.gridAd={},this.isshow_grideadbottom=!1,this.isshow_Sidead=!1,this.gridadnum=0}o=(i=cc._decorator).ccclass,i.property,(s=M).createGameCLubButton=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),e=cc.view.getVisibleSize(),t.x,n=0-t.y+e.height/2,t.x,e.width,n/=e.height,(e=wx.getSystemInfoSync()).windowWidth,n=e.windowHeight*n,wx.createGameClubButton({icon:"green",style:{left:12,top:n-20,width:32,height:32}})},M.prototype.creteGridadIntertial=function(){var t=this,e=u.default.SystemData.screenHeight;return new Promise(function(n,i){wx.createCustomAd||i(),t._gridadIntertial?t._gridadIntertial.isShow()||t._gridadIntertial.show().then(function(){S.default.PersistNode.showBlack(),n(0)}).catch(function(t){S.default.PersistNode.hideBlack(),i(t)}):(t._gridadIntertial=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomMatrixInter),left:1,top:e/2-250,fixed:!1}),t._gridadIntertial.onError(function(){t._gridadIntertial=null,S.default.PersistNode.hideBlack(),i()}),t._gridadIntertial.onClose(function(){t._gridadIntertial=null,S.default.PersistNode.hideBlack()}),t._gridadIntertial.onHide(function(){t._gridadIntertial=null,S.default.PersistNode.hideBlack()}),t._gridadIntertial.show().then(function(){S.default.PersistNode.showBlack(),n(0)}).catch(function(e){t._gridadIntertial=null,S.default.PersistNode.hideBlack(),i(e)}))})},M.prototype.showGridadIntertial=function(){return this.creteGridadIntertial()},M.prototype.hideGridadIntertial=function(){this._gridadIntertial&&this._gridadIntertial.hide()},M.prototype.hideGridAd=function(t){(t=this.gridAd[t])&&t.hide()},M.prototype.createGridAd=function(t,e){var n=this;if(e=e||Object.create(null),!wx.createCustomAd)return e.error&&e.error.call(e.context);var i=(a=u.default.SystemData).screenWidth,o=a.screenHeight,a=i/750,r=(Math.max(a*t.width,300),this.gridAd[t.adUnitId]);r&&!r._destroyed||(h.default.error("\u91cd\u65b0\u521b\u5efagridAd"),(r=wx.createCustomAd({adUnitId:t.adUnitId,left:i/2-180,top:o-106,fixed:!1})).onError(function(t){h.default.error("gridAd onError",t),c.default.event(l.EventKeys.grid_ad_show_fail,""),e.error&&e.error.call(e.context)})),r.show().then(function(i){return n.handleShowSuccess(i,r,t,e)}).catch(function(t){return n.handleShowError(t,e)})},M.prototype.handleShowSuccess=function(t,e,n,i){this.gridAd[n.adUnitId]=e,c.default.event(l.EventKeys.grid_ad_show_suc,""),i.success&&i.success.call(i.context)},M.prototype.handleShowError=function(t,e){e.error&&e.error.call(e.context)},M.prototype.issingleadopen=function(){var t=u.default.getParamsInt(l.OnlineKeys.single_gride_promotion_abtest,0);return 0!=t&&(1!=t||m.default.I.ID%2!=1)},M.prototype.creteSingleGridad=function(){var t=this;if(p.default.isTecent&&this.issingleadopen()){var e=u.default.SystemData,n=(e.screenWidth,e.screenHeight,cc.view.getVisibleSize());return new Promise(function(e,i){var o;wx.createCustomAd||i(),t._singlegridad?t._singlegridad.show().then(function(){c.default.event(l.EventKeys.native_singleGridAd_show,""),e(0)}).catch(function(t){i(t)}):d.default.I.node.isValid&&(o=(0-(d.default.I.m_Singlead.y+d.default.I.m_Singlead.parent.y)+n.height/2)/n.height,o=wx.getSystemInfoSync().windowHeight*o,t._singlegridad=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomSingle),left:1,top:o-30,fixed:!1}),t._singlegridad.onError(function(){t._singlegridad=null,i()}),t._singlegridad.onLoad(function(){}),t._singlegridad.show().then(function(){c.default.event(l.EventKeys.native_singleGridAd_show,"\u521b\u5efa\u663e\u793a"),e(0)}).catch(function(t){i(t)}),t._singlegridad.onClose(function(){c.default.event(l.EventKeys.native_singleGridAd_close,""),t._singlegridad=null}))})}},M.prototype.showSinglegridad=function(){return this.creteSingleGridad()},M.prototype.hideSinglegridad=function(){this._singlegridad&&this._singlegridad.hide()},M.prototype.creteSingleGridad2=function(){var t=this;if(p.default.isTecent&&this.issingleadopen()){var e=u.default.SystemData,n=(e.screenWidth,e.screenHeight,cc.view.getVisibleSize());return new Promise(function(e,i){var o;wx.createCustomAd||i(),t._singlegridad2?t._singlegridad2.show().then(function(){c.default.event(l.EventKeys.native_singleGridAd_show,""),e(0)}).catch(function(t){i(t)}):b.default.I.node.isValid&&(o=(0-(b.default.I.m_Singlead.y+b.default.I.m_Singlead.parent.y)+n.height/2)/n.height,o=wx.getSystemInfoSync().windowHeight*o,t._singlegridad2=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomSingleMelon),left:1,top:o-30,fixed:!1}),t._singlegridad2.onError(function(){t._singlegridad2=null,i()}),t._singlegridad2.onLoad(function(){}),t._singlegridad2.show().then(function(){c.default.event(l.EventKeys.native_singleGridAd_show,"\u521b\u5efa\u663e\u793a"),e(0)}).catch(function(t){i(t)}),t._singlegridad2.onClose(function(){c.default.event(l.EventKeys.native_singleGridAd_close,""),t._singlegridad2=null}))})}},M.prototype.showSinglegridad2=function(){return this.creteSingleGridad2()},M.prototype.hideSinglegridad2=function(){this._singlegridad2&&this._singlegridad2.hide()},M.prototype.creteWXSingleGridad2=function(t){var e=this;if(p.default.isTecent){var n=u.default.SystemData,i=(n.screenWidth,n.screenHeight,cc.view.getVisibleSize());return new Promise(function(n,o){var a;wx.createCustomAd||o(),e._Wxsinglegridad2?e._Wxsinglegridad2.show().then(function(){g.default.reqAddWxADShowTimes(),n(0)}).catch(function(t){o(t)}):t.isValid&&(a=(0-t.y+i.height/2)/i.height,a=wx.getSystemInfoSync().windowHeight*a,e._Wxsinglegridad2=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomSingleWx2),left:1,top:a-30,fixed:!1}),e._Wxsinglegridad2.onError(function(){e._Wxsinglegridad2=null,o()}),e._Wxsinglegridad2.onLoad(function(){}),e._Wxsinglegridad2.show().then(function(){g.default.reqAddWxADShowTimes(),n(0)}).catch(function(t){o(t)}),e._Wxsinglegridad2.onClose(function(){e._Wxsinglegridad2=null}))})}},M.prototype.showwxSinglegridad2=function(t){return this.creteWXSingleGridad2(t)},M.prototype.hidewxSinglegridad2=function(){this._Wxsinglegridad2&&this._Wxsinglegridad2.hide()},M.prototype.creteWXSingleGridad=function(t){var e=this;if(p.default.isTecent){var n=u.default.SystemData,i=(n.screenWidth,n.screenHeight,cc.view.getVisibleSize());return new Promise(function(n,o){var a;wx.createCustomAd||o(),e._Wxsinglegridad?e._Wxsinglegridad.show().then(function(){g.default.reqAddWxADShowTimes(),n(0)}).catch(function(t){o(t)}):t.isValid&&(a=(0-t.y+i.height/2)/i.height,a=wx.getSystemInfoSync().windowHeight*a,e._Wxsinglegridad=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomSingleWx1),left:1,top:a-30,fixed:!1}),e._Wxsinglegridad.onError(function(){e._Wxsinglegridad=null,o()}),e._Wxsinglegridad.onLoad(function(){}),e._Wxsinglegridad.show().then(function(){g.default.reqAddWxADShowTimes(),n(0)}).catch(function(t){o(t)}),e._Wxsinglegridad.onClose(function(){e._Wxsinglegridad=null}))})}},M.prototype.showwxSinglegridad=function(t){return this.creteWXSingleGridad(t)},M.prototype.hidewxSinglegridad=function(){this._Wxsinglegridad&&this._Wxsinglegridad.hide()},M.prototype.creteGrideadBottom=function(){var t=this;if(p.default.isTecent){var e=u.default.SystemData,n=e.screenWidth,i=e.screenHeight,o=cc.view.getVisibleSize();return this.isshow_grideadbottom=!0,new Promise(function(e,a){wx.createCustomAd||a(),t._grideadbottom?t._grideadbottom.show().then(function(){e(0)}).catch(function(t){a(t)}):d.default.I.node.isValid&&(d.default.I.m_Singlead.y,d.default.I.m_Singlead.parent.y,o.height,o.height,wx.getSystemInfoSync().windowHeight,t._grideadbottom=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomBottom),left:n/2-180,top:i-106-f.default.getBannerOffset(),fixed:!1}),t._grideadbottom.onError(function(){t._grideadbottom=null,a()}),t._grideadbottom.onLoad(function(){}),t._grideadbottom.show().then(function(){t.isshow_grideadbottom||t.hidegrideadBottom(),e(0)}).catch(function(t){a(t)}),t._grideadbottom.onClose(function(){t._grideadbottom=null}))})}},M.prototype.showgrideadBottom=function(){var t=u.default.getParamsInt(l.OnlineKeys.grid_ad_all_abtest,0);if(0!=t&&(1!=t||m.default.I.ID%2!=1))return this.creteGrideadBottom()},M.prototype.hidegrideadBottom=function(){this.isshow_grideadbottom=!1,this._grideadbottom&&this._grideadbottom.hide()},M.prototype.creteGrideadleft=function(){var t=this;if(p.default.isTecent){var e=u.default.SystemData,n=(e.screenWidth,e.screenHeight),i=cc.view.getVisibleSize();return new Promise(function(e,o){wx.createCustomAd||o(),t._grideadleft?t._grideadleft.show().then(function(){e(0)}).catch(function(t){o(t)}):d.default.I.node.isValid&&(d.default.I.m_Singlead.y,d.default.I.m_Singlead.parent.y,i.height,i.height,wx.getSystemInfoSync().windowHeight,t._grideadleft=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomLeft),left:1,top:n/2-164,fixed:!1}),t._grideadleft.onError(function(){t._grideadleft=null,o()}),t._grideadleft.onLoad(function(){}),t._grideadleft.show().then(function(){t.isshow_Sidead||t.hidesideAD(),e(0)}).catch(function(t){o(t)}),t._grideadleft.onClose(function(){t._grideadleft=null}))})}},M.prototype.showgrideadLeft=function(){return this.creteGrideadleft()},M.prototype.hidegrideadLeft=function(){this._grideadleft&&this._grideadleft.hide()},M.prototype.creteGrideadRight=function(){var t=this;if(p.default.isTecent){var e=u.default.SystemData,n=e.screenWidth,i=e.screenHeight,o=cc.view.getVisibleSize();return new Promise(function(e,a){wx.createCustomAd||a(),t._grideadright?t._grideadright.show().then(function(){e(0)}).catch(function(t){a(t)}):d.default.I.node.isValid&&(d.default.I.m_Singlead.y,d.default.I.m_Singlead.parent.y,o.height,o.height,wx.getSystemInfoSync().windowHeight,t._grideadright=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomRight),left:n-72,top:i/2-164,fixed:!1}),t._grideadright.onError(function(){t._grideadright=null,a()}),t._grideadright.onLoad(function(){}),t._grideadright.show().then(function(){t.isshow_Sidead||t.hidesideAD(),e(0)}).catch(function(t){a(t)}),t._grideadright.onClose(function(){t._grideadright=null}))})}},M.prototype.showgrideadRight=function(){return this.creteGrideadRight()},M.prototype.hidegrideadRight=function(){this._grideadright&&this._grideadright.hide()},M.prototype.showsideAD=function(){var t=u.default.getParamsInt(l.OnlineKeys.grid_ad_all_abtest,0);0==t||1==t&&m.default.I.ID%2==1||(this.isshow_Sidead=!0,this.showgrideadLeft(),this.showgrideadRight())},M.prototype.hidesideAD=function(){this.isshow_Sidead=!1,this.hidegrideadLeft(),this.hidegrideadRight()},M.prototype.creteGridad2=function(t){var e=this;if(void 0===t&&(t=!0),p.default.isTecent){var n=u.default.SystemData,i=(n.screenWidth,n.screenHeight);return new Promise(function(n,o){wx.createCustomAd||o(),e._gridad2?t&&e._gridad2.show().then(function(){v.default.isshow?_.EventMgr.emit(y.EventEnum.Gride2AdSucc):e.hideallgridad(),n(0)}).catch(function(t){_.EventMgr.emit(y.EventEnum.Gride2AdFail),o(t)}):(e._gridad2=wx.createCustomAd({adUnitId:w.OnlineMgr.getAdByType(w.AdType.CustomMatrix),left:1,top:i/2-250,fixed:!1}),e._gridad2.onLoad(function(){e.gridadnum++}),e._gridad2.onError(function(t){_.EventMgr.emit(y.EventEnum.Gride2AdFail),cc.error(t),e._gridad2=null,o()}),t&&e._gridad2.show().then(function(){v.default.isshow?_.EventMgr.emit(y.EventEnum.Gride2AdSucc):e.hideallgridad(),n(0)}).catch(function(t){_.EventMgr.emit(y.EventEnum.Gride2AdFail),e._gridad2=null,o(t)}))})}},M.prototype.showgridad2=function(){return this.creteGridad2()},M.prototype.loadgridad2=function(){return this.creteGridad2(!1)},M.prototype.hidegridad2=function(){this._gridad2&&this._gridad2.hide()},M.prototype.showallgridad=function(){v.default.isshow&&this.showgridad2()},M.prototype.hideallgridad=function(){this.hidegridad2()},Object.defineProperty(M,"I",{get:function(){return this.__instance||(this.__instance=new s)},enumerable:!0,configurable:!0}),o=s=r([o],M),a.default=o,cc._RF.pop()},{}],WatermelonPopwin:[function(t,e,n){"use strict";cc._RF.push(e,"5e9ea8JpslMC7bsTPxC2+MT","WatermelonPopwin");var i,o=t,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=o("AudioMgr"),h=o("OnlineMgr"),f=o("SDKEnums"),m=o("SDKAnalytics"),g=o("SDKTools"),_=o("BattleMgr"),y=o("Display"),v=o("BaseAnimPopwin"),b=o("CheckTools"),w=o("UserBaseModel"),S=o("UserModel"),M=o("Enum"),C=o("LocalMgr");function P(){var t=null!==u&&u.apply(this,arguments)||this;return t.m_time=3,t}o=(i=cc._decorator).ccclass,i.property,r(P,u=v.default),(d=P).CheckOpen=function(){if(b.default.IsShopWmTip){if(b.default.IsShopWmTipEveryDay){if(1==S.default.I.getDayDataWithKey(M.DayKeys.ShowedMelon,0))return}else if(C.LocalMgr.get(M.LocalDataKey.ShowedWaterMelon))return;var t=0==(t=h.OnlineMgr.getObject(f.OnlineKeys.gameplay_melon_min_lv_abtest,[0,0,6]))[0]||1==t[0]&&w.default.I.ID%2==1?t[1]:t[2];S.default.I.CurLevel>=t&&_.default.I.addPopwinList(d,{},!0)}},P.prototype.onLoad=function(){},P.prototype.addEvent=function(){u.prototype.addEvent.call(this)},P.prototype.removeEvent=function(){u.prototype.removeEvent.call(this)},Object.defineProperty(P.prototype,"BannerOpen",{get:function(){return h.OnlineMgr.getBanner(d.PREFAB_PATH)},enumerable:!0,configurable:!0}),P.prototype.onOpen=function(t){u.prototype.onOpen.call(this,t),b.default.IsShopWmTipEveryDay?S.default.I.reqDayDataWithKey(M.DayKeys.ShowedMelon,1):C.LocalMgr.set(M.LocalDataKey.ShowedWaterMelon,!0),t=g.default.getParamsInt(f.OnlineKeys.tutorial_panel_skip_time,5),this.m_time=t,m.default.event(f.EventKeys.melon_post_show,"")},P.prototype.onGo=function(){return c(this,void 0,void 0,function(){return l(this,function(){return p.AudioMgr.button(),y.default.PersistNode.loadToGamewatermelon(),m.default.event(f.EventKeys.melon_post_tap,""),[2]})})},P.prototype.onBack=function(){p.AudioMgr.button(),this.doClose(d,!1).then(function(){_.default.I.removePopwinList()})},P.prototype.update=function(){},P.PREFAB_PATH="prefab/popwin/popwin_watermelon",o=d=s([o],P),a.default=o,cc._RF.pop()},{}],Water:[function(t,e,n){"use strict";cc._RF.push(e,"c2d311/l4tMqbWSKMm21PXG","Water");var i=n;function o(){}Object.defineProperty(i,"__esModule",{value:!0}),o.wait=function(t){var e=this;return new Promise(function(n){cc.tween(e).to(t/1e3,{}).call(function(){n()}).start()})},o.frame=function(){return new Promise(function(){})},i.default=o,cc._RF.pop()},{}],WinPopwin2:[function(t,e,n){"use strict";cc._RF.push(e,"3ff8fQP/FZENYGixouP7fzI","WinPopwin2");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__;Object.defineProperty(a,"__esModule",{value:!0});var c,l,u=i("ViewMgr"),d=i("SDKTools"),p=i("AudioMgr"),h=i("SDKAnalytics"),f=i("Enum"),m=i("SDKEnums"),g=i("OnlineMgr"),_=i("RankPopwin"),y=i("BasePopwin"),v=i("WXApi"),b=i("ImageLabelNew");function w(){var t=null!==c&&c.apply(this,arguments)||this;return t.txtScore=null,t.num=0,t.isrestart=!1,t.time=10,t}i=(o=cc._decorator).ccclass,o=o.property,r(w,c=y.default),(l=w).prototype.onOpen=function(t){c.prototype.onOpen.call(this,t),this.time=10,this.num=t.data.num,this.isrestart=t.data.isrestart,this.node.getChildByName("win").getComponent(cc.Animation).play("anim_watermelon_win"),this.initUI()},w.prototype.getcross=function(t){return 5+(94<(t=Math.ceil(t/1500*94))?94:t)},w.prototype.onOpend=function(){},w.prototype.onClose=function(){c.prototype.onClose.call(this),v.default.I.hidegrideadBottom()},Object.defineProperty(w.prototype,"BannerOpen",{get:function(){return g.OnlineMgr.getBanner(l.PREFAB_PATH)},enumerable:!0,configurable:!0}),w.prototype.addEvent=function(){c.prototype.addEvent.call(this)},w.prototype.removeEvent=function(){c.prototype.removeEvent.call(this)},w.prototype.initUI=function(){this.txtScore.setValue(this.num)},w.prototype.initRank=function(){},w.prototype.update=function(t){0<this.time&&(this.time-=t),this.time<=0&&this.handleClose(!1)},w.prototype.handleClose=function(t){u.ViewMgr.closePopwin(l,{anim:t}).then(function(){})},w.prototype.onInvite=function(){p.AudioMgr.button(),d.default.share(m.ShareKeys.Friends,{invite_type:f.InviteType.Net},{shareTitle:"\u8fd9\u662f\u6211\u5408\u6210\u7684\u7b2c"+this.num+"\u4e2a\u5927\u897f\u74dc\uff0c\u6562\u6765\u6311\u6218\u6211\u5417\uff1f"}),h.default.event(m.EventKeys.OverShare,m.EventFrom.Over)},w.prototype.onRank=function(){p.AudioMgr.button(),u.ViewMgr.openPopwin(_.default,{data:{type:f.ModuleType.Fail}}),h.default.event(m.EventKeys.OverRank,m.EventFrom.Over)},w.prototype.onBack=function(){p.AudioMgr.button(),this.handleClose(!1)},w.prototype.onAgain=function(){p.AudioMgr.button(),this.handleClose(!1),h.default.event(m.EventKeys.OverAgain,m.EventFrom.Over)},w.PREFAB_PATH="prefab/popwin/popwin_win2",s([o(b.default)],w.prototype,"txtScore",void 0),i=l=s([i],w),a.default=i,cc._RF.pop()},{}],WxAudio:[function(t,e,n){"use strict";cc._RF.push(e,"682c7P3Yu9IXbRakxZyrBVB","WxAudio");var i=t,o=n,a=__EXTENDS__();Object.defineProperty(o,"__esModule",{value:!0});var r,s=i("BaseAudio"),c=i("Const"),l=i("SDKTools");function u(){var t=r.call(this)||this;return t._musicVolume=1,t._soundVolume=1,t._muted=!1,t._musicMuted=!1,t._soundMuted=!1,t.audioPool=[],t.sounds={},t}a(u,r=s.default),u.prototype.getPath=function(t){var e=cc.url.raw("resources/"+r.prototype.getPath.call(this,t)+".mp3");return(t=l.default.CdnUrl)&&(e=""+t+c.default.GameEnName+"/"+e),cc.loader.md5Pipe.transformURL(e)},Object.defineProperty(u.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.musicMuted=t,this.soundMuted=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(t){this._musicVolume=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"musicMuted",{get:function(){return this._musicMuted},set:function(t){this._musicMuted=t,this.music&&(this.music.volume=t?0:this.musicVolume)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(t){this._soundVolume=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"soundMuted",{get:function(){return this._soundMuted},set:function(t){var e,n=this;for(e in this._soundMuted=t,this.sounds){var i=this.sounds[e]||[];i.length&&i.forEach(function(e){return e.volume=t?0:n.soundVolume})}},enumerable:!0,configurable:!0}),u.prototype.playMusic=function(t,e){void 0===e&&(e=!0),this.musicName!==t&&(this.music||(this.music=this.getAudio()),this.music&&(this.musicName=t,this.music.stop(),this.music.src=this.getPath(t),this.music.loop=e,this.music.volume=this.muted?0:this.musicVolume,this.music.play()))},u.prototype.pauseMusic=function(){this.music&&this.music.pause()},u.prototype.stopMusic=function(){this.musicName=null,this.music&&this.music.stop()},u.prototype.resumeMusic=function(){this.music&&this.music.play()},u.prototype.playSound=function(t,e){var n=this;void 0===e&&(e=!1);var i=this.getAudio();i&&(i.src=this.getPath(t),i.loop=e,i.volume=this.muted?0:this.soundVolume,i.play(),this.sounds[t]=this.sounds[t]||[],this.sounds[t].push(i),e||i.onEnded(function(){return n.onEnded(t,i)}))},u.prototype.stopSound=function(t){var e=this,n=this.sounds[t];n&&(n.forEach(function(t){return e.recoverAudio(t)}),this.sounds[t]=[])},u.prototype.onEnded=function(t,e){var n=this.sounds[t].indexOf(e);this.sounds[t].splice(n,1),this.recoverAudio(e)},u.prototype.createAudio=function(){var t=wx.createInnerAudioContext();return t.autoplay=!1,t.obeyMuteSwitch=!1,t},u.prototype.getAudio=function(){return this.audioPool.length?this.audioPool.pop():this.createAudio()},u.prototype.recoverAudio=function(t){t.stop(),t.offEnded(null),this.audioPool.push(t)},a=u,o.default=a,cc._RF.pop()},{}],ballctr2:[function(t,e,n){"use strict";cc._RF.push(e,"8ff61xAiE5F0ILrGxW5Ea9W","ballctr2");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("BattleMgr2"),h=i("Water"),f=i("SDKTools"),m=i("Display"),g=i("UserModel"),_=i("SDKEnums"),y=i("Action"),v=i("AudioMgr"),b=i("AudioEnum"),w=i("OnlineMgr"),S=i("CheckTools");function M(){var t=null!==u&&u.apply(this,arguments)||this;return t.iscombine=!1,t.buffimg=null,t.m_lv=1,t.m_ballobj=null,t.m_fall=!0,t.m_falltime=-1,t.m_isJoker=!1,t.m_buff=-1,t.m_cd=-1,t.isduang=!0,t}i=(o=cc._decorator).ccclass,o=o.property,r(M,u=cc.Component),d=M,Object.defineProperty(M.prototype,"m_num",{get:function(){return[Math.pow(2,this.m_lv).toString()]},enumerable:!0,configurable:!0}),M.prototype.InitBall=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.m_lv=t,this.m_buff=0,this.node.scale=this.getScale(),this.iscombine=!1,this.m_ballobj.getComponent(cc.Sprite).spriteFrame=p.default.I.m_Skins[t-1],this.buffimg.active=!1,this.m_rigidbody&&this.m_rigidbody.isValid&&this.m_rigidbody.destroy(),this.getComponent(cc.RigidBody)?this.m_rigidbody=this.getComponent(cc.RigidBody):this.m_rigidbody=this.addComponent(cc.RigidBody),this.m_rigidbody.enabledContactListener=!0,this.m_rigidbody.bullet=!0,this.m_rigidbody.allowSleep=!0,this.m_rigidbody.gravityScale=3,this.m_rigidbody.type=cc.RigidBodyType.Dynamic,this.m_rigidbody.fixedRotation=!1,this.m_rigidbody.awakeOnLoad=!0,this.m_collider=this.addComponent(cc.PhysicsCircleCollider),this.m_collider.density=10,this.m_collider.radius=this.m_ballobj.width/2,this.m_collider.friction=.5,this.m_collider.restitution=.1,this.m_collider.apply(),this.node.getChildByName("line").active=!1,e?(this.m_isJoker,n||this.playcreateani()):this.combineNewBallAni(),this.hidemotion()},M.prototype.hidemotion=function(){},M.prototype.enableMotion=function(){},M.prototype.NewballAnim=function(){this.m_ballobj.scale=1.5,cc.tween(this.m_ballobj).to(.1,{scale:1.1}).to(.1,{scale:.6}).to(.1,{scale:1}).start()},M.prototype.setColliderEnable=function(t){this.m_collider.enabled=t,(this.m_fall=t)?(this.m_falltime=0,this.m_rigidbody.gravityScale=5):(this.m_rigidbody.linearVelocity=cc.v2(0,0),this.m_rigidbody.gravityScale=0)},M.prototype.setBuff=function(t){this.m_buff=t,1==this.m_buff&&(this.buffimg.active=!0,this.buffimg.opacity=255,S.default.IsFadeOutSkillOpen&&this.setbufftime())},M.prototype.hideBuff=function(){this.m_buff=0,cc.isValid(this.buffimg)&&(this.buffimg.active=!1)},M.prototype.setbufftime=function(){return c(this,void 0,void 0,function(){var t,e=this;return l(this,function(n){switch(n.label){case 0:return t=w.OnlineMgr.getInt(_.OnlineKeys.skill_fadeout_time,15),[4,h.default.wait(1e3*t)];case 1:return n.sent(),this.m_buff=0,cc.tween(this.buffimg).to(.3,{opacity:0}).call(function(){e.buffimg.active=!1}).start(),[2]}})})},M.prototype.onLoad=function(){this.m_ballobj=this.node.getChildByName("ball"),S.default.IsWrongClick2ProtectOpen&&m.default.s_cancelSkilltimes>=w.OnlineMgr.getInt(_.OnlineKeys.click_wrong_protect_min_num,10)?this.buffimg.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this):this.buffimg.on(cc.Node.EventType.TOUCH_START,this.onTouchEnd,this)},M.prototype.onTouchEnd=function(){var t,e=this;0!=this.m_fall&&1==this.m_buff&&(S.default.IsWrongClickProtectOpen&&m.default.s_cancelSkilltimes>=w.OnlineMgr.getInt(_.OnlineKeys.click_wrong_protect_min_num,10)&&this.hideBuff(),(t=cc.instantiate(this.buffimg.children[0])).parent=p.default.I.node,t.position=m.default.getTargetPos(this.buffimg,p.default.I.node),t.active=!1,p.default.I.onSkill(function(){return e.hideBuff()},this,t))},M.prototype.doDisappearAni=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,h.default.wait(100)];case 1:return t.sent(),cc.tween(this.m_ballobj).to(.1,{scale:.5}).to(.2,{scale:1}).start(),[4,h.default.wait(120)];case 2:return t.sent(),cc.tween(this.m_ballobj).to(.2,{opacity:0}).start(),[4,h.default.wait(200)];case 3:return t.sent(),this.node.destroy(),[2]}})})},M.prototype.addForce=function(t,e){this.m_force=cc.v2(t,e),this.m_rigidbody.linearVelocity=cc.v2(t,e)},M.prototype.playcreateani=function(){this.m_ballobj.getComponent(cc.Animation).play("anim_fruit_out")},M.prototype.playdelani=function(){var t=this;y.default.playAnim(this.m_ballobj,"anim_fruit_boom").then(function(){t.node.destroy()})},M.prototype.combineNewBallAni=function(){return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return this.m_ballobj.scale=1.2,11<=this.m_lv&&p.default.I.DoWin(),t=p.default.I.isHadBuffBall1(),9<=this.m_lv&&11!==this.m_lv&&!t&&this.setBuff(1),p.default.I.createBoomEff(this.m_lv,this.node.position,this.getScale()),cc.tween(this.m_ballobj).to(.1,{scale:1.5}).to(.1,{scale:1.1}).to(.1,{scale:.6}).to(.08,{scale:1}).start(),[4,h.default.wait(80)];case 1:return e.sent(),[4,h.default.wait(180)];case 2:return e.sent(),[2]}})})},M.prototype.onBeginContact=function(t,e,n){var i,o;this.iscombine||(i=1===f.default.Platform?.5:3,0<=(o=n.node).name.indexOf("ball")?(this.isduang=!1,0<=this.m_falltime&&this.m_falltime<=i&&g.default.I.Vibrate&&f.default.vibrateShort(),n=o.getComponent(d),this.m_fall&&n.m_fall&&(n.iscombine||(this.m_isJoker&&7<n.m_lv?this.node.destroy():n.m_lv==this.m_lv&&this.m_lv<11&&(Math.random()<=.5?this.combine(n,this):this.combine(this,n))))):0<=o.name.indexOf("wall")&&("wall2"==o.name||"wall3"==o.name?this.isduang&&this.m_force&&this.addForce(-this.m_force.x,this.m_force.y):this.isduang=!1,"wall1"==o.name&&this.m_falltime<=5&&v.AudioMgr.playSound(b.AudioEnum.sound_touch_floor),0<=this.m_falltime&&this.m_falltime<=i&&g.default.I.Vibrate&&f.default.vibrateShort(),this.m_isJoker&&this.node.destroy()))},M.prototype.combine=function(t,e){t.iscombine=!0,e.iscombine=!0,t.m_rigidbody.destroy(),e.m_rigidbody.destroy(),cc.tween(t.node).to(.1,{position:e.node.position}).call(function(){g.default.I.Vibrate&&f.default.vibrateShort(),p.default.I.addScore(t.m_lv),t.node.destroy(),e.InitBall(e.m_lv+1,!1)}).start()},M.prototype.getScale=function(){return 1},M.prototype.dogray=function(){y.default.playAnim(this.m_ballobj,"anim_ball_gray")},M.prototype.start=function(){},M.prototype.update=function(t){this.node.y<=-3300&&this.node.destroy(),this.buffimg&&(this.buffimg.angle=-this.node.angle),0<=this.m_falltime&&(2<this.m_falltime&&this.m_falltime<3&&this.hidemotion(),this.m_falltime<=10&&(this.m_falltime+=t))},M.prototype.getFinalUnit=function(t){t-=4;var e=Math.floor(t/(26-Math.floor(t/26)));return 25<=e?"zz":(t=e+t%(26-e),this.getStr(e)+this.getStr(t))},M.prototype.getStr=function(t){switch(t){case 0:return"a";case 1:return"b";case 2:return"c";case 3:return"d";case 4:return"e";case 5:return"f";case 6:return"g";case 7:return"h";case 8:return"i";case 9:return"j";case 10:return"k";case 11:return"l";case 12:return"m";case 13:return"n";case 14:return"o";case 15:return"p";case 16:return"q";case 17:return"r";case 18:return"s";case 19:return"t";case 20:return"u";case 21:return"v";case 22:return"w";case 23:return"x";case 24:return"y";case 25:return"z"}return"a"},s([o(cc.Node)],M.prototype,"buffimg",void 0),i=d=s([i],M),a.default=i,cc._RF.pop()},{}],ballctr:[function(t,e,n){"use strict";cc._RF.push(e,"2427bBSPlZEf7ZpNfCSRztd","ballctr");var i=t,o=e,a=n,r=__EXTENDS__(),s=__DECORATE__,c=__AWAITER__,l=__GENERATOR__;Object.defineProperty(a,"__esModule",{value:!0});var u,d,p=i("BattleMgr"),h=i("Water"),f=i("DataMgr"),m=i("SDKTools"),g=i("Display"),_=i("Enum"),y=i("ImageLabel"),v=i("UserModel"),b=i("SDKEnums"),w=i("UserBaseModel"),S=i("MissionModel"),M=i("Action"),C=i("BallBuff"),P=i("CheckTools"),A=i("OnlineMgr");function T(){var t=null!==u&&u.apply(this,arguments)||this;return t.iscombine=!1,t.m_buffimg=null,t.m_buffimg2=null,t.m_buffimg3=null,t.m_buffskillimg=null,t.m_bufficon=null,t.m_lv=1,t.m_labnum=null,t.m_labnum1=null,t.m_ballobj=null,t.m_fall=!0,t.m_falltime=-1,t.m_isJoker=!1,t.m_buff=-1,t.m_cd=-1,t.isRedPacket=!1,t.m_light=null,t.m_lighteff=null,t.isduang=!0,t}i=(o=cc._decorator).ccclass,o=o.property,r(T,u=cc.Component),d=T,Object.defineProperty(T.prototype,"m_num",{get:function(){if(0==p.default.I.m_Type)return[Math.pow(2,this.m_lv).toString()];var t=p.default.I.getSkinIndexBylv(this.m_lv)+1,e=Math.floor((this.m_lv-13)/10);return 0<=e?[Math.pow(2,t).toString(),e.toString()]:[Math.pow(2,t).toString()]},enumerable:!0,configurable:!0}),T.prototype.InitBall=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.node.getChildByName("skill_focus1").active=!1,this.isRedPacket=!1,this.m_lv=t,this.node.scale=this.getScale(),this.m_labnum.setText(this.m_num),this.m_labnum.node.scale=this.getFinalNumScale(),this.m_labnum1.setText(this.m_num),this.m_labnum1.node.scale=this.getFinalNumScale(),this.m_labnum1.node.active=!1,this.iscombine=!1,this.m_buffimg.active=!1,this.m_buffimg2.active=!1,this.m_buffimg3.active=!1,this.m_light.active=!1,this.m_lighteff.active=!1,this.m_buffskillimg.active=!1,this.m_rigidbody&&this.m_rigidbody.isValid&&this.m_rigidbody.destroy(),this.getComponent(cc.RigidBody)?this.m_rigidbody=this.getComponent(cc.RigidBody):this.m_rigidbody=this.addComponent(cc.RigidBody),this.m_rigidbody.enabledContactListener=!0,this.m_rigidbody.bullet=!0,this.m_rigidbody.allowSleep=!0,this.m_rigidbody.gravityScale=5,this.m_rigidbody.type=cc.RigidBodyType.Dynamic,this.m_rigidbody.fixedRotation=!0,this.m_rigidbody.awakeOnLoad=!0,this.m_collider=this.addComponent(cc.PhysicsCircleCollider),this.m_collider.density=10,this.m_collider.radius=35,this.m_collider.friction=.06,this.m_collider.restitution=.3,this.m_collider.apply();var i=p.default.I.getSkinIndexBylv(t);this.m_ballobj.getComponent(cc.Sprite).spriteFrame=p.default.I.m_Skins[i],this.node.getChildByName("ball").active=!this.m_isJoker,this.node.getChildByName("joker").active=this.m_isJoker,this.node.getChildByName("line").active=!1,this.node.getChildByName("line").getChildByName("line").color=p.default.I.getcolorBylv(this.m_lv),this.node.getChildByName("line").scale=1/this.getScale(),this.m_buff<=0&&(this.node.getChildByName("streak").getComponent(cc.MotionStreak).color=p.default.I.getcolorBylv(t)),this.m_isJoker&&this.node.getChildByName("joker").getComponent(cc.Animation).play(),e?(this.m_isJoker||(this.m_buff<0&&(e=p.default.I.getBuff(),this.m_buff=e),1==this.m_buff?(g.default.isCoinBuff?(this.m_buffimg2.active=!0,this.m_buffimg2.getComponent(C.default).playAnim()):(this.m_buffimg.active=!0,this.m_buffimg.getComponent(C.default).playAnim()),this.m_lighteff.active=!0,this.m_ballobj.getComponent(cc.Sprite).spriteFrame=this.m_bufficon):2==this.m_buff?(this.m_light.active=!0,this.m_lighteff.active=!0,this.m_light.getComponent(C.default).playAnim(),this.m_ballobj.getComponent(cc.Sprite).spriteFrame=this.m_bufficon):3==this.m_buff?(this.m_buffimg3.active=!0,this.m_buffimg3.getComponent(C.default).playAnim(),this.m_lighteff.active=!0,this.m_ballobj.getComponent(cc.Sprite).spriteFrame=this.m_bufficon):4==this.m_buff&&(this.m_buffskillimg.opacity=255,this.m_buffskillimg.active=!0,this.m_labnum.node.opacity=0),0<this.m_buff&&(this.node.getChildByName("streak").getComponent(cc.MotionStreak).color=new cc.Color(255,255,255,130))),n||this.NewballAnim()):(1==p.default.I.m_Type&&p.default.I.CheckLevelWin(this),this.combineNewBallAni()),this.hidemotion()},T.prototype.hidemotion=function(){this.node.getChildByName("streak").getComponent(cc.MotionStreak).enabled=!1},T.prototype.enableMotion=function(){this.node.getChildByName("streak").getComponent(cc.MotionStreak).enabled=!0},T.prototype.NewballAnim=function(){this.m_ballobj.scale=1.5,cc.tween(this.m_ballobj).to(.1,{scale:1.1}).to(.1,{scale:.6}).to(.1,{scale:1}).start()},T.prototype.setColliderEnable=function(t){this.m_collider.enabled=t,(this.m_fall=t)?(this.m_falltime=0,this.m_rigidbody.gravityScale=5):(this.m_rigidbody.linearVelocity=cc.v2(0,0),this.m_rigidbody.gravityScale=0)},T.prototype.onLoad=function(){this.m_buffimg.active=!1,this.m_buffimg2.active=!1,this.m_ballobj=this.node.getChildByName("ball"),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),P.default.IsWrongClick2ProtectOpen&&g.default.s_cancelSkilltimes>=A.OnlineMgr.getInt(b.OnlineKeys.click_wrong_protect_min_num,10)?this.m_buffskillimg.on(cc.Node.EventType.TOUCH_END,this.onSkillTouchEnd,this):this.m_buffskillimg.on(cc.Node.EventType.TOUCH_START,this.onSkillTouchEnd,this)},T.prototype.setBuff=function(t){this.m_buff=t,4==this.m_buff&&(this.m_buffskillimg.active=!0,this.m_buffskillimg.opacity=255,this.m_labnum.node.opacity=0,P.default.IsFadeOutSkillOpen&&this.setbufftime())},T.prototype.removeSkillBuff=function(){this.m_buff=0,cc.isValid(this.m_buffskillimg)&&(this.m_buffskillimg.active=!1,this.m_labnum.node.opacity=255)},T.prototype.HideSkillBuff=function(){cc.isValid(this.m_buffskillimg)&&(this.m_buffskillimg.active=!1,this.m_labnum.node.opacity=255)},T.prototype.ShowSkillBuff=function(){cc.isValid(this.m_buffskillimg)&&4==this.m_buff&&(this.m_buffskillimg.active=!0,this.m_labnum.node.opacity=0)},T.prototype.setbufftime=function(){return c(this,void 0,void 0,function(){var t,e=this;return l(this,function(n){switch(n.label){case 0:return t=A.OnlineMgr.getInt(b.OnlineKeys.skill_fadeout_time,15),[4,h.default.wait(1e3*t)];case 1:return n.sent(),this.m_buff=0,cc.tween(this.m_buffskillimg).to(.3,{opacity:0}).call(function(){e.m_buffskillimg.active=!1,e.m_labnum.node.opacity=255}).start(),[2]}})})},T.prototype.onSkillTouchEnd=function(){var t,e=this;0!=this.m_fall&&4==this.m_buff&&(P.default.IsWrongClickProtectOpen&&g.default.s_cancelSkilltimes>=A.OnlineMgr.getInt(b.OnlineKeys.click_wrong_protect_min_num,10)&&this.removeSkillBuff(),(t=cc.instantiate(this.m_buffskillimg.children[0])).parent=p.default.I.node,t.position=g.default.getTargetPos(this.m_buffskillimg,p.default.I.node),t.active=!1,p.default.I.onSkill(function(){return e.removeSkillBuff()},this,t))},T.prototype.onTouchEnd=function(){var t,e,n;0!=this.m_fall&&p.default.I.m_isUsingDelItem&&(p.default.I.usePropWithType(_.PropsType.Hammer)&&(1==this.m_buff?(e=g.default.isCoinBuff?this.m_buffimg2:this.m_buffimg,n=this.m_buffimg2,t=g.default.getTargetPos(e,p.default.I.node),e=cc.instantiate(e),n=cc.instantiate(n),p.default.I.comTopWrap.flyGift(t,e,n)):2==this.m_buff?p.default.I.comBottomWrap.actionPowerFly(this.node):3==this.m_buff&&p.default.I.comTopWrap.acionAddRedPacket(this.node.position),p.default.I.doHammerAni(this,this.m_ballobj)),p.default.I.useHammer())},T.prototype.doDisappearAni=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,h.default.wait(100)];case 1:return t.sent(),cc.tween(this.m_ballobj).to(.1,{scale:.5}).to(.2,{scale:1}).start(),[4,h.default.wait(120)];case 2:return t.sent(),cc.tween(this.m_ballobj).to(.2,{opacity:0}).start(),[4,h.default.wait(200)];case 3:return t.sent(),this.node.destroy(),[2]}})})},T.prototype.addForce=function(t,e){this.m_force=cc.v2(t,e),this.m_rigidbody.linearVelocity=cc.v2(t,e)},T.prototype.combineNewBallAni=function(){return c(this,void 0,void 0,function(){var t,e,n=this;return l(this,function(i){switch(i.label){case 0:return e=A.OnlineMgr.getObject(b.OnlineKeys.skill_ball_scope,[-3,-1]),t=v.default.I.Lv_CurTarBallLv+e[0],e=v.default.I.Lv_CurTarBallLv+e[1],P.default.IsSkillItemOpen&&this.m_lv>=t&&this.m_lv<=e&&!p.default.I.isHadSkillBuffBall()&&this.setBuff(4),e=this.getFinalNumScale(),this.m_ballobj.scale=1.2,p.default.I.createBoomEff(this.m_lv,this.node.position,this.getScale()),cc.tween(this.m_ballobj).to(.1,{scale:1.5}).to(.1,{scale:1.1}).to(.1,{scale:.6}).to(.08,{scale:1}).start(),this.m_labnum&&(this.m_labnum.node.active=!0,this.m_labnum.node.scaleX=+e,this.m_labnum.node.x=0,cc.tween(this.m_labnum.node).to(.1,{scaleX:.2*e,x:-30}).call(function(){n.m_labnum.node&&(n.m_labnum.node.active=!1)}).start()),[4,h.default.wait(80)];case 1:return i.sent(),this.m_labnum1&&(this.m_labnum1.node.active=!0,this.m_labnum1.node.scaleX=-.2*e,this.m_labnum1.node.x=30,cc.tween(this.m_labnum1.node).to(.1,{scaleX:-1*e,x:0}).to(.1,{scaleX:-.2*e,x:-30}).call(function(){n.m_labnum1.node.active=!1}).start()),[4,h.default.wait(180)];case 2:return i.sent(),this.m_labnum&&(this.m_labnum.node.active=!0,this.m_labnum.node.x=30,cc.tween(this.m_labnum.node).to(.1,{scaleX:+e,x:0}).start()),[2]}})})},T.prototype.onBeginContact=function(t,e,n){if(!this.iscombine){var i=1===m.default.Platform?.5:3,o=n.node;if(0<=o.name.indexOf("ball")){this.isduang=!1,0<=this.m_falltime&&this.m_falltime<=i&&v.default.I.Vibrate&&m.default.vibrateShort();var a=o.getComponent(d);if(this.m_fall&&a.m_fall&&!a.iscombine){if(this.m_isJoker){if(0==p.default.I.m_Type&&7<a.m_lv)return g.default.showTip("\u6700\u5927\u53ea\u80fd\u5408\u5230256\u54e6~"),void this.node.destroy();if(1==p.default.I.m_Type){var r=v.default.I.Lv_CurTarBallLv;if(a.m_lv>r-4)return n="",2<=(r=p.default.I.getTarBallNum(r-3)).length&&(n="0"==r[1]?"K":"1"==r[1]?"M":"2"==r[1]?"B":"3"==r[1]?"T":this.getFinalUnit(+r[1])),g.default.showTip("\u5f53\u524d\u6700\u591a\u53ea\u80fd\u5408"+r[0]+n+"\u54e6~"),void this.node.destroy()}}a.m_lv==this.m_lv?Math.random()<=.5?this.combine(a,this):this.combine(this,a):this.m_isJoker&&(p.default.I.useJokerBall()?this.combine(this,a):this.node.destroy())}}else 0<=o.name.indexOf("wall")&&("wall2"==o.name||"wall3"==o.name?this.isduang&&this.m_force&&this.addForce(-this.m_force.x,this.m_force.y):this.isduang=!1,0<=this.m_falltime&&this.m_falltime<=i&&v.default.I.Vibrate&&m.default.vibrateShort(),this.m_isJoker&&this.node.destroy())}},T.prototype.combine=function(t,e){t.iscombine=!0,e.iscombine=!0,t.m_rigidbody.destroy(),e.m_rigidbody.destroy(),f.DataMgr.Missions.addMissionProgress(S.MissionCheckType.CombineBall,1);var n=g.default.isCoinBuff?t.m_buffimg2:t.m_buffimg,i=g.default.isCoinBuff?e.m_buffimg2:e.m_buffimg,o=t.m_buffimg2,a=e.m_buffimg2,r=g.default.getTargetPos(n,p.default.I.node),s=g.default.getTargetPos(i,p.default.I.node),c=cc.instantiate(n),l=cc.instantiate(i),u=cc.instantiate(o),d=cc.instantiate(a);cc.tween(t.node).to(.1,{position:e.node.position}).call(function(){var n;v.default.I.Vibrate&&m.default.vibrateShort(),p.default.I.addScore(t.m_lv),0<t.m_buff||0<e.m_buff?(n=!1,1==t.m_buff?p.default.I.comTopWrap.flyGift(r,c,u):2==t.m_buff?(p.default.I.comBottomWrap.actionPowerFly(e.node),n=!0):3==t.m_buff&&p.default.I.comTopWrap.acionAddRedPacket(t.node.position),1==e.m_buff?p.default.I.comTopWrap.flyGift(s,l,d):2==e.m_buff?p.default.I.comBottomWrap.actionPowerFly(e.node,n?.2:0):3==e.m_buff&&p.default.I.comTopWrap.acionAddRedPacket(e.node.position),t.m_buff=-1,e.m_buff=-1):p.default.I.comTopWrap.checkOnlineGift(),t.node.destroy(),e.InitBall(e.m_lv+1,!1)}).start()},T.prototype.getScale=function(){if(this.m_isJoker)return 1;var t=m.default.getParamsInt(b.OnlineKeys.BallscABtest,2),e=1,n=0;if((2==(a=m.default.getParamsInt(b.OnlineKeys.ballsc_abtest_newbie,2))||1==a&&w.default.I.ID%2==0)&&(n=m.default.getParamsObj(b.OnlineKeys.scale_rotio_newbie,[1.48,3])[1],v.default.I.Lv_CurTarBallLv<=n)&&(e=2==(o=m.default.getParamsInt(b.OnlineKeys.scale_rotio_newbie_abtest,0))||1==o&&w.default.I.ID%2==0?m.default.getParamsInt(b.OnlineKeys.scale_rotio_newbie_b,1):m.default.getParamsObj(b.OnlineKeys.scale_rotio_newbie,[1.48,3])[0]),0==p.default.I.m_Type&&(e=1),a=v.default.I.Lv_CurTarBallLv,0==p.default.I.m_Type||a<=12){var i=1;return 1==p.default.I.m_Type&&(i=2==t||1==t&&w.default.I.ID%2==0?m.default.getParamsInt(b.OnlineKeys.ScaleRotio,1):m.default.getParamsInt(b.OnlineKeys.ScaleRotioA,1)),1==this.m_lv?+i*e:2==this.m_lv?1.1*i*e:3==this.m_lv?1.3*i*e:4==this.m_lv?1.5*i*e:5==this.m_lv?1.8*i*e:6==this.m_lv?2*i*e:7==this.m_lv?2.4*i*e:8==this.m_lv?2.7*i*e:9==this.m_lv?3*i*e:10==this.m_lv?3.3*i*e:11==this.m_lv?3.8*i*e:12==this.m_lv?4.2*i*e:4.5*i*e}var o=(n=v.default.I.Lv_CurTarBallLv)-9,a=n-(p.default.I.getScaleLvByLv(n)-1);return a=Math.min(a,o),o=1,i=1,(2==t||1==t&&w.default.I.ID%2==0)&&(i=m.default.getParamsInt(b.OnlineKeys.ScaleRotio,1)),33<=n&&(o=2==(n=m.default.getParamsInt(b.OnlineKeys.later_ballsc_abtest,0))||1==n&&w.default.I.ID%2==0?m.default.getParamsInt(b.OnlineKeys.later_ballsc_b,1):1.1),this.m_lv==a?+o*i*e:this.m_lv==a+1?1.1*o*i*e:this.m_lv==a+2?1.3*o*i*e:this.m_lv==a+3?1.5*o*i*e:this.m_lv==a+4?1.8*o*i*e:this.m_lv==a+5?2*o*i*e:this.m_lv==a+6?2.4*o*i*e:this.m_lv==a+7?2.7*o*i*e:this.m_lv==a+8?3*o*i*e:this.m_lv==a+9?3.3*o*i*e:this.m_lv==a+10?3.8*o*i*e:this.m_lv==a+11?4.2*o*i*e:+o*i*e},T.prototype.dogray=function(){M.default.playAnim(this.m_ballobj,"anim_ball_gray")},T.prototype.getFinalNumScale=function(){var t=1/this.getScale()*this.getNumScale(),e=70*this.getScale(),n=(6+18*this.getactChildrenCount(this.m_labnum.node))*this.getNumScale();return 1<n/e?t/(n/e)*.9:t},T.prototype.getactChildrenCount=function(t){var e=0;return t.children.forEach(function(t){t.active&&e++}),e},T.prototype.getNumScale=function(){var t=v.default.I.Lv_CurTarBallLv;return 0==p.default.I.m_Type||t<=12?1==this.m_lv?1:2==this.m_lv?1.1:3==this.m_lv?1.3:4==this.m_lv?1.43:5==this.m_lv?1.54:6==this.m_lv?1.64:7==this.m_lv?1.87:8==this.m_lv?2.03:9==this.m_lv?2.26:10==this.m_lv?2.15:11==this.m_lv?2.38:(this.m_lv,2.67):(t=v.default.I.Lv_CurTarBallLv,t-=p.default.I.getScaleLvByLv(t)-1,this.m_lv==t?1:this.m_lv==1+t?1.1:this.m_lv==2+t?1.3:this.m_lv==3+t?1.43:this.m_lv==4+t?1.54:this.m_lv==5+t?1.64:this.m_lv==6+t?1.87:this.m_lv==7+t?2.03:this.m_lv==8+t?2.26:this.m_lv==9+t?2.15:this.m_lv==10+t?2.38:this.m_lv==11+t?2.67:1)},T.prototype.start=function(){},T.prototype.update=function(t){this.node.y<=-3300&&this.node.destroy(),0<=this.m_falltime&&(2<this.m_falltime&&this.m_falltime<3&&this.hidemotion(),this.m_falltime<=3&&(this.m_falltime+=t))},T.prototype.getFinalUnit=function(t){t-=4;var e=Math.floor(t/(26-Math.floor(t/26)));return 25<=e?"zz":(t=e+t%(26-e),this.getStr(e)+this.getStr(t))},T.prototype.getStr=function(t){switch(t){case 0:return"a";case 1:return"b";case 2:return"c";case 3:return"d";case 4:return"e";case 5:return"f";case 6:return"g";case 7:return"h";case 8:return"i";case 9:return"j";case 10:return"k";case 11:return"l";case 12:return"m";case 13:return"n";case 14:return"o";case 15:return"p";case 16:return"q";case 17:return"r";case 18:return"s";case 19:return"t";case 20:return"u";case 21:return"v";case 22:return"w";case 23:return"x";case 24:return"y";case 25:return"z"}return"a"},s([o(cc.Node)],T.prototype,"m_buffimg",void 0),s([o(cc.Node)],T.prototype,"m_buffimg2",void 0),s([o(cc.Node)],T.prototype,"m_buffimg3",void 0),s([o(cc.Node)],T.prototype,"m_buffskillimg",void 0),s([o(cc.SpriteFrame)],T.prototype,"m_bufficon",void 0),s([o(y.default)],T.prototype,"m_labnum",void 0),s([o(y.default)],T.prototype,"m_labnum1",void 0),s([o(cc.Node)],T.prototype,"m_light",void 0),s([o(cc.Node)],T.prototype,"m_lighteff",void 0),i=d=s([i],T),a.default=i,cc._RF.pop()},{}],plugin:[function(t,e){"use strict";cc._RF.push(e,"27c7e1xxbpPh5eUFIuNj52O","plugin"),window.__ASSIGN__=function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},window.__EXTENDS__=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}},window.__AWAITER__=function(t,e,n,i){return new(n=n||Promise)(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(r,s)}c((i=i.apply(t,e||[])).next())})},window.__DECORATE__=function(t,e,n,i){var o,a=arguments.length,r=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;0<=s;s--)(o=t[s])&&(r=(a<3?o(r):3<a?o(e,n,r):o(e,n))||r);return 3<a&&r&&Object.defineProperty(e,n,r),r},window.__GENERATOR__=function(t,e){var n,i,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,(r=o?[2&r[0],o.value]:r)[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},cc._RF.pop()},{}],test:[function(t,e,n){"use strict";cc._RF.push(e,"11a0ctwFnVB3az9KXB5wqmf","test");var i=e,o=n,a=__EXTENDS__(),r=__DECORATE__;Object.defineProperty(o,"__esModule",{value:!0}),i=(c=cc._decorator).ccclass;var s,c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.label=null,t.ball1=null,t.ball2=null,t.text="hello",t}a(l,s=cc.Component),l.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0;var t=cc.director.getPhysicsManager();t.enabledAccumulator=!0,t.FIXED_TIME_STEP=100,t.VELOCITY_ITERATIONS=1,t.POSITION_ITERATIONS=1},l.prototype.onEnable=function(){},l.prototype.start=function(){},l.prototype.update=function(){},l.prototype.lateUpdate=function(){},r([c(cc.Label)],l.prototype,"label",void 0),r([c(cc.Node)],l.prototype,"ball1",void 0),r([c(cc.Node)],l.prototype,"ball2",void 0),r([c],l.prototype,"text",void 0),i=r([i],l),o.default=i,cc._RF.pop()},{}],use_reversed_rotateTo:[function(t,e){"use strict";cc._RF.push(e,"b63b8EwnpVCKK5+9p1gU6m+","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["use_reversed_rotateTo","plugin","ADCell","ADCell2","ADCrossItem","ADData","ADGrid","ADLike","ADLike2","ADLikeGrid","ADLikeScroll","ADMgr","ActBtnAni","Action","ActivePopwin","AldTools","Api","AppDataMgr","ArrayUtils","AudioEnum","AudioMgr","AutoScroll","BallBuff","BaseAnimPopwin","BaseAudio","BaseModel","BasePopwin","BaseRank","BaseScene","BaseView","BattleMgr","BattleMgr2","BlockParams","BottomBar","BottomHome","BottomItems","BottomPower","BottomSkip","BottomWrap","BtnLike","BtnStart","BuildingItem","CCAudio","CPSCouponItem","CPSCouponListItem","CPSCouponListPopwin","CPSCouponPopwin","CPSModel","CashPopwin","ChapterCfg","CheckTools","ChestPopwin","CoinFly","CoinFlyOver","CoinGiftPopwin","CollectPopwin","ColorListener","ComPointTip","CommonMgr","ConfigModel","Const","CoordData","CubeParams","DailyRewardPopwin","DataMgr","DateUtils","Debug","Declare","DelayBone","Display","Enum","EventEnum","EventMgr","ExchangeData","ExchangePopwin","ExtScrollView","FailPopwin","FailPopwin2","FeedbackPopwin","FitTaskItem","FloatingPopwin","Friends","FurnitureItem","GameADLike","GameAddCoin","GameFitTask","GameFitUp","GameFitUpGift","GameGM","GameLoad","GameNewDay","GameNoStar","GameStory","Garbage","GetCashPopwin","GetRewardPopWin","GetSignPopwin","GiftPopwin","GridADPopwin","GuideDatas","GuideDeclare","GuideHand","GuideMgr","HandleData","Helper","HistoryData","HomeScene","ImageLabel","ImageLabelNew","InviteActPopwin","InviteData","InviteItem","InvitePopwin","InviteRewardPopwin","InvitefirendPopwin","ItemAni","ItemTipPopwin","LabelQQOffset","LayerMgr","LevelupPopwin","LoadGame","LoadHome","LoadPlist","LoadScene","LoadWatermelon","LoaderCfg","LoaderMgr","LocalMgr","LocalModel","LogUtils\u200b\u200b","LotteryPopwin","Main","MapConfig","MapView","MapsModel","MenuPopwin","MilestoneModel","MissionItem","MissionModel","MissionPopwin","MoneyCfg","NumberAddScore","OnlineGiftPopwin","OnlineMgr","OpenContext","PersistNode","PlatformAd","PlatformUtils","PlotMgr","PlotModel","PointData","PointMgr","PointModel","PoolMgr","QueuePopMgr","RandomUtils","RankEnum","RankItem","RankPopwin","RecordData","RecordItem","RecordPopwin","RedPacketPopwin","ResLoader","RewardCfg","RocketCtr","RoomItem","RotationForever","RulePopwin","SDKAnalytics","SDKBanner","SDKEnums","SDKShareVideo","SDKTools","SafeActionClick","ScaleAnimation","ServicePopwin","ShareVideo","ShareVideoBtn.ts","Sharetoggle","ShopPopwin","SignPopwin","SkillPopwin","SkinShopPopwin","StarConfig","StarModel","StringUtils","TipsMgr","TopBar","TopCPSEntry","TopCombon","TopDiamond","TopLeftBtns","TopLvBar","TopMelon","TopMenu","TopOnlineGift","TopPropTip","TopRedPacket","TopRightBtns","TopRightGifts","TopTaskTip","TopWrap","TouchBlock","UIRevive","UIRevive2","UITips","UIchooseItem","UserBaseData","UserBaseModel","UserData","UserExtData","UserExtModel","UserModel","Vector3","Vector3Utils","ViewBack","ViewDelayShow","ViewMgr","WXApi","Water","WatermelonPopwin","WinPopwin2","WxAudio","ballctr","ballctr2","test"]);